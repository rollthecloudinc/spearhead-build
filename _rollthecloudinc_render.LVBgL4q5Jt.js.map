{
  "version": 3,
  "sources": ["../../@rollthecloudinc/render/fesm2022/rollthecloudinc-render.mjs"],
  "sourcesContent": ["import * as i6 from '@angular/common';\nimport { isPlatformServer, isPlatformBrowser, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Directive, DOCUMENT, PLATFORM_ID, forwardRef, ViewChild, HostBinding, Input, Inject, Component, EventEmitter, ViewChildren, Output, Injectable, NgModule } from '@angular/core';\nimport * as i2 from '@angular/forms';\nimport { Validators, NG_VALUE_ACCESSOR, NG_ASYNC_VALIDATORS, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport * as i11 from '@rollthecloudinc/utils';\nimport { UtilsModule } from '@rollthecloudinc/utils';\nimport * as i10 from '@rollthecloudinc/layout';\nimport { GridLayoutComponent, LayoutModule } from '@rollthecloudinc/layout';\nimport * as i17 from '@rollthecloudinc/media';\nimport { MEDIA_SETTINGS } from '@rollthecloudinc/media';\nimport * as i9 from '@rollthecloudinc/context';\nimport { InlineContext } from '@rollthecloudinc/context';\nimport * as i1 from '@rollthecloudinc/panels';\nimport { PanelPage, PanelPageForm, PanelsModule } from '@rollthecloudinc/panels';\nimport { Subject, BehaviorSubject, combineLatest, forkJoin, of, iif, Observable, timer } from 'rxjs';\nimport { map, tap, delay, switchMap, defaultIfEmpty, filter, startWith, debounceTime, take, distinctUntilChanged, skip, bufferTime, takeUntil, concatMap, catchError, finalize } from 'rxjs/operators';\nimport * as uuid from 'uuid';\nimport * as i16 from '@rollthecloudinc/sheath';\nimport { isSelectorValid, ClassClassification } from '@rollthecloudinc/sheath';\nimport { camelize } from 'inflected';\nimport merge from 'deepmerge-json';\nimport * as i3 from '@rollthecloudinc/content';\nimport * as i4 from '@rollthecloudinc/dparam';\nimport * as i5 from '@ngrx/data';\nimport * as i8 from '@ngrx/store';\nimport * as i12 from '@angular/common/http';\nimport * as i13 from '@rollthecloudinc/attributes';\nimport * as i14 from '@rollthecloudinc/crud';\nimport * as i15 from '@rollthecloudinc/refinery';\nimport * as i18 from '@rollthecloudinc/auth';\nimport * as i19 from '@rollthecloudinc/detour';\nimport { InteractionHandlerPlugin } from '@rollthecloudinc/detour';\nimport * as i1$1 from '@angular/material/dialog';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i2$1 from '@angular/material/button';\nimport { MaterialModule } from '@rollthecloudinc/material';\nfunction RenderPaneComponent_ng_template_2_Template(rf, ctx) {}\nfunction RenderPaneComponent_classifieds_ui_panel_page_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-panel-page\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"panelPage\", ctx_r0.panelPage)(\"nested\", true)(\"contexts\", ctx_r0.contexts)(\"css\", ctx_r0.filteredCss)(\"listeners\", ctx_r0.filteredListeners)(\"ancestory\", ctx_r0.ancestoryWithSelf);\n  }\n}\nfunction RenderPaneComponent_classifieds_ui_panel_page_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-panel-page\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"id\", ctx_r0.linkedPageId)(\"nested\", true)(\"contexts\", ctx_r0.contexts)(\"ancestory\", ctx_r0.ancestoryWithSelf);\n  }\n}\nfunction RenderPaneComponent_classifieds_ui_panel_page_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-panel-page\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"panelPage\", ctx_r0.embedPanel)(\"nested\", true)(\"contexts\", ctx_r0.contexts)(\"css\", ctx_r0.filteredCss)(\"listeners\", ctx_r0.filteredListeners)(\"ancestory\", ctx_r0.ancestoryWithSelf);\n  }\n}\nconst _c0 = [\"panes\"];\nfunction RenderPanelComponent_ng_template_3_Template(rf, ctx) {}\nfunction RenderPanelComponent_ng_container_4_ng_container_2_classifieds_ui_render_pane_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-render-pane\", 8);\n  }\n  if (rf & 2) {\n    const pane_r1 = ctx.$implicit;\n    const j_r2 = ctx.index;\n    const ctx_r2 = i0.\u0275\u0275nextContext(3);\n    const panes_r4 = i0.\u0275\u0275reference(1);\n    i0.\u0275\u0275property(\"formControlName\", j_r2)(\"pluginName\", pane_r1.contentPlugin)(\"settings\", pane_r1.settings)(\"name\", pane_r1.name)(\"label\", pane_r1.label)(\"originPane\", ctx_r2.panel.panes[ctx_r2.originMappings[j_r2]])(\"contexts\", pane_r1.contexts)(\"displayType\", ctx_r2.displayType)(\"resolvedContext\", pane_r1.resolvedContext)(\"indexPosition\", j_r2)(\"css\", ctx_r2.filteredCss)(\"listeners\", ctx_r2.filteredListeners)(\"ancestory\", ctx_r2.ancestoryWithSelf$.value)(\"panes\", panes_r4)(\"originPanes\", ctx_r2.originPanes);\n  }\n}\nfunction RenderPanelComponent_ng_container_4_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0)(1)(2, 6);\n    i0.\u0275\u0275template(3, RenderPanelComponent_ng_container_4_ng_container_2_classifieds_ui_render_pane_3_Template, 1, 15, \"classifieds-ui-render-pane\", 7);\n    i0.\u0275\u0275elementContainerEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275advance(3);\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r2.resolvedPanes);\n  }\n}\nfunction RenderPanelComponent_ng_container_4_ng_container_3_classifieds_ui_render_pane_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-render-pane\", 10);\n  }\n  if (rf & 2) {\n    const pane_r5 = ctx.$implicit;\n    const j_r6 = ctx.index;\n    const ctx_r2 = i0.\u0275\u0275nextContext(3);\n    const panes_r4 = i0.\u0275\u0275reference(1);\n    i0.\u0275\u0275property(\"pluginName\", pane_r5.contentPlugin)(\"settings\", pane_r5.settings)(\"name\", pane_r5.name)(\"label\", pane_r5.label)(\"originPane\", ctx_r2.panel.panes[ctx_r2.originMappings[j_r6]])(\"contexts\", pane_r5.contexts)(\"linkedPageId\", pane_r5.linkedPageId)(\"displayType\", ctx_r2.displayType)(\"resolvedContext\", pane_r5.resolvedContext)(\"indexPosition\", j_r6)(\"css\", ctx_r2.filteredCss)(\"listeners\", ctx_r2.filteredListeners)(\"ancestory\", ctx_r2.ancestoryWithSelf$.value)(\"panes\", panes_r4)(\"originPanes\", ctx_r2.originPanes);\n  }\n}\nfunction RenderPanelComponent_ng_container_4_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0);\n    i0.\u0275\u0275template(1, RenderPanelComponent_ng_container_4_ng_container_3_classifieds_ui_render_pane_1_Template, 1, 15, \"classifieds-ui-render-pane\", 9);\n    i0.\u0275\u0275elementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r2.resolvedPanes);\n  }\n}\nfunction RenderPanelComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0)(1, 4);\n    i0.\u0275\u0275template(2, RenderPanelComponent_ng_container_4_ng_container_2_Template, 4, 1, \"ng-container\", 5)(3, RenderPanelComponent_ng_container_4_ng_container_3_Template, 2, 1, \"ng-container\", 5);\n    i0.\u0275\u0275elementContainerEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngSwitch\", ctx_r2.displayType);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngSwitchCase\", \"form\");\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngSwitchCase\", \"page\");\n  }\n}\nconst _c1 = [\"renderPanelTpl\"];\nfunction PanelPageComponent_ng_template_2_Template(rf, ctx) {}\nfunction PanelPageComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0, 1)(1, 3);\n    i0.\u0275\u0275element(2, \"classifieds-ui-render-panel\", 4);\n    i0.\u0275\u0275elementContainerEnd()();\n  }\n  if (rf & 2) {\n    const i_r1 = ctx.i;\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"formGroup\", ctx_r1.pageForm);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"formControlName\", i_r1)(\"panel\", ctx_r1.panelPageCached.panels[i_r1])(\"nested\", ctx_r1.nested$.value)(\"contexts\", ctx_r1.contexts$.value)(\"resolvedContext\", ctx_r1.resolvedContext)(\"contextsChanged\", ctx_r1.contextsChanged)(\"displayType\", ctx_r1.panelPageCached.displayType)(\"indexPosition\", i_r1)(\"css\", ctx_r1.filteredCss)(\"listeners\", ctx_r1.filteredListeners)(\"ancestory\", ctx_r1.ancestory$.value);\n  }\n}\nlet PaneContentHostDirective = /*#__PURE__*/(() => {\n  class PaneContentHostDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n    static {\n      this.\u0275fac = function PaneContentHostDirective_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PaneContentHostDirective)(i0.\u0275\u0275directiveInject(i0.ViewContainerRef));\n      };\n    }\n    static {\n      this.\u0275dir = /* @__PURE__ */i0.\u0275\u0275defineDirective({\n        type: PaneContentHostDirective,\n        selectors: [[\"\", \"classifiedsUiPaneContentHost\", \"\"]],\n        standalone: false\n      });\n    }\n  }\n  return PaneContentHostDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet LayoutRendererHostDirective = /*#__PURE__*/(() => {\n  class LayoutRendererHostDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n    static {\n      this.\u0275fac = function LayoutRendererHostDirective_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LayoutRendererHostDirective)(i0.\u0275\u0275directiveInject(i0.ViewContainerRef));\n      };\n    }\n    static {\n      this.\u0275dir = /* @__PURE__ */i0.\u0275\u0275defineDirective({\n        type: LayoutRendererHostDirective,\n        selectors: [[\"\", \"classifiedsUiLayoutRendererHost\", \"\"]],\n        standalone: false\n      });\n    }\n  }\n  return LayoutRendererHostDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Putting render pane inside the same file is a documented work around for the\n * below angular partial compilation issue.\n *\n * https://angular.io/errors/NG3003\n */\nlet RenderPaneComponent = /*#__PURE__*/(() => {\n  class RenderPaneComponent {\n    set resolvedContext(resolvedContext) {\n      this.resolvedContext$.next(resolvedContext);\n    }\n    set css(css) {\n      this.css$.next(css);\n    }\n    set listeners(listeners) {\n      this.listeners$.next(listeners);\n    }\n    get indexPositionClass() {\n      return `pane-${this.indexPosition}`;\n    }\n    get dynamicPanel() {\n      return new PanelPage(this.resolvedContext._root);\n    }\n    constructor(document, platformId, el, renderer2, componentFactoryResolver, panelHandler, fb, cpm, cssHelper, paneStateService, paramEvaluatorService, renderer, es) {\n      this.document = document;\n      this.platformId = platformId;\n      this.el = el;\n      this.renderer2 = renderer2;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.panelHandler = panelHandler;\n      this.fb = fb;\n      this.cpm = cpm;\n      this.cssHelper = cssHelper;\n      this.paneStateService = paneStateService;\n      this.paramEvaluatorService = paramEvaluatorService;\n      this.renderer = renderer;\n      this.settings = [];\n      this.ancestory = [];\n      this.panes = [];\n      this.originPanes = [];\n      this.afterContentInit$ = new Subject();\n      this.resolvedContext$ = new BehaviorSubject({});\n      this.schedulePluginChange = new Subject();\n      this.ancestoryWithSelf = [];\n      this.filteredListeners = [];\n      this.css$ = new BehaviorSubject({\n        css: this.cssHelper.makeJsonNode(),\n        classes: {}\n      });\n      this.cssSub = combineLatest([this.css$, this.afterContentInit$, this.schedulePluginChange]).pipe(map(([s]) => s), map(s => ({\n        css: this.cssHelper.reduceCss(s.css, `.pane-${this.indexPosition}`),\n        classes: this.cssHelper.reduceSelector(s.classes, `.pane-${this.indexPosition}`)\n      })), map(({\n        css,\n        classes\n      }) => [this.cssHelper.reduceCss(css, '.panel-page', false), this.cssHelper.reduceCss(css, '.panel-page'), this.cssHelper.reduceSelector(classes, '.panel-page', false), this.cssHelper.reduceSelector(classes, '.panel-page')]), tap(([_, nestedCss, __, nestedClasses]) => this.filteredCss = {\n        css: nestedCss,\n        classes: nestedClasses\n      }), map(([css, _, classes, __]) => ({\n        css,\n        classes\n      })), map(({\n        css,\n        classes\n      }) => {\n        const rebuiltCss = Object.keys(css.children).reduce((p, c) => ({\n          ...p,\n          ...(c.indexOf('>') === 0 ? {\n            [this.ancestoryWithSelf.map((v, k) => (k + 1) % 2 === 0 ? `.pane-${v}` : `.panel-${v}`).join(' ') + ' ' + c]: classes[c]\n          } : {\n            [c]: classes[c]\n          })\n        }), {});\n        const rebuiltClasses = Object.keys(classes).reduce((p, c) => ({\n          ...p,\n          ...(c.indexOf('>') === 0 ? {\n            [this.ancestoryWithSelf.map((v, k) => (k + 1) % 2 === 0 ? `.pane-${v}` : `.panel-${v}`).join(' ') + ' ' + c]: classes[c]\n          } : {\n            [c]: classes[c]\n          })\n        }), {});\n        return {\n          css: {\n            children: rebuiltCss\n          },\n          classes: rebuiltClasses\n        };\n      }), delay(500)).subscribe(({\n        css,\n        classes\n      }) => {\n        console.log('reduced classes', classes);\n        const keys = Object.keys(css.children).filter(k => k === '' || isSelectorValid({\n          selector: k,\n          document: this.document\n        }));\n        const classKeys = Object.keys(classes).filter(k => k === '' || isSelectorValid({\n          selector: k,\n          document: this.document\n        }));\n        classKeys.forEach((k, keyIndex) => {\n          const matchedNodes = k === '' ? [this.el.nativeElement] : k.indexOf('>') !== -1 ? this.document.querySelectorAll(k) : this.el.nativeElement.querySelectorAll(k);\n          const len = matchedNodes.length;\n          for (let i = 0; i < len; i++) {\n            const c = classes[classKeys[keyIndex]];\n            const cKeys = Object.keys(c);\n            const cLen = cKeys.length;\n            for (let j = 0; j < cLen; j++) {\n              if (matchedNodes[i]) {\n                if (c[cKeys[j]] === ClassClassification.REMOVE) {\n                  console.log(`remove class ${cKeys[j]}`);\n                  this.renderer2.removeClass(matchedNodes[i], cKeys[j]);\n                } else {\n                  console.log(`add class ${cKeys[j]}`);\n                  this.renderer2.addClass(matchedNodes[i], cKeys[j]);\n                }\n              }\n            }\n          }\n        });\n        keys.forEach(k => {\n          console.log(`search: ${k}`);\n          const matchedNodes = k === '' ? [this.el.nativeElement] : k.indexOf('>') !== -1 ? this.document.querySelectorAll(k) : this.el.nativeElement.querySelectorAll(k);\n          const len = matchedNodes.length;\n          const rules = Object.keys(css.children[k].attributes);\n          for (let i = 0; i < len; i++) {\n            if (matchedNodes[i]) {\n              rules.forEach(p => {\n                console.log(`${k} { ${p}: ${css.children[k].attributes[p]}; }`);\n                const prop = camelize(p.replace('-', '_'), false); // @todo: Not working for custom sheet \n                this.renderer2.setStyle(matchedNodes[i], /*p*/prop, css.children[k].attributes[p]);\n              });\n            }\n          }\n        });\n      });\n      this.listeners$ = new BehaviorSubject([]);\n      this.listenersSub = combineLatest([this.listeners$, this.schedulePluginChange]).pipe(map(([l]) => l), tap(listeners => {\n        this.filteredListeners = listeners;\n        console.log('pane listeners', listeners);\n      })).subscribe();\n      this.wireListenersSub = combineLatest([this.listeners$, this.afterContentInit$]).pipe(delay(1), switchMap(() => forkJoin(this.filteredListeners.map(l => of({}).pipe(map(() => ({\n        paramNames: l.event.settings.paramsString ? l.event.settings.paramsString.split('&').filter(v => v.indexOf('=:') !== -1).map(v => v.split('=', 2)[1].substr(1)) : []\n      })), switchMap(({\n        paramNames\n      }) => this.paramEvaluatorService.paramValues(l.event.settings.params.reduce((p, c, i) => new Map([...p, [paramNames[i], c]]), new Map())).pipe(map(params => Array.from(params).reduce((p, [k, v]) => ({\n        ...p,\n        [k]: v\n      }), {})))), defaultIfEmpty([]))))), tap(listenerParams => {\n        console.log('listener info', this.filteredListeners, listenerParams);\n        const listenerLen = this.filteredListeners.length;\n        for (let i = 0; i < listenerLen; i++) {\n          // Assumption is made herre that would be responsibility of plugin instead ie. target is required for DOM event.\n          // For now though just to get things spinning again hard code expectation.\n          const targets = this.el.nativeElement.querySelectorAll(listenerParams[i].target);\n          console.log('listener target', targets);\n          targets.forEach(t => this.renderer.listen(t, listenerParams[i].type, e => {\n            console.log('listener fired');\n            if (this.filteredListeners[i].handler.settings.params) {\n              const paramNames = this.filteredListeners[i].handler.settings.paramsString ? this.filteredListeners[i].handler.settings.paramsString.split('&').filter(v => v.indexOf('=:') !== -1).map(v => v.split('=', 2)[1].substr(1)) : [];\n              this.paramEvaluatorService.paramValues(this.filteredListeners[i].handler.settings.params.reduce((p, c, i) => new Map([...p, [paramNames[i], c]]), new Map())).pipe(map(params => Array.from(params).reduce((p, [k, v]) => ({\n                ...p,\n                [k]: v\n              }), {}))).subscribe(handlerParams => {\n                console.log('handler original event and params', e, handlerParams);\n              });\n            } else {\n              console.log('handler original event and params', e);\n            }\n          }));\n        }\n      })).subscribe();\n      this.paneForm = this.fb.group({\n        contentPlugin: this.fb.control('', Validators.required),\n        name: this.fb.control(''),\n        label: this.fb.control(''),\n        settings: this.fb.control('')\n      });\n      this.paneFormSub = this.paneForm.valueChanges.subscribe(v => {\n        console.log(`pane form value plugin: ${this.pluginName}`);\n        console.log(v);\n      });\n      this.scheduleStateChange$ = new Subject();\n      this.scheduleStateChangeSub = this.scheduleStateChange$.pipe(switchMap(({\n        state\n      }) => this.paneStateService.mergeState({\n        state,\n        ancestory: [...this.ancestoryWithSelf],\n        settings: this.settings,\n        plugin: this.contentPlugin\n      }))).subscribe(({\n        pageState\n      }) => {\n        this.panelPageStateService.upsert(pageState);\n      });\n      this.onTouched = () => {};\n      // private contentPlugins: Array<ContentPlugin> = [];\n      this.pluginChangeSub = this.schedulePluginChange.pipe(filter(() => this.pluginName && this.pluginName !== null && this.pluginName !== ''), switchMap(() => this.cpm.getPlugin(this.pluginName))).subscribe(p => {\n        this.contentPlugin = p;\n        this.paneForm.get('contentPlugin').setValue(p.name);\n        this.paneForm.get('name').setValue(this.name);\n        this.paneForm.get('label').setValue(this.label);\n        if (this.pluginName === 'panel') {\n          //console.log('resolve nested panel page');\n          this.resolveNestedPanelPage();\n        } else {\n          this.renderPaneContent();\n        }\n      });\n      this.embedPanelSub = this.resolvedContext$.pipe(map(rc => {\n        if (rc && rc._root && !this.linkedPageId && this.settings.length === 0) {\n          this.embedPanel = new PanelPage(rc._root);\n        }\n      })).subscribe();\n      this.panelPageStateService = es.getEntityCollectionService('PanelPageState');\n      // this.contentPlugins = contentPlugins;\n    }\n    ngOnInit() {\n      this.ancestoryWithSelf = [...(this.ancestory ? this.ancestory : []), ...(this.indexPosition !== undefined && this.indexPosition !== null ? [this.indexPosition] : [])];\n      this.schedulePluginChange.next(undefined);\n      /*this.contentPlugin = this.contentPlugins.find(p => p.name === this.pluginName);\n      this.paneForm.get('contentPlugin').setValue(this.contentPlugin.name);\n      this.paneForm.get('name').setValue(this.name);\n      this.paneForm.get('label').setValue(this.label);\n      if(this.pluginName === 'panel') {\n        //console.log('resolve nested panel page');\n        this.resolveNestedPanelPage();\n      } else  {\n        this.renderPaneContent();\n      }*/\n    }\n    ngOnChanges(changes) {\n      if (changes.ancestory || changes.indexPosition) {\n        const ancestoryWithSelf = [...(changes.ancestory.currentValue ? changes.ancestory.currentValue : this.ancestory ? this.ancestory : []), ...(changes.indexPosition.currentValue !== undefined && changes.indexPosition.currentValue !== null ? [changes.indexPosition.currentValue] : this.indexPosition ? [this.indexPosition] : [])];\n        if (ancestoryWithSelf.length !== this.ancestoryWithSelf.length || this.ancestoryWithSelf.filter((n, index) => ancestoryWithSelf[index] !== n).length !== 0) {\n          this.ancestoryWithSelf = ancestoryWithSelf;\n        }\n      }\n      this.schedulePluginChange.next(undefined);\n      /*this.contentPlugin = this.contentPlugins.find(p => p.name === this.pluginName);\n      this.paneForm.get('contentPlugin').setValue(this.contentPlugin.name);\n      this.paneForm.get('name').setValue(this.name);\n      this.paneForm.get('label').setValue(this.label);\n      if(this.pluginName === 'panel') {\n        //console.log('resolve nested panel page');\n        this.resolveNestedPanelPage();\n      } else {\n        this.renderPaneContent();\n      }*/\n    }\n    ngAfterContentInit() {\n      this.afterContentInit$.next(undefined);\n    }\n    writeValue(val) {\n      if (val) {\n        this.paneForm.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.paneForm.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.paneForm.disable();\n      } else {\n        this.paneForm.enable();\n      }\n    }\n    validate(c) {\n      /*return this.paneForm.statusChanges.pipe(\n        startWith(this.paneForm.status),  // start with the current form status\n        filter((status) => status === 'VALID'),\n        map(() => null),\n        timeout(1000),\n        catchError(() => of({ invalidForm: { invalidForm: {valid: false, message: \"pane is invalid\"}}})),\n        first()\n      );*/\n      return this.paneForm.statusChanges.pipe(startWith(this.paneForm.status),\n      // start with the current form status\n      filter(status => status !== 'PENDING'), debounceTime(1), take(1),\n      // We only want one emit after status changes from PENDING\n      map(status => {\n        return this.paneForm.valid ? null : {\n          invalidForm: {\n            invalidForm: {\n              valid: false,\n              message: \"pane is invalid\"\n            }\n          }\n        }; // I actually loop through the form and collect the errors, but for validity just return this works fine\n      }));\n    }\n    resolveNestedPanelPage() {\n      this.panelHandler.toObject(this.settings).subscribe(p => {\n        this.panelPage = new PanelPage({\n          ...p,\n          contexts: this.contexts\n        });\n      });\n    }\n    renderPaneContent() {\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent);\n      const viewContainerRef = this.contentPaneHost.viewContainerRef;\n      viewContainerRef.clear();\n      this.componentRef = viewContainerRef.createComponent(componentFactory);\n      this.componentRef.instance.settings = this.settings;\n      this.componentRef.instance.name = this.name;\n      this.componentRef.instance.label = this.label;\n      this.componentRef.instance.panes = this.panes;\n      this.componentRef.instance.originPanes = this.originPanes;\n      this.componentRef.instance.contexts = this.contexts.map(c => new InlineContext(c));\n      this.componentRef.instance.displayType = this.displayType;\n      this.componentRef.instance.resolvedContext = this.resolvedContext$.value;\n      this.componentRef.instance.ancestory = this.ancestoryWithSelf;\n      if (this.componentRef.instance.state && this.contentPlugin.handler) {\n        this.contentPlugin.handler.stateDefinition(this.settings).pipe(take(1)).subscribe(s => {\n          this.componentRef.instance.state = s ? s : {};\n        });\n      }\n      if (this.componentRef.instance.stateChange) {\n        this.componentRef.instance.stateChange.subscribe(state => {\n          this.scheduleStateChange$.next({\n            state\n          });\n        });\n      }\n    }\n    static {\n      this.\u0275fac = function RenderPaneComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RenderPaneComponent)(i0.\u0275\u0275directiveInject(DOCUMENT), i0.\u0275\u0275directiveInject(PLATFORM_ID), i0.\u0275\u0275directiveInject(i0.ElementRef), i0.\u0275\u0275directiveInject(i0.Renderer2), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i1.PanelContentHandler), i0.\u0275\u0275directiveInject(i2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i3.ContentPluginManager), i0.\u0275\u0275directiveInject(i1.CssHelperService), i0.\u0275\u0275directiveInject(i1.PaneStateService), i0.\u0275\u0275directiveInject(i4.ParamEvaluatorService), i0.\u0275\u0275directiveInject(i0.Renderer2), i0.\u0275\u0275directiveInject(i5.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RenderPaneComponent,\n        selectors: [[\"classifieds-ui-render-pane\"]],\n        viewQuery: function RenderPaneComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(PaneContentHostDirective, 7);\n            i0.\u0275\u0275viewQuery(PanelPageComponent, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.contentPaneHost = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.panelPageComponent = _t.first);\n          }\n        },\n        hostVars: 5,\n        hostBindings: function RenderPaneComponent_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.\u0275\u0275attribute(\"data-index\", ctx.indexPosition);\n            i0.\u0275\u0275classMap(ctx.indexPositionClass);\n            i0.\u0275\u0275classProp(\"pane\", true);\n          }\n        },\n        inputs: {\n          pluginName: \"pluginName\",\n          settings: \"settings\",\n          linkedPageId: \"linkedPageId\",\n          contexts: \"contexts\",\n          originPane: \"originPane\",\n          displayType: \"displayType\",\n          name: \"name\",\n          label: \"label\",\n          indexPosition: \"indexPosition\",\n          ancestory: \"ancestory\",\n          panes: \"panes\",\n          originPanes: \"originPanes\",\n          resolvedContext: \"resolvedContext\",\n          css: \"css\",\n          listeners: \"listeners\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => RenderPaneComponent),\n          multi: true\n        },\n        /*{\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => RenderPaneComponent),\n          multi: true\n        },*/\n        {\n          provide: NG_ASYNC_VALIDATORS,\n          useExisting: forwardRef(() => RenderPaneComponent),\n          multi: true\n        }]), i0.\u0275\u0275NgOnChangesFeature],\n        decls: 6,\n        vars: 4,\n        consts: [[\"fxFlex\", \"\", 3, \"formGroup\"], [\"classifiedsUiPaneContentHost\", \"\"], [\"fxFlex\", \"\", \"formControlName\", \"settings\", 3, \"panelPage\", \"nested\", \"contexts\", \"css\", \"listeners\", \"ancestory\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"formControlName\", \"settings\", 3, \"id\", \"nested\", \"contexts\", \"ancestory\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"formControlName\", \"settings\", 3, \"panelPage\", \"nested\", \"contexts\", \"css\", \"listeners\", \"ancestory\"], [\"fxFlex\", \"\", \"formControlName\", \"settings\", 3, \"id\", \"nested\", \"contexts\", \"ancestory\"]],\n        template: function RenderPaneComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0);\n            i0.\u0275\u0275elementContainerStart(1);\n            i0.\u0275\u0275template(2, RenderPaneComponent_ng_template_2_Template, 0, 0, \"ng-template\", 1);\n            i0.\u0275\u0275elementContainerEnd();\n            i0.\u0275\u0275template(3, RenderPaneComponent_classifieds_ui_panel_page_3_Template, 1, 6, \"classifieds-ui-panel-page\", 2)(4, RenderPaneComponent_classifieds_ui_panel_page_4_Template, 1, 4, \"classifieds-ui-panel-page\", 3)(5, RenderPaneComponent_classifieds_ui_panel_page_5_Template, 1, 6, \"classifieds-ui-panel-page\", 2);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.paneForm);\n            i0.\u0275\u0275advance(3);\n            i0.\u0275\u0275property(\"ngIf\", ctx.pluginName == \"panel\" && !ctx.linkedPageId && ctx.settings.length !== 0);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.pluginName == \"panel\" && ctx.linkedPageId);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.pluginName == \"panel\" && !ctx.linkedPageId && ctx.settings.length === 0);\n          }\n        },\n        dependencies: () => [i6.NgIf, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, PaneContentHostDirective, PanelPageComponent],\n        styles: [\"[_nghost-%COMP%]{height:100%}\"]\n      });\n    }\n  }\n  return RenderPaneComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Putting render pane inside the same file is a documented work around for the\n * below angular partial compilation issue.\n *\n * https://angular.io/errors/NG3003\n */\nlet RenderPanelComponent = /*#__PURE__*/(() => {\n  class RenderPanelComponent {\n    static {\n      this.COUNTER = 0;\n    }\n    set contextChanged(contextChanged) {\n      // this.schduleContextChange.next(contextChanged.name);\n    }\n    set contextsChanged(contextsChanged) {\n      contextsChanged.map(c => this.schduleContextChange.next(c));\n    }\n    set indexPosition(indexPosition) {\n      this.indexPosition$.next(indexPosition);\n    }\n    set ancestory(ancestory) {\n      this.ancestory$.next(ancestory);\n    }\n    set css(css) {\n      this.css$.next(css);\n    }\n    set listeners(listeners) {\n      this.listeners$.next(listeners);\n    }\n    get indexPositionClass() {\n      return `panel-${this.indexPosition$.value}`;\n    }\n    get panesArray() {\n      return this.panelForm.get('panes');\n    }\n    constructor(\n    // @Inject(STYLE_PLUGIN) stylePlugins: Array<StylePlugin>,\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    platformId, document, hostEl, renderer2, componentFactoryResolver, fb, panelResolverService, spm, cssHelper, styleResolverService) {\n      this.platformId = platformId;\n      this.document = document;\n      this.hostEl = hostEl;\n      this.renderer2 = renderer2;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.fb = fb;\n      this.panelResolverService = panelResolverService;\n      this.spm = spm;\n      this.cssHelper = cssHelper;\n      this.styleResolverService = styleResolverService;\n      this.nested = false;\n      this.resolvedContext = {};\n      this.heightChange = new EventEmitter();\n      this.panelForm = this.fb.group({\n        name: this.fb.control(''),\n        label: this.fb.control(''),\n        panes: this.fb.array([])\n      });\n      this.panelFormSub = this.panelForm.valueChanges.subscribe(v => {\n        console.log('paneL form value');\n        console.log(v);\n      });\n      this.filteredListeners = [];\n      /*initialRenderComplete = setInterval(() => {\n        console.log(`check pane initial render [${this.panel.name}]`);\n        console.log(`expected: ${this.resolvedPanes !== undefined ? this.resolvedPanes.length : 'null'} | actual ${this.renderedPanes.length}`);\n        if (this.resolvedPanes !== undefined && this.renderedPanes.length === this.resolvedPanes.length) {\n          console.log(`COMPLETE: check pane initial render [${this.panel.name}]`);\n          clearInterval(this.initialRenderComplete);\n        }\n      }, 250);*/\n      this.afterContentInit$ = new Subject();\n      this.schedulePanelRender = new Subject();\n      this.rendered$ = new Subject();\n      this.css$ = new BehaviorSubject({\n        css: this.cssHelper.makeJsonNode(),\n        classes: {}\n      });\n      this.cssSub = combineLatest([this.css$, this.afterContentInit$, this.rendered$]).pipe(tap(([s]) => console.log('css node', s.css)), map(([s]) => s), map(s => ({\n        css: this.cssHelper.reduceCss(s.css, `.panel-${this.indexPosition$.value}`),\n        classes: this.cssHelper.reduceSelector(s.classes, `.panel-${this.indexPosition$.value}`)\n      })), map(({\n        css,\n        classes\n      }) => [this.cssHelper.reduceCss(css, '.pane-', false), css, this.cssHelper.reduceSelector(classes, '.pane-', false), classes]), tap(([_, nestedCss, __, nestedClasses]) => this.filteredCss = {\n        css: nestedCss,\n        classes: nestedClasses\n      }), map(([css, _, classes]) => ({\n        css,\n        classes\n      })), map(({\n        css,\n        classes\n      }) => {\n        const rebuiltCss = Object.keys(css.children).reduce((p, c) => ({\n          ...p,\n          ...(c.indexOf('>') === 0 ? {\n            [this.ancestoryWithSelf$.value.map((v, k) => (k + 1) % 2 === 0 ? `.pane-${v}` : `.panel-${v}`).join(' ') + ' ' + c]: classes[c]\n          } : {\n            [c]: classes[c]\n          })\n        }), {});\n        const rebuiltClasses = Object.keys(classes).reduce((p, c) => ({\n          ...p,\n          ...(c.indexOf('>') === 0 ? {\n            [this.ancestoryWithSelf$.value.map((v, k) => (k + 1) % 2 === 0 ? `.pane-${v}` : `.panel-${v}`).join(' ') + ' ' + c]: classes[c]\n          } : {\n            [c]: classes[c]\n          })\n        }), {});\n        return {\n          css: {\n            children: rebuiltCss\n          },\n          classes: rebuiltClasses\n        };\n      }), delay(1)).subscribe(({\n        css,\n        classes\n      }) => {\n        /*console.log(`matched css inside panel renderer: ${this.indexPosition}`);\n        console.log(css);\n        this.filteredCss = css;*/\n        console.log('classes', classes);\n        const keys = Object.keys(css.children).filter(k => k === '' || isSelectorValid({\n          selector: k,\n          document: this.document\n        }));\n        const classKeys = Object.keys(classes).filter(k => k === '' || isSelectorValid({\n          selector: k,\n          document: this.document\n        }));\n        classKeys.forEach((k, keyIndex) => {\n          const matchedNodes = k === '' ? [this.hostEl.nativeElement] : k.indexOf('>') !== -1 ? this.document.querySelectorAll(k) : this.hostEl.nativeElement.querySelectorAll(k);\n          const len = matchedNodes.length;\n          for (let i = 0; i < len; i++) {\n            const c = classes[classKeys[keyIndex]];\n            const cKeys = Object.keys(c);\n            const cLen = cKeys.length;\n            for (let j = 0; j < cLen; j++) {\n              if (matchedNodes[i]) {\n                if (c[cKeys[j]] === ClassClassification.REMOVE) {\n                  console.log(`remove class ${cKeys[j]}`);\n                  this.renderer2.removeClass(matchedNodes[i], cKeys[j]);\n                } else {\n                  console.log(`add class ${cKeys[j]}`);\n                  this.renderer2.addClass(matchedNodes[i], cKeys[j]);\n                }\n              }\n            }\n          }\n        });\n        keys.forEach(k => {\n          console.log(`search: ${k}`);\n          const matchedNodes = k === '' ? [this.hostEl.nativeElement] : k.indexOf('>') !== -1 ? this.document.querySelectorAll(k) : this.hostEl.nativeElement.querySelectorAll(k);\n          const len = matchedNodes.length;\n          const rules = Object.keys(css.children[k].attributes);\n          for (let i = 0; i < len; i++) {\n            if (matchedNodes[i]) {\n              rules.forEach(p => {\n                console.log(`${k} { ${p}: ${css.children[k].attributes[p]}; }`);\n                const prop = camelize(p.replace('-', '_'), false); // @todo: Not working for custom sheet \n                this.renderer2.setStyle(matchedNodes[i], /*p*/prop, css.children[k].attributes[p]);\n              });\n            }\n          }\n        });\n      });\n      this.listeners$ = new BehaviorSubject([]);\n      this.listenersSub = this.listeners$.pipe(tap(listeners => {\n        console.log('panel listeners', listeners);\n        this.filteredListeners = listeners;\n      })).subscribe();\n      this.scheduleRender = new Subject();\n      this.scheduleRenderSub = this.scheduleRender.pipe(tap(() => console.log(`schdule renderer before [${this.panel.name}]`)), switchMap(([panes, contexts, resolvedContext]) => this.panelResolverService.resolvePanes({\n        panes,\n        contexts,\n        resolvedContext\n      }).pipe(map(({\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }) => ({\n        resolvedPanes,\n        originMappings,\n        panes\n      })))), switchMap(({\n        panes,\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }) => this.styleResolverService.alterResolvedPanes({\n        panel: this.panel,\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }).pipe(map(({\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }) => ({\n        panes,\n        resolvedPanes,\n        originMappings\n      })))), tap(() => console.log(`schdule renderer after [${this.panel.name}]`))).subscribe(({\n        panes,\n        resolvedPanes,\n        originMappings /*, resolvedContexts*/\n      }) => {\n        console.log(`render panel: ${this.panel.name}`);\n        this.resolvedPanes = resolvedPanes;\n        this.originPanes = panes;\n        this.originMappings = originMappings;\n        // this.resolvedContexts = resolvedContexts;\n        if (this.paneContainer && this.stylePlugin === undefined) {\n          // setTimeout(() => this.heightChange.emit(this.paneContainer.nativeElement.offsetHeight));\n        }\n        this.populatePanesFormArray();\n        if (this.stylePlugin !== undefined) {\n          this.renderPanelContent();\n        } else {\n          this.rendered$.next(undefined);\n        }\n        // clearInterval(this.initialRenderComplete);\n      });\n      this.schduleContextChange = new Subject();\n      this.schedulePanelRenderSub = this.schedulePanelRender.pipe(switchMap(p => this.spm.getPlugin(p))).subscribe(stylePlugin => {\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(stylePlugin.renderComponent);\n        const viewContainerRef = this.panelHost.viewContainerRef;\n        viewContainerRef.clear();\n        const componentRef = viewContainerRef.createComponent(componentFactory);\n        this.componentRef = componentRef;\n        componentRef.instance.settings = this.panel.settings;\n        /**\n         * I think this is an oversight. The current code is passing ALL the panes\n         * as the panes array. I believe that change was recently made to facilitate\n         * new behavior. I just don't think this was ever updated... Updating now\n         * and we will see how it goes.\n         */\n        componentRef.instance.panes = this.resolvedPanes;\n        // This breaks pages because none visible panes will attempt to be rendered.\n        //(componentRef.instance as any).panes = this.panel.panes;\n        componentRef.instance.originPanes = this.panel.panes;\n        componentRef.instance.originMappings = this.originMappings;\n        componentRef.instance.contexts = this.contexts.map(c => new InlineContext(c));\n        componentRef.instance.displayType = this.displayType;\n        componentRef.instance.ancestory = this.ancestoryWithSelf$.value;\n        // (componentRef.instance as any).resolvedContexts = this.resolvedContexts;\n        componentRef.instance.resolvedContext = this.resolvedContext;\n        componentRef.instance.panel = this.panel;\n        componentRef.instance.indexPosition = this.indexPosition$.value;\n        this.rendered$.next(undefined);\n      });\n      this.originMappings = [];\n      this.resolvedContexts = [];\n      // ancestoryWithSelf: Array<number> = [];\n      this.ancestoryWithSelf$ = new BehaviorSubject([]);\n      this.ancestory$ = new BehaviorSubject([]);\n      this.indexPosition$ = new BehaviorSubject(undefined);\n      // contentPlugins: Array<ContentPlugin> = [];\n      this.onTouched = () => {};\n      this.ancestorySub = combineLatest([this.ancestory$, this.indexPosition$]).pipe(tap(([ancestory, indexPosition]) => {\n        this.ancestoryWithSelf$.next([...ancestory, indexPosition]);\n      })).subscribe();\n      this.counter = RenderPanelComponent.COUNTER++;\n      // this.stylePlugins = stylePlugins;\n      // this.contentPlugins = contentPlugins;\n    }\n    ngOnInit() {\n      this.stylePlugin = this.panel.stylePlugin !== undefined && this.panel.stylePlugin !== '' ? this.panel.stylePlugin : undefined; // this.stylePlugins.find(p => p.name === this.panel.stylePlugin) : undefined;\n      if (this.panel !== undefined && this.panelHost !== undefined) {\n        console.log(`panel render init [${this.panel.name}`);\n        this.panelResolverService.usedContexts(this.panel.panes).pipe(map(ctx => ctx.filter(c => c !== '_page' && c !== '_root' && c !== '.' && c.indexOf('panestate-' + this.ancestoryWithSelf$.value.join('-')) !== 0)), tap(ctx => console.log(`contexts [${this.panel.name}]: ${ctx.join(',')}`)), switchMap(ctx => this.schduleContextChange.pipe(tap(contextChanged => console.log(`detected change [${this.panel.name}]: ${contextChanged}`)), map(contextChanged => [ctx, contextChanged])\n        // @todo: Replacing the line above with the one below causes an infinite context change loop on the ad browser use case. no good.\n        // I think this line was being used for the pane state detection since there was an issue with it. However, that is not being use anymore.\n        // map(contextChanged => [ctx.includes(contextChanged) ? ctx : [ ...ctx, contextChanged ], contextChanged]) // This might be a breaking change but I do know some of this was never very well tested... :/\n        )), tap(([ctx, contextChanged]) => console.log(`detected change [${this.panel.name}]: ${contextChanged} : ctx: ${ctx.join(',')}`)), filter(([ctx, contextChanged]) => Array.isArray(ctx) && ctx.findIndex(c => c === contextChanged) !== -1), debounceTime(100)).subscribe(([ctx, contextChanged]) => {\n          console.log(`Context changed [${this.panel.name}]: ${contextChanged}`);\n          console.log(`contexts detected [${this.panel.name}]: ${ctx.join(',')}`);\n          this.scheduleRender.next([this.panel.panes, this.contexts, this.resolvedContext]);\n        });\n      }\n      // this.ancestoryWithSelf = [ ...(this.ancestory ? this.ancestory: []), ...( this.indexPosition !== undefined && this.indexPosition !== null? [ this.indexPosition ] : [] ) ];\n    }\n    ngOnChanges(changes) {\n      //console.log(`ngOnChanges render panel [${this.panel.name}]`);\n      //console.log(changes);\n      this.stylePlugin = this.panel.stylePlugin !== undefined && this.panel.stylePlugin !== '' ? this.panel.stylePlugin : undefined; // this.stylePlugins.find(p => p.name === this.panel.stylePlugin) : undefined;\n      if (changes.resolvedContext && changes.resolvedContext.previousValue === undefined) {\n        this.scheduleRender.next([this.panel.panes, this.contexts, this.resolvedContext]);\n      }\n      /*if(changes.contextChanged && changes.contextChanged.currentValue !== undefined) {\n        this.schduleContextChange.next(changes.contextChanged.currentValue.name);\n      }*/\n      /*if (changes.ancestory || changes.indexPosition) {\n        const ancestoryWithSelf = [ ...(changes.ancestory.currentValue ? changes.ancestory.currentValue :  this.ancestory ? this.ancestory : []), ...( changes.indexPosition.currentValue !== undefined && changes.indexPosition.currentValue !== null? [ changes.indexPosition.currentValue ] : this.indexPosition ? [ this.indexPosition ] : [] ) ];\n        if (ancestoryWithSelf.length !== this.ancestoryWithSelf.length || this.ancestoryWithSelf.filter((n, index) => ancestoryWithSelf[index] !== n).length !== 0) {\n          this.ancestoryWithSelf = ancestoryWithSelf;\n        }\n      }*/\n    }\n    ngAfterViewInit() {}\n    ngAfterContentInit() {\n      this.afterContentInit$.next(undefined);\n    }\n    writeValue(val) {\n      if (val) {\n        this.panelForm.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.panelForm.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.panelForm.disable();\n      } else {\n        this.panelForm.enable();\n      }\n    }\n    validate(c) {\n      /*return this.panelForm.statusChanges.pipe(\n        startWith(this.panelForm.status),  // start with the current form status\n        filter((status) => status === 'VALID'),\n        map(() => null),\n        timeout(1000),\n        catchError(() => of({ invalidForm: {valid: false, message: \"panel are invalid\"}})),\n        first()\n      );*/\n      return this.panelForm.statusChanges.pipe(startWith(this.panelForm.status),\n      // start with the current form status\n      filter(status => status !== 'PENDING'), debounceTime(1), take(1),\n      // We only want one emit after status changes from PENDING\n      map(status => {\n        return this.panelForm.valid ? null : {\n          invalidForm: {\n            valid: false,\n            message: \"panel are invalid\"\n          }\n        }; // I actually loop through the form and collect the errors, but for validity just return this works fine\n      }));\n    }\n    populatePanesFormArray() {\n      this.panesArray.clear();\n      this.resolvedPanes.forEach((p, i) => {\n        this.panesArray.push(this.fb.control(''));\n      });\n    }\n    renderPanelContent() {\n      this.schedulePanelRender.next(this.stylePlugin);\n    }\n    static {\n      this.\u0275fac = function RenderPanelComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RenderPanelComponent)(i0.\u0275\u0275directiveInject(PLATFORM_ID), i0.\u0275\u0275directiveInject(DOCUMENT), i0.\u0275\u0275directiveInject(i0.ElementRef), i0.\u0275\u0275directiveInject(i0.Renderer2), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1.PanelResolverService), i0.\u0275\u0275directiveInject(i1.StylePluginManager), i0.\u0275\u0275directiveInject(i1.CssHelperService), i0.\u0275\u0275directiveInject(i1.StyleResolverService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RenderPanelComponent,\n        selectors: [[\"classifieds-ui-render-panel\"]],\n        viewQuery: function RenderPanelComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(PaneContentHostDirective, 7);\n            i0.\u0275\u0275viewQuery(_c0, 7);\n            i0.\u0275\u0275viewQuery(RenderPaneComponent, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.panelHost = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.paneContainer = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.renderedPanes = _t);\n          }\n        },\n        hostVars: 5,\n        hostBindings: function RenderPanelComponent_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.\u0275\u0275attribute(\"data-index\", ctx.indexPosition$.value);\n            i0.\u0275\u0275classMap(ctx.indexPositionClass);\n            i0.\u0275\u0275classProp(\"panel\", true);\n          }\n        },\n        inputs: {\n          panel: \"panel\",\n          contexts: \"contexts\",\n          nested: \"nested\",\n          displayType: \"displayType\",\n          resolvedContext: \"resolvedContext\",\n          contextChanged: \"contextChanged\",\n          contextsChanged: \"contextsChanged\",\n          indexPosition: \"indexPosition\",\n          ancestory: \"ancestory\",\n          css: \"css\",\n          listeners: \"listeners\"\n        },\n        outputs: {\n          heightChange: \"heightChange\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => RenderPanelComponent),\n          multi: true\n        },\n        /*{\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => RenderPanelComponent),\n          multi: true\n        },*/\n        {\n          provide: NG_ASYNC_VALIDATORS,\n          useExisting: forwardRef(() => RenderPanelComponent),\n          multi: true\n        }]), i0.\u0275\u0275NgOnChangesFeature],\n        decls: 5,\n        vars: 2,\n        consts: [[\"panes\", \"\"], [1, \"render-panel\", 3, \"formGroup\"], [\"classifiedsUiPaneContentHost\", \"\"], [4, \"ngIf\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [\"formArrayName\", \"panes\"], [3, \"formControlName\", \"pluginName\", \"settings\", \"name\", \"label\", \"originPane\", \"contexts\", \"displayType\", \"resolvedContext\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\", \"panes\", \"originPanes\", 4, \"ngFor\", \"ngForOf\"], [3, \"formControlName\", \"pluginName\", \"settings\", \"name\", \"label\", \"originPane\", \"contexts\", \"displayType\", \"resolvedContext\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\", \"panes\", \"originPanes\"], [3, \"pluginName\", \"settings\", \"name\", \"label\", \"originPane\", \"contexts\", \"linkedPageId\", \"displayType\", \"resolvedContext\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\", \"panes\", \"originPanes\", 4, \"ngFor\", \"ngForOf\"], [3, \"pluginName\", \"settings\", \"name\", \"label\", \"originPane\", \"contexts\", \"linkedPageId\", \"displayType\", \"resolvedContext\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\", \"panes\", \"originPanes\"]],\n        template: function RenderPanelComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 1, 0);\n            i0.\u0275\u0275elementContainerStart(2);\n            i0.\u0275\u0275template(3, RenderPanelComponent_ng_template_3_Template, 0, 0, \"ng-template\", 2);\n            i0.\u0275\u0275elementContainerEnd();\n            i0.\u0275\u0275template(4, RenderPanelComponent_ng_container_4_Template, 4, 3, \"ng-container\", 3);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.panelForm);\n            i0.\u0275\u0275advance(4);\n            i0.\u0275\u0275property(\"ngIf\", !ctx.stylePlugin && ctx.resolvedPanes);\n          }\n        },\n        dependencies: [i6.NgForOf, i6.NgIf, i6.NgSwitch, i6.NgSwitchCase, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i2.FormArrayName, PaneContentHostDirective, RenderPaneComponent],\n        styles: [\"[_nghost-%COMP%]{height:100%}.render-panel[_ngcontent-%COMP%]{height:100%}\"]\n      });\n    }\n  }\n  return RenderPanelComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass PanelPageComponent {\n  static {\n    this.registredContextListeners = new Set();\n  }\n  set id(id) {\n    this.id$.next(id);\n  }\n  set panelPage(panelPage) {\n    this.panelPage$.next(panelPage);\n  }\n  set nested(nested) {\n    this.nested$.next(nested);\n  }\n  set contexts(contexts) {\n    this.contexts$.next(contexts);\n  }\n  set ancestory(ancestory) {\n    this.ancestory$.next(ancestory);\n  }\n  set css(css) {\n    this.css$.next(css);\n  }\n  set listeners(listeners) {\n    this.listeners$.next(listeners);\n  }\n  get panelsArray() {\n    return this.pageForm.get('panels');\n  }\n  constructor(platformId, mediaSettings, routerStore, fb, el, inlineContextResolver,\n  // private contextManager: ContextManagerService,\n  pageBuilderFacade, cpm, cxm, lpm, componentFactoryResolver, styleLoader,\n  // I don't feel good about this but f**k it for now til I figure this out\n  http, cssHelper, attributeSerializer, formService, panelsContextService, asyncApiCallHelperSvc, crudDataHelperService, entityDefinitionService, ngZone, persistService, stylizerService, classifyService, fileService, authFacade, paramEvaluatorService, renderer, iepm, ihpm, es) {\n    this.platformId = platformId;\n    this.mediaSettings = mediaSettings;\n    this.routerStore = routerStore;\n    this.fb = fb;\n    this.el = el;\n    this.inlineContextResolver = inlineContextResolver;\n    this.pageBuilderFacade = pageBuilderFacade;\n    this.cpm = cpm;\n    this.cxm = cxm;\n    this.lpm = lpm;\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.styleLoader = styleLoader;\n    this.http = http;\n    this.cssHelper = cssHelper;\n    this.attributeSerializer = attributeSerializer;\n    this.formService = formService;\n    this.panelsContextService = panelsContextService;\n    this.asyncApiCallHelperSvc = asyncApiCallHelperSvc;\n    this.crudDataHelperService = crudDataHelperService;\n    this.entityDefinitionService = entityDefinitionService;\n    this.ngZone = ngZone;\n    this.persistService = persistService;\n    this.stylizerService = stylizerService;\n    this.classifyService = classifyService;\n    this.fileService = fileService;\n    this.authFacade = authFacade;\n    this.paramEvaluatorService = paramEvaluatorService;\n    this.renderer = renderer;\n    this.iepm = iepm;\n    this.ihpm = ihpm;\n    this.resolvedContext = {};\n    this.contextsChanged = [];\n    this.persistenceEnabled = false;\n    this.onInit$ = new Subject();\n    this.afterViewInit$ = new Subject();\n    this.afterContentInit$ = new Subject();\n    this.renderLayout$ = new Subject();\n    this.id$ = new BehaviorSubject(undefined);\n    this.panelPage$ = new BehaviorSubject(undefined);\n    this.nested$ = new BehaviorSubject(false);\n    this.ancestory$ = new BehaviorSubject([]);\n    this.contexts$ = new BehaviorSubject([]);\n    this.instanceUniqueIdentity = uuid.v4();\n    this.isStable = false;\n    this.managedCssCache = '';\n    this.managedClassesCache = {};\n    this.filteredListeners = [];\n    this.css$ = new BehaviorSubject({\n      css: this.cssHelper.makeJsonNode(),\n      classes: {}\n    });\n    this.cssSub = this.css$.subscribe(css => {\n      if (this.nested$.value) {\n        console.log('filtered css nested', css);\n      }\n      this.filteredCss = css;\n    });\n    this.listeners$ = new BehaviorSubject([]);\n    this.listenersSub = this.listeners$.pipe(tap(listeners => {\n      this.filteredListeners = listeners;\n    })).subscribe();\n    this.settingsFormArray = this.fb.array([]);\n    this.pageForm = this.fb.group({\n      /*name: this.fb.control(''),\n      title: this.fb.control(''),\n      derivativeId: this.fb.control(''),*/\n      panels: this.fb.array([])\n    });\n    this.bridgeSub = this.pageForm.valueChanges.pipe(filter(() => this.nested$.value), debounceTime(500)).subscribe(v => {\n      console.log('write page');\n      console.log(v);\n      this.settingsFormArray.clear();\n      const newGroup = this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(v, 'value').attributes[0]);\n      this.settingsFormArray.push(newGroup);\n      console.log(newGroup.value);\n    });\n    this.idOrPanelPageSub = combineLatest([this.id$, this.panelPage$]).pipe(distinctUntilChanged(), map(([id, panelPage]) => ({\n      id,\n      panelPage\n    })), filter(({\n      id,\n      panelPage\n    }) => !!id || !!panelPage), switchMap(({\n      id,\n      panelPage\n    }) => iif(() => !id, of({\n      panelPage\n    }), new Observable(obs => {\n      const metadata = this.entityDefinitionService.getDefinition('PanelPage').metadata;\n      return this.crudDataHelperService.evaluateCollectionPlugins({\n        query: `identity=${id}`,\n        plugins: metadata.crud,\n        op: 'query'\n      }).pipe(map(objects => objects && objects.length !== 0 ? objects[0] : undefined), tap(p => {\n        obs.next({\n          panelPage: p\n        });\n        obs.complete();\n      })).subscribe();\n    }))), switchMap(({\n      panelPage\n    }) => this.cpm.getPlugins(panelPage.panels.reduce((contentPlugins, c) => {\n      c.panes.forEach(pane => {\n        if (!contentPlugins.includes(pane.contentPlugin)) {\n          contentPlugins.push(pane.contentPlugin);\n        }\n      });\n      return contentPlugins;\n    }, [])).pipe(map(() => ({\n      panelPage\n    })))), switchMap(({\n      panelPage\n    }) => iif(() => !this.nested$.value,\n    /*!this.nested ? this.panelsContextService.allActivePageContexts({ panelPage: p }).pipe(\n      map(paneContexts => [p, isDynamic, paneContexts])\n    ): of([p, isDynamic, []]),*/\n    this.panelsContextService.allActivePageContexts({\n      panelPage\n    }).pipe(map(paneContexts => ({\n      panelPage,\n      contexts: Array.from(paneContexts)\n    }))), of({\n      panelPage,\n      contexts: []\n    }))),\n    /*switchMap(({ panelPage, isDynamic }) => this.panelsContextService.allActivePageContexts({ panelPage }).pipe(\n      map(paneContexts => ({ panelPage, isDynamic, contexts: Array.from(paneContexts) }))\n    )),*/\n    tap(({\n      panelPage,\n      contexts\n    }) => {\n      this.hookupFormChange({\n        panelPage\n      });\n      this.populatePanelsFormArray({\n        panelPage\n      });\n      this.panelPageCached = panelPage;\n      this.persistenceEnabled = panelPage.persistence && panelPage.persistence.dataduct && panelPage.persistence.dataduct.plugin && panelPage.persistence.dataduct.plugin !== '';\n      this.filteredListeners = panelPage.interactions && panelPage.interactions.interactions && panelPage.interactions.interactions.listeners ? panelPage.interactions.interactions.listeners : [];\n      this.renderLayout$.next(panelPage);\n      // this.panelPage$.next(panelPage);\n      this.contexts$.next([...(panelPage.contexts ? panelPage.contexts.map(c => new InlineContext(c)) : []), ...contexts]);\n      /*if(!this.nested$.value || isDynamic ) {\n        this.hookupContextChange();\n      }*/\n      this.hookupCss({\n        file: panelPage.cssFile ? panelPage.cssFile.trim() : undefined\n      });\n      console.log(`cached panel page: ${panelPage.id}`);\n    })).subscribe();\n    this.hookupContextSub = combineLatest(this.contexts$,\n    // this.nested$,\n    this.afterContentInit$).pipe(\n    // filter(([ _, nested ]) => !nested),\n    map(([contexts]) => contexts), switchMap(contexts => this.inlineContextResolver.resolveMerged(contexts, `panelpage:${uuid.v4()}`).pipe(switchMap(resolvedContext => this.cxm.getPlugins().pipe(map(plugins => ({\n      contexts,\n      resolvedContext,\n      globalPlugins: Array.from(plugins.values()).filter(p => p.global === true)\n    })))), take(1))), tap(() => {\n      if (this.resolveSub) {\n        this.resolveSub.unsubscribe();\n      }\n    }), tap(({\n      contexts,\n      resolvedContext,\n      globalPlugins\n    }) => {\n      this.resolvedContext = resolvedContext;\n      const short$ = new Subject();\n      if (isPlatformServer(this.platformId)) {\n        const interval = setInterval(() => {\n          if (PanelPageComponent.registredContextListeners.size === 0) {\n            short$.next();\n            short$.complete();\n            clearInterval(interval);\n          }\n        }, 1000);\n      }\n      this.resolveSub = this.inlineContextResolver.resolveMergedSingle(contexts).pipe(skip(globalPlugins.length + (contexts ? contexts.length : 0)), tap(() => PanelPageComponent.registredContextListeners.add(this.instanceUniqueIdentity)), tap(v => console.log('buffer', v)), bufferTime(1), tap(buffered => {\n        if (buffered.length === 0) {\n          PanelPageComponent.registredContextListeners.delete(this.instanceUniqueIdentity);\n        }\n      }), filter(buffered => buffered.length !== 0), tap(buffered => {\n        this.contextsChanged = buffered.reduce((p, [cName, _]) => [...p, ...(p.includes(cName) ? [] : [cName])], []);\n        this.resolvedContext = buffered.reduce((p, [cName, cValue]) => ({\n          ...p,\n          [cName]: cValue\n        }), this.resolvedContext);\n      }), tap(() => PanelPageComponent.registredContextListeners.delete(this.instanceUniqueIdentity)), isPlatformServer(this.platformId) ? takeUntil(short$) : tap(() => {})).subscribe();\n    })).subscribe();\n    this.renderLayoutSub = combineLatest([this.renderLayout$, this.afterViewInit$]).pipe(delay(1), map(([panelPage]) => ({\n      panelPage\n    })), switchMap(({\n      panelPage\n    }) => this.lpm.getPlugin(panelPage.layoutType).pipe(map(plugin => ({\n      panelPage,\n      plugin\n    })))), tap(() => console.log('start render layout')), map(({\n      plugin,\n      panelPage\n    }) => ({\n      panelPage,\n      plugin,\n      viewContainerRef: this.layoutRendererHost.viewContainerRef\n    })), tap(({\n      viewContainerRef\n    }) => viewContainerRef.clear()), map(({\n      plugin,\n      viewContainerRef,\n      panelPage\n    }) => ({\n      panelPage,\n      layoutRendererRef: viewContainerRef.createComponent(plugin.renderer)\n    })), tap(({\n      layoutRendererRef\n    }) => this.layoutRendererRef = layoutRendererRef), tap(({\n      layoutRendererRef,\n      panelPage\n    }) => {\n      layoutRendererRef.instance.renderPanelTpl = this.renderPanelTpl;\n      layoutRendererRef.instance.panelPage = panelPage;\n    }), tap(() => console.log('end render layout'))).subscribe();\n    this.stylizerSub = this.afterViewInit$.pipe(\n    //filter(() => false), // @tofo: Note ready for prime time just yet.\n    filter(() => isPlatformBrowser(this.platformId)), tap(() => {\n      this.stylizerService.stylize({\n        targetNode: this.el.nativeElement\n      });\n    })).subscribe();\n    this.classifySub = this.afterViewInit$.pipe(\n    //filter(() => false), // @tofo: Note ready for prime time just yet.\n    filter(() => isPlatformBrowser(this.platformId)), tap(() => {\n      this.classifyService.classify({\n        targetNode: this.el.nativeElement\n      });\n    })).subscribe();\n    this.stylizerMutatedSub = !isPlatformBrowser(this.platformId) ? undefined : this.stylizerService.mutated$.pipe(debounceTime(2000), skip(1), switchMap(({\n      stylesheet\n    }) => this.authFacade.getUser$.pipe(map(u => ({\n      stylesheet,\n      isAuthenticated: !!u\n    })) // No sheath asset uploads are attempted unless user is at least authenticated.\n    )), filter(({\n      isAuthenticated\n    }) => isAuthenticated), tap(({\n      stylesheet\n    }) => {\n      console.log('merged css', stylesheet);\n    }), filter(() => !!this.panelPageCached && !!this.panelPageCached.id),\n    // filter(() => false), // @tofo: Note ready for prime time just yet.\n    switchMap(({\n      stylesheet\n    }) => this.isStable ? of({\n      stylesheet\n    }) : this.ngZone.onStable.asObservable().pipe(map(() => ({\n      stylesheet\n    })), take(1))), map(({\n      stylesheet\n    }) => ({\n      stylesheet: (this.managedCssCache && this.managedCssCache.trim() !== '' ? this.managedCssCache + \"\\n\" : '') + stylesheet\n    })), concatMap(({\n      stylesheet\n    }) => this.fileService.bulkUpload({\n      nocache: true,\n      files: [new File([stylesheet], `panelpage__${this.panelPageCached.id}.css`)],\n      fileNameOverride: `panelpage__${this.panelPageCached.id}.css`\n    })), tap(() => {\n      console.log('stylesheet saved.');\n    })).subscribe();\n    this.classifyMutatedSub = !isPlatformBrowser(this.platformId) ? undefined : this.classifyService.mutated$.pipe(debounceTime(2000), skip(1), switchMap(({\n      classes\n    }) => this.authFacade.getUser$.pipe(\n    // No sheath asset uploads are attempted unless user is at least authenticated.\n    map(u => ({\n      classes,\n      isAuthenticated: !!u\n    })))), filter(({\n      isAuthenticated\n    }) => isAuthenticated), tap(({\n      classes\n    }) => {\n      console.log('merged classes', classes);\n    }), filter(() => !!this.panelPageCached && !!this.panelPageCached.id),\n    // filter(() => false), // @tofo: Note ready for prime time just yet.\n    switchMap(({\n      classes\n    }) => this.isStable ? of({\n      classes\n    }) : this.ngZone.onStable.asObservable().pipe(map(() => ({\n      classes\n    })), take(1))), map(({\n      classes\n    }) => ({\n      classes: Array.from(classes.keys()).reduce((p, k) => ({\n        ...p,\n        [k]: Array.from(classes.get(k).keys()).filter(k2 => classes.get(k).get(k2) !== ClassClassification.KEEP).reduce((p2, k2) => ({\n          ...p2,\n          [k2]: classes.get(k).get(k2)\n        }), {})\n      }), {})\n    })), map(({\n      classes\n    }) => ({\n      classes: merge(this.managedClassesCache, classes)\n    })), map(({\n      classes\n    }) => ({\n      json: JSON.stringify(classes)\n    })), concatMap(({\n      json\n    }) => this.fileService.bulkUpload({\n      nocache: true,\n      files: [new File([json], `panelpage__${this.panelPageCached.id}__classes.json`)],\n      fileNameOverride: `panelpage__${this.panelPageCached.id}__classes.json`\n    })), tap(() => {\n      console.log('classes saved.');\n    })).subscribe();\n    this.onStableSub = this.ngZone.onStable.asObservable().pipe(tap(() => this.isStable = true)).subscribe();\n    this.onUnstableSub = this.ngZone.onUnstable.asObservable().pipe(tap(() => this.isStable = false)).subscribe();\n    this.wireListenersSub = combineLatest([this.listeners$, this.renderLayout$, this.afterContentInit$]).pipe(delay(1), switchMap(() => forkJoin(this.filteredListeners.map(l => of({}).pipe(map(() => ({\n      paramNames: l.event.settings.paramsString ? l.event.settings.paramsString.split('&').filter(v => v.indexOf('=:') !== -1).map(v => v.split('=', 2)[1].substr(1)) : []\n    })), switchMap(({\n      paramNames\n    }) => this.paramEvaluatorService.paramValues(l.event.settings.params.reduce((p, c, i) => new Map([...p, [paramNames[i], c]]), new Map())).pipe(map(params => Array.from(params).reduce((p, [k, v]) => ({\n      ...p,\n      [k]: v\n    }), {})))), defaultIfEmpty([]))))), switchMap(listenerParams => this.iepm.getPlugin('dom').pipe(map(p => ({\n      p,\n      listenerParams\n    })))), switchMap(({\n      p,\n      listenerParams\n    }) => p.connect({\n      filteredListeners: this.filteredListeners,\n      listenerParams,\n      renderer: this.renderer,\n      callback: ({\n        handlerParams,\n        plugin,\n        index,\n        evt\n      }) => {\n        // console.log(`The handler was called`, handlerParams, plugin, index, this.filteredListeners[index], evt );\n        this.ihpm.getPlugin(plugin).pipe(tap(p => {\n          p.handle({\n            handlerParams,\n            plugin,\n            index,\n            listener: this.filteredListeners[index],\n            evt,\n            renderer: this.renderer,\n            panelPageComponent: this\n          });\n        })).subscribe();\n      }\n    })), tap(listenerParams => {\n      console.log('listener info', this.filteredListeners, listenerParams);\n      /*this.iepm.getPlugin('dom').subscribe(p => {\n        p.connect({\n          filteredListeners: this.filteredListeners,\n          listenerParams,\n          renderer: this.renderer,\n          callback: ({ handlerParams, plugin, index, evt }) => {\n            console.log(`The handler was called`, handlerParams, plugin, index, this.filteredListeners[index], evt );\n          }\n        }).subscribe();\n      });*/\n      // The hard way to handle events using our own delegation algorithm\n      // since nodes are constantly changing underneath and simple way\n      // doesn't seem to work.\n      // This is all going to be part of the plugin function anyway.\n      /*const mapTypes = new Map<string, Array<number>>();\n      const len = this.filteredListeners.length;\n      for (let i = 0; i < len; i++) {\n        const type = (listenerParams[i] as  any).type;\n        if (mapTypes.has(type)) {\n          const targets = mapTypes.get(type);\n          targets.push(i);\n          mapTypes.set(type, targets);\n        } else {\n          mapTypes.set(type, [i]);\n        }\n      }\n      const eventDelegtionHandler = (m => e => {\n        if (m.has(e.type)) {\n          const targets = m.get(e.type);\n          const len = targets.length;\n          targets.forEach((__, i) => {\n            const expectedTarget = (listenerParams[targets[i]] as any).target;\n            if (e.target.matches(expectedTarget)) {\n              console.log(`delegated target match ${expectedTarget}`);\n              if(this.filteredListeners[i].handler.settings.params) {\n                const paramNames = this.filteredListeners[i].handler.settings.paramsString ? this.filteredListeners[i].handler.settings.paramsString.split('&').filter(v => v.indexOf('=:') !== -1).map(v => v.split('=', 2)[1].substr(1)) : [];\n                this.paramEvaluatorService.paramValues(\n                  this.filteredListeners[i].handler.settings.params.reduce((p, c, i) => new Map<string, Param>([ ...p, [ paramNames[i], c ] ]), new Map<string, Param>())\n                ).pipe(\n                  map(params => Array.from(params).reduce((p, [k, v]) =>  ({ ...p, [k]: v }), {}))\n                ).subscribe((handlerParams) => {\n                  // plugin call and pass params\n                  console.log('handler original event and params', e, this.filteredListeners[i].handler.plugin,  handlerParams);\n                })\n              } else {\n                // plugin call and pass params\n                console.log('handler original event and params', this.filteredListeners[i].handler.plugin, e);\n              }\n            }\n          });\n        }\n      })(mapTypes)\n      const keys = Array.from(mapTypes);\n      for (let i = 0; i < keys.length; i++) {\n        const type = keys[i][0];\n        this.renderer.listen('document', type, e => {\n          eventDelegtionHandler(e);\n        });\n      }*/\n      /*this.renderer.listen('document', 'click', e => {\n        console.log('delegated target');\n        if (e.target.matches('.open-dialog')) {\n          console.log('delegated target match');\n        }\n      });*/\n      /*const listenerLen = this.filteredListeners.length;\n      for (let i = 0; i < listenerLen; i++) {\n        // Assumption is made herre that would be responsibility of plugin instead ie. target is required for DOM event.\n        // For now though just to get things spinning again hard code expectation.\n        const targets =(this.el.nativeElement as Element).querySelectorAll((listenerParams[i] as  any).target);\n        console.log('listener target', targets);\n        targets.forEach(t => this.renderer.listen(t, (listenerParams[i] as  any).type, e => {\n          console.log('listener fired');\n          if(this.filteredListeners[i].handler.settings.params) {\n            const paramNames = this.filteredListeners[i].handler.settings.paramsString ? this.filteredListeners[i].handler.settings.paramsString.split('&').filter(v => v.indexOf('=:') !== -1).map(v => v.split('=', 2)[1].substr(1)) : [];\n            this.paramEvaluatorService.paramValues(\n              this.filteredListeners[i].handler.settings.params.reduce((p, c, i) => new Map<string, Param>([ ...p, [ paramNames[i], c ] ]), new Map<string, Param>())\n            ).pipe(\n              map(params => Array.from(params).reduce((p, [k, v]) =>  ({ ...p, [k]: v }), {}))\n            ).subscribe((handlerParams) => {\n              console.log('handler original event and params',e,  handlerParams);\n            });\n          } else {\n            console.log('handler original event and params', e);\n          }\n        }));\n      }*/\n    })).subscribe();\n    this.onTouched = () => {};\n    this.panelPageService = es.getEntityCollectionService('PanelPage');\n    this.panelPageFormService = es.getEntityCollectionService('PanelPageForm');\n    this.panelPageStateService = es.getEntityCollectionService('PanelPageState');\n  }\n  ngOnInit() {\n    this.onInit$.next(undefined);\n  }\n  ngAfterViewInit() {\n    this.afterViewInit$.next(undefined);\n  }\n  ngAfterContentInit() {\n    this.afterContentInit$.next(undefined);\n  }\n  ngOnDestroy() {\n    PanelPageComponent.registredContextListeners.delete(this.instanceUniqueIdentity);\n  }\n  populatePanelsFormArray({\n    panelPage\n  }) {\n    this.panelsArray.clear();\n    panelPage.panels.forEach(() => {\n      this.panelsArray.push(this.fb.control(''));\n    });\n  }\n  hookupFormChange({\n    panelPage\n  }) {\n    combineLatest([this.pageForm.valueChanges, this.pageForm.statusChanges]).pipe(debounceTime(100), filter(([_, s]) => panelPage !== undefined && panelPage.displayType === 'form' && s !== 'PENDING') // we only update on valid and invalid states not inbetween\n    ).subscribe(([v]) => {\n      const valid = this.pageForm.valid;\n      const persistence = this.panelPageCached.persistence ? this.panelPageCached.persistence : undefined;\n      const form = new PanelPageForm({\n        ...v,\n        name: panelPage.name,\n        title: panelPage.title,\n        derivativeId: panelPage.id,\n        persistence,\n        valid\n      });\n      this.pageBuilderFacade.setForm(panelPage.name, form);\n    });\n  }\n  hookupCss({\n    file\n  }) {\n    forkJoin([\n    /*this.http.get<cssJson.JSONNode>(file).pipe(\n      catchError(() => of(undefined)),\n      defaultIfEmpty(undefined)\n    ),*/\n    of(undefined),\n    // Disable this for now since 400s have negative impact on page scoring\n    /*this.panelPageCached.id ? this.http.get<cssJson.JSONNode>(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}.css.json`).pipe(\n      catchError(() => of(undefined)),\n      defaultIfEmpty(undefined)\n    ) : of(undefined),*/\n    of(undefined),\n    // Disable this for now since 400s have negative impact on page scoring\n    /*\n    this.panelPageCached.id ? this.http.get<cssJson.JSONNode>(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}.css`).pipe(\n      catchError(() => of(undefined)),\n      defaultIfEmpty(undefined)\n    ) : of(undefined),*/\n    of(undefined), this.panelPageCached.id ? this.http.get(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}__classes.json`).pipe(catchError(() => of(undefined)), defaultIfEmpty(undefined)) : of(undefined)]).pipe(tap(([cssFile, managedCss, managedCssRaw, classes]) => {\n      console.log('fetched managed panelpage css and class files');\n      let css = {};\n      this.managedCssCache = '';\n      this.managedClassesCache = classes;\n      if (cssFile) {\n        css = merge(css, cssFile);\n      }\n      if (managedCss) {\n        this.managedCssCache = managedCssRaw;\n        css = merge(css, managedCss);\n      }\n      this.filteredCss = {\n        css,\n        classes\n      };\n    })).subscribe();\n    /*\n    this.http.get<cssJson.JSONNode>(file).subscribe(css => {\n      this.filteredCss = css; //css.styles; - only for sheath\n    });*/\n  }\n  submit() {\n    if (this.pageForm.valid) {\n      const panelPageForm = new PanelPageForm({\n        ...this.pageForm.value\n      });\n      const data = this.formService.serializeForm(panelPageForm);\n      console.log(panelPageForm);\n      console.log(this.formService.serializeForm(panelPageForm));\n      /*this.panelPageFormService.add(panelPageForm).subscribe(() => {\n        alert('panel page form added!');\n      });*/\n      console.log('form data', data);\n      this.persistService.persist({\n        data,\n        persistence: this.panelPageCached.persistence\n      }).subscribe(() => {\n        console.log('persisted data');\n      });\n      ;\n    } else {\n      console.log('detected form invalid');\n    }\n    // Currently PanelPageState ONLY uses the cache because noop data service is used. That has to change...\n    // Experimental only - state forms\n    /*const selectEntities = (entities: EntityCollection<PanelPageState>) => entities.entities;\n    const selectById = ({ id }: { id: string }) => createSelector(\n      selectEntities,\n      entities => entities[id] ? entities[id] : undefined\n    );\n    this.pageBuilderFacade.getPageInfo$.pipe(\n      tap(p => {\n        console.log('page info', p);\n        // console.log('panel page as form', new PanelPageForm({ panels: this.panelPage.panels.map() }));\n      }),\n      switchMap(p => this.panelPageStateService.collection$.pipe(\n        select(selectById({ id: p.id }))\n      )),\n      tap(s => {\n        console.log('panel page state', s);\n      })\n    ).subscribe();*/\n  }\n  writeValue(val) {\n    if (val) {\n      this.settingsFormArray.setValue(val, {\n        emitEvent: false\n      });\n    }\n  }\n  registerOnChange(fn) {\n    this.settingsFormArray.valueChanges.subscribe(fn);\n  }\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  setDisabledState(isDisabled) {\n    if (isDisabled) {\n      this.settingsFormArray.disable();\n    } else {\n      this.settingsFormArray.enable();\n    }\n  }\n  validate(c) {\n    /*return this.settingsFormArray.statusChanges.pipe(\n      startWith(this.settingsFormArray.status),  // start with the current form status\n      filter((status) => status === 'VALID'),\n      map(() => null),\n      timeout(1000),\n      catchError(() => of({ invalidForm: {valid: false, message: \"content is invalid\"}})),\n      first()\n    );*/\n    return this.pageForm.statusChanges.pipe(startWith(this.pageForm.status),\n    // start with the current form status\n    filter(status => status !== 'PENDING'), debounceTime(1), take(1),\n    // We only want one emit after status changes from PENDING\n    map(status => {\n      return this.pageForm.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"content is invalid\"\n        }\n      }; // I actually loop through the form and collect the errors, but for validity just return this works fine\n    }));\n    // return of(this.settingsFormArray.valid ? null : { invalidForm: {valid: false, message: \"content is invalid\"}});\n  }\n  static {\n    this.\u0275fac = function PanelPageComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PanelPageComponent)(i0.\u0275\u0275directiveInject(PLATFORM_ID), i0.\u0275\u0275directiveInject(MEDIA_SETTINGS), i0.\u0275\u0275directiveInject(i8.Store), i0.\u0275\u0275directiveInject(i2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i0.ElementRef), i0.\u0275\u0275directiveInject(i9.InlineContextResolverService), i0.\u0275\u0275directiveInject(i1.PageBuilderFacade), i0.\u0275\u0275directiveInject(i3.ContentPluginManager), i0.\u0275\u0275directiveInject(i9.ContextPluginManager), i0.\u0275\u0275directiveInject(i10.LayoutPluginManager), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i11.StyleLoaderService), i0.\u0275\u0275directiveInject(i12.HttpClient), i0.\u0275\u0275directiveInject(i1.CssHelperService), i0.\u0275\u0275directiveInject(i13.AttributeSerializerService), i0.\u0275\u0275directiveInject(i1.FormService), i0.\u0275\u0275directiveInject(i1.PanelsContextService), i0.\u0275\u0275directiveInject(i11.AsyncApiCallHelperService), i0.\u0275\u0275directiveInject(i14.CrudDataHelperService), i0.\u0275\u0275directiveInject(i5.EntityDefinitionService), i0.\u0275\u0275directiveInject(i0.NgZone), i0.\u0275\u0275directiveInject(i15.PersistService), i0.\u0275\u0275directiveInject(i16.StylizerService), i0.\u0275\u0275directiveInject(i16.ClassifyService), i0.\u0275\u0275directiveInject(i17.FilesService), i0.\u0275\u0275directiveInject(i18.AuthFacade), i0.\u0275\u0275directiveInject(i4.ParamEvaluatorService), i0.\u0275\u0275directiveInject(i0.Renderer2), i0.\u0275\u0275directiveInject(i19.InteractionEventPluginManager), i0.\u0275\u0275directiveInject(i19.InteractionHandlerPluginManager), i0.\u0275\u0275directiveInject(i5.EntityServices));\n    };\n  }\n  static {\n    this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n      type: PanelPageComponent,\n      selectors: [[\"classifieds-ui-panel-page\"]],\n      viewQuery: function PanelPageComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.\u0275\u0275viewQuery(GridLayoutComponent, 5);\n          i0.\u0275\u0275viewQuery(_c1, 7);\n          i0.\u0275\u0275viewQuery(LayoutRendererHostDirective, 5);\n          i0.\u0275\u0275viewQuery(RenderPanelComponent, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.gridLayout = _t.first);\n          i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.renderPanelTpl = _t.first);\n          i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.layoutRendererHost = _t.first);\n          i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.renderedPanels = _t);\n        }\n      },\n      hostVars: 2,\n      hostBindings: function PanelPageComponent_HostBindings(rf, ctx) {\n        if (rf & 2) {\n          i0.\u0275\u0275classProp(\"panel-page\", true);\n        }\n      },\n      inputs: {\n        id: \"id\",\n        panelPage: \"panelPage\",\n        nested: \"nested\",\n        contexts: \"contexts\",\n        ancestory: \"ancestory\",\n        css: \"css\",\n        listeners: \"listeners\",\n        resolvedContext: \"resolvedContext\"\n      },\n      standalone: false,\n      features: [i0.\u0275\u0275ProvidersFeature([{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => PanelPageComponent),\n        multi: true\n      },\n      /*{\n        provide: NG_VALIDATORS,\n        useExisting: forwardRef(() => PanelPageComponent),\n        multi: true\n      },*/\n      {\n        provide: NG_ASYNC_VALIDATORS,\n        useExisting: forwardRef(() => PanelPageComponent),\n        multi: true\n      }])],\n      decls: 5,\n      vars: 1,\n      consts: [[\"renderPanelTpl\", \"\"], [3, \"formGroup\"], [\"classifiedsUiLayoutRendererHost\", \"\"], [\"formArrayName\", \"panels\"], [3, \"formControlName\", \"panel\", \"nested\", \"contexts\", \"resolvedContext\", \"contextsChanged\", \"displayType\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\"]],\n      template: function PanelPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.\u0275\u0275elementStart(0, \"div\", 1);\n          i0.\u0275\u0275elementContainerStart(1);\n          i0.\u0275\u0275template(2, PanelPageComponent_ng_template_2_Template, 0, 0, \"ng-template\", 2);\n          i0.\u0275\u0275elementContainerEnd();\n          i0.\u0275\u0275elementEnd();\n          i0.\u0275\u0275template(3, PanelPageComponent_ng_template_3_Template, 3, 12, \"ng-template\", null, 0, i0.\u0275\u0275templateRefExtractor);\n        }\n        if (rf & 2) {\n          i0.\u0275\u0275property(\"formGroup\", ctx.pageForm);\n        }\n      },\n      dependencies: [i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i2.FormArrayName, RenderPanelComponent, LayoutRendererHostDirective],\n      styles: [\"[_nghost-%COMP%]     gridster{background-color:#fff}[_nghost-%COMP%]     gridster-item{background-color:#fff}\"]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet EmptyLayoutComponent = /*#__PURE__*/(() => {\n  class EmptyLayoutComponent {\n    static {\n      this.\u0275fac = function EmptyLayoutComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || EmptyLayoutComponent)();\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: EmptyLayoutComponent,\n        selectors: [[\"classifieds-ui-empty-layout\"]],\n        standalone: false,\n        decls: 1,\n        vars: 0,\n        template: function EmptyLayoutComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275text(0, \"empty layout content\");\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return EmptyLayoutComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RenderDialogComponent = /*#__PURE__*/(() => {\n  class RenderDialogComponent {\n    constructor(data,\n    // Accept panelPageId via dialog data\n    dialog) {\n      this.dialog = dialog;\n      this.panelPageId = data.panelPageId || ''; // Assign the incoming panelPageId to the local property\n    }\n    // Method to close the dialog\n    onClose() {\n      this.dialog.closeAll();\n    }\n    static {\n      this.\u0275fac = function RenderDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RenderDialogComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialog));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RenderDialogComponent,\n        selectors: [[\"quell-render-dialog\"]],\n        standalone: false,\n        decls: 7,\n        vars: 1,\n        consts: [[\"mat-dialog-title\", \"\"], [3, \"id\"], [\"mat-button\", \"\", 3, \"click\"]],\n        template: function RenderDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"h2\", 0);\n            i0.\u0275\u0275text(1, \"Panel Page\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(2, \"mat-dialog-content\");\n            i0.\u0275\u0275element(3, \"classifieds-ui-panel-page\", 1);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(4, \"mat-dialog-actions\")(5, \"button\", 2);\n            i0.\u0275\u0275listener(\"click\", function RenderDialogComponent_Template_button_click_5_listener() {\n              return ctx.onClose();\n            });\n            i0.\u0275\u0275text(6, \"Close\");\n            i0.\u0275\u0275elementEnd()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275advance(3);\n            i0.\u0275\u0275property(\"id\", ctx.panelPageId);\n          }\n        },\n        dependencies: [i2$1.MatButton, i1$1.MatDialogTitle, i1$1.MatDialogActions, i1$1.MatDialogContent, PanelPageComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return RenderDialogComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// Keeps track of throttle state per unique form\nconst formThrottleMap = new Map();\nconst formProcessingMap = new Map();\nconst interationHandlerFormSubmit = ({\n  pageBuilderFacade,\n  formService,\n  persistService,\n  transversePanelpageComponentSvc\n}) => {\n  return new InteractionHandlerPlugin({\n    id: 'panels_form_submit',\n    title: 'Submit Panels Form',\n    handle: ({\n      handlerParams,\n      panelPageComponent\n    }) => {\n      const formName = handlerParams?.name;\n      // Return early if no form name is provided\n      if (!formName) {\n        console.log('No form name provided. Ignoring submission request.');\n        return;\n      }\n      // Check if form is already being processed\n      if (formProcessingMap.get(formName)) {\n        console.log(`Form submission is already being processed for: ${formName}`);\n        return;\n      }\n      // Apply throttle: Return if the form is within the 2-second throttle window\n      if (formThrottleMap.get(formName)) {\n        console.log(`Form submission for ${formName} is throttled. Try again later.`);\n        return;\n      }\n      // Mark the form as in progress\n      formProcessingMap.set(formName, true);\n      console.log(`Processing form submission for: ${formName}`);\n      pageBuilderFacade.getForm$(formName).pipe(take(1),\n      // Take a single form at a time\n      tap(panelPageForm => {\n        if (!panelPageForm) {\n          console.log(`Form ${formName} not found.`);\n          return;\n        }\n        if (panelPageForm.valid) {\n          const data = formService.serializeForm(panelPageForm);\n          console.log('Panel Page Form Data:', data);\n          persistService.persist({\n            data,\n            persistence: panelPageForm.persistence\n          }).subscribe({\n            next: () => {\n              console.log('Form Submitted successfully:', formName);\n              alert('Form Submitted');\n            },\n            error: err => {\n              console.error('Error persisting form: ', err);\n            },\n            complete: () => {\n              console.log('Form submission complete for:', formName);\n            }\n          });\n        } else {\n          transversePanelpageComponentSvc.traverseAndVisit(panelPageComponent, component => {\n            if (component instanceof RenderPaneComponent && component.componentRef && component.componentRef.instance && component.componentRef.instance.markAsTouched) {\n              // console.log('marking as touched');\n              component.componentRef.instance.markAsTouched();\n            } else {\n              // console.log('visiting component', component);\n            }\n          });\n          console.log('Form is invalid or unavailable. Skipping processing for:', formName);\n        }\n      }), finalize(() => {\n        // Reset processing state\n        formProcessingMap.delete(formName);\n        // Set throttle state\n        formThrottleMap.set(formName, true);\n        timer(2000).subscribe(() => {\n          // Clear throttle after 2 seconds\n          formThrottleMap.delete(formName);\n        });\n        console.log(`Throttle applied for form: ${formName}`);\n      })).subscribe({\n        error: err => {\n          console.error(`Error occurred during form submission for ${formName}:`, err);\n          // Clean up on error\n          formProcessingMap.delete(formName);\n          formThrottleMap.delete(formName);\n        }\n      });\n    }\n  });\n};\nconst interationHandlerDialog = ({\n  dialog\n}) => {\n  return new InteractionHandlerPlugin({\n    id: 'panels_dialog',\n    title: 'Open Panels Dialog',\n    handle: ({\n      handlerParams\n    }) => {\n      // Extract optional parameters and set defaults\n      const panelPageId = handlerParams?.panelPageId || '';\n      const dialogTitle = handlerParams?.title || 'Panel Page'; // Default title\n      const dialogWidth = handlerParams?.width || '800px'; // Default width\n      // If no panelPageId is provided, log an error and exit early\n      if (!panelPageId) {\n        console.error('No Panel Page ID provided. Cannot open dialog.');\n        return;\n      }\n      // Open the dialog with dynamic properties\n      dialog.open(RenderDialogComponent, {\n        width: dialogWidth,\n        // Use dynamic or default width\n        data: {\n          panelPageId,\n          // Pass the panel page ID\n          title: dialogTitle // Pass the title\n        }\n      });\n    }\n  });\n};\nlet TransversePanelPageComponentService = /*#__PURE__*/(() => {\n  class TransversePanelPageComponentService {\n    /**\n     * Recursively traverses the hierarchy of the panel page components.\n     *\n     * @param component - The starting component to transverse (can be PanelPageComponent, RenderPanelComponent, or RenderPaneComponent).\n     * @param visitorFn - A visitor function that will be called for each component visited in the hierarchy.\n     */\n    traverseAndVisit(component, visitorFn) {\n      if (!component) {\n        return;\n      }\n      // Call the visitor function for the current component\n      visitorFn(component);\n      if (component instanceof PanelPageComponent) {\n        // Traverse all rendered panels in the PanelPageComponent\n        component.renderedPanels.forEach(renderPanelComponent => {\n          this.traverseAndVisit(renderPanelComponent, visitorFn);\n        });\n      } else if (component instanceof RenderPanelComponent) {\n        // Traverse all rendered panes in the RenderPanelComponent\n        component.renderedPanes.forEach(renderPaneComponent => {\n          this.traverseAndVisit(renderPaneComponent, visitorFn);\n        });\n      } else if (component instanceof RenderPaneComponent) {\n        // Check for nested PanelPageComponent inside RenderPaneComponent\n        if (component.panelPageComponent) {\n          this.traverseAndVisit(component.panelPageComponent, visitorFn);\n        }\n      }\n    }\n    static {\n      this.\u0275fac = function TransversePanelPageComponentService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || TransversePanelPageComponentService)();\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: TransversePanelPageComponentService,\n        factory: TransversePanelPageComponentService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return TransversePanelPageComponentService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// import { PanelpageModule } from 'panelpage';\nlet RenderModule = /*#__PURE__*/(() => {\n  class RenderModule {\n    constructor(ihpm, pageBuilderFacade, formService, persistService, dialog, transversePanelpageComponentSvc) {\n      ihpm.register(interationHandlerFormSubmit({\n        pageBuilderFacade,\n        formService,\n        persistService,\n        transversePanelpageComponentSvc\n      }));\n      ihpm.register(interationHandlerDialog({\n        dialog\n      }));\n    }\n    static {\n      this.\u0275fac = function RenderModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RenderModule)(i0.\u0275\u0275inject(i19.InteractionHandlerPluginManager), i0.\u0275\u0275inject(i1.PageBuilderFacade), i0.\u0275\u0275inject(i1.FormService), i0.\u0275\u0275inject(i15.PersistService), i0.\u0275\u0275inject(i1$1.MatDialog), i0.\u0275\u0275inject(TransversePanelPageComponentService));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: RenderModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        imports: [CommonModule,\n        // HttpClientModule,\n        FormsModule, UtilsModule, ReactiveFormsModule, PanelsModule, LayoutModule, MaterialModule\n        // PanelpageModule\n        ]\n      });\n    }\n  }\n  return RenderModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of render\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { EmptyLayoutComponent, PanelPageComponent, RenderModule, RenderPaneComponent, RenderPanelComponent, TransversePanelPageComponentService };\n"],
  "mappings": "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",
  "names": ["i6", "isPlatformServer", "isPlatformBrowser", "CommonModule", "i0", "DOCUMENT", "PLATFORM_ID", "forwardRef", "EventEmitter", "i2", "Validators", "NG_VALUE_ACCESSOR", "NG_ASYNC_VALIDATORS", "FormsModule", "ReactiveFormsModule", "i11", "UtilsModule", "i10", "GridLayoutComponent", "LayoutModule", "i17", "MEDIA_SETTINGS", "i9", "InlineContext", "i1", "PanelPage", "PanelPageForm", "PanelsModule", "Subject", "BehaviorSubject", "combineLatest", "forkJoin", "of", "iif", "Observable", "timer", "map", "tap", "delay", "switchMap", "defaultIfEmpty", "filter", "startWith", "debounceTime", "take", "distinctUntilChanged", "skip", "bufferTime", "takeUntil", "concatMap", "catchError", "finalize", "i16", "isSelectorValid", "ClassClassification", "camelize", "merge", "i3", "i4", "i5", "i8", "i12", "i13", "i14", "i15", "i18", "i19", "InteractionHandlerPlugin", "i1$1", "MAT_DIALOG_DATA", "i2$1", "MaterialModule", "RenderPaneComponent_ng_template_2_Template", "rf", "ctx", "RenderPaneComponent_classifieds_ui_panel_page_3_Template", "ctx_r0", "RenderPaneComponent_classifieds_ui_panel_page_4_Template", "RenderPaneComponent_classifieds_ui_panel_page_5_Template", "_c0", "RenderPanelComponent_ng_template_3_Template", "RenderPanelComponent_ng_container_4_ng_container_2_classifieds_ui_render_pane_3_Template", "pane_r1", "j_r2", "ctx_r2", "panes_r4", "RenderPanelComponent_ng_container_4_ng_container_2_Template", "RenderPanelComponent_ng_container_4_ng_container_3_classifieds_ui_render_pane_1_Template", "pane_r5", "j_r6", "RenderPanelComponent_ng_container_4_ng_container_3_Template", "RenderPanelComponent_ng_container_4_Template", "_c1", "PanelPageComponent_ng_template_2_Template", "PanelPageComponent_ng_template_3_Template", "i_r1", "ctx_r1", "PaneContentHostDirective", "viewContainerRef", "__ngFactoryType__", "LayoutRendererHostDirective", "RenderPaneComponent", "resolvedContext", "css", "listeners", "PanelPage", "document", "platformId", "el", "renderer2", "componentFactoryResolver", "panelHandler", "fb", "cpm", "cssHelper", "paneStateService", "paramEvaluatorService", "renderer", "es", "Subject", "BehaviorSubject", "combineLatest", "map", "s", "classes", "tap", "_", "nestedCss", "__", "nestedClasses", "rebuiltCss", "p", "c", "__spreadValues", "v", "k", "rebuiltClasses", "delay", "keys", "isSelectorValid", "classKeys", "keyIndex", "matchedNodes", "len", "i", "cKeys", "cLen", "j", "ClassClassification", "rules", "prop", "camelize", "l", "switchMap", "forkJoin", "of", "paramNames", "params", "__spreadProps", "defaultIfEmpty", "listenerParams", "listenerLen", "targets", "t", "e", "handlerParams", "Validators", "state", "pageState", "filter", "rc", "changes", "ancestoryWithSelf", "n", "index", "val", "fn", "isDisabled", "startWith", "status", "debounceTime", "take", "componentFactory", "InlineContext", "DOCUMENT", "PLATFORM_ID", "PanelPageComponent", "_t", "NG_VALUE_ACCESSOR", "forwardRef", "NG_ASYNC_VALIDATORS", "RenderPanelComponent", "contextChanged", "contextsChanged", "indexPosition", "ancestory", "hostEl", "panelResolverService", "spm", "styleResolverService", "EventEmitter", "panes", "contexts", "resolvedPanes", "originMappings", "stylePlugin", "componentRef", "_PanelPageComponent", "id", "panelPage", "nested", "mediaSettings", "routerStore", "inlineContextResolver", "pageBuilderFacade", "cxm", "lpm", "styleLoader", "http", "attributeSerializer", "formService", "panelsContextService", "asyncApiCallHelperSvc", "crudDataHelperService", "entityDefinitionService", "ngZone", "persistService", "stylizerService", "classifyService", "fileService", "authFacade", "iepm", "ihpm", "v4_default", "newGroup", "distinctUntilChanged", "iif", "Observable", "obs", "metadata", "objects", "contentPlugins", "pane", "paneContexts", "plugins", "globalPlugins", "short$", "isPlatformServer", "interval", "skip", "bufferTime", "buffered", "cName", "cValue", "takeUntil", "plugin", "layoutRendererRef", "isPlatformBrowser", "stylesheet", "u", "isAuthenticated", "concatMap", "k2", "p2", "merge", "json", "evt", "valid", "persistence", "form", "PanelPageForm", "file", "catchError", "cssFile", "managedCss", "managedCssRaw", "panelPageForm", "data", "MEDIA_SETTINGS", "GridLayoutComponent", "EmptyLayoutComponent", "RenderDialogComponent", "dialog", "MAT_DIALOG_DATA", "formThrottleMap", "formProcessingMap", "interationHandlerFormSubmit", "transversePanelpageComponentSvc", "InteractionHandlerPlugin", "panelPageComponent", "formName", "err", "component", "finalize", "timer", "interationHandlerDialog", "panelPageId", "dialogTitle", "dialogWidth", "TransversePanelPageComponentService", "visitorFn", "renderPanelComponent", "renderPaneComponent", "RenderModule", "CommonModule", "FormsModule", "UtilsModule", "ReactiveFormsModule", "PanelsModule", "LayoutModule", "MaterialModule"]
}
