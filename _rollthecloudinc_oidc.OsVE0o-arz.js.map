{
  "version": 3,
  "sources": ["../../@rollthecloudinc/oidc/fesm2022/rollthecloudinc-oidc.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { makeStateKey, Injectable, Inject, InjectionToken, PLATFORM_ID, Injector, TransferState, provideAppInitializer, inject, NgModule } from '@angular/core';\nimport * as i1 from '@ngrx/effects';\nimport { createEffect, ofType, EffectsModule } from '@ngrx/effects';\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport Cookies from 'js-cookie';\nimport * as numberString from 'number-string';\nimport * as i3 from 'oidc-client-ts';\nimport { UserManager, WebStorageStateStore } from 'oidc-client-ts';\nimport * as i2 from '@ngrx/data';\nimport { ofEntityType, ofEntityOp, EntityOp } from '@ngrx/data';\nimport { tap, switchMap, take, concatMap } from 'rxjs/operators';\nimport * as i1$1 from '@rollthecloudinc/auth';\nimport { AuthActions, AuthFacade, AuthModule } from '@rollthecloudinc/auth';\nimport { Observable } from 'rxjs';\nclass ClientSettings {\n  constructor(data) {\n    if (data) {\n      this.authority = data.authority;\n      this.client_id = data.client_id;\n      this.redirect_uri = data.redirect_uri;\n      this.silent_redirect_uri = data.silent_redirect_uri;\n      this.response_type = data.response_type;\n      this.scope = data.scope;\n      this.filterProtocolClaims = data.filterProtocolClaims;\n      this.loadUserInfo = data.loadUserInfo;\n      this.automaticSilentRenew = data.automaticSilentRenew;\n      this.metadata = {\n        ...data.metadata\n      };\n      this.userStore = data.userStore ? data.userStore : undefined;\n      this.stateStore = data.userStore ? data.stateStore : undefined;\n    }\n  }\n}\nconst AUTH_KEY = makeStateKey('auth');\nlet AuthWebStorageService = /*#__PURE__*/(() => {\n  class AuthWebStorageService {\n    // private res: Response;\n    set request(req) {\n      this.req = req;\n    }\n    /*set response(res: Response) {\n      this.res = res;\n    }*/\n    constructor(clientSettings, platformId, transferState) {\n      this.clientSettings = clientSettings;\n      this.platformId = platformId;\n      this.transferState = transferState;\n      this.data = {};\n      this.isBrowser = isPlatformBrowser(this.platformId);\n      this.cookieMap = {\n        oa: 'access_token',\n        oi: 'id_token',\n        or: 'refresh_token',\n        os: 'scope',\n        oe: 'expires_at',\n        op: 'profile'\n      };\n      this.tokenKey = `oidc.user:${this.clientSettings.authority}:${this.clientSettings.client_id}`;\n    }\n    init() {\n      if (this.isBrowser) {\n        if (sessionStorage.getItem(this.tokenKey)) {\n          this.setItem(this.tokenKey, sessionStorage.getItem(this.tokenKey));\n        } else if (this.transferState.hasKey(AUTH_KEY)) {\n          const value = this.transferState.get(AUTH_KEY, undefined);\n          if (value) {\n            this.setItem(this.tokenKey, value);\n          }\n        } else {\n          for (let i = 0; i < sessionStorage.length; i++) {\n            const key = sessionStorage.key(i);\n            this.setItem(key, sessionStorage.getItem(key));\n          }\n        }\n      } else {\n        const token = {\n          token_type: 'Bearer'\n        };\n        let expires;\n        Object.getOwnPropertyNames(this.cookieMap).forEach(k => {\n          let value = this.getCookie(k);\n          if (value && value !== '') {\n            value = this.translateFromCookieValue(k, value);\n            if (k === 'oe') {\n              expires = value;\n            } else {\n              token[this.cookieMap[k]] = value;\n            }\n          }\n        });\n        if (token.access_token) {\n          this.data[this.tokenKey] = JSON.stringify(token);\n          this.transferState.set(AUTH_KEY, JSON.stringify({\n            ...token,\n            expires_at: expires\n          }));\n        }\n      }\n    }\n    getItem(key) {\n      return this.data[key];\n    }\n    setItem(key, value) {\n      if (key === this.tokenKey) {\n        const data = JSON.parse(value);\n        Object.getOwnPropertyNames(this.cookieMap).forEach(k => {\n          this.setCookie(k, this.translateCookieValue(k, data[this.cookieMap[k]]));\n        });\n      }\n      if (this.isBrowser) {\n        sessionStorage.setItem(key, value);\n      }\n      this.data[key] = value;\n    }\n    removeItem(key) {\n      this.removeCookie(key);\n      if (this.isBrowser) {\n        sessionStorage.removeItem(key);\n      }\n      delete this.data[key];\n    }\n    get length() {\n      return Object.getOwnPropertyNames(this.data).length;\n    }\n    key(index) {\n      console.log(`index()`);\n      return Object.getOwnPropertyNames(this.data)[index];\n    }\n    getCookie(key) {\n      if (this.isBrowser) {\n        return Cookies.get(key);\n      } else if (this.req) {\n        return this.req.cookies[key] ?? '';\n      }\n    }\n    setCookie(key, value) {\n      if (this.isBrowser) {\n        Cookies.set(key, value);\n      } else {\n        // this.res.cookie(key, value);\n      }\n    }\n    removeCookie(key) {\n      if (this.isBrowser) {\n        Cookies.remove(key);\n      } else {\n        // this.res.cookie(key, value);\n      }\n    }\n    translateCookieValue(key, value) {\n      switch (key) {\n        case 'os':\n          return value.split(' ').join('|');\n        case 'oe':\n          return `${value}`;\n        case 'op':\n          return JSON.stringify(value);\n        default:\n          return value;\n      }\n    }\n    translateFromCookieValue(key, value) {\n      switch (key) {\n        case 'os':\n          return value.split('|').join(' ');\n        case 'oe':\n          return numberString.toNumber(value);\n        case 'op':\n          return JSON.parse(value);\n        default:\n          return value;\n      }\n    }\n    clear() {}\n    static {\n      this.\u0275fac = function AuthWebStorageService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AuthWebStorageService)(i0.\u0275\u0275inject(ClientSettings), i0.\u0275\u0275inject(Object), i0.\u0275\u0275inject(i0.TransferState));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: AuthWebStorageService,\n        factory: AuthWebStorageService.\u0275fac\n      });\n    }\n  }\n  return AuthWebStorageService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// import { REQUEST, RESPONSE } from '@nguniversal/express-engine/tokens';\nconst userManagerFactory = (clientSettings, authWebStorage) => {\n  const userManager = new UserManager(new ClientSettings({\n    ...clientSettings,\n    stateStore: new WebStorageStateStore({\n      store: authWebStorage\n    }),\n    userStore: new WebStorageStateStore({\n      store: authWebStorage\n    })\n  }));\n  return userManager;\n};\nconst initAuthFactory = (userManager, authFacade, platformId) => {\n  return () => {\n    return new Promise(res => {\n      userManager.getUser().then(u => {\n        if (u) {\n          authFacade.setUser(u);\n          setTimeout(() => res());\n        } else {\n          res();\n        }\n      });\n    });\n  };\n};\nconst authWebStorageFactory = (clientSettings, platformId, injector, transferState) => {\n  const svc = new AuthWebStorageService(clientSettings, platformId, transferState);\n  /**\n   * @todo: This is only thing breaking lambda. For some reason this causes lambda to fail.\n   * However, once commented out lambda runs fine but loose auth context on server.\n   */\n  if (isPlatformServer(platformId)) {\n    try {\n      // svc.request = injector.get(REQUEST);\n    } catch (e) {}\n    // svc.request = injector.injector.get(REQUEST);\n    // svc.response = injector.get(RESPONSE);\n  }\n  svc.init();\n  return svc;\n};\n\n// import * as Cookies from 'js-cookie';\nlet OidcAuthEffects = /*#__PURE__*/(() => {\n  class OidcAuthEffects {\n    constructor(actions$, userManager, entityActionFactory) {\n      this.actions$ = actions$;\n      this.userManager = userManager;\n      this.entityActionFactory = entityActionFactory;\n      this.login$ = createEffect(() => this.actions$.pipe(ofType(AuthActions.AuthActionTypes.Login), tap(() => {\n        this.userManager.signinRedirect();\n      })), {\n        dispatch: false\n      });\n      this.logout$ = createEffect(() => this.actions$.pipe(ofType(AuthActions.AuthActionTypes.Logout), tap(() => {\n        this.userManager.signoutRedirect();\n      })), {\n        dispatch: false\n      });\n      this.completeAuthentication$ = createEffect(() => this.actions$.pipe(ofType(AuthActions.AuthActionTypes.CompleteAuthentication), switchMap(() => new Observable(sub => {\n        this.userManager.signinRedirectCallback().then(user => {\n          sub.next(new AuthActions.SetUser(user));\n          sub.complete();\n        });\n      }))));\n      /*setUser = createEffect(() =>\n        this.actions$.pipe(\n          ofType(AuthActionTypes.SetUser),\n          map(() => this.entityActionFactory.create<Cookie>('Cookie', EntityOp.QUERY_ALL))\n        )\n      );*/\n      this.loadCookies$ = createEffect(() => this.actions$.pipe(ofEntityType('Cookie'), ofEntityOp([EntityOp.QUERY_ALL_SUCCESS]), tap(action => console.log(action.payload.data)), tap(action => {\n        // action.payload.data.forEach(c => Cookies.set(c.name, c.value, { expires: new Date(new Date().getTime() + 1 * 3600 * 1000) }));\n      })), {\n        dispatch: false\n      });\n    }\n    static {\n      this.\u0275fac = function OidcAuthEffects_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || OidcAuthEffects)(i0.\u0275\u0275inject(i1.Actions), i0.\u0275\u0275inject(UserManager), i0.\u0275\u0275inject(i2.EntityActionFactory));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: OidcAuthEffects,\n        factory: OidcAuthEffects.\u0275fac\n      });\n    }\n  }\n  return OidcAuthEffects;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst entityMetadata = {\n  Cookie: {\n    entityName: 'Cookie'\n  }\n};\nconst CLIENT_SETTINGS = /*#__PURE__*/new InjectionToken('ClientSettings');\nlet OidcModule = /*#__PURE__*/(() => {\n  class OidcModule {\n    constructor(eds) {\n      eds.registerMetadataMap(entityMetadata);\n    }\n    static forRoot() {\n      return {\n        ngModule: OidcModule,\n        providers: [{\n          provide: AuthWebStorageService,\n          useFactory: authWebStorageFactory,\n          deps: [CLIENT_SETTINGS, PLATFORM_ID, Injector, TransferState]\n        }, {\n          provide: UserManager,\n          useFactory: userManagerFactory,\n          deps: [CLIENT_SETTINGS, AuthWebStorageService]\n        }, provideAppInitializer(() => {\n          const initializerFn = initAuthFactory(inject(UserManager), inject(AuthFacade), inject(PLATFORM_ID));\n          return initializerFn();\n        })]\n      };\n    }\n    static {\n      this.\u0275fac = function OidcModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || OidcModule)(i0.\u0275\u0275inject(i2.EntityDefinitionService));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: OidcModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        imports: [AuthModule, EffectsModule.forFeature([OidcAuthEffects])]\n      });\n    }\n  }\n  return OidcModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TokenInterceptor = /*#__PURE__*/(() => {\n  class TokenInterceptor {\n    constructor(authFacade /*, private oktaAuth: OktaAuthService*/) {\n      this.authFacade = authFacade;\n    }\n    intercept(req, next) {\n      return this.authFacade.idToken$ /*this.getAccessToken()*/.pipe(take(1), concatMap(t => {\n        let headers = req.headers;\n        if (req.url.indexOf('/awproxy') !== -1) {\n          // headers = headers.delete('cookie');\n        }\n        if (t && req.url.indexOf('github') === -1 && req.url.indexOf('cloudfront') === -1 && req.url.indexOf('cloudinary') === -1 && req.url.indexOf('carquery') === -1 && req.url.indexOf('gateway.marvel.com') === -1 && req.url.indexOf('hereapi.com') === -1 && req.url.indexOf('.es.') === -1 && req.url.indexOf('.s3.') === -1 && req.url.indexOf('/awproxy') === -1) {\n          headers = headers.set('Authorization', t);\n          const authReq = req.clone({\n            // headers: req.headers.set('Authorization', `Bearer ${t}`)\n            headers\n          });\n          return next.handle(authReq);\n        } else {\n          const cReq = req.clone({\n            headers\n          });\n          return next.handle(cReq);\n        }\n      }));\n    }\n    static {\n      this.\u0275fac = function TokenInterceptor_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || TokenInterceptor)(i0.\u0275\u0275inject(i1$1.AuthFacade));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: TokenInterceptor,\n        factory: TokenInterceptor.\u0275fac\n      });\n    }\n  }\n  return TokenInterceptor;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of oidc\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CLIENT_SETTINGS, ClientSettings, OidcModule, TokenInterceptor };\n"],
  "mappings": "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",
  "names": ["numberString", "i0", "makeStateKey", "InjectionToken", "PLATFORM_ID", "Injector", "TransferState", "provideAppInitializer", "inject", "i1", "createEffect", "ofType", "EffectsModule", "isPlatformBrowser", "isPlatformServer", "Cookies", "UserManager", "WebStorageStateStore", "i2", "ofEntityType", "ofEntityOp", "EntityOp", "tap", "switchMap", "take", "concatMap", "i1$1", "AuthActions", "AuthFacade", "AuthModule", "Observable", "ClientSettings", "data", "__spreadValues", "AUTH_KEY", "makeStateKey", "AuthWebStorageService", "req", "clientSettings", "platformId", "transferState", "isPlatformBrowser", "value", "i", "key", "token", "expires", "k", "__spreadProps", "index", "Cookies", "__ngFactoryType__", "userManagerFactory", "authWebStorage", "UserManager", "WebStorageStateStore", "initAuthFactory", "userManager", "authFacade", "res", "u", "authWebStorageFactory", "injector", "svc", "isPlatformServer", "OidcAuthEffects", "actions$", "entityActionFactory", "createEffect", "ofType", "AuthActions", "tap", "switchMap", "Observable", "sub", "user", "ofEntityType", "ofEntityOp", "EntityOp", "action", "entityMetadata", "CLIENT_SETTINGS", "InjectionToken", "OidcModule", "eds", "PLATFORM_ID", "Injector", "TransferState", "provideAppInitializer", "inject", "AuthFacade", "AuthModule", "EffectsModule", "TokenInterceptor", "next", "take", "concatMap", "t", "headers", "authReq", "cReq"]
}
