{
  "version": 3,
  "sources": ["../../@rollthecloudinc/render/fesm2022/rollthecloudinc-render.mjs"],
  "sourcesContent": ["import * as i16 from '@angular/common';\nimport { isPlatformServer, isPlatformBrowser, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Directive, PLATFORM_ID, forwardRef, ViewChild, Input, Inject, Component, DOCUMENT, HostBinding, EventEmitter, ViewChildren, Output, NgModule } from '@angular/core';\nimport * as i2 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, NG_ASYNC_VALIDATORS, Validators, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport * as i7 from '@rollthecloudinc/utils';\nimport { UtilsModule } from '@rollthecloudinc/utils';\nimport * as i6 from '@rollthecloudinc/layout';\nimport { GridLayoutComponent, LayoutModule } from '@rollthecloudinc/layout';\nimport * as i14 from '@rollthecloudinc/media';\nimport { MEDIA_SETTINGS } from '@rollthecloudinc/media';\nimport * as i3 from '@rollthecloudinc/context';\nimport { InlineContext } from '@rollthecloudinc/context';\nimport * as i4 from '@rollthecloudinc/panels';\nimport { PanelPageForm, PanelPage, PanelsModule } from '@rollthecloudinc/panels';\nimport { Subject, BehaviorSubject, combineLatest, iif, of, Observable, forkJoin } from 'rxjs';\nimport { tap, filter, debounceTime, distinctUntilChanged, map, switchMap, take, skip, bufferTime, takeUntil, delay, concatMap, catchError, defaultIfEmpty, startWith } from 'rxjs/operators';\nimport * as uuid from 'uuid';\nimport * as i13 from '@rollthecloudinc/sheath';\nimport { ClassClassification, isSelectorValid } from '@rollthecloudinc/sheath';\nimport { camelize } from 'inflected';\nimport merge from 'deepmerge-json';\nimport * as i1 from '@ngrx/store';\nimport * as i5 from '@rollthecloudinc/content';\nimport * as i8 from '@angular/common/http';\nimport * as i9 from '@rollthecloudinc/attributes';\nimport * as i10 from '@rollthecloudinc/crud';\nimport * as i11 from '@ngrx/data';\nimport * as i12 from '@rollthecloudinc/refinery';\nimport * as i15 from '@rollthecloudinc/auth';\nimport * as i1$1 from '@rollthecloudinc/detour';\nimport { InteractionHandlerPlugin } from '@rollthecloudinc/detour';\nconst _c0 = [\"renderPanelTpl\"];\nfunction PanelPageComponent_ng_template_2_Template(rf, ctx) {}\nfunction PanelPageComponent_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"button\", 4);\n    i0.\u0275\u0275listener(\"click\", function PanelPageComponent_button_3_Template_button_click_0_listener() {\n      i0.\u0275\u0275restoreView(_r1);\n      const ctx_r1 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r1.submit());\n    });\n    i0.\u0275\u0275text(1, \"Submit\");\n    i0.\u0275\u0275elementEnd();\n  }\n}\nfunction PanelPageComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0, 1)(1, 5);\n    i0.\u0275\u0275element(2, \"classifieds-ui-render-panel\", 6);\n    i0.\u0275\u0275elementContainerEnd()();\n  }\n  if (rf & 2) {\n    const i_r3 = ctx.i;\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"formGroup\", ctx_r1.pageForm);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"formControlName\", i_r3)(\"panel\", ctx_r1.panelPageCached.panels[i_r3])(\"nested\", ctx_r1.nested$.value)(\"contexts\", ctx_r1.contexts$.value)(\"resolvedContext\", ctx_r1.resolvedContext)(\"contextsChanged\", ctx_r1.contextsChanged)(\"displayType\", ctx_r1.panelPageCached.displayType)(\"indexPosition\", i_r3)(\"css\", ctx_r1.filteredCss)(\"listeners\", ctx_r1.filteredListeners)(\"ancestory\", ctx_r1.ancestory$.value);\n  }\n}\nfunction RenderPaneComponent_ng_template_2_Template(rf, ctx) {}\nfunction RenderPaneComponent_classifieds_ui_panel_page_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-panel-page\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"panelPage\", ctx_r0.panelPage)(\"nested\", true)(\"contexts\", ctx_r0.contexts)(\"css\", ctx_r0.filteredCss)(\"listeners\", ctx_r0.filteredListeners)(\"ancestory\", ctx_r0.ancestoryWithSelf);\n  }\n}\nfunction RenderPaneComponent_classifieds_ui_panel_page_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-panel-page\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"id\", ctx_r0.linkedPageId)(\"nested\", true)(\"contexts\", ctx_r0.contexts)(\"ancestory\", ctx_r0.ancestoryWithSelf);\n  }\n}\nfunction RenderPaneComponent_classifieds_ui_panel_page_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-panel-page\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"panelPage\", ctx_r0.embedPanel)(\"nested\", true)(\"contexts\", ctx_r0.contexts)(\"css\", ctx_r0.filteredCss)(\"listeners\", ctx_r0.filteredListeners)(\"ancestory\", ctx_r0.ancestoryWithSelf);\n  }\n}\nconst _c1 = [\"panes\"];\nfunction RenderPanelComponent_ng_template_3_Template(rf, ctx) {}\nfunction RenderPanelComponent_ng_container_4_ng_container_2_classifieds_ui_render_pane_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-render-pane\", 8);\n  }\n  if (rf & 2) {\n    const pane_r1 = ctx.$implicit;\n    const j_r2 = ctx.index;\n    const ctx_r2 = i0.\u0275\u0275nextContext(3);\n    const panes_r4 = i0.\u0275\u0275reference(1);\n    i0.\u0275\u0275property(\"formControlName\", j_r2)(\"pluginName\", pane_r1.contentPlugin)(\"settings\", pane_r1.settings)(\"name\", pane_r1.name)(\"label\", pane_r1.label)(\"originPane\", ctx_r2.panel.panes[ctx_r2.originMappings[j_r2]])(\"contexts\", pane_r1.contexts)(\"displayType\", ctx_r2.displayType)(\"resolvedContext\", pane_r1.resolvedContext)(\"indexPosition\", j_r2)(\"css\", ctx_r2.filteredCss)(\"listeners\", ctx_r2.filteredListeners)(\"ancestory\", ctx_r2.ancestoryWithSelf$.value)(\"panes\", panes_r4)(\"originPanes\", ctx_r2.originPanes);\n  }\n}\nfunction RenderPanelComponent_ng_container_4_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0)(1)(2, 6);\n    i0.\u0275\u0275template(3, RenderPanelComponent_ng_container_4_ng_container_2_classifieds_ui_render_pane_3_Template, 1, 15, \"classifieds-ui-render-pane\", 7);\n    i0.\u0275\u0275elementContainerEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275advance(3);\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r2.resolvedPanes);\n  }\n}\nfunction RenderPanelComponent_ng_container_4_ng_container_3_classifieds_ui_render_pane_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-render-pane\", 10);\n  }\n  if (rf & 2) {\n    const pane_r5 = ctx.$implicit;\n    const j_r6 = ctx.index;\n    const ctx_r2 = i0.\u0275\u0275nextContext(3);\n    const panes_r4 = i0.\u0275\u0275reference(1);\n    i0.\u0275\u0275property(\"pluginName\", pane_r5.contentPlugin)(\"settings\", pane_r5.settings)(\"name\", pane_r5.name)(\"label\", pane_r5.label)(\"originPane\", ctx_r2.panel.panes[ctx_r2.originMappings[j_r6]])(\"contexts\", pane_r5.contexts)(\"linkedPageId\", pane_r5.linkedPageId)(\"displayType\", ctx_r2.displayType)(\"resolvedContext\", pane_r5.resolvedContext)(\"indexPosition\", j_r6)(\"css\", ctx_r2.filteredCss)(\"listeners\", ctx_r2.filteredListeners)(\"ancestory\", ctx_r2.ancestoryWithSelf$.value)(\"panes\", panes_r4)(\"originPanes\", ctx_r2.originPanes);\n  }\n}\nfunction RenderPanelComponent_ng_container_4_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0);\n    i0.\u0275\u0275template(1, RenderPanelComponent_ng_container_4_ng_container_3_classifieds_ui_render_pane_1_Template, 1, 15, \"classifieds-ui-render-pane\", 9);\n    i0.\u0275\u0275elementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r2.resolvedPanes);\n  }\n}\nfunction RenderPanelComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0)(1, 4);\n    i0.\u0275\u0275template(2, RenderPanelComponent_ng_container_4_ng_container_2_Template, 4, 1, \"ng-container\", 5)(3, RenderPanelComponent_ng_container_4_ng_container_3_Template, 2, 1, \"ng-container\", 5);\n    i0.\u0275\u0275elementContainerEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngSwitch\", ctx_r2.displayType);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngSwitchCase\", \"form\");\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngSwitchCase\", \"page\");\n  }\n}\nlet PaneContentHostDirective = /*#__PURE__*/(() => {\n  class PaneContentHostDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n    static {\n      this.\u0275fac = function PaneContentHostDirective_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PaneContentHostDirective)(i0.\u0275\u0275directiveInject(i0.ViewContainerRef));\n      };\n    }\n    static {\n      this.\u0275dir = /* @__PURE__ */i0.\u0275\u0275defineDirective({\n        type: PaneContentHostDirective,\n        selectors: [[\"\", \"classifiedsUiPaneContentHost\", \"\"]],\n        standalone: false\n      });\n    }\n  }\n  return PaneContentHostDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet LayoutRendererHostDirective = /*#__PURE__*/(() => {\n  class LayoutRendererHostDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n    static {\n      this.\u0275fac = function LayoutRendererHostDirective_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LayoutRendererHostDirective)(i0.\u0275\u0275directiveInject(i0.ViewContainerRef));\n      };\n    }\n    static {\n      this.\u0275dir = /* @__PURE__ */i0.\u0275\u0275defineDirective({\n        type: LayoutRendererHostDirective,\n        selectors: [[\"\", \"classifiedsUiLayoutRendererHost\", \"\"]],\n        standalone: false\n      });\n    }\n  }\n  return LayoutRendererHostDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass PanelPageComponent {\n  static {\n    this.registredContextListeners = new Set();\n  }\n  set id(id) {\n    this.id$.next(id);\n  }\n  set panelPage(panelPage) {\n    this.panelPage$.next(panelPage);\n  }\n  set nested(nested) {\n    this.nested$.next(nested);\n  }\n  set contexts(contexts) {\n    this.contexts$.next(contexts);\n  }\n  set ancestory(ancestory) {\n    this.ancestory$.next(ancestory);\n  }\n  set css(css) {\n    this.css$.next(css);\n  }\n  set listeners(listeners) {\n    this.listeners$.next(listeners);\n  }\n  get panelsArray() {\n    return this.pageForm.get('panels');\n  }\n  constructor(platformId, mediaSettings, routerStore, fb, el, inlineContextResolver,\n  // private contextManager: ContextManagerService,\n  pageBuilderFacade, cpm, cxm, lpm, componentFactoryResolver, styleLoader,\n  // I don't feel good about this but f**k it for now til I figure this out\n  http, cssHelper, attributeSerializer, formService, panelsContextService, asyncApiCallHelperSvc, crudDataHelperService, entityDefinitionService, ngZone, persistService, stylizerService, classifyService, fileService, authFacade, es) {\n    this.platformId = platformId;\n    this.mediaSettings = mediaSettings;\n    this.routerStore = routerStore;\n    this.fb = fb;\n    this.el = el;\n    this.inlineContextResolver = inlineContextResolver;\n    this.pageBuilderFacade = pageBuilderFacade;\n    this.cpm = cpm;\n    this.cxm = cxm;\n    this.lpm = lpm;\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.styleLoader = styleLoader;\n    this.http = http;\n    this.cssHelper = cssHelper;\n    this.attributeSerializer = attributeSerializer;\n    this.formService = formService;\n    this.panelsContextService = panelsContextService;\n    this.asyncApiCallHelperSvc = asyncApiCallHelperSvc;\n    this.crudDataHelperService = crudDataHelperService;\n    this.entityDefinitionService = entityDefinitionService;\n    this.ngZone = ngZone;\n    this.persistService = persistService;\n    this.stylizerService = stylizerService;\n    this.classifyService = classifyService;\n    this.fileService = fileService;\n    this.authFacade = authFacade;\n    this.resolvedContext = {};\n    this.contextsChanged = [];\n    this.persistenceEnabled = false;\n    this.onInit$ = new Subject();\n    this.afterViewInit$ = new Subject();\n    this.afterContentInit$ = new Subject();\n    this.renderLayout$ = new Subject();\n    this.id$ = new BehaviorSubject(undefined);\n    this.panelPage$ = new BehaviorSubject(undefined);\n    this.nested$ = new BehaviorSubject(false);\n    this.ancestory$ = new BehaviorSubject([]);\n    this.contexts$ = new BehaviorSubject([]);\n    this.instanceUniqueIdentity = uuid.v4();\n    this.isStable = false;\n    this.managedCssCache = '';\n    this.managedClassesCache = {};\n    this.filteredListeners = [];\n    this.css$ = new BehaviorSubject({\n      css: this.cssHelper.makeJsonNode(),\n      classes: {}\n    });\n    this.cssSub = this.css$.subscribe(css => {\n      if (this.nested$.value) {\n        console.log('filtered css nested', css);\n      }\n      this.filteredCss = css;\n    });\n    this.listeners$ = new BehaviorSubject([]);\n    this.listenersSub = this.listeners$.pipe(tap(listeners => {\n      this.filteredListeners = listeners;\n    })).subscribe();\n    this.settingsFormArray = this.fb.array([]);\n    this.pageForm = this.fb.group({\n      /*name: this.fb.control(''),\n      title: this.fb.control(''),\n      derivativeId: this.fb.control(''),*/\n      panels: this.fb.array([])\n    });\n    this.bridgeSub = this.pageForm.valueChanges.pipe(filter(() => this.nested$.value), debounceTime(500)).subscribe(v => {\n      console.log('write page');\n      console.log(v);\n      this.settingsFormArray.clear();\n      const newGroup = this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(v, 'value').attributes[0]);\n      this.settingsFormArray.push(newGroup);\n      console.log(newGroup.value);\n    });\n    this.idOrPanelPageSub = combineLatest([this.id$, this.panelPage$]).pipe(distinctUntilChanged(), map(([id, panelPage]) => ({\n      id,\n      panelPage\n    })), filter(({\n      id,\n      panelPage\n    }) => !!id || !!panelPage), switchMap(({\n      id,\n      panelPage\n    }) => iif(() => !id, of({\n      panelPage\n    }), new Observable(obs => {\n      const metadata = this.entityDefinitionService.getDefinition('PanelPage').metadata;\n      return this.crudDataHelperService.evaluateCollectionPlugins({\n        query: `identity=${id}`,\n        plugins: metadata.crud,\n        op: 'query'\n      }).pipe(map(objects => objects && objects.length !== 0 ? objects[0] : undefined), tap(p => {\n        obs.next({\n          panelPage: p\n        });\n        obs.complete();\n      })).subscribe();\n    }))), switchMap(({\n      panelPage\n    }) => this.cpm.getPlugins(panelPage.panels.reduce((contentPlugins, c) => {\n      c.panes.forEach(pane => {\n        if (!contentPlugins.includes(pane.contentPlugin)) {\n          contentPlugins.push(pane.contentPlugin);\n        }\n      });\n      return contentPlugins;\n    }, [])).pipe(map(() => ({\n      panelPage\n    })))), switchMap(({\n      panelPage\n    }) => iif(() => !this.nested$.value,\n    /*!this.nested ? this.panelsContextService.allActivePageContexts({ panelPage: p }).pipe(\n      map(paneContexts => [p, isDynamic, paneContexts])\n    ): of([p, isDynamic, []]),*/\n    this.panelsContextService.allActivePageContexts({\n      panelPage\n    }).pipe(map(paneContexts => ({\n      panelPage,\n      contexts: Array.from(paneContexts)\n    }))), of({\n      panelPage,\n      contexts: []\n    }))),\n    /*switchMap(({ panelPage, isDynamic }) => this.panelsContextService.allActivePageContexts({ panelPage }).pipe(\n      map(paneContexts => ({ panelPage, isDynamic, contexts: Array.from(paneContexts) }))\n    )),*/\n    tap(({\n      panelPage,\n      contexts\n    }) => {\n      this.hookupFormChange({\n        panelPage\n      });\n      this.populatePanelsFormArray({\n        panelPage\n      });\n      this.panelPageCached = panelPage;\n      this.persistenceEnabled = panelPage.persistence && panelPage.persistence.dataduct && panelPage.persistence.dataduct.plugin && panelPage.persistence.dataduct.plugin !== '';\n      this.filteredListeners = panelPage.interactions && panelPage.interactions.interactions && panelPage.interactions.interactions.listeners ? panelPage.interactions.interactions.listeners : [];\n      this.renderLayout$.next(panelPage);\n      // this.panelPage$.next(panelPage);\n      this.contexts$.next([...(panelPage.contexts ? panelPage.contexts.map(c => new InlineContext(c)) : []), ...contexts]);\n      /*if(!this.nested$.value || isDynamic ) {\n        this.hookupContextChange();\n      }*/\n      this.hookupCss({\n        file: panelPage.cssFile ? panelPage.cssFile.trim() : undefined\n      });\n      console.log(`cached panel page: ${panelPage.id}`);\n    })).subscribe();\n    this.hookupContextSub = combineLatest(this.contexts$,\n    // this.nested$,\n    this.afterContentInit$).pipe(\n    // filter(([ _, nested ]) => !nested),\n    map(([contexts]) => contexts), switchMap(contexts => this.inlineContextResolver.resolveMerged(contexts, `panelpage:${uuid.v4()}`).pipe(switchMap(resolvedContext => this.cxm.getPlugins().pipe(map(plugins => ({\n      contexts,\n      resolvedContext,\n      globalPlugins: Array.from(plugins.values()).filter(p => p.global === true)\n    })))), take(1))), tap(() => {\n      if (this.resolveSub) {\n        this.resolveSub.unsubscribe();\n      }\n    }), tap(({\n      contexts,\n      resolvedContext,\n      globalPlugins\n    }) => {\n      this.resolvedContext = resolvedContext;\n      const short$ = new Subject();\n      if (isPlatformServer(this.platformId)) {\n        const interval = setInterval(() => {\n          if (PanelPageComponent.registredContextListeners.size === 0) {\n            short$.next();\n            short$.complete();\n            clearInterval(interval);\n          }\n        }, 1000);\n      }\n      this.resolveSub = this.inlineContextResolver.resolveMergedSingle(contexts).pipe(skip(globalPlugins.length + (contexts ? contexts.length : 0)), tap(() => PanelPageComponent.registredContextListeners.add(this.instanceUniqueIdentity)), tap(v => console.log('buffer', v)), bufferTime(1), tap(buffered => {\n        if (buffered.length === 0) {\n          PanelPageComponent.registredContextListeners.delete(this.instanceUniqueIdentity);\n        }\n      }), filter(buffered => buffered.length !== 0), tap(buffered => {\n        this.contextsChanged = buffered.reduce((p, [cName, _]) => [...p, ...(p.includes(cName) ? [] : [cName])], []);\n        this.resolvedContext = buffered.reduce((p, [cName, cValue]) => ({\n          ...p,\n          [cName]: cValue\n        }), this.resolvedContext);\n      }), tap(() => PanelPageComponent.registredContextListeners.delete(this.instanceUniqueIdentity)), isPlatformServer(this.platformId) ? takeUntil(short$) : tap(() => {})).subscribe();\n    })).subscribe();\n    this.renderLayoutSub = combineLatest([this.renderLayout$, this.afterViewInit$]).pipe(delay(1), map(([panelPage]) => ({\n      panelPage\n    })), switchMap(({\n      panelPage\n    }) => this.lpm.getPlugin(panelPage.layoutType).pipe(map(plugin => ({\n      panelPage,\n      plugin\n    })))), tap(() => console.log('start render layout')), map(({\n      plugin,\n      panelPage\n    }) => ({\n      panelPage,\n      plugin,\n      viewContainerRef: this.layoutRendererHost.viewContainerRef\n    })), tap(({\n      viewContainerRef\n    }) => viewContainerRef.clear()), map(({\n      plugin,\n      viewContainerRef,\n      panelPage\n    }) => ({\n      panelPage,\n      layoutRendererRef: viewContainerRef.createComponent(plugin.renderer)\n    })), tap(({\n      layoutRendererRef\n    }) => this.layoutRendererRef = layoutRendererRef), tap(({\n      layoutRendererRef,\n      panelPage\n    }) => {\n      layoutRendererRef.instance.renderPanelTpl = this.renderPanelTpl;\n      layoutRendererRef.instance.panelPage = panelPage;\n    }), tap(() => console.log('end render layout'))).subscribe();\n    this.stylizerSub = this.afterViewInit$.pipe(\n    //filter(() => false), // @tofo: Note ready for prime time just yet.\n    filter(() => isPlatformBrowser(this.platformId)), tap(() => {\n      this.stylizerService.stylize({\n        targetNode: this.el.nativeElement\n      });\n    })).subscribe();\n    this.classifySub = this.afterViewInit$.pipe(\n    //filter(() => false), // @tofo: Note ready for prime time just yet.\n    filter(() => isPlatformBrowser(this.platformId)), tap(() => {\n      this.classifyService.classify({\n        targetNode: this.el.nativeElement\n      });\n    })).subscribe();\n    this.stylizerMutatedSub = !isPlatformBrowser(this.platformId) ? undefined : this.stylizerService.mutated$.pipe(debounceTime(2000), skip(1), switchMap(({\n      stylesheet\n    }) => this.authFacade.getUser$.pipe(map(u => ({\n      stylesheet,\n      isAuthenticated: !!u\n    })) // No sheath asset uploads are attempted unless user is at least authenticated.\n    )), filter(({\n      isAuthenticated\n    }) => isAuthenticated), tap(({\n      stylesheet\n    }) => {\n      console.log('merged css', stylesheet);\n    }), filter(() => !!this.panelPageCached && !!this.panelPageCached.id),\n    // filter(() => false), // @tofo: Note ready for prime time just yet.\n    switchMap(({\n      stylesheet\n    }) => this.isStable ? of({\n      stylesheet\n    }) : this.ngZone.onStable.asObservable().pipe(map(() => ({\n      stylesheet\n    })), take(1))), map(({\n      stylesheet\n    }) => ({\n      stylesheet: (this.managedCssCache && this.managedCssCache.trim() !== '' ? this.managedCssCache + \"\\n\" : '') + stylesheet\n    })), concatMap(({\n      stylesheet\n    }) => this.fileService.bulkUpload({\n      nocache: true,\n      files: [new File([stylesheet], `panelpage__${this.panelPageCached.id}.css`)],\n      fileNameOverride: `panelpage__${this.panelPageCached.id}.css`\n    })), tap(() => {\n      console.log('stylesheet saved.');\n    })).subscribe();\n    this.classifyMutatedSub = !isPlatformBrowser(this.platformId) ? undefined : this.classifyService.mutated$.pipe(debounceTime(2000), skip(1), switchMap(({\n      classes\n    }) => this.authFacade.getUser$.pipe(\n    // No sheath asset uploads are attempted unless user is at least authenticated.\n    map(u => ({\n      classes,\n      isAuthenticated: !!u\n    })))), filter(({\n      isAuthenticated\n    }) => isAuthenticated), tap(({\n      classes\n    }) => {\n      console.log('merged classes', classes);\n    }), filter(() => !!this.panelPageCached && !!this.panelPageCached.id),\n    // filter(() => false), // @tofo: Note ready for prime time just yet.\n    switchMap(({\n      classes\n    }) => this.isStable ? of({\n      classes\n    }) : this.ngZone.onStable.asObservable().pipe(map(() => ({\n      classes\n    })), take(1))), map(({\n      classes\n    }) => ({\n      classes: Array.from(classes.keys()).reduce((p, k) => ({\n        ...p,\n        [k]: Array.from(classes.get(k).keys()).filter(k2 => classes.get(k).get(k2) !== ClassClassification.KEEP).reduce((p2, k2) => ({\n          ...p2,\n          [k2]: classes.get(k).get(k2)\n        }), {})\n      }), {})\n    })), map(({\n      classes\n    }) => ({\n      classes: merge(this.managedClassesCache, classes)\n    })), map(({\n      classes\n    }) => ({\n      json: JSON.stringify(classes)\n    })), concatMap(({\n      json\n    }) => this.fileService.bulkUpload({\n      nocache: true,\n      files: [new File([json], `panelpage__${this.panelPageCached.id}__classes.json`)],\n      fileNameOverride: `panelpage__${this.panelPageCached.id}__classes.json`\n    })), tap(() => {\n      console.log('classes saved.');\n    })).subscribe();\n    this.onStableSub = this.ngZone.onStable.asObservable().pipe(tap(() => this.isStable = true)).subscribe();\n    this.onUnstableSub = this.ngZone.onUnstable.asObservable().pipe(tap(() => this.isStable = false)).subscribe();\n    this.onTouched = () => {};\n    this.panelPageService = es.getEntityCollectionService('PanelPage');\n    this.panelPageFormService = es.getEntityCollectionService('PanelPageForm');\n    this.panelPageStateService = es.getEntityCollectionService('PanelPageState');\n  }\n  ngOnInit() {\n    this.onInit$.next(undefined);\n  }\n  ngAfterViewInit() {\n    this.afterViewInit$.next(undefined);\n  }\n  ngAfterContentInit() {\n    this.afterContentInit$.next(undefined);\n  }\n  ngOnDestroy() {\n    PanelPageComponent.registredContextListeners.delete(this.instanceUniqueIdentity);\n  }\n  populatePanelsFormArray({\n    panelPage\n  }) {\n    this.panelsArray.clear();\n    panelPage.panels.forEach(() => {\n      this.panelsArray.push(this.fb.control(''));\n    });\n  }\n  hookupFormChange({\n    panelPage\n  }) {\n    this.pageForm.valueChanges.pipe(debounceTime(100), filter(() => panelPage !== undefined && panelPage.displayType === 'form')).subscribe(v => {\n      const form = new PanelPageForm({\n        ...v,\n        name: panelPage.name,\n        title: panelPage.title,\n        derivativeId: panelPage.id\n      });\n      this.pageBuilderFacade.setForm(panelPage.name, form);\n    });\n  }\n  hookupCss({\n    file\n  }) {\n    forkJoin([\n    /*this.http.get<cssJson.JSONNode>(file).pipe(\n      catchError(() => of(undefined)),\n      defaultIfEmpty(undefined)\n    ),*/\n    of(undefined),\n    // Disable this for now since 400s have negative impact on page scoring\n    /*this.panelPageCached.id ? this.http.get<cssJson.JSONNode>(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}.css.json`).pipe(\n      catchError(() => of(undefined)),\n      defaultIfEmpty(undefined)\n    ) : of(undefined),*/\n    of(undefined),\n    // Disable this for now since 400s have negative impact on page scoring\n    /*\n    this.panelPageCached.id ? this.http.get<cssJson.JSONNode>(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}.css`).pipe(\n      catchError(() => of(undefined)),\n      defaultIfEmpty(undefined)\n    ) : of(undefined),*/\n    of(undefined), this.panelPageCached.id ? this.http.get(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}__classes.json`).pipe(catchError(() => of(undefined)), defaultIfEmpty(undefined)) : of(undefined)]).pipe(tap(([cssFile, managedCss, managedCssRaw, classes]) => {\n      console.log('fetched managed panelpage css and class files');\n      let css = {};\n      this.managedCssCache = '';\n      this.managedClassesCache = classes;\n      if (cssFile) {\n        css = merge(css, cssFile);\n      }\n      if (managedCss) {\n        this.managedCssCache = managedCssRaw;\n        css = merge(css, managedCss);\n      }\n      this.filteredCss = {\n        css,\n        classes\n      };\n    })).subscribe();\n    /*\n    this.http.get<cssJson.JSONNode>(file).subscribe(css => {\n      this.filteredCss = css; //css.styles; - only for sheath\n    });*/\n  }\n  submit() {\n    if (this.pageForm.valid) {\n      const panelPageForm = new PanelPageForm({\n        ...this.pageForm.value\n      });\n      const data = this.formService.serializeForm(panelPageForm);\n      console.log(panelPageForm);\n      console.log(this.formService.serializeForm(panelPageForm));\n      /*this.panelPageFormService.add(panelPageForm).subscribe(() => {\n        alert('panel page form added!');\n      });*/\n      console.log('form data', data);\n      this.persistService.persist({\n        data,\n        persistence: this.panelPageCached.persistence\n      }).subscribe(() => {\n        console.log('persisted data');\n      });\n      ;\n    } else {\n      console.log('detected form invalid');\n    }\n    // Currently PanelPageState ONLY uses the cache because noop data service is used. That has to change...\n    // Experimental only - state forms\n    /*const selectEntities = (entities: EntityCollection<PanelPageState>) => entities.entities;\n    const selectById = ({ id }: { id: string }) => createSelector(\n      selectEntities,\n      entities => entities[id] ? entities[id] : undefined\n    );\n    this.pageBuilderFacade.getPageInfo$.pipe(\n      tap(p => {\n        console.log('page info', p);\n        // console.log('panel page as form', new PanelPageForm({ panels: this.panelPage.panels.map() }));\n      }),\n      switchMap(p => this.panelPageStateService.collection$.pipe(\n        select(selectById({ id: p.id }))\n      )),\n      tap(s => {\n        console.log('panel page state', s);\n      })\n    ).subscribe();*/\n  }\n  writeValue(val) {\n    if (val) {\n      this.settingsFormArray.setValue(val, {\n        emitEvent: false\n      });\n    }\n  }\n  registerOnChange(fn) {\n    this.settingsFormArray.valueChanges.subscribe(fn);\n  }\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  setDisabledState(isDisabled) {\n    if (isDisabled) {\n      this.settingsFormArray.disable();\n    } else {\n      this.settingsFormArray.enable();\n    }\n  }\n  validate(c) {\n    /*return this.settingsFormArray.statusChanges.pipe(\n      startWith(this.settingsFormArray.status),  // start with the current form status\n      filter((status) => status === 'VALID'),\n      map(() => null),\n      timeout(1000),\n      catchError(() => of({ invalidForm: {valid: false, message: \"content is invalid\"}})),\n      first()\n    );*/\n    return this.pageForm.statusChanges.pipe(startWith(this.pageForm.status),\n    // start with the current form status\n    filter(status => status !== 'PENDING'), debounceTime(1), take(1),\n    // We only want one emit after status changes from PENDING\n    map(status => {\n      return this.pageForm.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"content is invalid\"\n        }\n      }; // I actually loop through the form and collect the errors, but for validity just return this works fine\n    }));\n    // return of(this.settingsFormArray.valid ? null : { invalidForm: {valid: false, message: \"content is invalid\"}});\n  }\n  static {\n    this.\u0275fac = function PanelPageComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PanelPageComponent)(i0.\u0275\u0275directiveInject(PLATFORM_ID), i0.\u0275\u0275directiveInject(MEDIA_SETTINGS), i0.\u0275\u0275directiveInject(i1.Store), i0.\u0275\u0275directiveInject(i2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i0.ElementRef), i0.\u0275\u0275directiveInject(i3.InlineContextResolverService), i0.\u0275\u0275directiveInject(i4.PageBuilderFacade), i0.\u0275\u0275directiveInject(i5.ContentPluginManager), i0.\u0275\u0275directiveInject(i3.ContextPluginManager), i0.\u0275\u0275directiveInject(i6.LayoutPluginManager), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i7.StyleLoaderService), i0.\u0275\u0275directiveInject(i8.HttpClient), i0.\u0275\u0275directiveInject(i4.CssHelperService), i0.\u0275\u0275directiveInject(i9.AttributeSerializerService), i0.\u0275\u0275directiveInject(i4.FormService), i0.\u0275\u0275directiveInject(i4.PanelsContextService), i0.\u0275\u0275directiveInject(i7.AsyncApiCallHelperService), i0.\u0275\u0275directiveInject(i10.CrudDataHelperService), i0.\u0275\u0275directiveInject(i11.EntityDefinitionService), i0.\u0275\u0275directiveInject(i0.NgZone), i0.\u0275\u0275directiveInject(i12.PersistService), i0.\u0275\u0275directiveInject(i13.StylizerService), i0.\u0275\u0275directiveInject(i13.ClassifyService), i0.\u0275\u0275directiveInject(i14.FilesService), i0.\u0275\u0275directiveInject(i15.AuthFacade), i0.\u0275\u0275directiveInject(i11.EntityServices));\n    };\n  }\n  static {\n    this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n      type: PanelPageComponent,\n      selectors: [[\"classifieds-ui-panel-page\"]],\n      viewQuery: function PanelPageComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.\u0275\u0275viewQuery(GridLayoutComponent, 5);\n          i0.\u0275\u0275viewQuery(_c0, 7);\n          i0.\u0275\u0275viewQuery(LayoutRendererHostDirective, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.gridLayout = _t.first);\n          i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.renderPanelTpl = _t.first);\n          i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.layoutRendererHost = _t.first);\n        }\n      },\n      hostVars: 2,\n      hostBindings: function PanelPageComponent_HostBindings(rf, ctx) {\n        if (rf & 2) {\n          i0.\u0275\u0275classProp(\"panel-page\", true);\n        }\n      },\n      inputs: {\n        id: \"id\",\n        panelPage: \"panelPage\",\n        nested: \"nested\",\n        contexts: \"contexts\",\n        ancestory: \"ancestory\",\n        css: \"css\",\n        listeners: \"listeners\",\n        resolvedContext: \"resolvedContext\"\n      },\n      standalone: false,\n      features: [i0.\u0275\u0275ProvidersFeature([{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => PanelPageComponent),\n        multi: true\n      },\n      /*{\n        provide: NG_VALIDATORS,\n        useExisting: forwardRef(() => PanelPageComponent),\n        multi: true\n      },*/\n      {\n        provide: NG_ASYNC_VALIDATORS,\n        useExisting: forwardRef(() => PanelPageComponent),\n        multi: true\n      }])],\n      decls: 6,\n      vars: 2,\n      consts: [[\"renderPanelTpl\", \"\"], [3, \"formGroup\"], [\"classifiedsUiLayoutRendererHost\", \"\"], [\"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 3, \"click\"], [\"formArrayName\", \"panels\"], [3, \"formControlName\", \"panel\", \"nested\", \"contexts\", \"resolvedContext\", \"contextsChanged\", \"displayType\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\"]],\n      template: function PanelPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.\u0275\u0275elementStart(0, \"div\", 1);\n          i0.\u0275\u0275elementContainerStart(1);\n          i0.\u0275\u0275template(2, PanelPageComponent_ng_template_2_Template, 0, 0, \"ng-template\", 2);\n          i0.\u0275\u0275elementContainerEnd();\n          i0.\u0275\u0275elementEnd();\n          i0.\u0275\u0275template(3, PanelPageComponent_button_3_Template, 2, 0, \"button\", 3)(4, PanelPageComponent_ng_template_4_Template, 3, 12, \"ng-template\", null, 0, i0.\u0275\u0275templateRefExtractor);\n        }\n        if (rf & 2) {\n          i0.\u0275\u0275property(\"formGroup\", ctx.pageForm);\n          i0.\u0275\u0275advance(3);\n          i0.\u0275\u0275property(\"ngIf\", ctx.persistenceEnabled);\n        }\n      },\n      dependencies: () => [i16.NgIf, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i2.FormArrayName, RenderPanelComponent, LayoutRendererHostDirective],\n      styles: [\"[_nghost-%COMP%]     gridster{background-color:#fff}[_nghost-%COMP%]     gridster-item{background-color:#fff}\"]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Putting render pane inside the same file is a documented work around for the\n * below angular partial compilation issue.\n *\n * https://angular.io/errors/NG3003\n */\nlet RenderPaneComponent = /*#__PURE__*/(() => {\n  class RenderPaneComponent {\n    set resolvedContext(resolvedContext) {\n      this.resolvedContext$.next(resolvedContext);\n    }\n    set css(css) {\n      this.css$.next(css);\n    }\n    set listeners(listeners) {\n      this.listeners$.next(listeners);\n    }\n    get indexPositionClass() {\n      return `pane-${this.indexPosition}`;\n    }\n    get dynamicPanel() {\n      return new PanelPage(this.resolvedContext._root);\n    }\n    constructor(document, platformId, el, renderer2, componentFactoryResolver, panelHandler, fb, cpm, cssHelper, paneStateService, es) {\n      this.document = document;\n      this.platformId = platformId;\n      this.el = el;\n      this.renderer2 = renderer2;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.panelHandler = panelHandler;\n      this.fb = fb;\n      this.cpm = cpm;\n      this.cssHelper = cssHelper;\n      this.paneStateService = paneStateService;\n      this.settings = [];\n      this.ancestory = [];\n      this.panes = [];\n      this.originPanes = [];\n      this.afterContentInit$ = new Subject();\n      this.resolvedContext$ = new BehaviorSubject({});\n      this.schedulePluginChange = new Subject();\n      this.ancestoryWithSelf = [];\n      this.filteredListeners = [];\n      this.css$ = new BehaviorSubject({\n        css: this.cssHelper.makeJsonNode(),\n        classes: {}\n      });\n      this.cssSub = combineLatest([this.css$, this.afterContentInit$, this.schedulePluginChange]).pipe(map(([s]) => s), map(s => ({\n        css: this.cssHelper.reduceCss(s.css, `.pane-${this.indexPosition}`),\n        classes: this.cssHelper.reduceSelector(s.classes, `.pane-${this.indexPosition}`)\n      })), map(({\n        css,\n        classes\n      }) => [this.cssHelper.reduceCss(css, '.panel-page', false), this.cssHelper.reduceCss(css, '.panel-page'), this.cssHelper.reduceSelector(classes, '.panel-page', false), this.cssHelper.reduceSelector(classes, '.panel-page')]), tap(([_, nestedCss, __, nestedClasses]) => this.filteredCss = {\n        css: nestedCss,\n        classes: nestedClasses\n      }), map(([css, _, classes, __]) => ({\n        css,\n        classes\n      })), map(({\n        css,\n        classes\n      }) => {\n        const rebuiltCss = Object.keys(css.children).reduce((p, c) => ({\n          ...p,\n          ...(c.indexOf('>') === 0 ? {\n            [this.ancestoryWithSelf.map((v, k) => (k + 1) % 2 === 0 ? `.pane-${v}` : `.panel-${v}`).join(' ') + ' ' + c]: classes[c]\n          } : {\n            [c]: classes[c]\n          })\n        }), {});\n        const rebuiltClasses = Object.keys(classes).reduce((p, c) => ({\n          ...p,\n          ...(c.indexOf('>') === 0 ? {\n            [this.ancestoryWithSelf.map((v, k) => (k + 1) % 2 === 0 ? `.pane-${v}` : `.panel-${v}`).join(' ') + ' ' + c]: classes[c]\n          } : {\n            [c]: classes[c]\n          })\n        }), {});\n        return {\n          css: {\n            children: rebuiltCss\n          },\n          classes: rebuiltClasses\n        };\n      }), delay(500)).subscribe(({\n        css,\n        classes\n      }) => {\n        console.log('reduced classes', classes);\n        const keys = Object.keys(css.children).filter(k => k === '' || isSelectorValid({\n          selector: k,\n          document: this.document\n        }));\n        const classKeys = Object.keys(classes).filter(k => k === '' || isSelectorValid({\n          selector: k,\n          document: this.document\n        }));\n        classKeys.forEach((k, keyIndex) => {\n          const matchedNodes = k === '' ? [this.el.nativeElement] : k.indexOf('>') !== -1 ? this.document.querySelectorAll(k) : this.el.nativeElement.querySelectorAll(k);\n          const len = matchedNodes.length;\n          for (let i = 0; i < len; i++) {\n            const c = classes[classKeys[keyIndex]];\n            const cKeys = Object.keys(c);\n            const cLen = cKeys.length;\n            for (let j = 0; j < cLen; j++) {\n              if (matchedNodes[i]) {\n                if (c[cKeys[j]] === ClassClassification.REMOVE) {\n                  console.log(`remove class ${cKeys[j]}`);\n                  this.renderer2.removeClass(matchedNodes[i], cKeys[j]);\n                } else {\n                  console.log(`add class ${cKeys[j]}`);\n                  this.renderer2.addClass(matchedNodes[i], cKeys[j]);\n                }\n              }\n            }\n          }\n        });\n        keys.forEach(k => {\n          console.log(`search: ${k}`);\n          const matchedNodes = k === '' ? [this.el.nativeElement] : k.indexOf('>') !== -1 ? this.document.querySelectorAll(k) : this.el.nativeElement.querySelectorAll(k);\n          const len = matchedNodes.length;\n          const rules = Object.keys(css.children[k].attributes);\n          for (let i = 0; i < len; i++) {\n            if (matchedNodes[i]) {\n              rules.forEach(p => {\n                console.log(`${k} { ${p}: ${css.children[k].attributes[p]}; }`);\n                const prop = camelize(p.replace('-', '_'), false); // @todo: Not working for custom sheet \n                this.renderer2.setStyle(matchedNodes[i], /*p*/prop, css.children[k].attributes[p]);\n              });\n            }\n          }\n        });\n      });\n      this.listeners$ = new BehaviorSubject([]);\n      this.listenersSub = combineLatest([this.listeners$, this.schedulePluginChange]).pipe(map(([l]) => l), tap(listeners => {\n        console.log('pane listeners', listeners);\n      })).subscribe();\n      this.paneForm = this.fb.group({\n        contentPlugin: this.fb.control('', Validators.required),\n        name: this.fb.control(''),\n        label: this.fb.control(''),\n        settings: this.fb.control('')\n      });\n      this.paneFormSub = this.paneForm.valueChanges.subscribe(v => {\n        console.log(`pane form value plugin: ${this.pluginName}`);\n        console.log(v);\n      });\n      this.scheduleStateChange$ = new Subject();\n      this.scheduleStateChangeSub = this.scheduleStateChange$.pipe(switchMap(({\n        state\n      }) => this.paneStateService.mergeState({\n        state,\n        ancestory: [...this.ancestoryWithSelf],\n        settings: this.settings,\n        plugin: this.contentPlugin\n      }))).subscribe(({\n        pageState\n      }) => {\n        this.panelPageStateService.upsert(pageState);\n      });\n      this.onTouched = () => {};\n      // private contentPlugins: Array<ContentPlugin> = [];\n      this.pluginChangeSub = this.schedulePluginChange.pipe(filter(() => this.pluginName && this.pluginName !== null && this.pluginName !== ''), switchMap(() => this.cpm.getPlugin(this.pluginName))).subscribe(p => {\n        this.contentPlugin = p;\n        this.paneForm.get('contentPlugin').setValue(p.name);\n        this.paneForm.get('name').setValue(this.name);\n        this.paneForm.get('label').setValue(this.label);\n        if (this.pluginName === 'panel') {\n          //console.log('resolve nested panel page');\n          this.resolveNestedPanelPage();\n        } else {\n          this.renderPaneContent();\n        }\n      });\n      this.embedPanelSub = this.resolvedContext$.pipe(map(rc => {\n        if (rc && rc._root && !this.linkedPageId && this.settings.length === 0) {\n          this.embedPanel = new PanelPage(rc._root);\n        }\n      })).subscribe();\n      this.panelPageStateService = es.getEntityCollectionService('PanelPageState');\n      // this.contentPlugins = contentPlugins;\n    }\n    ngOnInit() {\n      this.ancestoryWithSelf = [...(this.ancestory ? this.ancestory : []), ...(this.indexPosition !== undefined && this.indexPosition !== null ? [this.indexPosition] : [])];\n      this.schedulePluginChange.next(undefined);\n      /*this.contentPlugin = this.contentPlugins.find(p => p.name === this.pluginName);\n      this.paneForm.get('contentPlugin').setValue(this.contentPlugin.name);\n      this.paneForm.get('name').setValue(this.name);\n      this.paneForm.get('label').setValue(this.label);\n      if(this.pluginName === 'panel') {\n        //console.log('resolve nested panel page');\n        this.resolveNestedPanelPage();\n      } else  {\n        this.renderPaneContent();\n      }*/\n    }\n    ngOnChanges(changes) {\n      if (changes.ancestory || changes.indexPosition) {\n        const ancestoryWithSelf = [...(changes.ancestory.currentValue ? changes.ancestory.currentValue : this.ancestory ? this.ancestory : []), ...(changes.indexPosition.currentValue !== undefined && changes.indexPosition.currentValue !== null ? [changes.indexPosition.currentValue] : this.indexPosition ? [this.indexPosition] : [])];\n        if (ancestoryWithSelf.length !== this.ancestoryWithSelf.length || this.ancestoryWithSelf.filter((n, index) => ancestoryWithSelf[index] !== n).length !== 0) {\n          this.ancestoryWithSelf = ancestoryWithSelf;\n        }\n      }\n      this.schedulePluginChange.next(undefined);\n      /*this.contentPlugin = this.contentPlugins.find(p => p.name === this.pluginName);\n      this.paneForm.get('contentPlugin').setValue(this.contentPlugin.name);\n      this.paneForm.get('name').setValue(this.name);\n      this.paneForm.get('label').setValue(this.label);\n      if(this.pluginName === 'panel') {\n        //console.log('resolve nested panel page');\n        this.resolveNestedPanelPage();\n      } else {\n        this.renderPaneContent();\n      }*/\n    }\n    ngAfterContentInit() {\n      this.afterContentInit$.next(undefined);\n    }\n    writeValue(val) {\n      if (val) {\n        this.paneForm.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.paneForm.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.paneForm.disable();\n      } else {\n        this.paneForm.enable();\n      }\n    }\n    validate(c) {\n      /*return this.paneForm.statusChanges.pipe(\n        startWith(this.paneForm.status),  // start with the current form status\n        filter((status) => status === 'VALID'),\n        map(() => null),\n        timeout(1000),\n        catchError(() => of({ invalidForm: { invalidForm: {valid: false, message: \"pane is invalid\"}}})),\n        first()\n      );*/\n      return this.paneForm.statusChanges.pipe(startWith(this.paneForm.status),\n      // start with the current form status\n      filter(status => status !== 'PENDING'), debounceTime(1), take(1),\n      // We only want one emit after status changes from PENDING\n      map(status => {\n        return this.paneForm.valid ? null : {\n          invalidForm: {\n            invalidForm: {\n              valid: false,\n              message: \"pane is invalid\"\n            }\n          }\n        }; // I actually loop through the form and collect the errors, but for validity just return this works fine\n      }));\n    }\n    resolveNestedPanelPage() {\n      this.panelHandler.toObject(this.settings).subscribe(p => {\n        this.panelPage = new PanelPage({\n          ...p,\n          contexts: this.contexts\n        });\n      });\n    }\n    renderPaneContent() {\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent);\n      const viewContainerRef = this.contentPaneHost.viewContainerRef;\n      viewContainerRef.clear();\n      this.componentRef = viewContainerRef.createComponent(componentFactory);\n      this.componentRef.instance.settings = this.settings;\n      this.componentRef.instance.name = this.name;\n      this.componentRef.instance.label = this.label;\n      this.componentRef.instance.panes = this.panes;\n      this.componentRef.instance.originPanes = this.originPanes;\n      this.componentRef.instance.contexts = this.contexts.map(c => new InlineContext(c));\n      this.componentRef.instance.displayType = this.displayType;\n      this.componentRef.instance.resolvedContext = this.resolvedContext$.value;\n      this.componentRef.instance.ancestory = this.ancestoryWithSelf;\n      if (this.componentRef.instance.state && this.contentPlugin.handler) {\n        this.contentPlugin.handler.stateDefinition(this.settings).pipe(take(1)).subscribe(s => {\n          this.componentRef.instance.state = s ? s : {};\n        });\n      }\n      if (this.componentRef.instance.stateChange) {\n        this.componentRef.instance.stateChange.subscribe(state => {\n          this.scheduleStateChange$.next({\n            state\n          });\n        });\n      }\n    }\n    static {\n      this.\u0275fac = function RenderPaneComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RenderPaneComponent)(i0.\u0275\u0275directiveInject(DOCUMENT), i0.\u0275\u0275directiveInject(PLATFORM_ID), i0.\u0275\u0275directiveInject(i0.ElementRef), i0.\u0275\u0275directiveInject(i0.Renderer2), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i4.PanelContentHandler), i0.\u0275\u0275directiveInject(i2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i5.ContentPluginManager), i0.\u0275\u0275directiveInject(i4.CssHelperService), i0.\u0275\u0275directiveInject(i4.PaneStateService), i0.\u0275\u0275directiveInject(i11.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RenderPaneComponent,\n        selectors: [[\"classifieds-ui-render-pane\"]],\n        viewQuery: function RenderPaneComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(PaneContentHostDirective, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.contentPaneHost = _t.first);\n          }\n        },\n        hostVars: 5,\n        hostBindings: function RenderPaneComponent_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.\u0275\u0275attribute(\"data-index\", ctx.indexPosition);\n            i0.\u0275\u0275classMap(ctx.indexPositionClass);\n            i0.\u0275\u0275classProp(\"pane\", true);\n          }\n        },\n        inputs: {\n          pluginName: \"pluginName\",\n          settings: \"settings\",\n          linkedPageId: \"linkedPageId\",\n          contexts: \"contexts\",\n          originPane: \"originPane\",\n          displayType: \"displayType\",\n          name: \"name\",\n          label: \"label\",\n          indexPosition: \"indexPosition\",\n          ancestory: \"ancestory\",\n          panes: \"panes\",\n          originPanes: \"originPanes\",\n          resolvedContext: \"resolvedContext\",\n          css: \"css\",\n          listeners: \"listeners\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => RenderPaneComponent),\n          multi: true\n        },\n        /*{\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => RenderPaneComponent),\n          multi: true\n        },*/\n        {\n          provide: NG_ASYNC_VALIDATORS,\n          useExisting: forwardRef(() => RenderPaneComponent),\n          multi: true\n        }]), i0.\u0275\u0275NgOnChangesFeature],\n        decls: 6,\n        vars: 4,\n        consts: [[\"fxFlex\", \"\", 3, \"formGroup\"], [\"classifiedsUiPaneContentHost\", \"\"], [\"fxFlex\", \"\", \"formControlName\", \"settings\", 3, \"panelPage\", \"nested\", \"contexts\", \"css\", \"listeners\", \"ancestory\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"formControlName\", \"settings\", 3, \"id\", \"nested\", \"contexts\", \"ancestory\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"formControlName\", \"settings\", 3, \"panelPage\", \"nested\", \"contexts\", \"css\", \"listeners\", \"ancestory\"], [\"fxFlex\", \"\", \"formControlName\", \"settings\", 3, \"id\", \"nested\", \"contexts\", \"ancestory\"]],\n        template: function RenderPaneComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0);\n            i0.\u0275\u0275elementContainerStart(1);\n            i0.\u0275\u0275template(2, RenderPaneComponent_ng_template_2_Template, 0, 0, \"ng-template\", 1);\n            i0.\u0275\u0275elementContainerEnd();\n            i0.\u0275\u0275template(3, RenderPaneComponent_classifieds_ui_panel_page_3_Template, 1, 6, \"classifieds-ui-panel-page\", 2)(4, RenderPaneComponent_classifieds_ui_panel_page_4_Template, 1, 4, \"classifieds-ui-panel-page\", 3)(5, RenderPaneComponent_classifieds_ui_panel_page_5_Template, 1, 6, \"classifieds-ui-panel-page\", 2);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.paneForm);\n            i0.\u0275\u0275advance(3);\n            i0.\u0275\u0275property(\"ngIf\", ctx.pluginName == \"panel\" && !ctx.linkedPageId && ctx.settings.length !== 0);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.pluginName == \"panel\" && ctx.linkedPageId);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.pluginName == \"panel\" && !ctx.linkedPageId && ctx.settings.length === 0);\n          }\n        },\n        dependencies: [i16.NgIf, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, PaneContentHostDirective, PanelPageComponent],\n        styles: [\"[_nghost-%COMP%]{height:100%}\"]\n      });\n    }\n  }\n  return RenderPaneComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Putting render pane inside the same file is a documented work around for the\n * below angular partial compilation issue.\n *\n * https://angular.io/errors/NG3003\n */\nlet RenderPanelComponent = /*#__PURE__*/(() => {\n  class RenderPanelComponent {\n    static {\n      this.COUNTER = 0;\n    }\n    set contextChanged(contextChanged) {\n      // this.schduleContextChange.next(contextChanged.name);\n    }\n    set contextsChanged(contextsChanged) {\n      contextsChanged.map(c => this.schduleContextChange.next(c));\n    }\n    set indexPosition(indexPosition) {\n      this.indexPosition$.next(indexPosition);\n    }\n    set ancestory(ancestory) {\n      this.ancestory$.next(ancestory);\n    }\n    set css(css) {\n      this.css$.next(css);\n    }\n    set listeners(listeners) {\n      this.listeners$.next(listeners);\n    }\n    get indexPositionClass() {\n      return `panel-${this.indexPosition$.value}`;\n    }\n    get panesArray() {\n      return this.panelForm.get('panes');\n    }\n    constructor(\n    // @Inject(STYLE_PLUGIN) stylePlugins: Array<StylePlugin>,\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    platformId, document, hostEl, renderer2, componentFactoryResolver, fb, panelResolverService, spm, cssHelper, styleResolverService) {\n      this.platformId = platformId;\n      this.document = document;\n      this.hostEl = hostEl;\n      this.renderer2 = renderer2;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.fb = fb;\n      this.panelResolverService = panelResolverService;\n      this.spm = spm;\n      this.cssHelper = cssHelper;\n      this.styleResolverService = styleResolverService;\n      this.nested = false;\n      this.resolvedContext = {};\n      this.heightChange = new EventEmitter();\n      this.panelForm = this.fb.group({\n        name: this.fb.control(''),\n        label: this.fb.control(''),\n        panes: this.fb.array([])\n      });\n      this.panelFormSub = this.panelForm.valueChanges.subscribe(v => {\n        console.log('paneL form value');\n        console.log(v);\n      });\n      this.filteredListeners = [];\n      /*initialRenderComplete = setInterval(() => {\n        console.log(`check pane initial render [${this.panel.name}]`);\n        console.log(`expected: ${this.resolvedPanes !== undefined ? this.resolvedPanes.length : 'null'} | actual ${this.renderedPanes.length}`);\n        if (this.resolvedPanes !== undefined && this.renderedPanes.length === this.resolvedPanes.length) {\n          console.log(`COMPLETE: check pane initial render [${this.panel.name}]`);\n          clearInterval(this.initialRenderComplete);\n        }\n      }, 250);*/\n      this.afterContentInit$ = new Subject();\n      this.schedulePanelRender = new Subject();\n      this.rendered$ = new Subject();\n      this.css$ = new BehaviorSubject({\n        css: this.cssHelper.makeJsonNode(),\n        classes: {}\n      });\n      this.cssSub = combineLatest([this.css$, this.afterContentInit$, this.rendered$]).pipe(tap(([s]) => console.log('css node', s.css)), map(([s]) => s), map(s => ({\n        css: this.cssHelper.reduceCss(s.css, `.panel-${this.indexPosition$.value}`),\n        classes: this.cssHelper.reduceSelector(s.classes, `.panel-${this.indexPosition$.value}`)\n      })), map(({\n        css,\n        classes\n      }) => [this.cssHelper.reduceCss(css, '.pane-', false), css, this.cssHelper.reduceSelector(classes, '.pane-', false), classes]), tap(([_, nestedCss, __, nestedClasses]) => this.filteredCss = {\n        css: nestedCss,\n        classes: nestedClasses\n      }), map(([css, _, classes]) => ({\n        css,\n        classes\n      })), map(({\n        css,\n        classes\n      }) => {\n        const rebuiltCss = Object.keys(css.children).reduce((p, c) => ({\n          ...p,\n          ...(c.indexOf('>') === 0 ? {\n            [this.ancestoryWithSelf$.value.map((v, k) => (k + 1) % 2 === 0 ? `.pane-${v}` : `.panel-${v}`).join(' ') + ' ' + c]: classes[c]\n          } : {\n            [c]: classes[c]\n          })\n        }), {});\n        const rebuiltClasses = Object.keys(classes).reduce((p, c) => ({\n          ...p,\n          ...(c.indexOf('>') === 0 ? {\n            [this.ancestoryWithSelf$.value.map((v, k) => (k + 1) % 2 === 0 ? `.pane-${v}` : `.panel-${v}`).join(' ') + ' ' + c]: classes[c]\n          } : {\n            [c]: classes[c]\n          })\n        }), {});\n        return {\n          css: {\n            children: rebuiltCss\n          },\n          classes: rebuiltClasses\n        };\n      }), delay(1)).subscribe(({\n        css,\n        classes\n      }) => {\n        /*console.log(`matched css inside panel renderer: ${this.indexPosition}`);\n        console.log(css);\n        this.filteredCss = css;*/\n        console.log('classes', classes);\n        const keys = Object.keys(css.children).filter(k => k === '' || isSelectorValid({\n          selector: k,\n          document: this.document\n        }));\n        const classKeys = Object.keys(classes).filter(k => k === '' || isSelectorValid({\n          selector: k,\n          document: this.document\n        }));\n        classKeys.forEach((k, keyIndex) => {\n          const matchedNodes = k === '' ? [this.hostEl.nativeElement] : k.indexOf('>') !== -1 ? this.document.querySelectorAll(k) : this.hostEl.nativeElement.querySelectorAll(k);\n          const len = matchedNodes.length;\n          for (let i = 0; i < len; i++) {\n            const c = classes[classKeys[keyIndex]];\n            const cKeys = Object.keys(c);\n            const cLen = cKeys.length;\n            for (let j = 0; j < cLen; j++) {\n              if (matchedNodes[i]) {\n                if (c[cKeys[j]] === ClassClassification.REMOVE) {\n                  console.log(`remove class ${cKeys[j]}`);\n                  this.renderer2.removeClass(matchedNodes[i], cKeys[j]);\n                } else {\n                  console.log(`add class ${cKeys[j]}`);\n                  this.renderer2.addClass(matchedNodes[i], cKeys[j]);\n                }\n              }\n            }\n          }\n        });\n        keys.forEach(k => {\n          console.log(`search: ${k}`);\n          const matchedNodes = k === '' ? [this.hostEl.nativeElement] : k.indexOf('>') !== -1 ? this.document.querySelectorAll(k) : this.hostEl.nativeElement.querySelectorAll(k);\n          const len = matchedNodes.length;\n          const rules = Object.keys(css.children[k].attributes);\n          for (let i = 0; i < len; i++) {\n            if (matchedNodes[i]) {\n              rules.forEach(p => {\n                console.log(`${k} { ${p}: ${css.children[k].attributes[p]}; }`);\n                const prop = camelize(p.replace('-', '_'), false); // @todo: Not working for custom sheet \n                this.renderer2.setStyle(matchedNodes[i], /*p*/prop, css.children[k].attributes[p]);\n              });\n            }\n          }\n        });\n      });\n      this.listeners$ = new BehaviorSubject([]);\n      this.listenersSub = this.listeners$.pipe(tap(listeners => {\n        console.log('panel listeners', listeners);\n        this.filteredListeners = listeners;\n      })).subscribe();\n      this.scheduleRender = new Subject();\n      this.scheduleRenderSub = this.scheduleRender.pipe(tap(() => console.log(`schdule renderer before [${this.panel.name}]`)), switchMap(([panes, contexts, resolvedContext]) => this.panelResolverService.resolvePanes({\n        panes,\n        contexts,\n        resolvedContext\n      }).pipe(map(({\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }) => ({\n        resolvedPanes,\n        originMappings,\n        panes\n      })))), switchMap(({\n        panes,\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }) => this.styleResolverService.alterResolvedPanes({\n        panel: this.panel,\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }).pipe(map(({\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }) => ({\n        panes,\n        resolvedPanes,\n        originMappings\n      })))), tap(() => console.log(`schdule renderer after [${this.panel.name}]`))).subscribe(({\n        panes,\n        resolvedPanes,\n        originMappings /*, resolvedContexts*/\n      }) => {\n        console.log(`render panel: ${this.panel.name}`);\n        this.resolvedPanes = resolvedPanes;\n        this.originPanes = panes;\n        this.originMappings = originMappings;\n        // this.resolvedContexts = resolvedContexts;\n        if (this.paneContainer && this.stylePlugin === undefined) {\n          // setTimeout(() => this.heightChange.emit(this.paneContainer.nativeElement.offsetHeight));\n        }\n        this.populatePanesFormArray();\n        if (this.stylePlugin !== undefined) {\n          this.renderPanelContent();\n        } else {\n          this.rendered$.next(undefined);\n        }\n        // clearInterval(this.initialRenderComplete);\n      });\n      this.schduleContextChange = new Subject();\n      this.schedulePanelRenderSub = this.schedulePanelRender.pipe(switchMap(p => this.spm.getPlugin(p))).subscribe(stylePlugin => {\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(stylePlugin.renderComponent);\n        const viewContainerRef = this.panelHost.viewContainerRef;\n        viewContainerRef.clear();\n        const componentRef = viewContainerRef.createComponent(componentFactory);\n        this.componentRef = componentRef;\n        componentRef.instance.settings = this.panel.settings;\n        /**\n         * I think this is an oversight. The current code is passing ALL the panes\n         * as the panes array. I believe that change was recently made to facilitate\n         * new behavior. I just don't think this was ever updated... Updating now\n         * and we will see how it goes.\n         */\n        componentRef.instance.panes = this.resolvedPanes;\n        // This breaks pages because none visible panes will attempt to be rendered.\n        //(componentRef.instance as any).panes = this.panel.panes;\n        componentRef.instance.originPanes = this.panel.panes;\n        componentRef.instance.originMappings = this.originMappings;\n        componentRef.instance.contexts = this.contexts.map(c => new InlineContext(c));\n        componentRef.instance.displayType = this.displayType;\n        componentRef.instance.ancestory = this.ancestoryWithSelf$.value;\n        // (componentRef.instance as any).resolvedContexts = this.resolvedContexts;\n        componentRef.instance.resolvedContext = this.resolvedContext;\n        componentRef.instance.panel = this.panel;\n        componentRef.instance.indexPosition = this.indexPosition$.value;\n        this.rendered$.next(undefined);\n      });\n      this.originMappings = [];\n      this.resolvedContexts = [];\n      // ancestoryWithSelf: Array<number> = [];\n      this.ancestoryWithSelf$ = new BehaviorSubject([]);\n      this.ancestory$ = new BehaviorSubject([]);\n      this.indexPosition$ = new BehaviorSubject(undefined);\n      // contentPlugins: Array<ContentPlugin> = [];\n      this.onTouched = () => {};\n      this.ancestorySub = combineLatest([this.ancestory$, this.indexPosition$]).pipe(tap(([ancestory, indexPosition]) => {\n        this.ancestoryWithSelf$.next([...ancestory, indexPosition]);\n      })).subscribe();\n      this.counter = RenderPanelComponent.COUNTER++;\n      // this.stylePlugins = stylePlugins;\n      // this.contentPlugins = contentPlugins;\n    }\n    ngOnInit() {\n      this.stylePlugin = this.panel.stylePlugin !== undefined && this.panel.stylePlugin !== '' ? this.panel.stylePlugin : undefined; // this.stylePlugins.find(p => p.name === this.panel.stylePlugin) : undefined;\n      if (this.panel !== undefined && this.panelHost !== undefined) {\n        console.log(`panel render init [${this.panel.name}`);\n        this.panelResolverService.usedContexts(this.panel.panes).pipe(map(ctx => ctx.filter(c => c !== '_page' && c !== '_root' && c !== '.' && c.indexOf('panestate-' + this.ancestoryWithSelf$.value.join('-')) !== 0)), tap(ctx => console.log(`contexts [${this.panel.name}]: ${ctx.join(',')}`)), switchMap(ctx => this.schduleContextChange.pipe(tap(contextChanged => console.log(`detected change [${this.panel.name}]: ${contextChanged}`)), map(contextChanged => [ctx, contextChanged])\n        // @todo: Replacing the line above with the one below causes an infinite context change loop on the ad browser use case. no good.\n        // I think this line was being used for the pane state detection since there was an issue with it. However, that is not being use anymore.\n        // map(contextChanged => [ctx.includes(contextChanged) ? ctx : [ ...ctx, contextChanged ], contextChanged]) // This might be a breaking change but I do know some of this was never very well tested... :/\n        )), tap(([ctx, contextChanged]) => console.log(`detected change [${this.panel.name}]: ${contextChanged} : ctx: ${ctx.join(',')}`)), filter(([ctx, contextChanged]) => Array.isArray(ctx) && ctx.findIndex(c => c === contextChanged) !== -1), debounceTime(100)).subscribe(([ctx, contextChanged]) => {\n          console.log(`Context changed [${this.panel.name}]: ${contextChanged}`);\n          console.log(`contexts detected [${this.panel.name}]: ${ctx.join(',')}`);\n          this.scheduleRender.next([this.panel.panes, this.contexts, this.resolvedContext]);\n        });\n      }\n      // this.ancestoryWithSelf = [ ...(this.ancestory ? this.ancestory: []), ...( this.indexPosition !== undefined && this.indexPosition !== null? [ this.indexPosition ] : [] ) ];\n    }\n    ngOnChanges(changes) {\n      //console.log(`ngOnChanges render panel [${this.panel.name}]`);\n      //console.log(changes);\n      this.stylePlugin = this.panel.stylePlugin !== undefined && this.panel.stylePlugin !== '' ? this.panel.stylePlugin : undefined; // this.stylePlugins.find(p => p.name === this.panel.stylePlugin) : undefined;\n      if (changes.resolvedContext && changes.resolvedContext.previousValue === undefined) {\n        this.scheduleRender.next([this.panel.panes, this.contexts, this.resolvedContext]);\n      }\n      /*if(changes.contextChanged && changes.contextChanged.currentValue !== undefined) {\n        this.schduleContextChange.next(changes.contextChanged.currentValue.name);\n      }*/\n      /*if (changes.ancestory || changes.indexPosition) {\n        const ancestoryWithSelf = [ ...(changes.ancestory.currentValue ? changes.ancestory.currentValue :  this.ancestory ? this.ancestory : []), ...( changes.indexPosition.currentValue !== undefined && changes.indexPosition.currentValue !== null? [ changes.indexPosition.currentValue ] : this.indexPosition ? [ this.indexPosition ] : [] ) ];\n        if (ancestoryWithSelf.length !== this.ancestoryWithSelf.length || this.ancestoryWithSelf.filter((n, index) => ancestoryWithSelf[index] !== n).length !== 0) {\n          this.ancestoryWithSelf = ancestoryWithSelf;\n        }\n      }*/\n    }\n    ngAfterViewInit() {}\n    ngAfterContentInit() {\n      this.afterContentInit$.next(undefined);\n    }\n    writeValue(val) {\n      if (val) {\n        this.panelForm.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.panelForm.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.panelForm.disable();\n      } else {\n        this.panelForm.enable();\n      }\n    }\n    validate(c) {\n      /*return this.panelForm.statusChanges.pipe(\n        startWith(this.panelForm.status),  // start with the current form status\n        filter((status) => status === 'VALID'),\n        map(() => null),\n        timeout(1000),\n        catchError(() => of({ invalidForm: {valid: false, message: \"panel are invalid\"}})),\n        first()\n      );*/\n      return this.panelForm.statusChanges.pipe(startWith(this.panelForm.status),\n      // start with the current form status\n      filter(status => status !== 'PENDING'), debounceTime(1), take(1),\n      // We only want one emit after status changes from PENDING\n      map(status => {\n        return this.panelForm.valid ? null : {\n          invalidForm: {\n            valid: false,\n            message: \"panel are invalid\"\n          }\n        }; // I actually loop through the form and collect the errors, but for validity just return this works fine\n      }));\n    }\n    populatePanesFormArray() {\n      this.panesArray.clear();\n      this.resolvedPanes.forEach((p, i) => {\n        this.panesArray.push(this.fb.control(''));\n      });\n    }\n    renderPanelContent() {\n      this.schedulePanelRender.next(this.stylePlugin);\n    }\n    static {\n      this.\u0275fac = function RenderPanelComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RenderPanelComponent)(i0.\u0275\u0275directiveInject(PLATFORM_ID), i0.\u0275\u0275directiveInject(DOCUMENT), i0.\u0275\u0275directiveInject(i0.ElementRef), i0.\u0275\u0275directiveInject(i0.Renderer2), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i4.PanelResolverService), i0.\u0275\u0275directiveInject(i4.StylePluginManager), i0.\u0275\u0275directiveInject(i4.CssHelperService), i0.\u0275\u0275directiveInject(i4.StyleResolverService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RenderPanelComponent,\n        selectors: [[\"classifieds-ui-render-panel\"]],\n        viewQuery: function RenderPanelComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(PaneContentHostDirective, 7);\n            i0.\u0275\u0275viewQuery(_c1, 7);\n            i0.\u0275\u0275viewQuery(RenderPaneComponent, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.panelHost = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.paneContainer = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.renderedPanes = _t);\n          }\n        },\n        hostVars: 5,\n        hostBindings: function RenderPanelComponent_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.\u0275\u0275attribute(\"data-index\", ctx.indexPosition$.value);\n            i0.\u0275\u0275classMap(ctx.indexPositionClass);\n            i0.\u0275\u0275classProp(\"panel\", true);\n          }\n        },\n        inputs: {\n          panel: \"panel\",\n          contexts: \"contexts\",\n          nested: \"nested\",\n          displayType: \"displayType\",\n          resolvedContext: \"resolvedContext\",\n          contextChanged: \"contextChanged\",\n          contextsChanged: \"contextsChanged\",\n          indexPosition: \"indexPosition\",\n          ancestory: \"ancestory\",\n          css: \"css\",\n          listeners: \"listeners\"\n        },\n        outputs: {\n          heightChange: \"heightChange\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => RenderPanelComponent),\n          multi: true\n        },\n        /*{\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => RenderPanelComponent),\n          multi: true\n        },*/\n        {\n          provide: NG_ASYNC_VALIDATORS,\n          useExisting: forwardRef(() => RenderPanelComponent),\n          multi: true\n        }]), i0.\u0275\u0275NgOnChangesFeature],\n        decls: 5,\n        vars: 2,\n        consts: [[\"panes\", \"\"], [1, \"render-panel\", 3, \"formGroup\"], [\"classifiedsUiPaneContentHost\", \"\"], [4, \"ngIf\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [\"formArrayName\", \"panes\"], [3, \"formControlName\", \"pluginName\", \"settings\", \"name\", \"label\", \"originPane\", \"contexts\", \"displayType\", \"resolvedContext\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\", \"panes\", \"originPanes\", 4, \"ngFor\", \"ngForOf\"], [3, \"formControlName\", \"pluginName\", \"settings\", \"name\", \"label\", \"originPane\", \"contexts\", \"displayType\", \"resolvedContext\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\", \"panes\", \"originPanes\"], [3, \"pluginName\", \"settings\", \"name\", \"label\", \"originPane\", \"contexts\", \"linkedPageId\", \"displayType\", \"resolvedContext\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\", \"panes\", \"originPanes\", 4, \"ngFor\", \"ngForOf\"], [3, \"pluginName\", \"settings\", \"name\", \"label\", \"originPane\", \"contexts\", \"linkedPageId\", \"displayType\", \"resolvedContext\", \"indexPosition\", \"css\", \"listeners\", \"ancestory\", \"panes\", \"originPanes\"]],\n        template: function RenderPanelComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 1, 0);\n            i0.\u0275\u0275elementContainerStart(2);\n            i0.\u0275\u0275template(3, RenderPanelComponent_ng_template_3_Template, 0, 0, \"ng-template\", 2);\n            i0.\u0275\u0275elementContainerEnd();\n            i0.\u0275\u0275template(4, RenderPanelComponent_ng_container_4_Template, 4, 3, \"ng-container\", 3);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.panelForm);\n            i0.\u0275\u0275advance(4);\n            i0.\u0275\u0275property(\"ngIf\", !ctx.stylePlugin && ctx.resolvedPanes);\n          }\n        },\n        dependencies: [i16.NgForOf, i16.NgIf, i16.NgSwitch, i16.NgSwitchCase, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i2.FormArrayName, PaneContentHostDirective, RenderPaneComponent],\n        styles: [\"[_nghost-%COMP%]{height:100%}.render-panel[_ngcontent-%COMP%]{height:100%}\"]\n      });\n    }\n  }\n  return RenderPanelComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet EmptyLayoutComponent = /*#__PURE__*/(() => {\n  class EmptyLayoutComponent {\n    static {\n      this.\u0275fac = function EmptyLayoutComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || EmptyLayoutComponent)();\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: EmptyLayoutComponent,\n        selectors: [[\"classifieds-ui-empty-layout\"]],\n        standalone: false,\n        decls: 1,\n        vars: 0,\n        template: function EmptyLayoutComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275text(0, \"empty layout content\");\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return EmptyLayoutComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst interationHandlerFormSubmit = () => {\n  return new InteractionHandlerPlugin({\n    id: 'panels_form_submit',\n    title: 'Submit Panels Form'\n  });\n};\nconst interationHandlerDialog = () => {\n  return new InteractionHandlerPlugin({\n    id: 'panels_dialog',\n    title: 'Open Panels Dialog'\n  });\n};\n\n// import { PanelpageModule } from 'panelpage';\nlet RenderModule = /*#__PURE__*/(() => {\n  class RenderModule {\n    constructor(ihpm) {\n      ihpm.register(interationHandlerFormSubmit());\n      ihpm.register(interationHandlerDialog());\n    }\n    static {\n      this.\u0275fac = function RenderModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RenderModule)(i0.\u0275\u0275inject(i1$1.InteractionHandlerPluginManager));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: RenderModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        imports: [CommonModule,\n        // HttpClientModule,\n        FormsModule, UtilsModule, ReactiveFormsModule, PanelsModule, LayoutModule\n        // PanelpageModule\n        ]\n      });\n    }\n  }\n  return RenderModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of render\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { EmptyLayoutComponent, PanelPageComponent, RenderModule, RenderPaneComponent, RenderPanelComponent };\n"],
  "mappings": "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",
  "names": ["i16", "isPlatformServer", "isPlatformBrowser", "CommonModule", "i0", "PLATFORM_ID", "forwardRef", "DOCUMENT", "EventEmitter", "i2", "NG_VALUE_ACCESSOR", "NG_ASYNC_VALIDATORS", "Validators", "FormsModule", "ReactiveFormsModule", "i7", "UtilsModule", "i6", "GridLayoutComponent", "LayoutModule", "i14", "MEDIA_SETTINGS", "i3", "InlineContext", "i4", "PanelPageForm", "PanelPage", "PanelsModule", "Subject", "BehaviorSubject", "combineLatest", "iif", "of", "Observable", "forkJoin", "tap", "filter", "debounceTime", "distinctUntilChanged", "map", "switchMap", "take", "skip", "bufferTime", "takeUntil", "delay", "concatMap", "catchError", "defaultIfEmpty", "startWith", "i13", "ClassClassification", "isSelectorValid", "camelize", "merge", "i1", "i5", "i8", "i9", "i10", "i11", "i12", "i15", "i1$1", "InteractionHandlerPlugin", "_c0", "PanelPageComponent_ng_template_2_Template", "rf", "ctx", "PanelPageComponent_button_3_Template", "_r1", "ctx_r1", "PanelPageComponent_ng_template_4_Template", "i_r3", "RenderPaneComponent_ng_template_2_Template", "RenderPaneComponent_classifieds_ui_panel_page_3_Template", "ctx_r0", "RenderPaneComponent_classifieds_ui_panel_page_4_Template", "RenderPaneComponent_classifieds_ui_panel_page_5_Template", "_c1", "RenderPanelComponent_ng_template_3_Template", "RenderPanelComponent_ng_container_4_ng_container_2_classifieds_ui_render_pane_3_Template", "pane_r1", "j_r2", "ctx_r2", "panes_r4", "RenderPanelComponent_ng_container_4_ng_container_2_Template", "RenderPanelComponent_ng_container_4_ng_container_3_classifieds_ui_render_pane_1_Template", "pane_r5", "j_r6", "RenderPanelComponent_ng_container_4_ng_container_3_Template", "RenderPanelComponent_ng_container_4_Template", "PaneContentHostDirective", "viewContainerRef", "__ngFactoryType__", "LayoutRendererHostDirective", "PanelPageComponent", "_PanelPageComponent", "id", "panelPage", "nested", "contexts", "ancestory", "css", "listeners", "platformId", "mediaSettings", "routerStore", "fb", "el", "inlineContextResolver", "pageBuilderFacade", "cpm", "cxm", "lpm", "componentFactoryResolver", "styleLoader", "http", "cssHelper", "attributeSerializer", "formService", "panelsContextService", "asyncApiCallHelperSvc", "crudDataHelperService", "entityDefinitionService", "ngZone", "persistService", "stylizerService", "classifyService", "fileService", "authFacade", "es", "Subject", "BehaviorSubject", "v4_default", "tap", "filter", "debounceTime", "v", "newGroup", "combineLatest", "distinctUntilChanged", "map", "switchMap", "iif", "of", "Observable", "obs", "metadata", "objects", "p", "contentPlugins", "c", "pane", "paneContexts", "InlineContext", "resolvedContext", "plugins", "take", "globalPlugins", "short$", "isPlatformServer", "interval", "skip", "bufferTime", "buffered", "cName", "_", "cValue", "__spreadProps", "__spreadValues", "takeUntil", "delay", "plugin", "layoutRendererRef", "isPlatformBrowser", "stylesheet", "isAuthenticated", "concatMap", "classes", "k", "k2", "ClassClassification", "p2", "merge", "json", "form", "PanelPageForm", "file", "forkJoin", "catchError", "defaultIfEmpty", "cssFile", "managedCss", "managedCssRaw", "panelPageForm", "data", "val", "fn", "isDisabled", "startWith", "status", "PLATFORM_ID", "MEDIA_SETTINGS", "GridLayoutComponent", "_t", "NG_VALUE_ACCESSOR", "forwardRef", "NG_ASYNC_VALIDATORS", "RenderPanelComponent", "RenderPaneComponent", "PanelPage", "document", "renderer2", "panelHandler", "paneStateService", "s", "nestedCss", "__", "nestedClasses", "rebuiltCss", "rebuiltClasses", "keys", "isSelectorValid", "classKeys", "keyIndex", "matchedNodes", "len", "i", "cKeys", "cLen", "j", "rules", "prop", "camelize", "l", "Validators", "state", "pageState", "rc", "changes", "ancestoryWithSelf", "n", "index", "componentFactory", "DOCUMENT", "contextChanged", "contextsChanged", "indexPosition", "hostEl", "panelResolverService", "spm", "styleResolverService", "EventEmitter", "panes", "resolvedPanes", "originMappings", "stylePlugin", "componentRef", "EmptyLayoutComponent", "interationHandlerFormSubmit", "InteractionHandlerPlugin", "interationHandlerDialog", "RenderModule", "ihpm", "CommonModule", "FormsModule", "UtilsModule", "ReactiveFormsModule", "PanelsModule", "LayoutModule"]
}
