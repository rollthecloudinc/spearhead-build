(self.webpackChunkspear=self.webpackChunkspear||[]).push([[592],{4503:(v,_,n)=>{n.d(_,{R:()=>e});var u=n(1944),a=n(4382);function e(t,i){return(0,u.e)((0,a.U)(t,i,arguments.length>=2,!0))}},4382:(v,_,n)=>{n.d(_,{U:()=>a});var u=n(3945);function a(e,t,i,c,f){return function(d,m){var P=i,g=t,h=0;d.subscribe((0,u.x)(m,function(C){var E=h++;g=P?e(g,C,E):(P=!0,C),c&&m.next(g)},f&&function(){P&&m.next(g),m.complete()}))}}},6922:(v,_,n)=>{n.r(_),n.d(_,{CONTENT_PLUGIN:()=>I,ContentBinding:()=>C,ContentInstance:()=>E,ContentModule:()=>g,ContentPlugin:()=>h,ContentPluginEditorOptions:()=>b,ContentPluginManager:()=>O});var u=n(4582),a=n(8694),e=n(8047),t=n(8069),i=n(6718),c=n(4055),f=n(8488),d=n(5813),m=n(745),P=n(8154),g=function(){var o=(0,e.Z)(function r(){(0,t.Z)(this,r)});return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=i.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=i.\u0275\u0275defineInjector({imports:[c.CommonModule]}),o}(),h=function(o){(0,u.Z)(l,o);var r=(0,a.Z)(l);function l(s){var p;return(0,t.Z)(this,l),(p=r.call(this,s)).fileTypes=[],s&&(p.name=p.id,p.handler=void 0!==s.handler?s.handler:void 0,p.selectionComponent=s.selectionComponent?s.selectionComponent:void 0,p.renderComponent=s.renderComponent?s.renderComponent:void 0,p.editorComponent=s.editorComponent?s.editorComponent:void 0),p}return(0,e.Z)(l)}(d.Plugin),C=(0,e.Z)(function o(r){(0,t.Z)(this,o),r&&(this.type=r.type,this.id=r.id)}),E=(0,e.Z)(function o(r){(0,t.Z)(this,o),this.settings=[],r&&(this.pluginName=r.pluginName,r.settings&&(this.settings=r.settings.map(function(l){return new f.AttributeValue(l)})))}),b=(0,e.Z)(function o(r){(0,t.Z)(this,o),this.fullscreen=!1,r&&(this.fullscreen=r.fullscreen)}),I=new i.InjectionToken("ContentPlugin"),O=function(){var o=function(r){(0,u.Z)(s,r);var l=(0,a.Z)(s);function s(p,y){return(0,t.Z)(this,s),l.call(this,p,y)}return(0,e.Z)(s,[{key:"pluginDef",value:function(){return(0,m.of)(new d.PluginDef({name:"content"}))}}]),s}(d.BasePluginManager);return o.\u0275fac=function(l){return new(l||o)(i.\u0275\u0275inject(d.PluginConfigurationManager),i.\u0275\u0275inject(P.ModuleLoaderService))},o.\u0275prov=i.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o}()},6263:(v,_,n)=>{n.r(_),n.d(_,{BasePluginManager:()=>C,ConfigDiscovery:()=>h,Plugin:()=>b,PluginConfig:()=>E,PluginConfigModule:()=>O,PluginConfigurationManager:()=>g,PluginDef:()=>I,PluginModule:()=>P});var u=n(6170),a=n(8047),e=n(8069),t=n(6718),i=n(8154),c=n(745),f=n(1640),d=n(635),m=n(2673),P=function(){var o=(0,a.Z)(function r(){(0,e.Z)(this,r)});return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[i.UtilsModule]}),o}(),g=function(){var o=function(){function r(){(0,e.Z)(this,r),this.configs=[]}return(0,a.Z)(r,[{key:"addConfig",value:function(s){this.configs.push(s)}},{key:"getConfigs",value:function(){return this.configs}}]),r}();return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o}(),h=function(){var o=function(){function r(l,s){(0,e.Z)(this,r),this.pcm=l,this.moduleLoader=s}return(0,a.Z)(r,[{key:"loadPlugins",value:function(s){for(var p=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],M=this.pcm.getConfigs(),j=M.length,Z=[],R=function(D){for(var B=M[D].modules.length,L=function(A){M[D].modules[A].plugins.has(s.name)&&(0===y.length||y.some(function(U){return M[D].modules[A].plugins.get(s.name).findIndex(function(k){return k===U})>-1}))&&Z.push(p.moduleLoader.loadModule(M[D].modules[A].module))},w=0;w<B;w++)L(w)},T=0;T<j;T++)R(T);return 0===Z.length?(0,c.of)(!0):(0,f.D)(Z).pipe((0,d.U)(function(){return!0}))}}]),r}();return o.\u0275fac=function(l){return new(l||o)(t.\u0275\u0275inject(g),t.\u0275\u0275inject(i.ModuleLoaderService))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o}(),C=function(){function o(r,l){(0,e.Z)(this,o),this.pcm=r,this.moduleLoader=l,this.pluginInstances=new Map,this.discoveryPipeline=[],this.discovery()}return(0,a.Z)(o,[{key:"discovery",value:function(){this.discoveryPipeline.push(new h(this.pcm,this.moduleLoader))}},{key:"addDiscovery",value:function(l){this.discoveryPipeline.push(l)}},{key:"register",value:function(l){this.pluginInstances.set(l.id,l)}},{key:"getPlugins",value:function(l){var s=this,p=l?l.filter(function(y){return!s.pluginInstances.has(y)}):[];return l&&0===p.length?(0,c.of)(new Map(l.map(function(y){return[y,s.pluginInstances.get(y)]}))):this.pluginDef().pipe((0,m.w)(function(y){return(0,f.D)(s.discoveryPipeline.map(function(M){return M.loadPlugins(y,p)})).pipe((0,d.U)(function(){return l?new Map(l.map(function(M){return[M,s.pluginInstances.get(M)]})):s.pluginInstances}))}))}},{key:"getPlugin",value:function(l){var s=this;return this.pluginInstances.has(l)?(0,c.of)(this.pluginInstances.get(l)):this.pluginDef().pipe((0,m.w)(function(p){return(0,f.D)(s.discoveryPipeline.map(function(y){return y.loadPlugins(p,[l])})).pipe((0,d.U)(function(){return s.pluginInstances.get(l)}))}))}}]),o}(),E=(0,a.Z)(function o(r){(0,e.Z)(this,o),this.modules=[],r&&r.modules&&(this.modules=r.modules.map(function(l){return new O(l)}))}),b=(0,a.Z)(function o(r){(0,e.Z)(this,o),r&&(this.id=r.id,this.title=r.title)}),I=(0,a.Z)(function o(r){(0,e.Z)(this,o),r&&(this.name=r.name)}),O=(0,a.Z)(function o(r){(0,e.Z)(this,o),r&&(this.module=r.module,r.plugins&&(this.plugins=new Map((0,u.Z)(r.plugins))))})},4841:(v,_,n)=>{function u(a,e){(null==e||e>a.length)&&(e=a.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=a[t];return i}n.d(_,{Z:()=>u})},5488:(v,_,n)=>{function u(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}n.d(_,{Z:()=>u})},8069:(v,_,n)=>{function u(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(_,{Z:()=>u})},8047:(v,_,n)=>{n.d(_,{Z:()=>e});var u=n(1299);function a(t,i){for(var c=0;c<i.length;c++){var f=i[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(t,(0,u.Z)(f.key),f)}}function e(t,i,c){return i&&a(t.prototype,i),c&&a(t,c),Object.defineProperty(t,"prototype",{writable:!1}),t}},5106:(v,_,n)=>{n.d(_,{Z:()=>a});var u=n(4206);function a(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=(0,u.Z)(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var c=0,f=function(){};return{s:f,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(h){throw h},f}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var P,d=!0,m=!1;return{s:function(){i=i.call(e)},n:function(){var h=i.next();return d=h.done,h},e:function(h){m=!0,P=h},f:function(){try{!d&&null!=i.return&&i.return()}finally{if(m)throw P}}}}},8694:(v,_,n)=>{n.d(_,{Z:()=>c});var u=n(265),a=n(8568),e=n(3445),t=n(5488);function c(f){var d=(0,a.Z)();return function(){var g,P=(0,u.Z)(f);if(d){var h=(0,u.Z)(this).constructor;g=Reflect.construct(P,arguments,h)}else g=P.apply(this,arguments);return function i(f,d){if(d&&("object"===(0,e.Z)(d)||"function"==typeof d))return d;if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");return(0,t.Z)(f)}(this,g)}}},265:(v,_,n)=>{function u(a){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(a)}n.d(_,{Z:()=>u})},4582:(v,_,n)=>{n.d(_,{Z:()=>a});var u=n(6);function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,u.Z)(e,t)}},8568:(v,_,n)=>{function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}n.d(_,{Z:()=>u})},6:(v,_,n)=>{function u(a,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i})(a,e)}n.d(_,{Z:()=>u})},1299:(v,_,n)=>{n.d(_,{Z:()=>e});var u=n(3445);function e(t){var i=function a(t,i){if("object"!==(0,u.Z)(t)||null===t)return t;var c=t[Symbol.toPrimitive];if(void 0!==c){var f=c.call(t,i||"default");if("object"!==(0,u.Z)(f))return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"===(0,u.Z)(i)?i:String(i)}},3445:(v,_,n)=>{function u(a){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(a)}n.d(_,{Z:()=>u})},4206:(v,_,n)=>{n.d(_,{Z:()=>a});var u=n(4841);function a(e,t){if(e){if("string"==typeof e)return(0,u.Z)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return(0,u.Z)(e,t)}}}}]);
//# sourceMappingURL=common.6109e67dd180179f.js.map