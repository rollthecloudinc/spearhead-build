{
  "version": 3,
  "sources": ["../../@rollthecloudinc/bridge/fesm2022/rollthecloudinc-bridge.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { Injectable, provideAppInitializer, inject, NgModule } from '@angular/core';\nimport * as i1 from '@rollthecloudinc/plugin';\nimport { Plugin, BasePluginManager, PluginDef } from '@rollthecloudinc/plugin';\nimport { of } from 'rxjs';\nimport * as i2 from '@rollthecloudinc/utils';\nlet PublicApiBridgeService = /*#__PURE__*/(() => {\n  class PublicApiBridgeService {\n    static {\n      this.\u0275fac = function PublicApiBridgeService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PublicApiBridgeService)();\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PublicApiBridgeService,\n        factory: PublicApiBridgeService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PublicApiBridgeService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass BridgeBuilderPlugin extends Plugin {\n  constructor(data) {\n    super(data);\n    if (data) {\n      this.build = data.build;\n    }\n  }\n}\nconst bridgeAppInit = builder => {\n  return () => new Promise(res => {\n    builder.build();\n    res();\n  });\n};\nconst testBridgeFactory = () => {\n  return new BridgeBuilderPlugin({\n    id: 'test',\n    title: 'Test',\n    build: () => {\n      PublicApiBridgeService.prototype['sayHello2'] = () => {\n        alert('say hello 2');\n      };\n    }\n  });\n};\nlet BridgeBuilderPluginManager = /*#__PURE__*/(() => {\n  class BridgeBuilderPluginManager extends BasePluginManager {\n    constructor(pcm, moduleLoader) {\n      super(pcm, moduleLoader);\n    }\n    pluginDef() {\n      return of(new PluginDef({\n        name: 'bridgebuilder'\n      }));\n    }\n    static {\n      this.\u0275fac = function BridgeBuilderPluginManager_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || BridgeBuilderPluginManager)(i0.\u0275\u0275inject(i1.PluginConfigurationManager), i0.\u0275\u0275inject(i2.ModuleLoaderService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: BridgeBuilderPluginManager,\n        factory: BridgeBuilderPluginManager.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return BridgeBuilderPluginManager;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet BridgeBuilderService = /*#__PURE__*/(() => {\n  class BridgeBuilderService {\n    constructor(bpm) {\n      this.bpm = bpm;\n    }\n    build() {\n      try {\n        console.log('build bridge...');\n        this.bpm.getPlugins().subscribe(plugins => {\n          Array.from(plugins).forEach(([k, p]) => {\n            p.build();\n            console.log('bridge build: ' + k);\n          });\n        });\n        console.log('bridge built.');\n      } catch (e) {}\n    }\n    static {\n      this.\u0275fac = function BridgeBuilderService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || BridgeBuilderService)(i0.\u0275\u0275inject(BridgeBuilderPluginManager));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: BridgeBuilderService,\n        factory: BridgeBuilderService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return BridgeBuilderService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet BridgeModule = /*#__PURE__*/(() => {\n  class BridgeModule {\n    constructor(bmp) {\n      console.log('bridge constructor');\n      bmp.register(testBridgeFactory());\n    }\n    static {\n      this.\u0275fac = function BridgeModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || BridgeModule)(i0.\u0275\u0275inject(BridgeBuilderPluginManager));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: BridgeModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        providers: [provideAppInitializer(() => {\n          const initializerFn = bridgeAppInit(inject(BridgeBuilderService));\n          return initializerFn();\n        })]\n      });\n    }\n  }\n  return BridgeModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of bridge\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BridgeBuilderPlugin, BridgeBuilderPluginManager, BridgeModule, PublicApiBridgeService };\n"],
  "mappings": "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",
  "names": ["i0", "provideAppInitializer", "inject", "i1", "Plugin", "BasePluginManager", "PluginDef", "of", "i2", "PublicApiBridgeService", "__ngFactoryType__", "BridgeBuilderPlugin", "data", "bridgeAppInit", "builder", "res", "testBridgeFactory", "BridgeBuilderPluginManager", "pcm", "moduleLoader", "BridgeBuilderService", "bpm", "plugins", "k", "p", "BridgeModule", "bmp"]
}
