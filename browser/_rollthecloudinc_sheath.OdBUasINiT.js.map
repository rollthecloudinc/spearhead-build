{
  "version": 3,
  "sources": ["../../@rollthecloudinc/sheath/fesm2022/rollthecloudinc-sheath.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { NgModule, DOCUMENT, Inject, Injectable } from '@angular/core';\nimport domElementPath from 'dom-element-path';\nimport { camelize, dasherize, underscore } from 'inflected';\nimport merge from 'deepmerge-json';\nimport { Subject, filter, debounceTime, switchMap, tap, Observable, catchError, of } from 'rxjs';\nlet SheathModule = /*#__PURE__*/(() => {\n  class SheathModule {\n    static {\n      this.\u0275fac = function SheathModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SheathModule)();\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: SheathModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({});\n    }\n  }\n  return SheathModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst isSelectorValid = ({\n  selector,\n  document\n}) => {\n  const dummyElement = document.createDocumentFragment();\n  if (!selector || selector.indexOf('undefined') !== -1) {\n    return false;\n  }\n  try {\n    dummyElement.querySelector(selector);\n  } catch {\n    return false;\n  }\n  return true;\n};\nconst selX = /([^\\s\\;\\{\\}][^\\;\\{\\}]*)\\{/g;\nconst endX = /\\}/g;\nconst lineX = /([^\\;\\{\\}]*)\\;/g;\nconst commentX = /\\/\\*[\\s\\S]*?\\*\\//g;\nconst lineAttrX = /([^\\:]+):([^\\;]*);/;\n// This is used, a concatenation of all above. We use alternation to\n// capture.\nconst altX = /(\\/\\*[\\s\\S]*?\\*\\/)|([^\\s\\;\\{\\}][^\\;\\{\\}]*(?=\\{))|(\\})|([^\\;\\{\\}]+\\;(?!\\s*\\*\\/))/gim;\nconst isEmpty = function (x) {\n  return typeof x == 'undefined' || x.length == 0 || x == null;\n};\nconst defaultToJsonArgs = {\n  ordered: false,\n  comments: false,\n  stripComments: false,\n  split: false\n};\nlet StylizerService = /*#__PURE__*/(() => {\n  class StylizerService {\n    constructor(document) {\n      this.document = document;\n      this.mutate$ = new Subject();\n      this.mutated$ = new Subject();\n      this.mutateSub = this.mutate$.pipe(filter(({\n        record\n      }) => record.type === 'attributes' && record.attributeName === 'style' && !!record.target), debounceTime(2000), switchMap(({\n        record,\n        overlay\n      }) => this.mapRecord({\n        record,\n        overlay\n      })), tap(({\n        stylesheet\n      }) => this.mutated$.next({\n        stylesheet\n      }))).subscribe();\n    }\n    stylize({\n      targetNode\n    }) {\n      const overlay = new Map();\n      const observer = new MutationObserver(records => {\n        records.forEach(record => {\n          this.mutate$.next({\n            record,\n            overlay\n          });\n        });\n      });\n      const observerOptions = {\n        childList: true,\n        attributes: true,\n        subtree: true,\n        attributeFilter: ['style'],\n        attributeOldValue: true\n      };\n      observer.observe(targetNode, observerOptions);\n    }\n    mapRecord({\n      record,\n      overlay\n    }) {\n      return new Observable(obs => {\n        const path = domElementPath.default(record.target);\n        const oldCssAsJson = this.toJSON(`${path} { ${record.oldValue} }`);\n        // console.log('oldCssAsJson', oldCssAsJson);\n        const oldCssAsObject = oldCssAsJson.children[path] ? Object.keys(oldCssAsJson.children[path].attributes).reduce((p, c) => ({\n          ...p,\n          [camelize(c.replace('-', '_'), false)]: oldCssAsJson.children[path].attributes[c]\n        }), {}) : undefined;\n        // console.log('oldCssAsObject', oldCssAsObject);\n        const newCssAsObject = Object.keys(record.target.style).reduce((p, c) => !Number.isNaN(parseInt(c)) && record.target.style.hasOwnProperty(camelize(record.target.style[c].replace('-', '_'), false)) ? {\n          ...p,\n          [camelize(record.target.style[c].replace('-', '_'), false)]: record.target.style[camelize(record.target.style[c].replace('-', '_'), false)]\n        } : p, {});\n        // console.log('newCssAsObject', newCssAsObject);\n        const merged = merge(oldCssAsObject, newCssAsObject);\n        // console.log('merged', merged);\n        overlay.set(path, merged);\n        // console.log('overlay changed', overlay);\n        const rules = [];\n        overlay.forEach((v, k) => {\n          const pieces = k.split(' ');\n          const optimizedSelector = pieces.reduce((p, c, i) => c.indexOf('.pane-') !== -1 || c.indexOf('.panel-') !== -1 ? {\n            selector: [...p.selector, c.replace(/^(.*?)(\\.pane-|\\.panel-page|\\.panel-)([0-9]*)(.*?)$/, '$2$3')],\n            chars: p.chars + c.length,\n            lastIndex: p.chars + i + c.length\n          } : {\n            ...p,\n            chars: p.chars + c.length\n          }, {\n            selector: [],\n            chars: 0,\n            lastIndex: 0\n          });\n          if (optimizedSelector.selector.length !== 0) {\n            // console.log('after selector', k.slice(optimizedSelector.lastIndex))\n            let rebuiltSelector = (optimizedSelector.selector.join(' ') + ' ' + k.slice(optimizedSelector.lastIndex).split('>').join('')).replace(/(\\.ng\\-[a-zA-Z0-9_-]*)/gm, '').trim();\n            if (rebuiltSelector.indexOf('.panel-page') === 0) {\n              rebuiltSelector = rebuiltSelector.substr(12).trim();\n            }\n            const selectorValid = isSelectorValid({\n              selector: rebuiltSelector,\n              document: this.document\n            });\n            if (selectorValid) {\n              rules.push(rebuiltSelector + ' { ' + Object.keys(v).reduce((p, c) => c.match(/^[a-zA-Z-]*$/gm) ? `${p}${dasherize(underscore(c))}: ${v[c]};` : p, ``) + ' }');\n            } else {\n              //console.warn('Selector invalid \"' + rebuiltSelector + '\"');\n            }\n          }\n        });\n        // rules.forEach(r => console.log('rule', r));\n        // const mergedCssAsJson = this.toJSON(rules.join(''));\n        // console.log('mergedCssAsJson', mergedCssAsJson);\n        const stylesheet = rules.join(\"\\n\");\n        obs.next({\n          stylesheet\n        });\n        obs.complete();\n      });\n    }\n    /**\n     * The library has an error in it. Considering the size of the function its much easier\n     * to just copy it here and fix than to do anything else. Should probably move it\n     * to a more appropriate module / service though.\n     */\n    toJSON(cssString, args = defaultToJsonArgs) {\n      const capComment = 1;\n      const capSelector = 2;\n      const capEnd = 3;\n      const capAttr = 4;\n      const node = {\n        children: {},\n        attributes: {}\n      };\n      let match = null;\n      let count = 0;\n      if (args.stripComments) {\n        args.comments = false;\n        cssString = cssString.replace(commentX, '');\n      }\n      while ((match = altX.exec(cssString)) != null) {\n        if (!isEmpty(match[capComment]) && args.comments) {\n          // Comment\n          node[count++] = match[capComment].trim();\n        } else if (!isEmpty(match[capSelector])) {\n          // New node, we recurse\n          const name = match[capSelector].trim();\n          // This will return when we encounter a closing brace\n          const newNode = this.toJSON(cssString, args);\n          if (args.ordered) {\n            // Since we must use key as index to keep order and not\n            // name, this will differentiate between a Rule Node and an\n            // Attribute, since both contain a name and value pair.\n            node[count++] = {\n              name,\n              value: newNode,\n              type: 'rule'\n            };\n          } else {\n            const bits = args.split ? name.split(',') : [name];\n            for (const i in bits) {\n              const sel = bits[i].trim();\n              if (sel in node.children) {\n                for (const att in newNode.attributes) {\n                  node.children[sel].attributes[att] = newNode.attributes[att];\n                }\n              } else {\n                node.children[sel] = newNode;\n              }\n            }\n          }\n        } else if (!isEmpty(match[capEnd])) {\n          // Node has finished\n          return node;\n        } else if (!isEmpty(match[capAttr])) {\n          const line = match[capAttr].trim();\n          const attr = lineAttrX.exec(line);\n          if (attr) {\n            // Attribute\n            const name = attr[1].trim();\n            const value = attr[2].trim();\n            if (args.ordered) {\n              node[count++] = {\n                name,\n                value,\n                type: 'attr'\n              };\n            } else {\n              if (name in node.attributes) {\n                const currVal = node.attributes[name];\n                if (!(currVal instanceof Array)) {\n                  node.attributes[name] = [currVal];\n                }\n                node.attributes[name].push(value);\n              } else {\n                node.attributes[name] = value;\n              }\n            }\n          } else {\n            // Semicolon terminated line\n            node[count++] = line;\n          }\n        }\n      }\n      return node;\n    }\n    static {\n      this.\u0275fac = function StylizerService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || StylizerService)(i0.\u0275\u0275inject(DOCUMENT));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: StylizerService,\n        factory: StylizerService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return StylizerService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nvar ClassClassification = /*#__PURE__*/function (ClassClassification) {\n  ClassClassification[ClassClassification[\"KEEP\"] = 0] = \"KEEP\";\n  ClassClassification[ClassClassification[\"ADD\"] = 1] = \"ADD\";\n  ClassClassification[ClassClassification[\"REMOVE\"] = 2] = \"REMOVE\";\n  return ClassClassification;\n}(ClassClassification || {});\nlet ClassifyService = /*#__PURE__*/(() => {\n  class ClassifyService {\n    constructor(document) {\n      this.document = document;\n      this.mutate = new Subject();\n      this.mutated$ = new Subject();\n      this.mutateub = this.mutate.pipe(filter(({\n        record\n      }) => record.type === 'attributes' && record.attributeName === 'class' && !!record.target), debounceTime(2000), switchMap(({\n        record,\n        overlay,\n        originals\n      }) => this.mapRecord({\n        record,\n        overlay,\n        originals\n      }).pipe(catchError(e => {\n        //console.warn(e);\n        return of({\n          classes: overlay\n        });\n      }))), tap(({\n        classes\n      }) => this.mutated$.next({\n        classes\n      }))).subscribe();\n    }\n    classify({\n      targetNode\n    }) {\n      const overlay = new Map();\n      const originals = new Map();\n      const observer = new MutationObserver(records => {\n        records.forEach(record => {\n          this.mutate.next({\n            record,\n            overlay,\n            originals\n          });\n        });\n      });\n      const observerOptions = {\n        childList: true,\n        attributes: true,\n        subtree: true,\n        attributeFilter: ['class'],\n        attributeOldValue: true\n      };\n      observer.observe(targetNode, observerOptions);\n    }\n    mapRecord({\n      record,\n      overlay,\n      originals\n    }) {\n      return new Observable(obs => {\n        const path = domElementPath.default(record.target);\n        let rebuiltSelector = '';\n        const oldClasses = record.oldValue && record.oldValue !== null ? record.oldValue.split(' ').map(c => c.trim()) : [];\n        const pieces = path.split(' ');\n        const optimizedSelector = pieces.reduce((p, c, i) => c.indexOf('.pane-') !== -1 || c.indexOf('.panel-') !== -1 ? {\n          selector: [...p.selector, c.replace(/^(.*?)(\\.pane-|\\.panel-page|\\.panel-)([0-9]*)(.*?)$/, '$2$3')],\n          chars: p.chars + c.length,\n          lastIndex: p.chars + i + c.length\n        } : {\n          ...p,\n          chars: p.chars + c.length\n        }, {\n          selector: [],\n          chars: 0,\n          lastIndex: 0\n        });\n        if (optimizedSelector.selector.length !== 0) {\n          const suffix = path.substring(optimizedSelector.lastIndex).split('>').map(s => s.trim()).filter(s => s !== '').map((s, i) => {\n            const dotIndex = s.indexOf('.');\n            const element = dotIndex === -1 ? s.substring(0) : s.substring(0, dotIndex); // Corrected\n            const classes = dotIndex === -1 ? [] : s.substring(dotIndex + 1).split('.');\n            const keep = classes.filter(c => oldClasses.find(oc => c === oc) !== undefined);\n            return (i === 0 ? ' > ' : '') + element + (keep.length === 0 ? '' : '.' + keep.join('.'));\n          });\n          rebuiltSelector = (optimizedSelector.selector.join(' ') + /*' ' +*/suffix.join(' > ') /*path.slice(optimizedSelector.lastIndex)*/ /*.split('>').join('')*/).replace(/(\\.ng\\-[a-zA-Z0-9_-]*)/gm, '');\n          if (rebuiltSelector.indexOf('.panel-page') === 0) {\n            rebuiltSelector = rebuiltSelector.substr(12).trim();\n          }\n        }\n        // This is throwing away nested panel pages but still needs to be thought through\n        // const rebuiltPieces = rebuiltSelector.split(' ');\n        // const [ lastSelector ] = rebuiltPieces[rebuiltPieces.length - 1].split('.', 1);\n        // rebuiltSelector = (rebuiltPieces.splice(0, rebuiltPieces.length - 2).join(' ') + ' ' + lastSelector).trim();\n        const selectorValid = isSelectorValid({\n          selector: rebuiltSelector,\n          document: this.document\n        });\n        if (selectorValid) {\n          if (!originals.has(rebuiltSelector)) {\n            originals.set(rebuiltSelector, new Set(oldClasses));\n          }\n          const classList = record.target.classList;\n          // Adding prefix ng - and mat- to exclusion although should probably be more configurable / customizable.\n          const classMap = new Map(Array.from(classList.values()).map(c => [`${c}`, !originals.has(rebuiltSelector) || !originals.get(rebuiltSelector).has(`${c}`) && `${c}`.indexOf('ng-') !== 0 && `${c}`.indexOf('mat-') !== 0 ? ClassClassification.ADD : ClassClassification.KEEP]));\n          const removed = Array.from(originals.get(rebuiltSelector)).reduce((p, c) => [Array.from(classList.values()).findIndex(c2 => c2 === c) === -1 ? c : undefined], []).filter(c => c !== undefined);\n          if (removed.length !== 0) {\n            removed.forEach(c => classMap.set(c, ClassClassification.REMOVE));\n          }\n          if (classMap.size === 0 && overlay.has(rebuiltSelector)) {\n            overlay.delete(rebuiltSelector);\n          } else if (classMap.size !== 0) {\n            overlay.set(rebuiltSelector, classMap);\n          }\n          obs.next({\n            classes: overlay\n          });\n          obs.complete();\n        } else {\n          obs.error(new Error('Selector invalid \"' + rebuiltSelector + '\"'));\n          obs.complete();\n        }\n      });\n    }\n    static {\n      this.\u0275fac = function ClassifyService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ClassifyService)(i0.\u0275\u0275inject(DOCUMENT));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: ClassifyService,\n        factory: ClassifyService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ClassifyService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of sheath\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ClassClassification, ClassifyService, SheathModule, StylizerService, isEmpty, isSelectorValid };\n"],
  "mappings": "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",
  "names": ["i0", "DOCUMENT", "domElementPath", "camelize", "dasherize", "underscore", "merge", "Subject", "filter", "debounceTime", "switchMap", "tap", "Observable", "catchError", "of", "SheathModule", "__ngFactoryType__", "isSelectorValid", "selector", "document", "dummyElement", "commentX", "lineAttrX", "altX", "isEmpty", "x", "defaultToJsonArgs", "StylizerService", "document", "Subject", "filter", "record", "debounceTime", "switchMap", "overlay", "tap", "stylesheet", "targetNode", "observer", "records", "observerOptions", "Observable", "obs", "path", "domElementPath", "oldCssAsJson", "oldCssAsObject", "p", "c", "__spreadProps", "__spreadValues", "camelize", "newCssAsObject", "merged", "merge", "rules", "v", "k", "optimizedSelector", "i", "rebuiltSelector", "isSelectorValid", "dasherize", "underscore", "cssString", "args", "node", "match", "count", "line", "attr", "name", "value", "currVal", "newNode", "bits", "sel", "att", "__ngFactoryType__", "DOCUMENT", "ClassClassification", "ClassifyService", "originals", "catchError", "e", "of", "classes", "oldClasses", "suffix", "s", "dotIndex", "element", "keep", "oc", "classList", "classMap", "removed", "c2"]
}
