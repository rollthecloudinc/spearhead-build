{
  "version": 3,
  "sources": ["../../@rollthecloudinc/rest/fesm2022/rollthecloudinc-rest.mjs"],
  "sourcesContent": ["import * as i4 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i1 from '@angular/forms';\nimport { Validators, NG_VALUE_ACCESSOR, NG_VALIDATORS, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport * as i0 from '@angular/core';\nimport { EventEmitter, forwardRef, Input, Output, Component, Injectable, NgModule } from '@angular/core';\nimport { MaterialModule } from '@rollthecloudinc/material';\nimport * as i2 from '@rollthecloudinc/datasource';\nimport { Renderer, DatasourcePlugin, Rest as Rest$1, DatasourceEditorOptions, Dataset, DatasourceModule } from '@rollthecloudinc/datasource';\nimport * as i8 from 'angular-split';\nimport { AngularSplitModule } from 'angular-split';\nimport * as i9 from 'ngx-json-viewer';\nimport { NgxJsonViewerModule } from 'ngx-json-viewer';\nimport * as i3$1 from '@rollthecloudinc/snippet';\nimport { Snippet, SnippetModule } from '@rollthecloudinc/snippet';\nimport * as i3 from '@rollthecloudinc/token';\nimport { TokenModule } from '@rollthecloudinc/token';\nimport { BehaviorSubject, Subject, of, combineLatest, Observable, iif, throwError } from 'rxjs';\nimport { map, tap, filter, switchMap, catchError, takeUntil, debounceTime, delay, timeout } from 'rxjs/operators';\nimport * as qs from 'qs';\nimport * as i5$1 from '@rollthecloudinc/dparam';\nimport { Param, DparamModule } from '@rollthecloudinc/dparam';\nimport * as i5 from '@angular/material/autocomplete';\nimport * as i6 from '@angular/material/input';\nimport * as i7 from '@angular/material/select';\nimport * as i1$1 from '@rollthecloudinc/attributes';\nimport { ContentBinding } from '@rollthecloudinc/content';\nimport * as i5$2 from '@rollthecloudinc/crud';\nimport { CrudAdaptorPlugin, CrudModule } from '@rollthecloudinc/crud';\nimport * as i2$1 from '@angular/common/http';\nimport { HttpParams } from '@angular/common/http';\nimport * as i4$1 from '@rollthecloudinc/durl';\nimport * as i1$2 from '@ngrx/data';\nimport { DefaultHttpUrlGenerator, normalizeRoot } from '@ngrx/data';\nimport * as i3$2 from '@rollthecloudinc/context';\nfunction RestSourceFormComponent_ngx_json_viewer_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"ngx-json-viewer\", 12);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"json\", ctx_r0.jsonData)(\"expanded\", false);\n  }\n}\nclass Rest {\n  constructor(data) {\n    this.params = [];\n    if (data) {\n      this.url = data.url;\n      this.method = data.method ? data.method : undefined;\n      if (data.renderer !== undefined) {\n        this.renderer = new Renderer(data.renderer);\n      }\n      // For now leave these on rest even though they should probably be one level above inside datasource... maybe not :/\n      if (data.params !== undefined) {\n        this.params = data.params.map(p => new Param(p));\n      }\n      if (data.body) {\n        this.body = new Snippet(data.body);\n      }\n    }\n  }\n}\nlet RestSourceFormComponent = /*#__PURE__*/(() => {\n  class RestSourceFormComponent {\n    set restSource(restSource) {\n      this.restSource$.next(restSource);\n    }\n    constructor(fb, datasourceApi, tokenizerService) {\n      this.fb = fb;\n      this.datasourceApi = datasourceApi;\n      this.tokenizerService = tokenizerService;\n      this.dataChange = new EventEmitter();\n      this.contexts = [];\n      this.sourceForm = this.fb.group({\n        url: this.fb.control('', Validators.required),\n        params: this.fb.control([]),\n        body: this.fb.control(''),\n        method: this.fb.control('get', [Validators.required])\n      });\n      this.restSource$ = new BehaviorSubject(new Rest());\n      this.urlParams$ = new BehaviorSubject({});\n      this.bodyParams$ = new BehaviorSubject({});\n      this.componentDestroyed = new Subject();\n      this.refreshData$ = new Subject();\n      this.refreshSubscription = this.refreshData$.pipe(map(() => this.generateUrl()), tap(url => console.log('URL Generated:', url)), filter(url => url && url.trim() !== ''), switchMap(url => {\n        const method = this.sourceForm.get('method').value; // Get the selected HTTP method\n        const body = this.sourceForm.get('body').value?.content; // Get the body content if provided\n        // Choose the appropriate HTTP action based on the method\n        const request$ = method === 'post' ? this.datasourceApi.postData({\n          url,\n          body\n        }) // Use POST with body\n        : this.datasourceApi.getData(url); // Default is GET\n        return request$.pipe(catchError(e => {\n          console.error(e); // Log the error for debugging\n          return of([]); // Return an empty array in case of errors\n        }));\n      }), takeUntil(this.componentDestroyed)).subscribe(data => {\n        this.jsonData = data; // Update the JSON preview data\n        this.dataChange.emit(data); // Emit the new data to the parent component\n      });\n      this.urlChangeSub = this.sourceForm.get('url').valueChanges.pipe(debounceTime(500), filter(url => url && url.trim() !== ''), map(url => [url, url.indexOf('?')]), map(([url, index]) => [index > -1 ? url.substring(0, index) : url, index > -1 ? url.substring(index + 1) : ''])).subscribe(([path, queryString]) => {\n        const pathParsed = path.split('/').reduce((p, c, i) => c.indexOf(':') === 0 ? {\n          ...p,\n          [c.substr(1)]: c\n        } : p, {});\n        const parsed = {\n          ...pathParsed,\n          ...qs.parse(queryString)\n        };\n        console.log('params parsed', parsed);\n        // this.paramsParsed = parsed;\n        this.urlParams$.next(parsed);\n      });\n      this.bodyChangeSub = this.sourceForm.get('body').valueChanges.pipe(debounceTime(500), tap(v => {\n        console.log('body change', v);\n        const params = this.parseBody(v.content);\n        this.bodyParams$.next({\n          ...params\n        });\n      })).subscribe();\n      this.paramsChangesSub = combineLatest([this.urlParams$, this.bodyParams$]).pipe(debounceTime(500), tap(([urlParams, bodyParams]) => {\n        this.paramsParsed = {\n          ...urlParams,\n          ...bodyParams\n        };\n      })).subscribe();\n      this.restSourceSub = this.restSource$.pipe(tap(r => {\n        if (r) {\n          this.sourceForm.get('url').setValue(r.url);\n          this.sourceForm.get('method').setValue(r.method ? r.method : '');\n          this.sourceForm.get('body').setValue(r.body ? {\n            ...r.body,\n            jsScript: ''\n          } : '');\n        } else {\n          this.sourceForm.get('url').setValue('');\n          this.sourceForm.get('method').setValue('');\n          this.sourceForm.get('body').setValue('');\n        }\n      })).subscribe();\n      this.onTouched = () => {};\n    }\n    ngOnInit() {\n      this.sourceForm.valueChanges.pipe(debounceTime(1000)).subscribe(() => {\n        console.log('refresh data');\n        this.refreshData$.next(undefined);\n      });\n    }\n    ngOnDestroy() {\n      this.componentDestroyed.next(undefined);\n      this.componentDestroyed.complete();\n    }\n    parseBody(input) {\n      const placeholderRegex = /\\[:([a-zA-Z0-9_]+)\\]/g;\n      const result = {};\n      // Recursive function to traverse the input object\n      function traverse(obj) {\n        if (typeof obj === \"string\") {\n          let match;\n          while ((match = placeholderRegex.exec(obj)) !== null) {\n            const key = match[1]; // Extract the key inside the placeholder\n            result[key] = `:${key}`; // Map key to value without brackets\n          }\n        } else if (Array.isArray(obj)) {\n          for (const item of obj) {\n            traverse(item);\n          }\n        } else if (typeof obj === \"object\" && obj !== null) {\n          for (const key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              traverse(obj[key]);\n            }\n          }\n        }\n      }\n      traverse(input);\n      return result;\n    }\n    writeValue(val) {\n      if (val) {\n        this.sourceForm.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.sourceForm.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.sourceForm.disable();\n      } else {\n        this.sourceForm.enable();\n      }\n    }\n    validate(c) {\n      return this.sourceForm.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"source is invalid\"\n        }\n      };\n    }\n    /*refreshData() {\n       }*/\n    generateUrl() {\n      console.log('generate url');\n      const url = this.sourceForm.get('url').value;\n      const [path, queryString] = url ? url.split('?', 2) : ['', ''];\n      const qsParsed = qs.parse(queryString);\n      const qsOverrides = {};\n      const pathPieces = path.split('/');\n      const len = pathPieces.length;\n      const rebuildUrl = [];\n      let pathParams = 0;\n      for (let i = 0; i < len; i++) {\n        if (pathPieces[i].indexOf(':') === 0) {\n          if (!this.sourceForm.get('params').value[pathParams]) {\n            return '';\n          }\n          const mapping = this.sourceForm.get('params').value[pathParams].mapping;\n          rebuildUrl.push(mapping.value.type === 'static' ? mapping.value.value : mapping.value.testValue);\n          pathParams++;\n        } else {\n          rebuildUrl.push(pathPieces[i]);\n        }\n      }\n      for (const prop in qsParsed) {\n        if (typeof qsParsed[prop] === 'string' && qsParsed[prop].indexOf(':') > -1) {\n          if (!this.sourceForm.get('params').value[pathParams]) {\n            return '';\n          }\n          const mapping = this.sourceForm.get('params').value[pathParams].mapping;\n          qsOverrides[prop] = mapping.type === 'static' ? mapping.value : mapping.testValue;\n          pathParams++;\n        }\n      }\n      const apiUrl = rebuildUrl.join('/') + (queryString !== '' ? '?' + qs.stringify({\n        ...qsParsed,\n        ...qsOverrides\n      }) : '');\n      console.log(apiUrl);\n      return apiUrl;\n    }\n    onDataChange(data) {\n      this.tokens = this.tokenizerService.generateGenericTokens(data[0]);\n    }\n    static {\n      this.\u0275fac = function RestSourceFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestSourceFormComponent)(i0.\u0275\u0275directiveInject(i1.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2.DatasourceApiService), i0.\u0275\u0275directiveInject(i3.TokenizerService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RestSourceFormComponent,\n        selectors: [[\"classifieds-ui-rest-source-form\"]],\n        inputs: {\n          restSource: \"restSource\",\n          contexts: \"contexts\"\n        },\n        outputs: {\n          dataChange: \"dataChange\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => RestSourceFormComponent),\n          multi: true\n        }, {\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => RestSourceFormComponent),\n          multi: true\n        }])],\n        decls: 19,\n        vars: 7,\n        consts: [[\"direction\", \"horizontal\", 3, \"formGroup\"], [\"as-split-area\", \"\", \"size\", \"50\"], [\"required\", \"\", \"formControlName\", \"method\"], [\"value\", \"get\"], [\"value\", \"post\"], [\"value\", \"put\"], [\"value\", \"delete\"], [\"matInput\", \"\", \"placeholder\", \"Url\", \"formControlName\", \"url\", \"required\", \"\"], [\"formControlName\", \"body\", \"rows\", \"10\", \"cols\", \"40\", 3, \"rootForm\", \"tokens\"], [\"formControlName\", \"params\", 3, \"params\", \"paramValues\", \"contexts\"], [\"size\", \"50\"], [3, \"json\", \"expanded\", 4, \"ngIf\"], [3, \"json\", \"expanded\"]],\n        template: function RestSourceFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"as-split\", 0)(1, \"div\", 1)(2, \"div\")(3, \"mat-form-field\")(4, \"mat-select\", 2)(5, \"mat-option\", 3);\n            i0.\u0275\u0275text(6, \"GET\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(7, \"mat-option\", 4);\n            i0.\u0275\u0275text(8, \"POST\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(9, \"mat-option\", 5);\n            i0.\u0275\u0275text(10, \"PUT\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(11, \"mat-option\", 6);\n            i0.\u0275\u0275text(12, \"DELETE\");\n            i0.\u0275\u0275elementEnd()()();\n            i0.\u0275\u0275elementStart(13, \"mat-form-field\");\n            i0.\u0275\u0275element(14, \"input\", 7);\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275element(15, \"classifieds-ui-snippet-form\", 8)(16, \"classifieds-ui-params-form\", 9);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(17, \"as-split-area\", 10);\n            i0.\u0275\u0275template(18, RestSourceFormComponent_ngx_json_viewer_18_Template, 1, 2, \"ngx-json-viewer\", 11);\n            i0.\u0275\u0275elementEnd()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.sourceForm);\n            i0.\u0275\u0275advance(15);\n            i0.\u0275\u0275property(\"rootForm\", false)(\"tokens\", ctx.tokens);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"params\", ctx.paramsParsed)(\"paramValues\", ctx.restSource$.value.params)(\"contexts\", ctx.contexts);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"ngIf\", ctx.jsonData);\n          }\n        },\n        dependencies: [i4.NgIf, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i5.MatOption, i6.MatInput, i6.MatFormField, i7.MatSelect, i8.SplitComponent, i8.SplitAreaDirective, i9.NgxJsonViewerComponent, i3$1.SnippetFormComponent, i5$1.ParamsFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return RestSourceFormComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RestDatasourceComponent = /*#__PURE__*/(() => {\n  class RestDatasourceComponent {\n    set settings(settings) {\n      this.restSource = settings ? new Rest(this.attributeSerializer.deserializeAsObject(settings)) : undefined;\n    }\n    constructor(attributeSerializer, controlContainer) {\n      this.attributeSerializer = attributeSerializer;\n      this.controlContainer = controlContainer;\n      this.contexts = [];\n    }\n    static {\n      this.\u0275fac = function RestDatasourceComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestDatasourceComponent)(i0.\u0275\u0275directiveInject(i1$1.AttributeSerializerService), i0.\u0275\u0275directiveInject(i1.ControlContainer));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RestDatasourceComponent,\n        selectors: [[\"classifieds-ui-rest-datasource\"]],\n        inputs: {\n          settings: \"settings\",\n          contexts: \"contexts\"\n        },\n        standalone: false,\n        decls: 2,\n        vars: 3,\n        consts: [[3, \"formGroup\"], [\"formControlName\", \"settings\", 3, \"restSource\", \"contexts\"]],\n        template: function RestDatasourceComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementContainerStart(0, 0);\n            i0.\u0275\u0275element(1, \"classifieds-ui-rest-source-form\", 1);\n            i0.\u0275\u0275elementContainerEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.controlContainer.control);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"restSource\", ctx.restSource)(\"contexts\", ctx.contexts);\n          }\n        },\n        dependencies: [i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, RestSourceFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return RestDatasourceComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst restDatasourcePluginFactory = (fetchhelper, paramContextExtractor, attributeSerializer) => {\n  return new DatasourcePlugin({\n    id: 'rest',\n    title: 'Rest',\n    editor: RestDatasourceComponent,\n    fetch: ({\n      settings,\n      metadata\n    }) => fetchhelper.fetchDataset({\n      settings,\n      metadata\n    }),\n    editorOptions: () => of(new DatasourceEditorOptions({\n      fullscreen: true\n    })),\n    getBindings: ({\n      settings,\n      metadata\n    }) => of([]).pipe(map(() => attributeSerializer.deserializeAsObject(settings)), map(s => new Rest$1(s)), switchMap(ds => paramContextExtractor.extractContexts(ds.params)), map(contexts => contexts.map(id => new ContentBinding({\n      id,\n      type: 'context'\n    }))))\n  });\n};\nconst restEntityCrudAdaptorPluginFactory = (paramsEvaluatorService, http, httpUrlGenerator, config) => {\n  return new CrudAdaptorPlugin({\n    id: 'rest',\n    title: 'Rest',\n    create: ({\n      object,\n      params\n    }) => of({\n      success: false\n    }).pipe(switchMap(() => paramsEvaluatorService.paramValues(new Map(Object.keys(params).map(name => [name, params[name]])))), switchMap(options => restfulRequest({\n      method: 'POST',\n      url: httpUrlGenerator.entityResource(options.get('entityName'), options.has('root') ? options.get('root') : config.root ? config.root : 'api', true),\n      data: object || new Error(`No entity to add`),\n      params: options,\n      http\n    })), map(() => ({\n      success: true,\n      entity: object\n    }))),\n    read: ({}) => of({\n      success: false\n    }),\n    update: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }).pipe(switchMap(() => identity({\n      object,\n      parentObject\n    })), switchMap(({\n      identity\n    }) => paramsEvaluatorService.paramValues(new Map(Object.keys(params).map(name => [name, params[name]]))).pipe(map(options => ({\n      identity,\n      options\n    })))), switchMap(({\n      identity,\n      options\n    }) => restfulRequest({\n      method: 'PUT',\n      url: httpUrlGenerator.entityResource(options.get('entityName'), options.has('root') ? options.get('root') : config.root ? config.root : 'api', true) + `${identity}`,\n      data: object || new Error(`No entity to add`),\n      params: options,\n      http\n    })), map(() => ({\n      success: true,\n      entity: object\n    }))),\n    delete: ({}) => of({\n      success: false\n    }),\n    query: ({\n      params,\n      rule\n    }) => of({\n      success: false\n    }).pipe(switchMap(() => paramsEvaluatorService.paramValues(new Map(Object.keys(params).map(name => [name, params[name]])))), switchMap(options => new Observable(obs => {\n      const query = rule ? rule.conditions.all.reduce((p, c) => [...p, ...c.any.filter(c2 => c2.fact !== 'identity').map(c2 => `${c2.path.substr(2)}=${c2.value}`)], []) : [];\n      const identityFact = rule ? rule.conditions.all.reduce((p, c) => !p ? c.any.find(c2 => c2.fact === 'identity') : p, undefined) : undefined;\n      obs.next({\n        identityFact,\n        options,\n        query: query.length > 0 ? new HttpParams({\n          fromString: query.join('&')\n        }) : undefined,\n        path: identityFact ? identityFact.value : ''\n      });\n      obs.complete();\n    })), switchMap(({\n      options,\n      query,\n      path,\n      identityFact\n    }) => iif(() => !!identityFact, restfulRequest({\n      method: 'GET',\n      url: httpUrlGenerator.entityResource(options.get('entityName'), options.has('root') ? options.get('root') : config.root ? config.root : 'api', true) + path,\n      options: {\n        params: query\n      },\n      params: options,\n      http\n    }).pipe(map(objects => ({\n      success: true,\n      entities: Array.isArray(objects) ? objects : [objects]\n    }))), restfulRequest({\n      method: 'GET',\n      url: httpUrlGenerator.collectionResource(options.get('entityName'), options.has('root') ? options.get('root') : config.root ? config.root : 'api') + path,\n      options: {\n        params: query\n      },\n      params: options,\n      http\n    }).pipe(map(objects => ({\n      success: true,\n      entities: objects\n    }))))))\n  });\n};\nconst restfulRequest = ({\n  method,\n  url,\n  data,\n  options,\n  params,\n  http\n}) => {\n  const req = {\n    method,\n    url,\n    data,\n    options\n  };\n  if (data instanceof Error) {\n    // return handleRestfulError(req)(data);\n    return of([]);\n  }\n  let result$;\n  switch (method) {\n    case 'DELETE':\n      {\n        result$ = http.delete(url, options);\n        if (params.has('saveDelay')) {\n          result$ = result$.pipe(delay(+params.get('saveDelay')));\n        }\n        break;\n      }\n    case 'GET':\n      {\n        const newUrl = params.has('suffix') ? url + params.get('suffix') : url;\n        result$ = http.get(newUrl, options);\n        if (params.has('getDelay')) {\n          result$ = result$.pipe(delay(+params.get('getDelay')));\n        }\n        break;\n      }\n    case 'POST':\n      {\n        result$ = http.post(url, data, options);\n        if (params.has('saveDelay')) {\n          result$ = result$.pipe(delay(+params.get('saveDelay')));\n        }\n        break;\n      }\n    // N.B.: It must return an Update<T>\n    case 'PUT':\n      {\n        result$ = http.put(url, data, options);\n        if (params.has('saveDelay')) {\n          result$ = result$.pipe(delay(+params.get('saveDelay')));\n        }\n        break;\n      }\n    default:\n      {\n        const error = new Error('Unimplemented HTTP method, ' + method);\n        result$ = throwError(error);\n      }\n  }\n  if (params.has('timeout')) {\n    result$ = result$.pipe(timeout(+params.get('timeout') + +params.get('saveDelay')));\n  }\n  return result$.pipe(catchError(() => of([])));\n};\nlet RestFetchHelperService = /*#__PURE__*/(() => {\n  class RestFetchHelperService {\n    constructor(attrbuteSerializer,\n    // private datasourceApi: DatasourceApiService,\n    http, snippetParserService, urlGenerator, paramsEvaluatorService) {\n      this.attrbuteSerializer = attrbuteSerializer;\n      this.http = http;\n      this.snippetParserService = snippetParserService;\n      this.urlGenerator = urlGenerator;\n      this.paramsEvaluatorService = paramsEvaluatorService;\n    }\n    fetchDataset({\n      settings,\n      metadata\n    }) {\n      console.log('metadata', metadata);\n      return of(new Dataset()).pipe(tap(() => console.log('START rest fetch')), map(() => this.attrbuteSerializer.deserializeAsObject(settings)), map(s => new Rest(s)), switchMap(r => this.urlGenerator.getUrl(r.url, r.params, metadata).pipe(map(url => [new Rest({\n        ...r,\n        url\n      }), r]))), switchMap(([_, r]) => {\n        if (r.method.toUpperCase() === 'POST' && r.body && r.body.contentType === 'application/json') {\n          const urlParams = this.parseUrl(r.url);\n          const bodyParams = r.body && r.body.contentType === 'application/json' ? this.parseBody(r.body.content) : {};\n          const combinedParams = {\n            ...urlParams,\n            ...bodyParams\n          };\n          const mappedParams = this.mapKeyToParam(combinedParams, r.params || []);\n          Object.keys(urlParams).forEach(p => mappedParams.delete(p));\n          // Evaluate param values and replace placeholders recursively in JSON\n          return this.paramsEvaluatorService.paramValues(mappedParams).pipe(tap(bodyParams => console.log('Evaluated body params', bodyParams)), map(bodyParams => {\n            let bodyObject = JSON.parse(r.body.content);\n            // Recursively replace keys/values in the JSON body using the mapping\n            bodyObject = this.replaceTokensInJson(bodyObject, bodyParams);\n            return bodyObject;\n          }), map(body => [_, body]));\n        } else {\n          return of([_, {}]);\n        }\n      }), filter(([r]) => r.url && r.url.trim() !== '' && r.url.indexOf('http') > -1), switchMap(([r, data]) => restfulRequest({\n        url: r.url,\n        method: r.method.toUpperCase() === 'POST' ? 'POST' : 'GET',\n        ...(r.method.toUpperCase() === 'POST' && r.body && r.body.contentType === 'application/json' ? {\n          data\n        } : {}),\n        http: this.http,\n        params: new Map()\n      }).pipe(catchError(() => of([])), map(data => Array.isArray(data) ? data : [data]),\n      // tap(data => this.cache.set(url, data))\n      map(results => new Dataset({\n        results\n      })))), tap(() => console.log('END rest fetch'))\n      // phase out\n      /*switchMap<Rest, Observable<Dataset>>(r => {\n        const method = r.method ? r.method : 'get';\n        switch(method) {\n          case 'post':\n          case 'POST':\n            return of([]).pipe(\n              switchMap(() => this.snippetParserService.parseSnippet({ snippet: r.body })),\n              switchMap(body => this.datasourceApi.postData({ url: r.url, body })),\n              map(results => new Dataset({ results }))\n            );\n                 default:\n            return this.datasourceApi.getData(r.url).pipe(\n              map(results => new Dataset({ results }))\n            );\n        }\n         })*/);\n    }\n    parseUrl(url) {\n      const placeholderRegex = /:([a-zA-Z0-9_]+)/g;\n      const result = {};\n      let match;\n      // Use the regex to find all :placeholders in the string\n      while ((match = placeholderRegex.exec(url)) !== null) {\n        const key = match[1]; // Extract the key (e.g., id, hello, whatever)\n        result[key] = `:${key}`; // Map key to its full placeholder\n      }\n      return result;\n    }\n    parseBody(input) {\n      const placeholderRegex = /\\[:([a-zA-Z0-9_]+)\\]/g;\n      const result = {};\n      // Recursive function to traverse the input object\n      function traverse(obj) {\n        if (typeof obj === \"string\") {\n          let match;\n          while ((match = placeholderRegex.exec(obj)) !== null) {\n            const key = match[1]; // Extract the key inside the placeholder\n            result[key] = `:${key}`; // Map key to value without brackets\n          }\n        } else if (Array.isArray(obj)) {\n          for (const item of obj) {\n            traverse(item);\n          }\n        } else if (typeof obj === \"object\" && obj !== null) {\n          for (const key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              traverse(obj[key]);\n            }\n          }\n        }\n      }\n      traverse(input);\n      return result;\n    }\n    mapKeyToParam(record, params) {\n      const resultMap = new Map();\n      const recordKeys = Object.keys(record);\n      // Iterate over each key in the record object\n      recordKeys.forEach((key, index) => {\n        // Check if there is a corresponding param; if not, skip\n        if (index < params.length) {\n          resultMap.set(key, params[index]);\n        }\n      });\n      return resultMap;\n    }\n    /**\n     * Recursively replaces keys/values in a JSON object or array using the token map.\n     * @param obj The JSON object or array to process.\n     * @param tokenMap The map of tokens to replace.\n     * @returns The processed JSON structure.\n     */\n    replaceTokensInJson(obj, tokenMap) {\n      if (typeof obj === \"string\") {\n        // Replace tokens within a string value\n        for (const [token, param] of tokenMap) {\n          obj = obj.replace(new RegExp(`\\\\[:${token}\\\\]`, 'g'), param.toString());\n          obj = obj.replace(new RegExp(`:${token}`, 'g'), param.toString()); // Support for :token form\n        }\n        return obj;\n      } else if (Array.isArray(obj)) {\n        // Recursively process each item in the array\n        return obj.map(item => this.replaceTokensInJson(item, tokenMap));\n      } else if (typeof obj === \"object\" && obj !== null) {\n        // Process each key-value pair in the object\n        const processed = {};\n        for (const key in obj) {\n          if (obj.hasOwnProperty(key)) {\n            let newKey = key;\n            // Check and replace the key itself if it matches a token\n            for (const [token, param] of tokenMap) {\n              newKey = newKey.replace(new RegExp(`\\\\[:${token}\\\\]`, 'g'), param.toString());\n              newKey = newKey.replace(new RegExp(`:${token}`, 'g'), param.toString()); // Support for :token form\n            }\n            // Recursively process the value\n            processed[newKey] = this.replaceTokensInJson(obj[key], tokenMap);\n          }\n        }\n        return processed;\n      } else {\n        // For any other type, return it as-is\n        return obj;\n      }\n    }\n    static {\n      this.\u0275fac = function RestFetchHelperService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestFetchHelperService)(i0.\u0275\u0275inject(i1$1.AttributeSerializerService), i0.\u0275\u0275inject(i2$1.HttpClient), i0.\u0275\u0275inject(i3$1.SnippetParserService), i0.\u0275\u0275inject(i4$1.UrlGeneratorService), i0.\u0275\u0275inject(i5$1.ParamEvaluatorService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: RestFetchHelperService,\n        factory: RestFetchHelperService.\u0275fac\n      });\n    }\n  }\n  return RestFetchHelperService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RestHttpGenerator = /*#__PURE__*/(() => {\n  class RestHttpGenerator extends DefaultHttpUrlGenerator {\n    constructor(pluralizer2) {\n      super(pluralizer2);\n      this.pluralizer2 = pluralizer2;\n    }\n    /**\n     * Get or generate the entity and collection resource URLs for the given entity type name\n     * @param entityName {string} Name of the entity type, e.g, 'Hero'\n     * @param root {string} Root path to the resource, e.g., 'some-api`\n     */\n    getResourceUrls(entityName, root, trailingSlashEndpoints = false) {\n      const nRoot = trailingSlashEndpoints ? root : normalizeRoot(root);\n      const resourceUrls = {\n        entityResourceUrl: `${nRoot}/${entityName}/`.toLowerCase(),\n        collectionResourceUrl: `${nRoot}/${this.pluralizer2.pluralize(entityName)}/`.toLowerCase()\n      };\n      return resourceUrls;\n    }\n    static {\n      this.\u0275fac = function RestHttpGenerator_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestHttpGenerator)(i0.\u0275\u0275inject(i1$2.Pluralizer));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: RestHttpGenerator,\n        factory: RestHttpGenerator.\u0275fac\n      });\n    }\n  }\n  return RestHttpGenerator;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RestModule = /*#__PURE__*/(() => {\n  class RestModule {\n    constructor(dspm, fetchHelper, paramContextExtractor, attributeSerializer, cpm, paramsEvaluatorService, http, restUrlGenerator, config) {\n      dspm.register(restDatasourcePluginFactory(fetchHelper, paramContextExtractor, attributeSerializer));\n      cpm.register(restEntityCrudAdaptorPluginFactory(paramsEvaluatorService, http, restUrlGenerator, config));\n    }\n    static {\n      this.\u0275fac = function RestModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestModule)(i0.\u0275\u0275inject(i2.DatasourcePluginManager), i0.\u0275\u0275inject(RestFetchHelperService), i0.\u0275\u0275inject(i3$2.ParamContextExtractorService), i0.\u0275\u0275inject(i1$1.AttributeSerializerService), i0.\u0275\u0275inject(i5$2.CrudAdaptorPluginManager), i0.\u0275\u0275inject(i5$1.ParamEvaluatorService), i0.\u0275\u0275inject(i2$1.HttpClient), i0.\u0275\u0275inject(RestHttpGenerator), i0.\u0275\u0275inject(i1$2.DefaultDataServiceConfig));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: RestModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        providers: [RestFetchHelperService, RestHttpGenerator\n        // Crud adaptor requires this is defined here... hmmm... that doesn't seem right. Should inherit from parent.\n        // { provide: HTTP_INTERCEPTORS, useClass: TokenInterceptor, multi: true },\n        ],\n        imports: [CommonModule,\n        // HttpClientModule,\n        FormsModule, ReactiveFormsModule, MaterialModule, AngularSplitModule, NgxJsonViewerModule, SnippetModule, DatasourceModule, TokenModule, CrudModule, DparamModule]\n      });\n    }\n  }\n  return RestModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of rest\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { Rest, RestDatasourceComponent, RestModule, RestSourceFormComponent };\n"],
  "mappings": "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",
  "names": ["i4", "CommonModule", "i1", "Validators", "NG_VALUE_ACCESSOR", "NG_VALIDATORS", "FormsModule", "ReactiveFormsModule", "i0", "EventEmitter", "forwardRef", "MaterialModule", "i2", "Renderer", "DatasourcePlugin", "Rest$1", "DatasourceEditorOptions", "Dataset", "DatasourceModule", "i8", "AngularSplitModule", "i9", "NgxJsonViewerModule", "i3$1", "Snippet", "SnippetModule", "i3", "TokenModule", "BehaviorSubject", "Subject", "of", "combineLatest", "Observable", "iif", "throwError", "map", "tap", "filter", "switchMap", "catchError", "takeUntil", "debounceTime", "delay", "timeout", "qs", "i5$1", "Param", "DparamModule", "i5", "i6", "i7", "i1$1", "ContentBinding", "i5$2", "CrudAdaptorPlugin", "CrudModule", "i2$1", "HttpParams", "i4$1", "i1$2", "DefaultHttpUrlGenerator", "normalizeRoot", "i3$2", "RestSourceFormComponent_ngx_json_viewer_18_Template", "rf", "ctx", "ctx_r0", "Rest", "data", "Renderer", "p", "Param", "Snippet", "RestSourceFormComponent", "restSource", "fb", "datasourceApi", "tokenizerService", "EventEmitter", "Validators", "BehaviorSubject", "Subject", "map", "tap", "url", "filter", "switchMap", "method", "body", "catchError", "e", "of", "takeUntil", "debounceTime", "index", "path", "queryString", "pathParsed", "c", "i", "__spreadProps", "__spreadValues", "parsed", "v", "params", "combineLatest", "urlParams", "bodyParams", "r", "input", "placeholderRegex", "result", "traverse", "obj", "match", "key", "item", "val", "fn", "isDisabled", "qsParsed", "qsOverrides", "pathPieces", "len", "rebuildUrl", "pathParams", "mapping", "prop", "apiUrl", "__ngFactoryType__", "NG_VALUE_ACCESSOR", "forwardRef", "NG_VALIDATORS", "RestDatasourceComponent", "settings", "attributeSerializer", "controlContainer", "restDatasourcePluginFactory", "fetchhelper", "paramContextExtractor", "DatasourcePlugin", "metadata", "DatasourceEditorOptions", "s", "Rest$1", "ds", "contexts", "id", "ContentBinding", "restEntityCrudAdaptorPluginFactory", "paramsEvaluatorService", "http", "httpUrlGenerator", "config", "CrudAdaptorPlugin", "object", "name", "options", "restfulRequest", "identity", "parentObject", "rule", "Observable", "obs", "query", "c2", "identityFact", "HttpParams", "iif", "objects", "req", "result$", "delay", "newUrl", "error", "throwError", "timeout", "RestFetchHelperService", "attrbuteSerializer", "snippetParserService", "urlGenerator", "Dataset", "_", "combinedParams", "mappedParams", "bodyObject", "results", "record", "resultMap", "tokenMap", "token", "param", "processed", "newKey", "RestHttpGenerator", "DefaultHttpUrlGenerator", "pluralizer2", "entityName", "root", "trailingSlashEndpoints", "nRoot", "normalizeRoot", "RestModule", "dspm", "fetchHelper", "cpm", "restUrlGenerator", "CommonModule", "FormsModule", "ReactiveFormsModule", "MaterialModule", "AngularSplitModule", "NgxJsonViewerModule", "SnippetModule", "DatasourceModule", "TokenModule", "CrudModule", "DparamModule"]
}
