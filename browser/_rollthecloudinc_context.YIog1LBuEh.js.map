{
  "version": 3,
  "sources": ["../../@rollthecloudinc/context/fesm2022/rollthecloudinc-context.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { InjectionToken, forwardRef, Input, Component, ViewChild, Injectable, Directive, Inject, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport * as i1 from '@angular/forms';\nimport { Validators, NG_VALUE_ACCESSOR, NG_VALIDATORS, ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { MaterialModule } from '@rollthecloudinc/material';\nimport * as i2$2 from '@rollthecloudinc/token';\nimport { TokenModule } from '@rollthecloudinc/token';\nimport { Snippet, SnippetModule } from '@rollthecloudinc/snippet';\nimport * as i1$1 from '@rollthecloudinc/datasource';\nimport { Rest, Datasource, DatasourceFormComponent, DatasourcePlugin, Dataset, DatasourceModule } from '@rollthecloudinc/datasource';\nimport * as i1$3 from '@rollthecloudinc/plugin';\nimport { Plugin, BasePluginManager, PluginDef } from '@rollthecloudinc/plugin';\nimport * as i4$1 from '@rollthecloudinc/bridge';\nimport { BridgeBuilderPlugin, PublicApiBridgeService } from '@rollthecloudinc/bridge';\nimport { map, tap, switchMap, take, filter, scan, defaultIfEmpty, debounceTime } from 'rxjs/operators';\nimport * as i6$1 from '@rollthecloudinc/dparam';\nimport { ParamPlugin } from '@rollthecloudinc/dparam';\nimport { BehaviorSubject, of, iif, merge, combineLatest, ReplaySubject, forkJoin } from 'rxjs';\nimport * as i2 from '@rollthecloudinc/attributes';\nimport * as i4 from '@angular/material/autocomplete';\nimport * as i5 from '@angular/material/input';\nimport * as i6 from '@angular/material/select';\nimport { ContentBinding } from '@rollthecloudinc/content';\nimport { getRouterSelectors } from '@ngrx/router-store';\nimport * as i1$2 from '@ngrx/store';\nimport { select } from '@ngrx/store';\nimport * as i2$1 from '@rollthecloudinc/utils';\nimport * as i7 from '@angular/flex-layout/flex';\nimport * as uuid from 'uuid';\nfunction ContextDatasourceFormComponent_mat_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 3);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const c_r1 = ctx.$implicit;\n    i0.\u0275\u0275property(\"value\", c_r1);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(c_r1);\n  }\n}\nfunction ContextFormComponent_mat_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 5);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const cPlugin_r1 = ctx.$implicit;\n    i0.\u0275\u0275property(\"value\", cPlugin_r1.value.name);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(cPlugin_r1.value.title);\n  }\n}\nfunction ContextFormComponent_ng_template_11_Template(rf, ctx) {}\nconst CONTEXT_PLUGIN = /*#__PURE__*/new InjectionToken('ContextPlugin');\nclass ContextPlugin extends Plugin {\n  constructor(data) {\n    super(data);\n    this.global = false;\n    if (data) {\n      this.name = this.id;\n      //this.title = data.title;\n      this.baseObject = data.baseObject;\n      this.resolver = data.resolver;\n      this.global = data.global === undefined ? false : data.global;\n      this.internal = data.internal === undefined ? false : data.internal;\n      this.group = data.group !== undefined ? data.group : undefined;\n      if (data.editorComponent) {\n        this.editorComponent = data.editorComponent;\n      }\n    }\n  }\n}\nclass InlineContext {\n  constructor(data) {\n    this.name = data.name;\n    this.adaptor = data.adaptor;\n    if (data.plugin) {\n      this.plugin = data.plugin;\n    }\n    if (this.adaptor === 'rest') {\n      this.rest = new Rest(data.rest);\n    } else if (this.adaptor === 'snippet' || this.adaptor === 'json') {\n      this.snippet = new Snippet(data.snippet);\n    } else if (this.adaptor === 'data') {\n      this.data = data.data;\n    } else if (this.adaptor === 'token') {\n      this.tokens = new Map([...data.tokens]);\n    } else if (this.adaptor === 'datasource') {\n      this.datasource = new Datasource(data.datasource);\n    }\n  }\n}\nclass ContextDatasource {\n  constructor(data) {\n    if (data) {\n      this.name = data.name;\n    }\n  }\n}\nlet ContextDatasourceFormComponent = /*#__PURE__*/(() => {\n  class ContextDatasourceFormComponent {\n    set settings(settings) {\n      this.settings$.next(settings);\n    }\n    constructor(fb, attributeSerializer) {\n      this.fb = fb;\n      this.attributeSerializer = attributeSerializer;\n      this.contexts = [];\n      this.settings$ = new BehaviorSubject(undefined);\n      this.formGroup = this.fb.group({\n        name: this.fb.control('', [Validators.required])\n      });\n      this.settingsSub = this.settings$.pipe(map(s => s ? new ContextDatasource(this.attributeSerializer.deserializeAsObject(s)) : undefined)).subscribe(ds => {\n        if (ds) {\n          this.formGroup.get('name').setValue(ds.name);\n        } else {\n          this.formGroup.get('name').setValue('');\n        }\n      });\n      this.onTouched = () => {};\n    }\n    writeValue(val) {\n      if (val) {\n        this.formGroup.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.formGroup.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.formGroup.disable();\n      } else {\n        this.formGroup.enable();\n      }\n    }\n    validate(c) {\n      return this.formGroup.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"content is invalid\"\n        }\n      };\n    }\n    static {\n      this.\u0275fac = function ContextDatasourceFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextDatasourceFormComponent)(i0.\u0275\u0275directiveInject(i1.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: ContextDatasourceFormComponent,\n        selectors: [[\"classifieds-ui-context-datasource-form\"]],\n        inputs: {\n          contexts: \"contexts\",\n          settings: \"settings\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => ContextDatasourceFormComponent),\n          multi: true\n        }, {\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => ContextDatasourceFormComponent),\n          multi: true\n        }])],\n        decls: 6,\n        vars: 2,\n        consts: [[3, \"formGroup\"], [\"required\", \"\", \"formControlName\", \"name\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n        template: function ContextDatasourceFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0)(1, \"mat-form-field\")(2, \"mat-label\");\n            i0.\u0275\u0275text(3, \"Context\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(4, \"mat-select\", 1);\n            i0.\u0275\u0275template(5, ContextDatasourceFormComponent_mat_option_5_Template, 2, 2, \"mat-option\", 2);\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.formGroup);\n            i0.\u0275\u0275advance(5);\n            i0.\u0275\u0275property(\"ngForOf\", ctx.contexts);\n          }\n        },\n        dependencies: [i3.NgForOf, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i4.MatOption, i5.MatFormField, i5.MatLabel, i6.MatSelect],\n        encapsulation: 2\n      });\n    }\n  }\n  return ContextDatasourceFormComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContextDatasourceComponent = /*#__PURE__*/(() => {\n  class ContextDatasourceComponent {\n    constructor(controlContainer) {\n      this.controlContainer = controlContainer;\n      this.contexts = [];\n      this.settings = [];\n    }\n    static {\n      this.\u0275fac = function ContextDatasourceComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextDatasourceComponent)(i0.\u0275\u0275directiveInject(i1.ControlContainer));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: ContextDatasourceComponent,\n        selectors: [[\"classifieds-ui-context-datasource\"]],\n        inputs: {\n          contexts: \"contexts\",\n          settings: \"settings\"\n        },\n        standalone: false,\n        decls: 2,\n        vars: 3,\n        consts: [[3, \"formGroup\"], [\"formControlName\", \"settings\", 3, \"contexts\", \"settings\"]],\n        template: function ContextDatasourceComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementContainerStart(0, 0);\n            i0.\u0275\u0275element(1, \"classifieds-ui-context-datasource-form\", 1);\n            i0.\u0275\u0275elementContainerEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.controlContainer.control);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"contexts\", ctx.contexts)(\"settings\", ctx.settings);\n          }\n        },\n        dependencies: [i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, ContextDatasourceFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return ContextDatasourceComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet DatasourceContextEditorComponent = /*#__PURE__*/(() => {\n  class DatasourceContextEditorComponent {\n    constructor(fb, controlContainer, attributeSerializer) {\n      this.fb = fb;\n      this.controlContainer = controlContainer;\n      this.attributeSerializer = attributeSerializer;\n    }\n    ngOnInit() {\n      this.controlContainer.control.addControl('adaptor', this.fb.control('datasource', Validators.required));\n      this.controlContainer.control.addControl('datasource', this.fb.control(''));\n      this.controlContainer.control.addControl('_proxy', this.fb.control(''));\n      this.proxyControlSub = this.controlContainer.control.get('_proxy').valueChanges.pipe(map(v => v ? new Datasource({\n        ...v,\n        settings: this.attributeSerializer.serialize(v.settings, 'settings').attributes\n      }) : new Datasource()), tap(ds => this.controlContainer.control.get('datasource').setValue(ds))).subscribe();\n    }\n    static {\n      this.\u0275fac = function DatasourceContextEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || DatasourceContextEditorComponent)(i0.\u0275\u0275directiveInject(i1.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1.ControlContainer), i0.\u0275\u0275directiveInject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: DatasourceContextEditorComponent,\n        selectors: [[\"classifieds-ui-datasource-context-editor\"]],\n        viewQuery: function DatasourceContextEditorComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(DatasourceFormComponent, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.datasourceFormComp = _t.first);\n          }\n        },\n        standalone: false,\n        decls: 2,\n        vars: 1,\n        consts: [[3, \"formGroup\"], [\"formControlName\", \"_proxy\"]],\n        template: function DatasourceContextEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementContainerStart(0, 0);\n            i0.\u0275\u0275element(1, \"classifieds-ui-datasource-form\", 1);\n            i0.\u0275\u0275elementContainerEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.controlContainer.control);\n          }\n        },\n        dependencies: [i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i1$1.DatasourceFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return DatasourceContextEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst routeContextFactory = resolver => {\n  const baseObject = {\n    path: '',\n    arg0: '',\n    arg2: '',\n    arg3: '',\n    arg4: '',\n    arg5: ''\n  };\n  return new ContextPlugin({\n    id: 'route',\n    name: 'route',\n    title: 'Route',\n    global: true,\n    baseObject,\n    resolver\n  });\n};\nconst contextBridgeFactory = (cpm, inlineContextResolver) => {\n  return new BridgeBuilderPlugin({\n    id: 'context',\n    title: 'Context',\n    build: () => {\n      PublicApiBridgeService.prototype['resolveContext'] = (n, data) => {\n        return new Promise(res => {\n          cpm.getPlugin(n).pipe(switchMap(p => p.resolver.resolve(p, data).pipe(take(1)))).subscribe(result => {\n            res(result);\n          });\n        });\n      };\n      PublicApiBridgeService.prototype['resolveMergedContext'] = contexts => {\n        return new Promise(res => {\n          inlineContextResolver.resolveMerged(contexts).pipe(tap(v => res(v)), take(1)).subscribe();\n        });\n      };\n    }\n  });\n};\nconst paramPluginFactory = (inlineContextResolver, tokenizerService) => {\n  return new ParamPlugin({\n    id: 'context',\n    title: 'Context',\n    evalParam: ({\n      param,\n      metadata\n    }) => {\n      const ctx = param.mapping.context && param.mapping.context !== '' ? new InlineContext(metadata.get('contexts').find(c => c.name === param.mapping.context)) : undefined;\n      return ctx ? inlineContextResolver.resolve(ctx).pipe(take(1), switchMap(d => iif(() => param.mapping.value && param.mapping.value !== '', of(d).pipe(map(d => tokenizerService.generateGenericTokens(Array.isArray(d) ? d[0] : d)), map(tokens => tokenizerService.replaceTokens(`[${param.mapping.value}]`, tokens)), take(1)), of(Array.isArray(d) ? d[0] : d)).pipe(take(1)))) : of();\n    },\n    // At the very least it uses itself, right?\n    usedContexts: ({\n      param,\n      metadata\n    }) => of([param.mapping.context])\n  });\n};\nconst contextDatasourceFactory = (inlineContextResolver, attributeSerializer) => {\n  return new DatasourcePlugin({\n    id: 'context',\n    title: 'Context',\n    editor: ContextDatasourceComponent,\n    fetch: ({\n      settings,\n      metadata\n    }) => of(new Dataset()).pipe(map(() => new ContextDatasource(attributeSerializer.deserializeAsObject(settings))), map(ds => metadata.get('contexts').find(c => c.name === ds.name)), switchMap(inlineContext => inlineContextResolver.resolve(inlineContext).pipe(map(v => v instanceof Dataset ? v : new Dataset({\n      results: Array.isArray(v) ? v : [v]\n    })), take(1)))),\n    getBindings: ({\n      settings,\n      metadata\n    }) => of([]).pipe(map(() => new ContextDatasource(attributeSerializer.deserializeAsObject(settings))), map(ds => [new ContentBinding({\n      id: ds.name,\n      type: 'context'\n    })]))\n  });\n};\nconst datasourceContextFactory = resolver => {\n  const baseObject = {\n    dataset: new Dataset()\n  };\n  return new ContextPlugin({\n    id: \"datasource\",\n    name: 'datasource',\n    title: 'Datasource',\n    baseObject,\n    resolver,\n    editorComponent: DatasourceContextEditorComponent\n  });\n};\nlet RouteResolver = /*#__PURE__*/(() => {\n  class RouteResolver {\n    constructor(routerStore) {\n      this.routerStore = routerStore;\n    }\n    resolve(ctx, data) {\n      const {\n        selectCurrentRoute\n      } = getRouterSelectors();\n      return this.routerStore.pipe(select(selectCurrentRoute), map(route => {\n        const obj = {\n          path: `/pages/panelpage/${route.params.panelPageId}`\n        };\n        //console.log(route);\n        /*for(const prop in route.params) {\n          if(prop.indexOf('arg') === 0) {\n            obj[prop] = route.params[prop];\n          }\n        }*/\n        return obj;\n      })\n      //take(1)\n      );\n    }\n    static {\n      this.\u0275fac = function RouteResolver_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RouteResolver)(i0.\u0275\u0275inject(i1$2.Store));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: RouteResolver,\n        factory: RouteResolver.\u0275fac\n      });\n    }\n  }\n  return RouteResolver;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContextEditorHostDirective = /*#__PURE__*/(() => {\n  class ContextEditorHostDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n    static {\n      this.\u0275fac = function ContextEditorHostDirective_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextEditorHostDirective)(i0.\u0275\u0275directiveInject(i0.ViewContainerRef));\n      };\n    }\n    static {\n      this.\u0275dir = /* @__PURE__ */i0.\u0275\u0275defineDirective({\n        type: ContextEditorHostDirective,\n        selectors: [[\"\", \"classifiedsUiContextEditorHost\", \"\"]],\n        standalone: false\n      });\n    }\n  }\n  return ContextEditorHostDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContextPluginManager = /*#__PURE__*/(() => {\n  class ContextPluginManager extends BasePluginManager {\n    constructor(pcm, moduleLoader) {\n      super(pcm, moduleLoader);\n    }\n    pluginDef() {\n      return of(new PluginDef({\n        name: 'context'\n      }));\n    }\n    static {\n      this.\u0275fac = function ContextPluginManager_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextPluginManager)(i0.\u0275\u0275inject(i1$3.PluginConfigurationManager), i0.\u0275\u0275inject(i2$1.ModuleLoaderService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: ContextPluginManager,\n        factory: ContextPluginManager.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ContextPluginManager;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContextFormComponent = /*#__PURE__*/(() => {\n  class ContextFormComponent {\n    set context(context) {\n      this.context$.next(context);\n    }\n    constructor(fb, componentFactoryResolver, cpm) {\n      this.fb = fb;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.cpm = cpm;\n      this.contextForm = this.fb.group({\n        name: this.fb.control('', Validators.required),\n        plugin: this.fb.control('', Validators.required)\n      });\n      this.context$ = new BehaviorSubject(undefined);\n      this.onTouched = () => {};\n    }\n    ngOnInit() {\n      // this.contextPlugins = this.contextManager.getAll(false);\n      this.contextPlugins = this.cpm.getPlugins().pipe(map(plugins => new Map(Array.from(plugins).filter(([_, p], __) => !p.internal).map(([_, p], __) => [p.name, p]))));\n      this.contextForm.get('plugin').valueChanges.pipe(switchMap(v => this.cpm.getPlugin(v))).subscribe(plugin => {\n        if (plugin.editorComponent) {\n          this.renderEditor(plugin);\n        } else {\n          this.editorHost.viewContainerRef.clear();\n        }\n      });\n      this.context$.pipe(filter(() => !!this.componentRef)).subscribe(c => {\n        this.componentRef.instance.context = c;\n      });\n    }\n    writeValue(val) {\n      if (val) {\n        this.contextForm.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.contextForm.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.contextForm.disable();\n      } else {\n        this.contextForm.enable();\n      }\n    }\n    validate(c) {\n      return this.contextForm.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"context is invalid\"\n        }\n      };\n    }\n    renderEditor(plugin) {\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(plugin.editorComponent);\n      const viewContainerRef = this.editorHost.viewContainerRef;\n      viewContainerRef.clear();\n      this.componentRef = viewContainerRef.createComponent(componentFactory);\n      this.componentRef.instance.context = this.context$.value;\n    }\n    static {\n      this.\u0275fac = function ContextFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextFormComponent)(i0.\u0275\u0275directiveInject(i1.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(ContextPluginManager));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: ContextFormComponent,\n        selectors: [[\"classifieds-ui-context-form\"]],\n        viewQuery: function ContextFormComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(ContextEditorHostDirective, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.editorHost = _t.first);\n          }\n        },\n        inputs: {\n          context: \"context\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => ContextFormComponent),\n          multi: true\n        }, {\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => ContextFormComponent),\n          multi: true\n        }])],\n        decls: 12,\n        vars: 6,\n        consts: [[\"fxLayout\", \"column\", 3, \"formGroup\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"placeholder\", \"Name\", \"required\", \"\"], [\"required\", \"\", \"formControlName\", \"plugin\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"classifiedsUiContextEditorHost\", \"\"], [3, \"value\"]],\n        template: function ContextFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0)(1, \"mat-form-field\");\n            i0.\u0275\u0275element(2, \"input\", 1);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(3, \"mat-form-field\")(4, \"mat-label\");\n            i0.\u0275\u0275text(5, \"Type\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(6, \"mat-select\", 2);\n            i0.\u0275\u0275template(7, ContextFormComponent_mat_option_7_Template, 2, 2, \"mat-option\", 3);\n            i0.\u0275\u0275pipe(8, \"async\");\n            i0.\u0275\u0275pipe(9, \"keyvalue\");\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275elementContainerStart(10);\n            i0.\u0275\u0275template(11, ContextFormComponent_ng_template_11_Template, 0, 0, \"ng-template\", 4);\n            i0.\u0275\u0275elementContainerEnd();\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.contextForm);\n            i0.\u0275\u0275advance(7);\n            i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(9, 4, i0.\u0275\u0275pipeBind1(8, 2, ctx.contextPlugins)));\n          }\n        },\n        dependencies: [i3.NgForOf, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i4.MatOption, i5.MatInput, i5.MatFormField, i5.MatLabel, i6.MatSelect, i7.DefaultLayoutDirective, ContextEditorHostDirective, i3.AsyncPipe, i3.KeyValuePipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return ContextFormComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet DatasourceResolver = /*#__PURE__*/(() => {\n  class DatasourceResolver {\n    constructor(dpm) {\n      this.dpm = dpm;\n    }\n    resolve(ctx, data, metadata) {\n      /**\n       * @todo: When context bindings change fetch again.\n       */\n      return of(new Dataset()).pipe(map(() => new Datasource(data)), switchMap(ds => this.dpm.getPlugin(ds.plugin).pipe(map(p => ({\n        ds,\n        p\n      })))), switchMap(({\n        ds,\n        p\n      }) => p.fetch({\n        settings: ds.settings,\n        metadata\n      })), map(d => d));\n    }\n    static {\n      this.\u0275fac = function DatasourceResolver_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || DatasourceResolver)(i0.\u0275\u0275inject(i1$1.DatasourcePluginManager));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: DatasourceResolver,\n        factory: DatasourceResolver.\u0275fac\n      });\n    }\n  }\n  return DatasourceResolver;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// import { PageBuilderFacade } from '../features/page-builder/page-builder.facade';\nclass BaseInlineContextResolverService {\n  constructor(\n  // private contextManager: ContextManagerService,\n  // private pageBuilderFacade: PageBuilderFacade,\n  cpm, rcm) {\n    this.cpm = cpm;\n    this.rcm = rcm;\n  }\n  resolveGlobals(tag = uuid.v4()) {\n    // const plugins = this.contextManager.getAll(true);\n    return this.cpm.getPlugins().pipe(map(plugins => Array.from(plugins.values()).filter(p => p.global === true)), switchMap(plugins => merge(...plugins.map(p => p.resolver.resolve(p, {}).pipe(map(res => [p.name, res, plugins.length])))).pipe(scan((acc, [n, v, len]) => new Map([...acc, [`_${n}`, v], ['__len', len]]), new Map([])), filter(v => v.size - 1 === +v.get('__len')), map(v => Object.assign({}, ...[...v.entries()].filter(([k, v]) => k !== '__len').map(([k, v]) => ({\n      [k]: v\n    })))))));\n    /*return this.cpm.getPlugins().pipe(\n      map(plugins => Array.from(plugins.values()).filter(p => p.global === true)),\n      map(plugins => plugins.map((p, k) => p => p.resolver.resolve(p, {}).pipe(\n        map<any, [string, any, number]>(res => [p.name, res, plugins.length])\n      ))),\n      mergeAll(),\n      scan((acc, [n, v, len]) => new Map<string, any>([ ...acc, [`_${n}`, v], ['__len', len] ],), new Map<string, any>([])),\n      filter(v => v.size - 1 === v.get('__len').len),\n      map(v => Object.assign({}, ...[...v.entries()].filter(([k, v]) => k !== '__len').map(([k, v]) => ({[k]: v}))))\n    );*/\n    /*return merge(\n      ...plugins.map(p => p.resolver.resolve(p, {}).pipe(\n        map(res => [p.name, res])\n      ))\n    ).pipe(\n      scan((acc, [n, v]) => new Map<string, any>([ ...acc, [`_${n}`, v] ]), new Map<string, any>([])),\n      filter(v => v.size === plugins.length),\n      map(v => Object.assign({}, ...[...v.entries()].map(([k, v]) => ({[k]: v}))))\n    );*/\n  }\n  resolveGlobalsSingle(tag = uuid.v4()) {\n    // const plugins = this.contextManager.getAll(true);\n    return this.cpm.getPlugins().pipe(map(plugins => Array.from(plugins.values()).filter(p => p.global === true)), switchMap(plugins => merge(...plugins.map(p => p.resolver.resolve(p, {}).pipe(map(res => [p.name, res]))))));\n    /*return merge(\n      ...plugins.map(p => p.resolver.resolve(p, {}).pipe(\n        map(res => [p.name, res])\n      ))\n    );*/\n  }\n  /*resolveForms(): Observable<any> {\n    return this.pageBuilderFacade.getFormNames$.pipe(\n      switchMap(names => names.length === 0 ? of([]) : combineLatest( names.map(n => this.pageBuilderFacade.getForm$(n).pipe(\n        map(f => [n, f])\n      ) ) )),\n      map(v => v.reduce((p, [n, f]) => ({ ...p, [`form__${n}`]: f }), {}))\n    );\n  }*/\n  /*resolveFormsSingle(): Observable<any> {\n    return this.pageBuilderFacade.getFormNames$.pipe(\n      switchMap(names => merge( ...names.map(n => this.pageBuilderFacade.getForm$(n).pipe(\n        map(f => [`form__${n}`, f])\n      ) ) ))\n    );\n  }*/\n  resolveAll(contexts, tag = uuid.v4()) {\n    return merge(...contexts.map(c => this.resolve(c, tag).pipe(map(res => [c.name, Array.isArray(res) ? res.length > 0 ? res[0] : undefined : res])))).pipe(scan((acc, [n, v]) => new Map([...acc, [n, v]]), new Map()), filter(v => v.size === contexts.length), map(v => Object.assign({}, ...[...v.entries()].map(([k, v]) => ({\n      [k]: v\n    })))));\n  }\n  resolveAllSingle(contexts, tag = uuid.v4()) {\n    return merge(...contexts.map(c => this.resolve(c, tag).pipe(map(res => [c.name, Array.isArray(res) ? res.length > 0 ? res[0] : undefined : res])))).pipe(map(([n, v]) => [n, v]));\n  }\n  resolveMerged(contexts, tag = uuid.v4()) {\n    /*return combineLatest([this.resolveGlobals(tag), this.resolveForms(), contexts.length === 0 ? of({}) : this.resolveAll(contexts, tag)]).pipe(\n      debounceTime(0),\n      map(v => v.reduce<any>((p, c) => ({ ...p, ...c }), {}))\n    );*/\n    return this.rcm.getPlugins().pipe(switchMap(() => this.rcm.add$.pipe(defaultIfEmpty(undefined))), switchMap(() => this.rcm.getPlugins()), switchMap(plugins => combineLatest([...Array.from(plugins).map(([_, p]) => p.resolve()), this.resolveGlobals(tag), contexts.length === 0 ? of({}) : this.resolveAll(contexts, tag)]).pipe(debounceTime(0), map(v => v.reduce((p, c) => ({\n      ...p,\n      ...c\n    }), {})))));\n  }\n  resolveMergedSingle(contexts, tag = uuid.v4()) {\n    if (contexts.length !== 0) {\n      /*return merge(\n        this.resolveGlobalsSingle(),\n        // this.resolveFormsSingle(),\n        this.resolveAllSingle(contexts)\n      );*/\n      return this.rcm.getPlugins().pipe(\n      /*switchMap(() => this.rcm.add$.pipe(\n        defaultIfEmpty()\n      )),\n      switchMap(() => this.rcm.getPlugins()),*/\n      switchMap(plugins => merge(...Array.from(plugins).map(([_, p]) => p.resolveSingle()),\n      // Turn this into plugins as well\n      this.resolveGlobalsSingle(), this.resolveAllSingle(contexts))));\n    } else {\n      /*return merge(\n        // this.resolveFormsSingle(),\n        this.resolveGlobalsSingle()\n      );*/\n      //return this.resolveGlobalsSingle();\n      return this.rcm.getPlugins().pipe(\n      /*switchMap(() => this.rcm.add$.pipe(\n        defaultIfEmpty()\n      )),\n      switchMap(() => this.rcm.getPlugins()),*/\n      switchMap(plugins => merge(...Array.from(plugins).map(([_, p]) => p.resolveSingle()), this.resolveGlobalsSingle())));\n    }\n    /*return merge(\n      this.resolveGlobalsSingle(),\n      contexts.length === 0 ? of({}) : this.resolveAllSingle(contexts)\n    );*/\n  }\n  resolve(context, tag = uuid.v4()) {\n    if (context.plugin) {\n      return this.cpm.getPlugin(context.plugin).pipe(\n      /*switchMap(p => p.beforeResolve({ inlineContext: context }).pipe(\n        map(({ inlineContext }) => ({ inlineContext, plugin: p }))\n      )),*/\n      // switchMap(p => p.resolver.resolve(p, this.getDataObject(context)))\n      switchMap(p => p.resolver.resolve(p, this.getDataObject(context), new Map([['name', context.name]]))));\n      /*const plugin = this.contextManager.lookupContext(context.plugin);\n      return plugin.resolver.resolve(plugin, this.getDataObject(context));*/\n    } else {\n      return of(this.getDataObject(context));\n    }\n  }\n  getDataObject(context) {\n    switch (context.adaptor) {\n      case 'rest':\n        return context.rest;\n      case 'snippet':\n        return context.snippet;\n      case 'json':\n        return JSON.parse(context.snippet.content);\n      case 'data':\n        return context.data;\n      case 'token':\n        return context.tokens;\n      case 'datasource':\n        return context.datasource;\n      default:\n        return undefined;\n    }\n  }\n}\nlet ResolvedContextPluginManager = /*#__PURE__*/(() => {\n  class ResolvedContextPluginManager extends BasePluginManager {\n    constructor(pcm, moduleLoader) {\n      super(pcm, moduleLoader);\n      this.add$ = new ReplaySubject(1);\n    }\n    pluginDef() {\n      return of(new PluginDef({\n        name: 'resolved_context'\n      }));\n    }\n    register(plugin) {\n      const hasPlugin = this.pluginInstances.has(plugin.id);\n      super.register(plugin);\n      if (!hasPlugin) {\n        this.add$.next(undefined);\n      }\n    }\n    static {\n      this.\u0275fac = function ResolvedContextPluginManager_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ResolvedContextPluginManager)(i0.\u0275\u0275inject(i1$3.PluginConfigurationManager), i0.\u0275\u0275inject(i2$1.ModuleLoaderService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: ResolvedContextPluginManager,\n        factory: ResolvedContextPluginManager.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ResolvedContextPluginManager;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// import { PageBuilderFacade } from '../features/page-builder/page-builder.facade';\nlet InlineContextResolverService = /*#__PURE__*/(() => {\n  class InlineContextResolverService extends BaseInlineContextResolverService {\n    constructor(\n    // contextManager: ContextManagerService,\n    // private pageBuilderFacade: PageBuilderFacade,\n    cpm, rcm) {\n      super(cpm, rcm);\n    }\n    static {\n      this.\u0275fac = function InlineContextResolverService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || InlineContextResolverService)(i0.\u0275\u0275inject(ContextPluginManager), i0.\u0275\u0275inject(ResolvedContextPluginManager));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: InlineContextResolverService,\n        factory: InlineContextResolverService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return InlineContextResolverService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContextModule = /*#__PURE__*/(() => {\n  class ContextModule {\n    constructor(contextPlugins, inlineContextResolver, tokenizerService, cpm, bpm, dpm, ppm, attributeSerializer, datasourceResolver) {\n      contextPlugins.forEach(p => cpm.register(p));\n      bpm.register(contextBridgeFactory(cpm, inlineContextResolver));\n      ppm.register(paramPluginFactory(inlineContextResolver, tokenizerService));\n      dpm.register(contextDatasourceFactory(inlineContextResolver, attributeSerializer));\n      cpm.register(datasourceContextFactory(datasourceResolver));\n    }\n    static {\n      this.\u0275fac = function ContextModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextModule)(i0.\u0275\u0275inject(CONTEXT_PLUGIN), i0.\u0275\u0275inject(InlineContextResolverService), i0.\u0275\u0275inject(i2$2.TokenizerService), i0.\u0275\u0275inject(ContextPluginManager), i0.\u0275\u0275inject(i4$1.BridgeBuilderPluginManager), i0.\u0275\u0275inject(i1$1.DatasourcePluginManager), i0.\u0275\u0275inject(i6$1.ParamPluginManager), i0.\u0275\u0275inject(i2.AttributeSerializerService), i0.\u0275\u0275inject(DatasourceResolver));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: ContextModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        providers: [{\n          provide: RouteResolver,\n          useClass: RouteResolver\n        }, {\n          provide: DatasourceResolver,\n          useClass: DatasourceResolver\n        }, {\n          provide: CONTEXT_PLUGIN,\n          useFactory: routeContextFactory,\n          multi: true,\n          deps: [RouteResolver]\n        }],\n        imports: [CommonModule, ReactiveFormsModule, FormsModule, MaterialModule, FlexLayoutModule, TokenModule, SnippetModule, DatasourceModule]\n      });\n    }\n  }\n  return ContextModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * DO NOT USE THIS\n * This has been replaced by the context plugin manager which integrates with the plugin system.\n * @deprecated\n */\nlet ContextManagerService = /*#__PURE__*/(() => {\n  class ContextManagerService {\n    constructor(contextPlugins) {\n      this.contextPlugins = contextPlugins;\n    }\n    getAll(globals) {\n      if (typeof globals === 'undefined') {\n        return this.contextPlugins;\n      } else if (globals) {\n        return this.contextPlugins.filter(c => c.global);\n      } else {\n        return this.contextPlugins.filter(c => !c.global);\n      }\n    }\n    getAllObjects() {\n      return this.contextPlugins.map(cp => cp.baseObject);\n    }\n    lookupContext(name) {\n      return this.contextPlugins.find(c => c.name === name);\n    }\n    register(contextPlugin) {\n      this.contextPlugins.push(contextPlugin);\n    }\n    static {\n      this.\u0275fac = function ContextManagerService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextManagerService)(i0.\u0275\u0275inject(CONTEXT_PLUGIN));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: ContextManagerService,\n        factory: ContextManagerService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ContextManagerService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass ResolvedContextPlugin extends Plugin {\n  constructor(data) {\n    super(data);\n    this.resolve = data.resolve;\n    this.resolveSingle = data.resolveSingle;\n  }\n}\nlet ParamContextExtractorService = /*#__PURE__*/(() => {\n  class ParamContextExtractorService {\n    constructor(ppm) {\n      this.ppm = ppm;\n    }\n    extractContexts(params) {\n      return forkJoin(params.map(param => this.ppm.getPlugin(param.mapping.type).pipe(switchMap(p => iif(() => !!p && !!p.usedContexts, p ? p.usedContexts ? p.usedContexts({\n        param,\n        metadata: new Map([])\n      }) : of([]) : of([]), of([])))))).pipe(map(c => c.reduce((p, c) => [...p, ...c.filter(v => !p.includes(v))], [])));\n    }\n    static {\n      this.\u0275fac = function ParamContextExtractorService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ParamContextExtractorService)(i0.\u0275\u0275inject(i6$1.ParamPluginManager));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: ParamContextExtractorService,\n        factory: ParamContextExtractorService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ParamContextExtractorService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BaseInlineContextResolverService, CONTEXT_PLUGIN, ContextDatasource, ContextDatasourceComponent, ContextDatasourceFormComponent, ContextFormComponent, ContextManagerService, ContextModule, ContextPlugin, ContextPluginManager, DatasourceContextEditorComponent, InlineContext, InlineContextResolverService, ParamContextExtractorService, ResolvedContextPlugin, ResolvedContextPluginManager };\n"],
  "mappings": "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",
  "names": ["i0", "InjectionToken", "forwardRef", "i3", "CommonModule", "FlexLayoutModule", "i1", "Validators", "NG_VALUE_ACCESSOR", "NG_VALIDATORS", "ReactiveFormsModule", "FormsModule", "MaterialModule", "i2$2", "TokenModule", "Snippet", "SnippetModule", "i1$1", "Rest", "Datasource", "DatasourceFormComponent", "DatasourcePlugin", "Dataset", "DatasourceModule", "i1$3", "Plugin", "BasePluginManager", "PluginDef", "i4$1", "BridgeBuilderPlugin", "PublicApiBridgeService", "map", "tap", "switchMap", "take", "filter", "scan", "defaultIfEmpty", "debounceTime", "i6$1", "ParamPlugin", "BehaviorSubject", "of", "iif", "merge", "combineLatest", "ReplaySubject", "forkJoin", "i2", "i4", "i5", "i6", "ContentBinding", "getRouterSelectors", "i1$2", "select", "i2$1", "i7", "ContextDatasourceFormComponent_mat_option_5_Template", "rf", "ctx", "c_r1", "ContextFormComponent_mat_option_7_Template", "cPlugin_r1", "ContextFormComponent_ng_template_11_Template", "CONTEXT_PLUGIN", "InjectionToken", "ContextPlugin", "Plugin", "data", "InlineContext", "Rest", "Snippet", "Datasource", "ContextDatasource", "ContextDatasourceFormComponent", "settings", "fb", "attributeSerializer", "BehaviorSubject", "Validators", "map", "s", "ds", "val", "fn", "isDisabled", "c", "__ngFactoryType__", "NG_VALUE_ACCESSOR", "forwardRef", "NG_VALIDATORS", "ContextDatasourceComponent", "controlContainer", "DatasourceContextEditorComponent", "v", "__spreadProps", "__spreadValues", "tap", "DatasourceFormComponent", "_t", "routeContextFactory", "resolver", "baseObject", "contextBridgeFactory", "cpm", "inlineContextResolver", "BridgeBuilderPlugin", "PublicApiBridgeService", "n", "res", "switchMap", "p", "take", "result", "contexts", "paramPluginFactory", "tokenizerService", "ParamPlugin", "param", "metadata", "d", "iif", "of", "tokens", "contextDatasourceFactory", "DatasourcePlugin", "Dataset", "inlineContext", "ContentBinding", "datasourceContextFactory", "RouteResolver", "routerStore", "selectCurrentRoute", "getRouterSelectors", "select", "route", "ContextEditorHostDirective", "viewContainerRef", "ContextPluginManager", "BasePluginManager", "pcm", "moduleLoader", "PluginDef", "ContextFormComponent", "context", "componentFactoryResolver", "plugins", "_", "__", "plugin", "filter", "componentFactory", "DatasourceResolver", "dpm", "BaseInlineContextResolverService", "rcm", "tag", "v4_default", "merge", "scan", "acc", "len", "k", "defaultIfEmpty", "combineLatest", "debounceTime", "ResolvedContextPluginManager", "ReplaySubject", "hasPlugin", "InlineContextResolverService", "ContextModule", "contextPlugins", "bpm", "ppm", "datasourceResolver", "CommonModule", "ReactiveFormsModule", "FormsModule", "MaterialModule", "FlexLayoutModule", "TokenModule", "SnippetModule", "DatasourceModule", "ContextManagerService", "globals", "cp", "name", "contextPlugin", "ResolvedContextPlugin", "ParamContextExtractorService", "params", "forkJoin"]
}
