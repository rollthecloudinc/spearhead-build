{
  "version": 3,
  "sources": ["../../@rollthecloudinc/awos/fesm2022/rollthecloudinc-awos.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { PLATFORM_ID, Inject, NgModule } from '@angular/core';\nimport * as i2 from '@rollthecloudinc/auth';\nimport { AuthModule } from '@rollthecloudinc/auth';\nimport * as i5 from '@rollthecloudinc/awcog';\nimport { COGNITO_SETTINGS } from '@rollthecloudinc/awcog';\nimport * as i1 from '@rollthecloudinc/crud';\nimport { CrudAdaptorPlugin, CrudModule } from '@rollthecloudinc/crud';\nimport { of, forkJoin, from, firstValueFrom } from 'rxjs';\nimport { SignatureV4 } from '@aws-sdk/signature-v4';\nimport { HttpRequest } from '@aws-sdk/protocol-http';\nimport * as sha256 from '@aws-crypto/sha256-js';\nimport { fromCognitoIdentityPool } from '@aws-sdk/credential-provider-cognito-identity';\nimport { CognitoIdentityClient } from '@aws-sdk/client-cognito-identity';\nimport { switchMap, map, tap, catchError, take } from 'rxjs/operators';\nimport * as i3 from '@rollthecloudinc/dparam';\nimport * as i4 from '@angular/common/http';\nconst opensearchTemplateCrudAdaptorPluginFactory = (platformId, authFacade, cognitoSettings, paramsEvaluatorService, http) => {\n  return new CrudAdaptorPlugin({\n    id: 'aws_opensearch_template',\n    title: 'AWS Opensearch Template',\n    create: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }),\n    read: ({}) => of({\n      success: false\n    }),\n    update: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }),\n    delete: ({}) => of({\n      success: false\n    }),\n    query: ({\n      rule,\n      params\n    }) => of({\n      entities: [],\n      success: false\n    }).pipe(switchMap(() => params && Object.keys(params).length !== 0 ? forkJoin(Object.keys(params).map(name => paramsEvaluatorService.paramValue(params[name], new Map()).pipe(map(v => ({\n      [name]: v\n    }))))).pipe(map(groups => groups.reduce((p, c) => ({\n      ...p,\n      ...c\n    }), {})),\n    // default options go here instead of empty object.\n    map(options => ({\n      options\n    }))) : of({\n      options: {}\n    })), map(({\n      options\n    }) => ({\n      options,\n      body: JSON.stringify({\n        id: options.id,\n        params: rule ? rule.conditions.all.reduce((p, c) => ({\n          ...p,\n          ...c.any.reduce((p2, c2) => ({\n            ...p2,\n            [c2.path.substr(2)]: [...(p2[c2.path.substr(2)] ? p2[c2.path.substr(2)] : []), JSON.parse(decodeURIComponent(c2.value))]\n          }), {})\n        }), {}) : {}\n      })\n    })), tap(({\n      body\n    }) => console.log('open search template query body', body)), switchMap(({\n      options,\n      body\n    }) => createSignedHttpRequest({\n      method: \"POST\",\n      body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        host: `${options.domain}.${options.region}.es.amazonaws.com`\n      },\n      hostname: `${options.domain}.${options.region}.es.amazonaws.com`,\n      path: `/${options.index}/_search/template`,\n      protocol: 'https:',\n      service: \"es\",\n      cognitoSettings: cognitoSettings,\n      authFacade: authFacade\n    }).pipe(map(signedHttpRequest => ({\n      signedHttpRequest,\n      options\n    })))), switchMap(({\n      signedHttpRequest,\n      options\n    }) => {\n      delete signedHttpRequest.headers.host;\n      const url = `https://${options.domain}.${options.region}.es.amazonaws.com/${options.index}/_search/template`;\n      return http.post(url, signedHttpRequest.body, {\n        headers: signedHttpRequest.headers,\n        withCredentials: false\n      }).pipe(map(res => ({\n        res,\n        options\n      })));\n    }), map(({\n      res,\n      options\n    }) => ({\n      entities: options.hits && res && res.hits && res.hits.hits ? res.hits.hits.map(h => options.source ? h._source : h) : [res],\n      success: true\n    })))\n  });\n};\nconst opensearchEntityCrudAdaptorPluginFactory = (authFacade, cognitoSettings, paramsEvaluatorService, http) => {\n  return new CrudAdaptorPlugin({\n    id: 'aws_opensearch_entity',\n    title: 'AWS Opensearch Entity',\n    create: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }).pipe(paramsEvaluatorService.resolveParams({\n      params\n    }), switchMap(({\n      options\n    }) => identity({\n      object,\n      parentObject\n    }).pipe(map(({\n      identity\n    }) => ({\n      identity,\n      options\n    })))), switchMap(({\n      options,\n      identity\n    }) => createSignedHttpRequest({\n      method: \"PUT\",\n      body: JSON.stringify(object),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        host: `${options.domain}.${options.region}.es.amazonaws.com`\n      },\n      hostname: `${options.domain}.${options.region}.es.amazonaws.com`,\n      path: `/${options.index}/_doc/${identity}`,\n      protocol: 'https:',\n      service: \"es\",\n      ...{\n        ...(options.pipeline ? {\n          query: {\n            pipeline: options.pipeline\n          }\n        } : {})\n      },\n      cognitoSettings: cognitoSettings,\n      authFacade: authFacade\n    }).pipe(map(signedHttpRequest => ({\n      signedHttpRequest,\n      options,\n      identity\n    })))), switchMap(({\n      signedHttpRequest,\n      options,\n      identity\n    }) => {\n      delete signedHttpRequest.headers.host;\n      const url = `https://${options.domain}.${options.region}.es.amazonaws.com/${options.index}/_doc/${identity}`;\n      return http.put(url, JSON.stringify(object), {\n        headers: signedHttpRequest.headers,\n        withCredentials: false,\n        params: {\n          ...(options.pipeline ? {\n            pipeline: options.pipeline\n          } : {})\n        }\n      }).pipe(map(res => ({\n        res,\n        options\n      })));\n    }), map(() => ({\n      success: true\n    }))),\n    read: ({}) => of({\n      success: false\n    }),\n    update: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }).pipe(paramsEvaluatorService.resolveParams({\n      params\n    }), switchMap(({\n      options\n    }) => identity({\n      object,\n      parentObject\n    }).pipe(map(({\n      identity\n    }) => ({\n      identity,\n      options\n    })))), switchMap(({\n      options,\n      identity\n    }) => createSignedHttpRequest({\n      method: \"PUT\",\n      body: JSON.stringify(object),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        host: `${options.domain}.${options.region}.es.amazonaws.com`\n      },\n      hostname: `${options.domain}.${options.region}.es.amazonaws.com`,\n      path: `/${options.index}/_doc/${identity}`,\n      protocol: 'https:',\n      service: \"es\",\n      ...{\n        ...(options.pipeline ? {\n          query: {\n            pipeline: options.pipeline\n          }\n        } : {})\n      },\n      cognitoSettings: cognitoSettings,\n      authFacade: authFacade\n    }).pipe(map(signedHttpRequest => ({\n      signedHttpRequest,\n      options,\n      identity\n    })))), switchMap(({\n      signedHttpRequest,\n      options,\n      identity\n    }) => {\n      delete signedHttpRequest.headers.host;\n      const url = `https://${options.domain}.${options.region}.es.amazonaws.com/${options.index}/_doc/${identity}`;\n      return http.put(url, JSON.stringify(object), {\n        headers: signedHttpRequest.headers,\n        withCredentials: false,\n        params: {\n          ...(options.pipeline ? {\n            pipeline: options.pipeline\n          } : {})\n        }\n      }).pipe(map(res => ({\n        res,\n        options\n      })));\n    }), map(() => ({\n      success: true\n    }))),\n    delete: ({}) => of({\n      success: false\n    }),\n    query: ({\n      rule,\n      params\n    }) => of({\n      entities: [],\n      success: false\n    }).pipe(tap(() => {\n      console.log('crud open search query', rule, params);\n    }), paramsEvaluatorService.resolveParams({\n      params\n    }),\n    // This can be moved into crud adaptor and passed as argument.\n    map(({\n      options\n    }) => ({\n      options,\n      identityCondition: rule.conditions.all.map(c => c.any.find(c2 => c2.fact === 'identity')).find(c => !!c)\n    })), switchMap(({\n      options,\n      identityCondition\n    }) => createSignedHttpRequest({\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        host: `${options.domain}.${options.region}.es.amazonaws.com`\n      },\n      hostname: `${options.domain}.${options.region}.es.amazonaws.com`,\n      path: `/${options.index}/_doc/${identityCondition ? identityCondition.value : ''}`,\n      protocol: 'https:',\n      service: \"es\",\n      cognitoSettings: cognitoSettings,\n      authFacade: authFacade\n    }).pipe(tap(() => console.log('.marker({ event: AFTER , entity: opensearch , op: query , meta: { action: createSignedRequest } })')), tap(signedHttpRequest => delete signedHttpRequest.headers.host),\n    // map(signedHttpRequest => ({ signedHttpRequest, options, url: `${ isPlatformServer(platformId) ? /*'http://localhost:4000'*/ `${protocol}://${hostName}` /*`https://${options.bucket}.s3.amazonaws.com`*/ : `${protocol}://${hostName}` }${ `/awproxy/s3/${(options as any).bucket}` }${signedHttpRequest.path}` })),\n    map(signedHttpRequest => ({\n      signedHttpRequest,\n      options,\n      url: `https://${options.domain}.${options.region}.es.amazonaws.com${signedHttpRequest.path}`\n    })), tap(() => console.log('.marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })')), switchMap(({\n      signedHttpRequest,\n      url\n    }) => http.get(url, {\n      headers: signedHttpRequest.headers,\n      withCredentials: false\n    }).pipe(catchError(() => of(undefined)))), tap(() => console.log('.marker({ event: AFTER , entity: opensearch , op: query , meta: { http: get } })')), map(res => ({\n      entities: res ? [res['_source']] : [],\n      success: res ? true : false\n    })))))\n  });\n};\nconst createSignedHttpRequest = ({\n  body,\n  headers,\n  hostname,\n  method = \"GET\",\n  path = \"/\",\n  port = 443,\n  protocol = \"https:\",\n  query,\n  service,\n  cognitoSettings,\n  authFacade\n}) => of(new HttpRequest({\n  body,\n  headers,\n  hostname,\n  method,\n  path,\n  port,\n  protocol,\n  query\n})).pipe(tap(() => console.log('.marker({ event: BEGIN , context: os, entity: sig , op: signv4 , meta: {  } })')), switchMap(req => from(new SignatureV4({\n  credentials: fromCognitoIdentityPool({\n    client: new CognitoIdentityClient({\n      region: cognitoSettings.region\n    }),\n    identityPoolId: cognitoSettings.identityPoolId,\n    logins: {\n      [`cognito-idp.${cognitoSettings.region}.amazonaws.com/${cognitoSettings.userPoolId}`]: () => firstValueFrom(authFacade.getUser$.pipe(map(u => u ? u.id_token : undefined)))\n    }\n  }),\n  region: cognitoSettings.region,\n  service,\n  sha256: sha256.Sha256,\n  applyChecksum: false\n}).sign(req).then(signedReq => {\n  console.log('.marker({ event: RESOLVED, entity: os , op: signv4 , meta: {  } })');\n  return signedReq;\n})).pipe(tap(() => console.log('.marker({ /os/sign/after/sig })')), take(1))), map(req => req), tap(() => console.log('.marker({ event: END , context: os, entity: sig , op: signv4 , meta: {  } })')));\nlet AwosModule = /*#__PURE__*/(() => {\n  class AwosModule {\n    constructor(cognitoSettings, platformId, cpm, authFacade, paramsEvaluatorService, http) {\n      cpm.register(opensearchTemplateCrudAdaptorPluginFactory(platformId, authFacade, cognitoSettings, paramsEvaluatorService, http));\n      cpm.register(opensearchEntityCrudAdaptorPluginFactory(authFacade, cognitoSettings, paramsEvaluatorService, http));\n    }\n    static {\n      this.\u0275fac = function AwosModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AwosModule)(i0.\u0275\u0275inject(COGNITO_SETTINGS), i0.\u0275\u0275inject(PLATFORM_ID), i0.\u0275\u0275inject(i1.CrudAdaptorPluginManager), i0.\u0275\u0275inject(i2.AuthFacade), i0.\u0275\u0275inject(i3.ParamEvaluatorService), i0.\u0275\u0275inject(i4.HttpClient));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: AwosModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        imports: [AuthModule, CrudModule]\n      });\n    }\n  }\n  return AwosModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of awos\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AwosModule };\n"],
  "mappings": "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",
  "names": ["sha256", "i0", "PLATFORM_ID", "i2", "AuthModule", "COGNITO_SETTINGS", "i1", "CrudAdaptorPlugin", "CrudModule", "of", "forkJoin", "from", "firstValueFrom", "SignatureV4", "HttpRequest", "fromCognitoIdentityPool", "CognitoIdentityClient", "switchMap", "map", "tap", "catchError", "take", "i3", "i4", "opensearchTemplateCrudAdaptorPluginFactory", "platformId", "authFacade", "cognitoSettings", "paramsEvaluatorService", "http", "CrudAdaptorPlugin", "object", "identity", "params", "parentObject", "of", "rule", "switchMap", "forkJoin", "name", "map", "v", "groups", "p", "c", "__spreadValues", "options", "p2", "c2", "__spreadProps", "tap", "body", "createSignedHttpRequest", "signedHttpRequest", "url", "res", "h", "opensearchEntityCrudAdaptorPluginFactory", "identityCondition", "catchError", "headers", "hostname", "method", "path", "port", "protocol", "query", "service", "HttpRequest", "req", "from", "SignatureV4", "fromCognitoIdentityPool", "CognitoIdentityClient", "firstValueFrom", "u", "signedReq", "take", "AwosModule", "cpm", "__ngFactoryType__", "COGNITO_SETTINGS", "PLATFORM_ID", "AuthModule", "CrudModule"]
}
