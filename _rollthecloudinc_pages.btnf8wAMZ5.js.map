{
  "version": 3,
  "sources": ["../../@rollthecloudinc/pages/fesm2022/rollthecloudinc-pages.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { Directive, ViewChild, Inject, Component, Injectable, Input, EventEmitter, Output, forwardRef, ContentChild, ViewChildren, Optional, InjectionToken, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i1$3 from '@angular/router';\nimport { UrlSegment, RouterModule } from '@angular/router';\nimport * as i1$2 from '@angular/forms';\nimport { UntypedFormArray, UntypedFormControl, Validators, NG_VALUE_ACCESSOR, NG_VALIDATORS, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport * as i3$1 from 'ngx-markdown';\nimport { MarkdownModule, MarkdownComponent } from 'ngx-markdown';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport * as i10 from 'angular-split';\nimport { AngularSplitModule } from 'angular-split';\nimport * as i6$3 from 'ngx-dropzone';\nimport { NgxDropzoneModule } from 'ngx-dropzone';\nimport { MaterialModule } from '@rollthecloudinc/material';\nimport { NgxJsonViewerModule } from 'ngx-json-viewer';\nimport * as i6$1 from 'ngx-angular-query-builder';\nimport { NgxAngularQueryBuilderModule } from 'ngx-angular-query-builder';\nimport * as i1$4 from '@rollthecloudinc/media';\nimport { MEDIA_SETTINGS, MediaFile, MediaModule } from '@rollthecloudinc/media';\nimport * as i4 from '@rollthecloudinc/utils';\nimport { SITE_NAME, UtilsModule, EMBEDDABLE_COMPONENT } from '@rollthecloudinc/utils';\nimport * as i2$1 from '@rollthecloudinc/token';\nimport { TokenModule } from '@rollthecloudinc/token';\nimport * as i2 from '@rollthecloudinc/attributes';\nimport { AttributeValue, AttributeTypes, Attribute, ATTRIBUTE_WIDGET, AttributesModule } from '@rollthecloudinc/attributes';\nimport * as i12 from '@rollthecloudinc/layout';\nimport { GridLayoutComponent, SplitLayoutComponent, LayoutModule } from '@rollthecloudinc/layout';\nimport * as i11 from '@rollthecloudinc/rest';\nimport { RestSourceFormComponent, RestModule } from '@rollthecloudinc/rest';\nimport * as i5 from '@rollthecloudinc/snippet';\nimport { Snippet, SnippetModule } from '@rollthecloudinc/snippet';\nimport * as i2_1 from '@rollthecloudinc/content';\nimport { ContentBinding, ContentPluginEditorOptions, ContentPlugin, CONTENT_PLUGIN } from '@rollthecloudinc/content';\nimport * as i2$3 from '@rollthecloudinc/context';\nimport { InlineContext, ContextFormComponent, ContextPlugin, ResolvedContextPlugin, ContextModule } from '@rollthecloudinc/context';\nimport { DisplayGrid, GridType, GridsterModule } from 'angular-gridster2';\nimport * as i1 from '@angular/material/bottom-sheet';\nimport { MAT_BOTTOM_SHEET_DATA } from '@angular/material/bottom-sheet';\nimport * as i1$1 from '@angular/material/dialog';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i6 from '@angular/material/grid-list';\nimport * as i7 from '@angular/material/list';\nimport * as i8 from '@angular/material/tabs';\nimport { Observable, of, Subject, BehaviorSubject, combineLatest, forkJoin, iif, from, merge } from 'rxjs';\nimport { map, switchMap, tap, filter, debounceTime, delay, take, withLatestFrom, distinctUntilChanged, defaultIfEmpty, skip, catchError } from 'rxjs/operators';\nimport * as i16 from '@rollthecloudinc/datasource';\nimport { Dataset, Rest, SelectMapping, SelectOption, DatasourcePlugin, DatasourceModule } from '@rollthecloudinc/datasource';\nimport * as uuid from 'uuid';\nimport * as i2$2 from '@rollthecloudinc/panels';\nimport { PropertiesFormPayload, PanelPropsFormPayload, PanePropsFormPayload, PaneState, LayoutSetting, Pane, PanelPage, PanelPageStateSlice, selectDataset, Panel, FormDatasource, StylePlugin, PanelPageForm, PaneDatasourceService, PanelStyleRendererBaseComponent, PanelPageSelector, PanelPageState, PanelState, STYLE_PLUGIN, PanelsModule } from '@rollthecloudinc/panels';\nimport { PersistenceFormPayload, PersistenceDialogComponent } from '@rollthecloudinc/refinery';\nimport * as i4$1 from '@rollthecloudinc/rules';\nimport * as i3$2 from '@angular/material/button';\nimport * as i4$2 from '@angular/material/input';\nimport * as i5$1 from '@angular/flex-layout/flex';\nimport { InteractionsFormPayload, InteractionsDialogComponent } from '@rollthecloudinc/detour';\nimport * as i5$2 from '@angular/material/expansion';\nimport * as i6$2 from '@angular/material/icon';\nimport * as i7$1 from '@angular/material/menu';\nimport * as i9 from '@angular/flex-layout/extended';\nimport * as jpp from 'jsonpath-plus';\nimport * as i3$3 from '@ngrx/store';\nimport { createSelector, select } from '@ngrx/store';\nimport * as i4$3 from '@ngrx/data';\nimport * as i19 from '@angular/cdk/drag-drop';\nimport { getRouterSelectors } from '@ngrx/router-store';\nimport * as i15 from '@rollthecloudinc/crud';\nimport { CrudAdaptorPlugin } from '@rollthecloudinc/crud';\nimport * as i7$2 from '@rollthecloudinc/render';\nimport { RenderModule } from '@rollthecloudinc/render';\nimport { loadRemoteModule } from '@softarc/native-federation-runtime';\nimport * as i5$3 from '@rollthecloudinc/durl';\nimport * as i5$4 from '@angular/material/autocomplete';\nimport * as i6$4 from '@angular/material/checkbox';\nimport * as i9$1 from '@angular/material/select';\nimport * as i8$1 from '@angular/material/radio';\nimport * as i5$6 from '@rollthecloudinc/dparam';\nimport { ParamPlugin, Param, DparamModule } from '@rollthecloudinc/dparam';\nimport * as i13 from '@rollthecloudinc/bridge';\nimport { BridgeBuilderPlugin, PublicApiBridgeService, BridgeModule } from '@rollthecloudinc/bridge';\nimport * as i3$4 from '@angular/cdk/scrolling';\nimport qs from 'qs';\nimport * as i4$4 from '@angular/material/sort';\nimport * as i5$5 from '@angular/material/table';\nimport * as i6$5 from '@rollthecloudinc/plugin';\nimport * as i14 from '@angular/common/http';\nfunction ContentSelectorComponent_a_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"a\", 4);\n    i0.\u0275\u0275listener(\"click\", function ContentSelectorComponent_a_4_Template_a_click_0_listener() {\n      const p_r2 = i0.\u0275\u0275restoreView(_r1).$implicit;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onEntitySelected(p_r2.value));\n    });\n    i0.\u0275\u0275elementStart(1, \"span\", 5);\n    i0.\u0275\u0275text(2);\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275textInterpolate(p_r2.value.title);\n  }\n}\nfunction ContentSelectorComponent_ng_template_9_Template(rf, ctx) {}\nfunction SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"classifieds-ui-dynamic-content-viewer\", 1);\n    i0.\u0275\u0275pipe(1, \"async\");\n    i0.\u0275\u0275listener(\"docRendered\", function SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_0_Template_classifieds_ui_dynamic_content_viewer_docRendered_0_listener() {\n      i0.\u0275\u0275restoreView(_r1);\n      const ctx_r1 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r1.onDocRendered());\n    });\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"content\", i0.\u0275\u0275pipeBind1(1, 1, ctx_r1.content$));\n  }\n}\nfunction SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"classifieds-ui-dynamic-content-viewer\", 1);\n    i0.\u0275\u0275pipe(1, \"async\");\n    i0.\u0275\u0275listener(\"docRendered\", function SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_1_Template_classifieds_ui_dynamic_content_viewer_docRendered_0_listener() {\n      i0.\u0275\u0275restoreView(_r3);\n      const ctx_r1 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r1.onDocRendered());\n    });\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"content\", i0.\u0275\u0275pipeBind1(1, 1, ctx_r1.content$));\n  }\n}\nfunction StyleSelectorComponent_a_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"a\", 4);\n    i0.\u0275\u0275listener(\"click\", function StyleSelectorComponent_a_4_Template_a_click_0_listener() {\n      const s_r2 = i0.\u0275\u0275restoreView(_r1).$implicit;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onStyleSelected(s_r2.value));\n    });\n    i0.\u0275\u0275elementStart(1, \"span\", 5);\n    i0.\u0275\u0275text(2);\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const s_r2 = ctx.$implicit;\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275textInterpolate(s_r2.value.title);\n  }\n}\nfunction StyleSelectorComponent_ng_template_9_Template(rf, ctx) {}\nconst _c0 = [\"contentEditor\"];\nconst _c1 = a0 => ({\n  settings: a0\n});\nconst _c2 = a0 => ({\n  \"visible\": a0\n});\nfunction EditablePaneComponent_div_0_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainer(0);\n  }\n}\nfunction EditablePaneComponent_div_0_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"button\", 21);\n    i0.\u0275\u0275listener(\"click\", function EditablePaneComponent_div_0_button_14_Template_button_click_0_listener() {\n      i0.\u0275\u0275restoreView(_r4);\n      const ctx_r2 = i0.\u0275\u0275nextContext(2);\n      return i0.\u0275\u0275resetView(ctx_r2.onOverrideClick());\n    });\n    i0.\u0275\u0275text(1, \"Override\");\n    i0.\u0275\u0275elementEnd();\n  }\n}\nfunction EditablePaneComponent_div_0_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"button\", 21);\n    i0.\u0275\u0275listener(\"click\", function EditablePaneComponent_div_0_button_15_Template_button_click_0_listener() {\n      i0.\u0275\u0275restoreView(_r5);\n      const ctx_r2 = i0.\u0275\u0275nextContext(2);\n      return i0.\u0275\u0275resetView(ctx_r2.onRemoveOverrideClick());\n    });\n    i0.\u0275\u0275text(1, \"Remove Override\");\n    i0.\u0275\u0275elementEnd();\n  }\n}\nfunction EditablePaneComponent_div_0_ng_template_17_Template(rf, ctx) {}\nfunction EditablePaneComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13)(3, \"button\", 14)(4, \"mat-icon\");\n    i0.\u0275\u0275text(5, \"more_vert\");\n    i0.\u0275\u0275elementEnd()()();\n    i0.\u0275\u0275elementStart(6, \"mat-expansion-panel\", 15);\n    i0.\u0275\u0275listener(\"afterCollapse\", function EditablePaneComponent_div_0_Template_mat_expansion_panel_afterCollapse_6_listener() {\n      i0.\u0275\u0275restoreView(_r2);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onAfterCollapse());\n    })(\"afterExpand\", function EditablePaneComponent_div_0_Template_mat_expansion_panel_afterExpand_6_listener() {\n      i0.\u0275\u0275restoreView(_r2);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onAfterExpand());\n    });\n    i0.\u0275\u0275elementStart(7, \"mat-expansion-panel-header\")(8, \"mat-panel-title\");\n    i0.\u0275\u0275text(9);\n    i0.\u0275\u0275elementEnd()();\n    i0.\u0275\u0275elementStart(10, \"div\", 16)(11, \"ul\");\n    i0.\u0275\u0275template(12, EditablePaneComponent_div_0_ng_container_12_Template, 1, 0, \"ng-container\", 17);\n    i0.\u0275\u0275elementEnd()();\n    i0.\u0275\u0275elementStart(13, \"div\", 18);\n    i0.\u0275\u0275template(14, EditablePaneComponent_div_0_button_14_Template, 2, 0, \"button\", 19)(15, EditablePaneComponent_div_0_button_15_Template, 2, 0, \"button\", 19);\n    i0.\u0275\u0275elementContainerStart(16);\n    i0.\u0275\u0275template(17, EditablePaneComponent_div_0_ng_template_17_Template, 0, 0, \"ng-template\", 20);\n    i0.\u0275\u0275elementContainerEnd();\n    i0.\u0275\u0275elementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    const settingsTmpl_r6 = i0.\u0275\u0275reference(2);\n    const paneMenu_r7 = i0.\u0275\u0275reference(6);\n    i0.\u0275\u0275advance(3);\n    i0.\u0275\u0275property(\"matMenuTriggerFor\", paneMenu_r7);\n    i0.\u0275\u0275advance(6);\n    i0.\u0275\u0275textInterpolate2(\"\", ctx_r2.contentPlugin.title, \" : \", ctx_r2.name);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"hidden\", ctx_r2.preview);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"ngTemplateOutlet\", settingsTmpl_r6)(\"ngTemplateOutletContext\", i0.\u0275\u0275pureFunction1(9, _c1, ctx_r2.settings));\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngClass\", i0.\u0275\u0275pureFunction1(11, _c2, ctx_r2.preview));\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", ctx_r2.displayOverride && !ctx_r2.hasOverride);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", ctx_r2.displayOverride && ctx_r2.hasOverride);\n  }\n}\nfunction EditablePaneComponent_ng_template_1_li_0_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"span\");\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275pipe(2, \"attribute\");\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const setting_r8 = i0.\u0275\u0275nextContext().$implicit;\n    const settings_r9 = i0.\u0275\u0275nextContext().settings;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(i0.\u0275\u0275pipeBind2(2, 1, settings_r9, setting_r8.name));\n  }\n}\nfunction EditablePaneComponent_ng_template_1_li_0_ul_3_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainer(0);\n  }\n}\nfunction EditablePaneComponent_ng_template_1_li_0_ul_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"ul\");\n    i0.\u0275\u0275template(1, EditablePaneComponent_ng_template_1_li_0_ul_3_ng_container_1_Template, 1, 0, \"ng-container\", 17);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const setting_r8 = i0.\u0275\u0275nextContext().$implicit;\n    i0.\u0275\u0275nextContext(2);\n    const settingsTmpl_r6 = i0.\u0275\u0275reference(2);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngTemplateOutlet\", settingsTmpl_r6)(\"ngTemplateOutletContext\", i0.\u0275\u0275pureFunction1(2, _c1, setting_r8.attributes));\n  }\n}\nfunction EditablePaneComponent_ng_template_1_li_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"li\");\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275template(2, EditablePaneComponent_ng_template_1_li_0_span_2_Template, 3, 4, \"span\", 23)(3, EditablePaneComponent_ng_template_1_li_0_ul_3_Template, 2, 4, \"ul\", 23);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const setting_r8 = ctx.$implicit;\n    const settings_r9 = i0.\u0275\u0275nextContext().settings;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate1(\" \", setting_r8.displayName, \": \");\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", !setting_r8.attributes || setting_r8.attributes.length == 0);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", settings_r9.attributes && setting_r8.attributes.length > 0);\n  }\n}\nfunction EditablePaneComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275template(0, EditablePaneComponent_ng_template_1_li_0_Template, 4, 3, \"li\", 22);\n  }\n  if (rf & 2) {\n    const settings_r9 = ctx.settings;\n    i0.\u0275\u0275property(\"ngForOf\", settings_r9);\n  }\n}\nfunction EditablePaneComponent_ng_template_3_ng_template_3_Template(rf, ctx) {}\nfunction EditablePaneComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"div\", 24)(1, \"classifieds-ui-content-editor\", 25, 3);\n    i0.\u0275\u0275listener(\"nestedUpdate\", function EditablePaneComponent_ng_template_3_Template_classifieds_ui_content_editor_nestedUpdate_1_listener($event) {\n      i0.\u0275\u0275restoreView(_r10);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onNestedUpdate($event));\n    })(\"delete\", function EditablePaneComponent_ng_template_3_Template_classifieds_ui_content_editor_delete_1_listener() {\n      i0.\u0275\u0275restoreView(_r10);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onDeleteClick());\n    })(\"rules\", function EditablePaneComponent_ng_template_3_Template_classifieds_ui_content_editor_rules_1_listener() {\n      i0.\u0275\u0275restoreView(_r10);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onRulesClick());\n    })(\"props\", function EditablePaneComponent_ng_template_3_Template_classifieds_ui_content_editor_props_1_listener() {\n      i0.\u0275\u0275restoreView(_r10);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onPropsClick());\n    });\n    i0.\u0275\u0275template(3, EditablePaneComponent_ng_template_3_ng_template_3_Template, 0, 0, \"ng-template\", null, 4, i0.\u0275\u0275templateRefExtractor);\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"panelPage\", ctx_r2.panelPage)(\"savable\", false)(\"nested\", true)(\"locked\", ctx_r2.locked)(\"contexts\", ctx_r2.contexts)(\"rootContext\", ctx_r2.rootContext)(\"ancestory\", ctx_r2.paneAncestoryWithSelf);\n  }\n}\nfunction EditablePaneComponent_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"button\", 26);\n    i0.\u0275\u0275listener(\"click\", function EditablePaneComponent_button_13_Template_button_click_0_listener() {\n      i0.\u0275\u0275restoreView(_r11);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onPreviewClick());\n    });\n    i0.\u0275\u0275text(1, \"Preview\");\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"disabled\", ctx_r2.locked);\n  }\n}\nfunction EditablePaneComponent_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"button\", 27);\n    i0.\u0275\u0275listener(\"click\", function EditablePaneComponent_button_14_Template_button_click_0_listener() {\n      i0.\u0275\u0275restoreView(_r12);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onDisablePreviewClick());\n    });\n    i0.\u0275\u0275text(1, \"Disable Preview\");\n    i0.\u0275\u0275elementEnd();\n  }\n}\nconst _c3 = [\"extraActionsArea\"];\nconst _c4 = [\"contextsMenuTpl\"];\nconst _c5 = [\"editablePaneTpl\"];\nconst _c6 = [\"panes\"];\nconst _c7 = a0 => ({\n  \"nested\": a0\n});\nfunction ContentEditorComponent_form_0_ng_template_2_Template(rf, ctx) {}\nfunction ContentEditorComponent_form_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"form\", 7);\n    i0.\u0275\u0275listener(\"ngSubmit\", function ContentEditorComponent_form_0_Template_form_ngSubmit_0_listener() {\n      i0.\u0275\u0275restoreView(_r2);\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.submit());\n    });\n    i0.\u0275\u0275elementContainerStart(1);\n    i0.\u0275\u0275template(2, ContentEditorComponent_form_0_ng_template_2_Template, 0, 0, \"ng-template\", 8);\n    i0.\u0275\u0275elementContainerEnd();\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"formGroup\", ctx_r2.contentForm)(\"ngClass\", i0.\u0275\u0275pureFunction1(2, _c7, ctx_r2.nested));\n  }\n}\nfunction ContentEditorComponent_ng_template_1_ng_template_2_Template(rf, ctx) {}\nfunction ContentEditorComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\", 9);\n    i0.\u0275\u0275elementContainerStart(1);\n    i0.\u0275\u0275template(2, ContentEditorComponent_ng_template_1_ng_template_2_Template, 0, 0, \"ng-template\", 8);\n    i0.\u0275\u0275elementContainerEnd();\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"formGroup\", ctx_r2.contentForm)(\"ngClass\", i0.\u0275\u0275pureFunction1(2, _c7, ctx_r2.nested));\n  }\n}\nfunction ContentEditorComponent_ng_template_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"div\", 12);\n  }\n}\nfunction ContentEditorComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"classifieds-ui-editable-pane\", 10);\n    i0.\u0275\u0275listener(\"delete\", function ContentEditorComponent_ng_template_3_Template_classifieds_ui_editable_pane_delete_0_listener() {\n      const ctx_r4 = i0.\u0275\u0275restoreView(_r4);\n      const i_r6 = ctx_r4.i;\n      const j_r7 = ctx_r4.j;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onDeletePane(i_r6, j_r7));\n    })(\"rules\", function ContentEditorComponent_ng_template_3_Template_classifieds_ui_editable_pane_rules_0_listener() {\n      const ctx_r7 = i0.\u0275\u0275restoreView(_r4);\n      const i_r6 = ctx_r7.i;\n      const j_r7 = ctx_r7.j;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onRulesPane(i_r6, j_r7));\n    })(\"nestedUpdate\", function ContentEditorComponent_ng_template_3_Template_classifieds_ui_editable_pane_nestedUpdate_0_listener($event) {\n      const ctx_r8 = i0.\u0275\u0275restoreView(_r4);\n      const i_r6 = ctx_r8.i;\n      const j_r7 = ctx_r8.j;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onNestedUpdate($event, i_r6, j_r7));\n    })(\"rendererOverride\", function ContentEditorComponent_ng_template_3_Template_classifieds_ui_editable_pane_rendererOverride_0_listener() {\n      const ctx_r9 = i0.\u0275\u0275restoreView(_r4);\n      const i_r6 = ctx_r9.i;\n      const j_r7 = ctx_r9.j;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onOverrideRenderer(i_r6, j_r7));\n    })(\"removeRendererOverride\", function ContentEditorComponent_ng_template_3_Template_classifieds_ui_editable_pane_removeRendererOverride_0_listener() {\n      const ctx_r10 = i0.\u0275\u0275restoreView(_r4);\n      const i_r6 = ctx_r10.i;\n      const j_r7 = ctx_r10.j;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onRemoveOverrideRenderer(i_r6, j_r7));\n    })(\"edit\", function ContentEditorComponent_ng_template_3_Template_classifieds_ui_editable_pane_edit_0_listener() {\n      const ctx_r11 = i0.\u0275\u0275restoreView(_r4);\n      const i_r6 = ctx_r11.i;\n      const j_r7 = ctx_r11.j;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onPaneEdit(i_r6, j_r7));\n    })(\"props\", function ContentEditorComponent_ng_template_3_Template_classifieds_ui_editable_pane_props_0_listener() {\n      const ctx_r12 = i0.\u0275\u0275restoreView(_r4);\n      const i_r6 = ctx_r12.i;\n      const j_r7 = ctx_r12.j;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.editPaneProps(i_r6, j_r7));\n    })(\"delete\", function ContentEditorComponent_ng_template_3_Template_classifieds_ui_editable_pane_delete_0_listener() {\n      const ctx_r13 = i0.\u0275\u0275restoreView(_r4);\n      const i_r6 = ctx_r13.i;\n      const j_r7 = ctx_r13.j;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onPaneDelete(i_r6, j_r7));\n    });\n    i0.\u0275\u0275template(1, ContentEditorComponent_ng_template_3_div_1_Template, 1, 0, \"div\", 11);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const i_r6 = ctx.i;\n    const j_r7 = ctx.j;\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"panelIndex\", i_r6)(\"paneIndex\", j_r7)(\"name\", ctx_r2.panelPaneName(i_r6, j_r7))(\"label\", ctx_r2.panelPaneLabel(i_r6, j_r7))(\"locked\", ctx_r2.panelPaneLocked(i_r6, j_r7))(\"contexts\", ctx_r2.contexts)(\"pluginName\", ctx_r2.panelPanePlugin(i_r6, j_r7))(\"settings\", ctx_r2.panelPaneSettings(i_r6, j_r7))(\"ancestory\", ctx_r2.ancestory);\n  }\n}\nfunction ContentEditorComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"button\", 13);\n    i0.\u0275\u0275text(1, \"( x )\");\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    i0.\u0275\u0275nextContext();\n    const contextMenu_r15 = i0.\u0275\u0275reference(8);\n    i0.\u0275\u0275property(\"matMenuTriggerFor\", contextMenu_r15);\n  }\n}\nfunction ContentEditorComponent_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"button\", 5);\n    i0.\u0275\u0275listener(\"click\", function ContentEditorComponent_button_11_Template_button_click_0_listener() {\n      const c_r17 = i0.\u0275\u0275restoreView(_r16).$implicit;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onEditContext(c_r17.name));\n    });\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const c_r17 = ctx.$implicit;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(c_r17.name);\n  }\n}\nfunction AttributeSelectorComponent_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"a\", 1);\n    i0.\u0275\u0275listener(\"click\", function AttributeSelectorComponent_a_1_Template_a_click_0_listener() {\n      const widget_r2 = i0.\u0275\u0275restoreView(_r1).$implicit;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onItemSelect(widget_r2.value));\n    });\n    i0.\u0275\u0275elementStart(1, \"span\", 2);\n    i0.\u0275\u0275text(2);\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const widget_r2 = ctx.$implicit;\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275textInterpolate(widget_r2.value.name);\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainer(0);\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"span\");\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const setting_r1 = i0.\u0275\u0275nextContext().$implicit;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate1(\"\", setting_r1.displayName, \": \");\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"span\");\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275pipe(2, \"attribute\");\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const setting_r1 = i0.\u0275\u0275nextContext().$implicit;\n    const settings_r2 = i0.\u0275\u0275nextContext().settings;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(i0.\u0275\u0275pipeBind2(2, 1, settings_r2, setting_r1.name));\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_div_3_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainer(0);\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\");\n    i0.\u0275\u0275template(1, AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_div_3_ng_container_1_Template, 1, 0, \"ng-container\", 5);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const setting_r1 = i0.\u0275\u0275nextContext().$implicit;\n    i0.\u0275\u0275nextContext(2);\n    const settingsTmpl_r3 = i0.\u0275\u0275reference(3);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngTemplateOutlet\", settingsTmpl_r3)(\"ngTemplateOutletContext\", i0.\u0275\u0275pureFunction1(2, _c1, setting_r1.attributes));\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\");\n    i0.\u0275\u0275template(1, AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_span_1_Template, 2, 1, \"span\", 3)(2, AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_span_2_Template, 3, 4, \"span\", 3)(3, AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_div_3_Template, 2, 4, \"div\", 3);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const setting_r1 = ctx.$implicit;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", setting_r1.attributes.length == 0);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", setting_r1.attributes.length == 0);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", setting_r1.attributes.length > 0);\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275template(0, AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_Template, 4, 3, \"div\", 6);\n  }\n  if (rf & 2) {\n    const settings_r2 = ctx.settings;\n    i0.\u0275\u0275property(\"ngForOf\", settings_r2);\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\");\n    i0.\u0275\u0275template(1, AttributePaneRendererComponent_div_0_div_1_ng_container_1_Template, 1, 0, \"ng-container\", 5)(2, AttributePaneRendererComponent_div_0_div_1_ng_template_2_Template, 1, 1, \"ng-template\", null, 1, i0.\u0275\u0275templateRefExtractor);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const settingsTmpl_r3 = i0.\u0275\u0275reference(3);\n    const ctx_r3 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngTemplateOutlet\", settingsTmpl_r3)(\"ngTemplateOutletContext\", i0.\u0275\u0275pureFunction1(2, _c1, ctx_r3.attributeValues));\n  }\n}\nfunction AttributePaneRendererComponent_div_0_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\", 7);\n    i0.\u0275\u0275element(1, \"classifieds-ui-attributes-builder\", 8);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275property(\"formGroup\", ctx_r3.controlContainer.control);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"attributes\", ctx_r3.attributes)(\"attributeValues\", ctx_r3.attributeValues);\n  }\n}\nfunction AttributePaneRendererComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\");\n    i0.\u0275\u0275template(1, AttributePaneRendererComponent_div_0_div_1_Template, 4, 4, \"div\", 3)(2, AttributePaneRendererComponent_div_0_div_2_Template, 2, 3, \"div\", 4);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", ctx_r3.displayType == \"page\");\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngIf\", ctx_r3.displayType == \"form\");\n  }\n}\nfunction AttributePaneRendererComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-snippet-pane-renderer\", 9);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"settings\", ctx_r3.rendererSettings)(\"tokens\", ctx_r3.tokens);\n  }\n}\nfunction MediaEditorComponent_ngx_dropzone_image_preview_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"ngx-dropzone-image-preview\", 2);\n    i0.\u0275\u0275listener(\"removed\", function MediaEditorComponent_ngx_dropzone_image_preview_3_Template_ngx_dropzone_image_preview_removed_0_listener($event) {\n      i0.\u0275\u0275restoreView(_r1);\n      const ctx_r1 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r1.onRemoveMedia($event));\n    });\n    i0.\u0275\u0275elementStart(1, \"ngx-dropzone-label\");\n    i0.\u0275\u0275text(2);\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"removable\", true)(\"file\", ctx_r1.media);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275textInterpolate2(\"\", ctx_r1.media.name, \" (\", ctx_r1.media.type, \")\");\n  }\n}\nconst _c8 = [\"img\"];\nfunction RestFormComponent_div_29_div_4_mat_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 26);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const pane_r3 = ctx.$implicit;\n    i0.\u0275\u0275property(\"value\", pane_r3);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(pane_r3);\n  }\n}\nfunction RestFormComponent_div_29_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\")(1, \"mat-form-field\", 23)(2, \"mat-label\");\n    i0.\u0275\u0275text(3, \"Pane\");\n    i0.\u0275\u0275elementEnd();\n    i0.\u0275\u0275elementStart(4, \"mat-select\", 24);\n    i0.\u0275\u0275template(5, RestFormComponent_div_29_div_4_mat_option_5_Template, 2, 2, \"mat-option\", 25);\n    i0.\u0275\u0275elementEnd()()();\n  }\n  if (rf & 2) {\n    const i_r4 = ctx.index;\n    const ctx_r1 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"formGroupName\", i_r4);\n    i0.\u0275\u0275advance(4);\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r1.panes);\n  }\n}\nfunction RestFormComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"div\", 20)(1, \"button\", 21);\n    i0.\u0275\u0275listener(\"click\", function RestFormComponent_div_29_Template_button_click_1_listener() {\n      i0.\u0275\u0275restoreView(_r1);\n      const ctx_r1 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r1.addPane());\n    });\n    i0.\u0275\u0275text(2, \"Add Pane\");\n    i0.\u0275\u0275elementEnd();\n    i0.\u0275\u0275elementStart(3, \"div\");\n    i0.\u0275\u0275template(4, RestFormComponent_div_29_div_4_Template, 6, 2, \"div\", 22);\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance(4);\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r1.bindings.controls);\n  }\n}\nfunction RestFormComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\", 27)(1, \"mat-form-field\");\n    i0.\u0275\u0275element(2, \"input\", 28);\n    i0.\u0275\u0275elementEnd();\n    i0.\u0275\u0275elementStart(3, \"mat-form-field\");\n    i0.\u0275\u0275element(4, \"input\", 29);\n    i0.\u0275\u0275elementEnd();\n    i0.\u0275\u0275elementStart(5, \"mat-form-field\");\n    i0.\u0275\u0275element(6, \"input\", 30);\n    i0.\u0275\u0275elementEnd();\n    i0.\u0275\u0275elementStart(7, \"div\")(8, \"mat-checkbox\", 31);\n    i0.\u0275\u0275text(9, \"Multiple\");\n    i0.\u0275\u0275elementEnd()();\n    i0.\u0275\u0275elementStart(10, \"mat-form-field\");\n    i0.\u0275\u0275element(11, \"input\", 32);\n    i0.\u0275\u0275elementEnd()();\n  }\n}\nfunction SelectionComponent_ng_container_5_mat_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 8);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const opt_r1 = ctx.$implicit;\n    i0.\u0275\u0275property(\"value\", opt_r1.value);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(opt_r1.label);\n  }\n}\nfunction SelectionComponent_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0);\n    i0.\u0275\u0275elementStart(1, \"mat-form-field\")(2, \"mat-label\");\n    i0.\u0275\u0275text(3);\n    i0.\u0275\u0275elementEnd();\n    i0.\u0275\u0275elementStart(4, \"mat-select\", 6);\n    i0.\u0275\u0275template(5, SelectionComponent_ng_container_5_mat_option_5_Template, 2, 2, \"mat-option\", 7);\n    i0.\u0275\u0275elementEnd()();\n    i0.\u0275\u0275elementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance(3);\n    i0.\u0275\u0275textInterpolate(ctx_r1.label);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r1.options);\n  }\n}\nfunction SelectionComponent_ng_container_6_mat_radio_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-radio-button\", 8);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const opt_r3 = ctx.$implicit;\n    i0.\u0275\u0275property(\"value\", opt_r3.value);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(opt_r3.label);\n  }\n}\nfunction SelectionComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0);\n    i0.\u0275\u0275elementStart(1, \"div\")(2, \"label\");\n    i0.\u0275\u0275text(3);\n    i0.\u0275\u0275elementEnd();\n    i0.\u0275\u0275elementStart(4, \"mat-radio-group\", 6);\n    i0.\u0275\u0275template(5, SelectionComponent_ng_container_6_mat_radio_button_5_Template, 2, 2, \"mat-radio-button\", 7);\n    i0.\u0275\u0275elementEnd()();\n    i0.\u0275\u0275elementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance(3);\n    i0.\u0275\u0275textInterpolate(ctx_r1.label);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r1.options);\n  }\n}\nfunction SelectionComponent_ng_container_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\")(1, \"div\", 10)(2, \"mat-checkbox\", 11);\n    i0.\u0275\u0275text(3);\n    i0.\u0275\u0275elementEnd()()();\n  }\n  if (rf & 2) {\n    const opt_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"formGroupName\", i_r5);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275textInterpolate(opt_r4.label);\n  }\n}\nfunction SelectionComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0);\n    i0.\u0275\u0275elementStart(1, \"div\")(2, \"div\", 2);\n    i0.\u0275\u0275template(3, SelectionComponent_ng_container_7_div_3_Template, 4, 2, \"div\", 9);\n    i0.\u0275\u0275elementEnd()();\n    i0.\u0275\u0275elementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance(3);\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r1.options);\n  }\n}\nfunction SelectionComponent_ng_container_8_mat_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 8);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const opt_r7 = ctx.$implicit;\n    i0.\u0275\u0275property(\"value\", opt_r7);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(opt_r7.label);\n  }\n}\nfunction SelectionComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementContainerStart(0);\n    i0.\u0275\u0275elementStart(1, \"mat-form-field\");\n    i0.\u0275\u0275element(2, \"input\", 12);\n    i0.\u0275\u0275elementStart(3, \"mat-autocomplete\", 13, 0);\n    i0.\u0275\u0275listener(\"optionSelected\", function SelectionComponent_ng_container_8_Template_mat_autocomplete_optionSelected_3_listener($event) {\n      i0.\u0275\u0275restoreView(_r6);\n      const ctx_r1 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r1.onOptionSelected($event));\n    });\n    i0.\u0275\u0275template(5, SelectionComponent_ng_container_8_mat_option_5_Template, 2, 2, \"mat-option\", 7);\n    i0.\u0275\u0275elementEnd()();\n    i0.\u0275\u0275elementContainerEnd();\n  }\n  if (rf & 2) {\n    const autocomplete_r8 = i0.\u0275\u0275reference(4);\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"placeholder\", ctx_r1.label)(\"matAutocomplete\", autocomplete_r8);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"displayWith\", ctx_r1.displayAuto);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r1.options);\n  }\n}\nfunction SliceFormComponent_mat_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 8);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const c_r1 = ctx.$implicit;\n    i0.\u0275\u0275property(\"value\", c_r1.name);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(c_r1.name);\n  }\n}\nfunction TabsPanelEditorComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"div\", 5);\n    i0.\u0275\u0275element(1, \"druid-panels-panelpage-linkedlist\", 6);\n    i0.\u0275\u0275elementStart(2, \"button\", 3);\n    i0.\u0275\u0275listener(\"click\", function TabsPanelEditorComponent_div_2_Template_button_click_2_listener() {\n      const i_r2 = i0.\u0275\u0275restoreView(_r1).index;\n      const ctx_r2 = i0.\u0275\u0275nextContext();\n      return i0.\u0275\u0275resetView(ctx_r2.onRemoveMapping(i_r2));\n    });\n    i0.\u0275\u0275text(3, \"Remove\");\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const i_r2 = ctx.index;\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"formGroupName\", i_r2);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"panes\", ctx_r2.panes);\n  }\n}\nfunction TabsPanelRendererComponent_mat_tab_group_0_mat_tab_1_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"classifieds-ui-render-pane\", 4);\n  }\n  if (rf & 2) {\n    const i_r1 = i0.\u0275\u0275nextContext().index;\n    const ctx_r1 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275property(\"pluginName\", ctx_r1.panes[i_r1 * 2].contentPlugin)(\"settings\", ctx_r1.panes[i_r1 * 2].settings)(\"contexts\", ctx_r1.panes[i_r1 * 2].contexts);\n  }\n}\nfunction TabsPanelRendererComponent_mat_tab_group_0_mat_tab_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-tab\");\n    i0.\u0275\u0275template(1, TabsPanelRendererComponent_mat_tab_group_0_mat_tab_1_ng_template_1_Template, 1, 3, \"ng-template\", 3);\n    i0.\u0275\u0275element(2, \"classifieds-ui-render-pane\", 4);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const i_r1 = ctx.index;\n    const ctx_r1 = i0.\u0275\u0275nextContext(2);\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"pluginName\", ctx_r1.panes[i_r1 * 2 + 1].contentPlugin)(\"settings\", ctx_r1.panes[i_r1 * 2 + 1].settings)(\"contexts\", ctx_r1.panes[i_r1 * 2 + 1].contexts);\n  }\n}\nfunction TabsPanelRendererComponent_mat_tab_group_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-tab-group\", 1);\n    i0.\u0275\u0275template(1, TabsPanelRendererComponent_mat_tab_group_0_mat_tab_1_Template, 3, 3, \"mat-tab\", 2);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"for\", ctx_r1.panes.length / 2);\n  }\n}\nfunction TabsPanelRendererComponent_mat_tab_group_1_mat_tab_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-tab\", 6);\n    i0.\u0275\u0275element(1, \"classifieds-ui-render-pane\", 4);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const pane_r3 = ctx.$implicit;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"pluginName\", pane_r3.contentPlugin)(\"settings\", pane_r3.settings)(\"contexts\", pane_r3.contexts);\n  }\n}\nfunction TabsPanelRendererComponent_mat_tab_group_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-tab-group\", 1);\n    i0.\u0275\u0275template(1, TabsPanelRendererComponent_mat_tab_group_1_mat_tab_1_Template, 2, 3, \"mat-tab\", 5);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngForOf\", ctx_r1.panes);\n  }\n}\nfunction VirtualListPanelRendererComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"div\", 2);\n    i0.\u0275\u0275element(1, \"classifieds-ui-render-pane\", 3);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const pane_r1 = ctx.$implicit;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"pluginName\", pane_r1.contentPlugin)(\"settings\", pane_r1.settings)(\"contexts\", pane_r1.contexts)(\"resolvedContext\", pane_r1.resolvedContext);\n  }\n}\nfunction TablePanelRendererComponent_ng_container_1_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"th\", 7);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const n_r1 = i0.\u0275\u0275nextContext().$implicit;\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(n_r1);\n  }\n}\nfunction TablePanelRendererComponent_ng_container_1_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"td\", 8);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const row_r2 = ctx.$implicit;\n    const n_r1 = i0.\u0275\u0275nextContext().$implicit;\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate(ctx_r2.rowData(n_r1, row_r2));\n  }\n}\nfunction TablePanelRendererComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementContainerStart(0, 4);\n    i0.\u0275\u0275template(1, TablePanelRendererComponent_ng_container_1_th_1_Template, 2, 1, \"th\", 5)(2, TablePanelRendererComponent_ng_container_1_td_2_Template, 2, 1, \"td\", 6);\n    i0.\u0275\u0275elementContainerEnd();\n  }\n  if (rf & 2) {\n    const n_r1 = ctx.$implicit;\n    i0.\u0275\u0275property(\"matColumnDef\", n_r1);\n  }\n}\nfunction TablePanelRendererComponent_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"tr\", 9);\n  }\n}\nfunction TablePanelRendererComponent_tr_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"tr\", 10);\n  }\n}\nfunction PanelSelectorComponent_ng_template_8_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"a\", 2);\n    i0.\u0275\u0275listener(\"click\", function PanelSelectorComponent_ng_template_8_a_1_Template_a_click_0_listener() {\n      const panel_r2 = i0.\u0275\u0275restoreView(_r1).$implicit;\n      const ctx_r2 = i0.\u0275\u0275nextContext(2);\n      return i0.\u0275\u0275resetView(ctx_r2.onItemSelect(panel_r2.id));\n    });\n    i0.\u0275\u0275elementStart(1, \"span\", 6);\n    i0.\u0275\u0275text(2);\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const panel_r2 = ctx.$implicit;\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275textInterpolate2(\"\", panel_r2.title, \" [\", panel_r2.id, \"]\");\n  }\n}\nfunction PanelSelectorComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-nav-list\");\n    i0.\u0275\u0275template(1, PanelSelectorComponent_ng_template_8_a_1_Template, 3, 2, \"a\", 5);\n    i0.\u0275\u0275pipe(2, \"async\");\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(2, 1, ctx_r2.panels$));\n  }\n}\nconst entityMetadata = {\n  GridLayout: {\n    entityName: 'GridLayout'\n  },\n  /*PanelPage: {\n    entityName: 'PanelPage'\n  },\n  PanelPageListItem: {\n    entityName: 'PanelPageListItem'\n  }*/\n  PanelPageForm: {\n    crud: {\n      /*serializer: {\n        before: 'idb_keyval',\n        params: {\n          name: 'form'\n        }\n      },*/\n      panelpageform_serialize: {\n        /*params: {\n          name: 'form'\n        },*/\n        // params: {},\n        plugins: {\n          idb_keyval: {\n            params: {\n              prefix: \"panelpageform__\"\n            }\n          }\n        }\n      }\n      /*idb_keyval: {\n        params: {\n          prefix: 'panelpageform__'\n        }\n      }*/\n    }\n  }\n};\nlet ContentSelectionHostDirective = /*#__PURE__*/(() => {\n  class ContentSelectionHostDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n    static {\n      this.\u0275fac = function ContentSelectionHostDirective_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContentSelectionHostDirective)(i0.\u0275\u0275directiveInject(i0.ViewContainerRef));\n      };\n    }\n    static {\n      this.\u0275dir = /* @__PURE__ */i0.\u0275\u0275defineDirective({\n        type: ContentSelectionHostDirective,\n        selectors: [[\"\", \"classifiedsUiContentSelectionHost\", \"\"]],\n        standalone: false\n      });\n    }\n  }\n  return ContentSelectionHostDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContentSelectorComponent = /*#__PURE__*/(() => {\n  class ContentSelectorComponent {\n    constructor(\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    data, bottomSheetRef, dialog, componentFactoryResolver, fb, contentPluginManager) {\n      this.data = data;\n      this.bottomSheetRef = bottomSheetRef;\n      this.dialog = dialog;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.fb = fb;\n      this.contentPluginManager = contentPluginManager;\n      this.selectedIndex = 0;\n      // this.contentPlugins = contentPlugins;\n    }\n    ngOnInit() {\n      this.contentPlugins = this.contentPluginManager.getPlugins();\n    }\n    onEntitySelected(plugin) {\n      this.plugin = plugin;\n      if (this.plugin.selectionComponent !== undefined) {\n        this.selectedIndex = 1;\n        this.renderSelectionComponent();\n      } else if (this.plugin.editorComponent !== undefined) {\n        this.bottomSheetRef.dismiss();\n        if (plugin.handler) {\n          this.plugin.handler.editorOptions([]).subscribe(o => {\n            const dialogRef = this.dialog.open(this.plugin.editorComponent, {\n              data: {\n                panelFormGroup: this.data.panelForm,\n                panelIndex: this.data.panelIndex,\n                pane: undefined,\n                paneIndex: undefined,\n                contexts: this.data.contexts,\n                contentAdded: this.data.contentAdded,\n                plugin\n              },\n              ...(o.fullscreen ? {\n                maxWidth: '100vw',\n                maxHeight: '100vh',\n                height: '100%',\n                width: '100%'\n              } : {})\n            });\n          });\n        } else {\n          const dialogRef = this.dialog.open(this.plugin.editorComponent, {\n            data: {\n              panelFormGroup: this.data.panelForm,\n              panelIndex: this.data.panelIndex,\n              pane: undefined,\n              paneIndex: undefined,\n              contexts: this.data.contexts,\n              contentAdded: this.data.contentAdded\n            }\n          });\n        }\n      } else {\n        this.data.panelForm.get('panes').push(this.fb.group({\n          contentPlugin: this.fb.control(this.plugin.id),\n          name: this.fb.control(''),\n          label: this.fb.control(''),\n          settings: this.fb.array([])\n        }));\n      }\n    }\n    renderSelectionComponent() {\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.plugin.selectionComponent);\n      const viewContainerRef = this.selectionHost.viewContainerRef;\n      viewContainerRef.clear();\n      const componentRef = viewContainerRef.createComponent(componentFactory);\n      componentRef.instance.panelFormGroup = this.data.panelForm;\n      componentRef.instance.contexts = this.data.contexts;\n    }\n    static {\n      this.\u0275fac = function ContentSelectorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContentSelectorComponent)(i0.\u0275\u0275directiveInject(MAT_BOTTOM_SHEET_DATA), i0.\u0275\u0275directiveInject(i1.MatBottomSheetRef), i0.\u0275\u0275directiveInject(i1$1.MatDialog), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2_1.ContentPluginManager));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: ContentSelectorComponent,\n        selectors: [[\"classifieds-ui-content-selector\"]],\n        viewQuery: function ContentSelectorComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(ContentSelectionHostDirective, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.selectionHost = _t.first);\n          }\n        },\n        standalone: false,\n        decls: 10,\n        vars: 6,\n        consts: [[1, \"content-selector-wrapper\"], [3, \"selectedIndex\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"classifiedsUiContentSelectionHost\", \"\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\"], [\"mat-line\", \"\"]],\n        template: function ContentSelectorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0)(1, \"mat-tab-group\", 1)(2, \"mat-tab\")(3, \"mat-nav-list\");\n            i0.\u0275\u0275template(4, ContentSelectorComponent_a_4_Template, 3, 1, \"a\", 2);\n            i0.\u0275\u0275pipe(5, \"async\");\n            i0.\u0275\u0275pipe(6, \"keyvalue\");\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275elementStart(7, \"mat-tab\");\n            i0.\u0275\u0275elementContainerStart(8);\n            i0.\u0275\u0275template(9, ContentSelectorComponent_ng_template_9_Template, 0, 0, \"ng-template\", 3);\n            i0.\u0275\u0275elementContainerEnd();\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"selectedIndex\", ctx.selectedIndex);\n            i0.\u0275\u0275advance(3);\n            i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(6, 4, i0.\u0275\u0275pipeBind1(5, 2, ctx.contentPlugins)));\n          }\n        },\n        dependencies: [i3.NgForOf, i6.MatLine, i7.MatNavList, i7.MatListItem, i8.MatTab, i8.MatTabGroup, ContentSelectionHostDirective, i3.AsyncPipe, i3.KeyValuePipe],\n        styles: [\".content-selector-wrapper[_ngcontent-%COMP%]     .mat-mdc-tab-header{display:none}\"]\n      });\n    }\n  }\n  return ContentSelectorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet SnippetContentHandler = /*#__PURE__*/(() => {\n  class SnippetContentHandler {\n    constructor(attributeSerializer, tokenizrService) {\n      this.attributeSerializer = attributeSerializer;\n      this.tokenizrService = tokenizrService;\n      this.types = ['text/markdown', 'text/html'];\n    }\n    handleFile(file) {\n      return new Observable(obs => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          obs.next(this.buildSettings(new Snippet({\n            contentType: file.type,\n            content: `${reader.result}`\n          })));\n          obs.complete();\n        };\n        reader.readAsText(file);\n      });\n    }\n    handlesType(type) {\n      return this.types.find(t => t === type) !== undefined;\n    }\n    implementsRendererOverride() {\n      return false;\n    }\n    hasRendererOverride(settings) {\n      return of(false);\n    }\n    isDynamic(settings) {\n      return false;\n    }\n    isData(settings) {\n      return false;\n    }\n    getBindings(settings, type, metadata) {\n      if (type === 'context') {\n        return this.toObject(settings).pipe(map(snippet => {\n          const tokens = this.tokenizrService.discoverTokens(snippet.content);\n          return tokens.map(t => new ContentBinding({\n            id: t,\n            type: 'context'\n          }));\n        }));\n      } else {\n        return of([]);\n      }\n    }\n    fetchDynamicData(settings, metadata) {\n      return of(new Dataset());\n    }\n    buildDynamicItems(settings, metadata) {\n      return of([]);\n    }\n    toObject(settings) {\n      return of(new Snippet(this.attributeSerializer.deserializeAsObject(settings)));\n    }\n    buildSettings(snippet) {\n      return this.attributeSerializer.serialize(snippet, 'root').attributes;\n    }\n    stateDefinition(settings) {\n      return of({});\n    }\n    editorOptions(settings) {\n      return of(new ContentPluginEditorOptions({\n        fullscreen: true\n      }));\n    }\n    static {\n      this.\u0275fac = function SnippetContentHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SnippetContentHandler)(i0.\u0275\u0275inject(i2.AttributeSerializerService), i0.\u0275\u0275inject(i2$1.TokenizerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: SnippetContentHandler,\n        factory: SnippetContentHandler.\u0275fac\n      });\n    }\n  }\n  return SnippetContentHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet SnippetPaneRendererComponent = /*#__PURE__*/(() => {\n  class SnippetPaneRendererComponent {\n    set settings(settings) {\n      this.settings$.next(settings);\n    }\n    set resolvedContext(resolvedContext) {\n      this.resolvedContext$.next(resolvedContext);\n    }\n    constructor(hostEl, handler, tokenizerService, markdownService) {\n      this.hostEl = hostEl;\n      this.handler = handler;\n      this.tokenizerService = tokenizerService;\n      this.markdownService = markdownService;\n      this.contexts = [];\n      this.afterContentInit$ = new Subject();\n      this.content = '';\n      this.content$ = new BehaviorSubject('');\n      this.settings$ = new BehaviorSubject([]);\n      this.snippet$ = new BehaviorSubject(undefined);\n      this.resolvedContext$ = new BehaviorSubject(undefined);\n      this.docRendered$ = new Subject();\n      this.contentSub = combineLatest([this.afterContentInit$, this.content$, this.snippet$, this.docRendered$]).subscribe(([_, content, snippet]) => {\n        if (snippet && snippet.jsScript && snippet.jsScript !== '') {\n          setTimeout(() => this.appendScript(snippet.jsScript));\n        }\n      });\n      this.renderContentSub = combineLatest([this.settings$, this.resolvedContext$]).pipe(switchMap(([settings, _]) => this.handler.toObject(settings)), switchMap(snippet => this.resolveContexts().pipe(map(tokens => [snippet, tokens])))).subscribe(async ([snippet, tokens]) => {\n        if (tokens !== undefined) {\n          this.tokens = tokens;\n        }\n        this.contentType = snippet.contentType;\n        this.snippet$.next(snippet);\n        const replacedTokens = this.replaceTokens(snippet.content);\n        let compiledContent;\n        if (snippet.contentType && snippet.contentType.indexOf('markdown') !== -1) {\n          // Resolve if the `parse` method returns a Promise\n          compiledContent = await Promise.resolve(this.markdownService.parse(replacedTokens));\n        } else {\n          compiledContent = replacedTokens;\n        }\n        this.content$.next(compiledContent); // Now guaranteed to assign a `string`\n      });\n    }\n    ngOnInit() {}\n    ngOnChanges() {\n      console.log('pane changed');\n    }\n    ngAfterContentInit() {\n      this.afterContentInit$.next();\n      this.afterContentInit$.complete();\n    }\n    replaceTokens(v) {\n      if (this.tokens !== undefined) {\n        this.tokens.forEach((value, key) => {\n          v = v.split(`[${key}]`).join(`${value}`);\n        });\n      }\n      return v;\n    }\n    resolveContexts() {\n      return new Observable(obs => {\n        let tokens = new Map();\n        if (this.resolvedContext$.value) {\n          for (const name in this.resolvedContext$.value) {\n            tokens = new Map([...tokens, ...this.tokenizerService.generateGenericTokens(this.resolvedContext$.value[name], name === '_root' ? '' : name)]);\n          }\n        }\n        obs.next(tokens);\n        obs.complete();\n      });\n    }\n    appendScript(js) {\n      let script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.appendChild(document.createTextNode(js));\n      this.hostEl.nativeElement.appendChild(script);\n      console.log('add script');\n    }\n    onDocRendered() {\n      this.docRendered$.next(undefined);\n    }\n    static {\n      this.\u0275fac = function SnippetPaneRendererComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SnippetPaneRendererComponent)(i0.\u0275\u0275directiveInject(i0.ElementRef), i0.\u0275\u0275directiveInject(SnippetContentHandler), i0.\u0275\u0275directiveInject(i2$1.TokenizerService), i0.\u0275\u0275directiveInject(i3$1.MarkdownService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: SnippetPaneRendererComponent,\n        selectors: [[\"classifieds-ui-snippet-pane-renderer\"]],\n        inputs: {\n          settings: \"settings\",\n          contexts: \"contexts\",\n          tokens: \"tokens\",\n          resolvedContext: \"resolvedContext\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275NgOnChangesFeature],\n        decls: 2,\n        vars: 2,\n        consts: [[3, \"content\", \"docRendered\", 4, \"ngIf\"], [3, \"docRendered\", \"content\"]],\n        template: function SnippetPaneRendererComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275template(0, SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_0_Template, 2, 3, \"classifieds-ui-dynamic-content-viewer\", 0)(1, SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_1_Template, 2, 3, \"classifieds-ui-dynamic-content-viewer\", 0);\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"ngIf\", ctx.contentType == \"text/markdown\");\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.contentType == \"text/html\");\n          }\n        },\n        dependencies: [i3.NgIf, i4.DynamicContentViewer, i3.AsyncPipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return SnippetPaneRendererComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet AttributeContentHandler = /*#__PURE__*/(() => {\n  class AttributeContentHandler {\n    constructor(snippetHandler) {\n      this.snippetHandler = snippetHandler;\n    }\n    handleFile(file) {\n      return of([]);\n    }\n    handlesType(type) {\n      return false;\n    }\n    implementsRendererOverride() {\n      return true;\n    }\n    hasRendererOverride(settings) {\n      return this.rendererSnippet(settings).pipe(map(snippet => snippet !== undefined));\n    }\n    isDynamic(settings) {\n      return false;\n    }\n    isData(settings) {\n      return false;\n    }\n    fetchDynamicData(settings, metadata) {\n      return of(new Dataset());\n    }\n    buildDynamicItems(settings, metadata) {\n      return of([]);\n    }\n    getBindings(settings, type, metadata) {\n      return of([]);\n    }\n    valueSettings(attributeValues) {\n      const settings = [];\n      attributeValues.forEach(attributeValue => {\n        if (attributeValue.name === 'value') {\n          settings.push(attributeValue);\n        }\n      });\n      return settings;\n    }\n    rendererSnippet(settings) {\n      let snippet$;\n      settings.forEach(s => {\n        if (s.name === '_renderer') {\n          snippet$ = this.snippetHandler.toObject(s.attributes);\n        }\n      });\n      return snippet$ !== undefined ? snippet$ : of(undefined);\n    }\n    rendererOverrideSettings(snippet) {\n      return [new AttributeValue({\n        name: '_renderer',\n        type: AttributeTypes.Complex,\n        displayName: 'Renderer Override',\n        value: undefined,\n        computedValue: undefined,\n        intValue: 0,\n        attributes: this.snippetHandler.buildSettings(snippet)\n      })];\n    }\n    widgetSettings(widget) {\n      return [new AttributeValue({\n        name: 'widget',\n        type: widget.schema.type,\n        displayName: 'Widget',\n        value: widget.name,\n        computedValue: widget.name,\n        intValue: 0,\n        attributes: []\n      })];\n    }\n    stateDefinition(settings) {\n      return of({});\n    }\n    editorOptions(settings) {\n      return of(new ContentPluginEditorOptions());\n    }\n    static {\n      this.\u0275fac = function AttributeContentHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AttributeContentHandler)(i0.\u0275\u0275inject(SnippetContentHandler));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: AttributeContentHandler,\n        factory: AttributeContentHandler.\u0275fac\n      });\n    }\n  }\n  return AttributeContentHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RenderingEditorComponent = /*#__PURE__*/(() => {\n  class RenderingEditorComponent {\n    constructor(data, dialogRef, tokenizerService, handler, fb) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.tokenizerService = tokenizerService;\n      this.handler = handler;\n      this.fb = fb;\n    }\n    ngOnInit() {\n      this.tokens = this.tokenizerService.generateTokens(this.data.pane.settings);\n    }\n    submitted(snippet) {\n      this.replaceRenderer(snippet);\n      this.dialogRef.close();\n    }\n    replaceRenderer(snippet) {\n      let rendererIndex;\n      const setting = this.handler.rendererOverrideSettings(snippet)[0];\n      const renderer = this.convertToGroup(setting);\n      const formArray = this.data.panelFormGroup.get('panes').at(this.data.paneIndex).get('settings');\n      formArray.controls.forEach((c, index) => {\n        if (c.get('name').value === '_renderer') {\n          rendererIndex = index;\n        }\n      });\n      if (rendererIndex !== undefined) {\n        formArray.insert(rendererIndex, renderer);\n        formArray.removeAt(rendererIndex + 1);\n      } else {\n        formArray.push(renderer);\n      }\n    }\n    convertToGroup(setting) {\n      const fg = this.fb.group({\n        name: new UntypedFormControl(setting.name, Validators.required),\n        type: new UntypedFormControl(setting.type, Validators.required),\n        displayName: new UntypedFormControl(setting.displayName, Validators.required),\n        value: new UntypedFormControl(setting.value, Validators.required),\n        computedValue: new UntypedFormControl(setting.value, Validators.required),\n        attributes: new UntypedFormArray([])\n      });\n      if (setting.attributes && setting.attributes.length > 0) {\n        setting.attributes.forEach(s => {\n          fg.get('attributes').push(this.convertToGroup(s));\n        });\n      }\n      return fg;\n    }\n    static {\n      this.\u0275fac = function RenderingEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RenderingEditorComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i2$1.TokenizerService), i0.\u0275\u0275directiveInject(AttributeContentHandler), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RenderingEditorComponent,\n        selectors: [[\"classifieds-ui-rendering-editor\"]],\n        standalone: false,\n        decls: 2,\n        vars: 1,\n        consts: [[3, \"submitted\", \"tokens\"]],\n        template: function RenderingEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"classifieds-ui-snippet-form\", 0);\n            i0.\u0275\u0275listener(\"submitted\", function RenderingEditorComponent_Template_classifieds_ui_snippet_form_submitted_0_listener($event) {\n              return ctx.submitted($event);\n            });\n            i0.\u0275\u0275element(1, \"classifieds-ui-snippet-form\");\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"tokens\", ctx.tokens);\n          }\n        },\n        dependencies: [i5.SnippetFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return RenderingEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet StyleSelectorComponent = /*#__PURE__*/(() => {\n  class StyleSelectorComponent {\n    constructor(\n    // @Inject(STYLE_PLUGIN) stylePlugins: Array<StylePlugin>,\n    data, spm, bottomSheetRef, dialog, componentFactoryResolver, fb) {\n      this.data = data;\n      this.spm = spm;\n      this.bottomSheetRef = bottomSheetRef;\n      this.dialog = dialog;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.fb = fb;\n      this.selectedIndex = 0;\n      // this.stylePlugins = stylePlugins;\n    }\n    ngOnInit() {\n      this.stylePlugins = this.spm.getPlugins();\n    }\n    onStyleSelected(plugin) {\n      this.plugin = plugin;\n      if (this.plugin.editorComponent !== undefined) {\n        this.bottomSheetRef.dismiss();\n        this.data.panelForm.get('stylePlugin').setValue(this.plugin.name);\n        this.data.panelForm.get('styleTitle').setValue(this.plugin.title);\n        this.data.panelForm.get('settings').clear();\n        const dialogRef = this.dialog.open(this.plugin.editorComponent, {\n          data: {\n            panelFormGroup: this.data.panelForm,\n            panelIndex: this.data.panelIndex,\n            contexts: this.data.contexts\n          }\n        });\n      } else {\n        this.data.panelForm.get('stylePlugin').setValue(this.plugin.name);\n        this.data.panelForm.get('styleTitle').setValue(this.plugin.title);\n        this.data.panelForm.get('settings').clear();\n        this.bottomSheetRef.dismiss();\n      }\n      /*if(this.plugin.selectionComponent !== undefined) {\n        this.selectedIndex = 1;\n        this.renderSelectionComponent();\n      } else if(this.plugin.editorComponent !== undefined) {\n        this.bottomSheetRef.dismiss();\n        const dialogRef = this.dialog.open(this.plugin.editorComponent, { data: { panelFormGroup: this.panelFormGroup, pane: undefined, paneIndex: undefined } });\n      } else {\n        (this.panelFormGroup.get('panes') as FormArray).push(this.fb.group({\n          contentProvider: this.plugin.name,\n          settings: this.fb.array([])\n        }));\n      }*/\n    }\n    static {\n      this.\u0275fac = function StyleSelectorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || StyleSelectorComponent)(i0.\u0275\u0275directiveInject(MAT_BOTTOM_SHEET_DATA), i0.\u0275\u0275directiveInject(i2$2.StylePluginManager), i0.\u0275\u0275directiveInject(i1.MatBottomSheetRef), i0.\u0275\u0275directiveInject(i1$1.MatDialog), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: StyleSelectorComponent,\n        selectors: [[\"classifieds-ui-style-selector\"]],\n        viewQuery: function StyleSelectorComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(ContentSelectionHostDirective, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.selectionHost = _t.first);\n          }\n        },\n        standalone: false,\n        decls: 10,\n        vars: 6,\n        consts: [[1, \"style-selector-wrapper\"], [3, \"selectedIndex\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"classifiedsUiContentSelectionHost\", \"\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\"], [\"mat-line\", \"\"]],\n        template: function StyleSelectorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0)(1, \"mat-tab-group\", 1)(2, \"mat-tab\")(3, \"mat-nav-list\");\n            i0.\u0275\u0275template(4, StyleSelectorComponent_a_4_Template, 3, 1, \"a\", 2);\n            i0.\u0275\u0275pipe(5, \"async\");\n            i0.\u0275\u0275pipe(6, \"keyvalue\");\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275elementStart(7, \"mat-tab\");\n            i0.\u0275\u0275elementContainerStart(8);\n            i0.\u0275\u0275template(9, StyleSelectorComponent_ng_template_9_Template, 0, 0, \"ng-template\", 3);\n            i0.\u0275\u0275elementContainerEnd();\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"selectedIndex\", ctx.selectedIndex);\n            i0.\u0275\u0275advance(3);\n            i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(6, 4, i0.\u0275\u0275pipeBind1(5, 2, ctx.stylePlugins)));\n          }\n        },\n        dependencies: [i3.NgForOf, i6.MatLine, i7.MatNavList, i7.MatListItem, i8.MatTab, i8.MatTabGroup, ContentSelectionHostDirective, i3.AsyncPipe, i3.KeyValuePipe],\n        styles: [\".style-selector-wrapper[_ngcontent-%COMP%]     .mat-mdc-tab-header{display:none}\"]\n      });\n    }\n  }\n  return StyleSelectorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RulesDialogComponent = /*#__PURE__*/(() => {\n  class RulesDialogComponent {\n    constructor(data, dialogRef, fb, inlineContextResolver, rulesParser) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.inlineContextResolver = inlineContextResolver;\n      this.rulesParser = rulesParser;\n      this.rulesForm = this.fb.group({\n        rules: this.fb.control('')\n      });\n      this.config = {\n        fields: {\n          /*age: {name: 'Age', type: 'number'},\n          gender: {\n            name: 'Gender',\n            type: 'category',\n            options: [\n              {name: 'Male', value: 'm'},\n              {name: 'Female', value: 'f'}\n            ]\n          }*/\n        }\n      };\n    }\n    ngOnInit() {\n      this.inlineContextResolver.resolveMerged(this.data.contexts).subscribe(res => {\n        const fieldMap = {};\n        for (const name in res) {\n          this.rulesParser.buildFields(res[name], name).forEach((f, k) => {\n            fieldMap[k] = f;\n          });\n        }\n        this.config = {\n          ...this.config,\n          fields: fieldMap\n        };\n        if (this.data.rule !== undefined) {\n          this.rulesForm.get('rules').setValue(this.data.rule);\n        }\n      });\n    }\n    submit() {\n      console.log('the rules');\n      console.log(this.rulesForm.get('rules').value);\n      this.dialogRef.close(this.rulesForm.get('rules').value);\n    }\n    static {\n      this.\u0275fac = function RulesDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RulesDialogComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2$3.InlineContextResolverService), i0.\u0275\u0275directiveInject(i4$1.RulesParserService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RulesDialogComponent,\n        selectors: [[\"classifieds-ui-rules-dialog\"]],\n        standalone: false,\n        decls: 6,\n        vars: 3,\n        consts: [[1, \"rest-form\", 3, \"ngSubmit\", \"formGroup\"], [\"formControlName\", \"rules\", 3, \"config\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\", 3, \"disabled\"]],\n        template: function RulesDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function RulesDialogComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"mat-dialog-content\");\n            i0.\u0275\u0275element(2, \"query-builder\", 1);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(3, \"mat-dialog-actions\")(4, \"button\", 2);\n            i0.\u0275\u0275text(5, \"Save\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.rulesForm);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"config\", ctx.config);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"disabled\", !ctx.rulesForm.valid);\n          }\n        },\n        dependencies: [i1$2.\u0275NgNoValidate, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i3$2.MatButton, i1$1.MatDialogClose, i1$1.MatDialogActions, i1$1.MatDialogContent, i6$1.QueryBuilderComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return RulesDialogComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PropertiesDialogComponent = /*#__PURE__*/(() => {\n  class PropertiesDialogComponent {\n    constructor(data, dialogRef, fb) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.propertiesForm = this.fb.group({\n        name: this.fb.control(this.data.props.name),\n        title: this.fb.control(this.data.props.title),\n        path: this.fb.control(this.data.props.path),\n        cssFile: this.fb.control(this.data.props.cssFile),\n        readUserIds: this.fb.array([this.fb.group({\n          userId: this.fb.control(this.data.props.readUserIds && this.data.props.readUserIds.length > 0 ? this.data.props.readUserIds[0] : '')\n        })])\n      });\n    }\n    ngOnInit() {}\n    submit() {\n      this.dialogRef.close(new PropertiesFormPayload({\n        ...this.propertiesForm.value,\n        readUserIds: this.propertiesForm.value.readUserIds.map(id => id.userId)\n      }));\n    }\n    static {\n      this.\u0275fac = function PropertiesDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PropertiesDialogComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PropertiesDialogComponent,\n        selectors: [[\"classifieds-ui-properties-dialog\"]],\n        standalone: false,\n        decls: 18,\n        vars: 2,\n        consts: [[1, \"properties-form\", 3, \"ngSubmit\", \"formGroup\"], [1, \"content-inner\"], [\"fxLayout\", \"column\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"placeholder\", \"Name\"], [\"matInput\", \"\", \"formControlName\", \"title\", \"placeholder\", \"Title\"], [\"matInput\", \"\", \"formControlName\", \"path\", \"placeholder\", \"Path\"], [\"matInput\", \"\", \"formControlName\", \"cssFile\", \"placeholder\", \"Css File\"], [\"formArrayName\", \"readUserIds\"], [\"formGroupName\", \"0\"], [\"matInput\", \"\", \"formControlName\", \"userId\", \"placeholder\", \"Read User Id\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\", 3, \"disabled\"]],\n        template: function PropertiesDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function PropertiesDialogComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"mat-dialog-content\")(2, \"div\", 1)(3, \"div\", 2)(4, \"mat-form-field\");\n            i0.\u0275\u0275element(5, \"input\", 3);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(6, \"mat-form-field\");\n            i0.\u0275\u0275element(7, \"input\", 4);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(8, \"mat-form-field\");\n            i0.\u0275\u0275element(9, \"input\", 5);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(10, \"mat-form-field\");\n            i0.\u0275\u0275element(11, \"input\", 6);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(12, \"mat-form-field\", 7)(13, \"div\", 8);\n            i0.\u0275\u0275element(14, \"input\", 9);\n            i0.\u0275\u0275elementEnd()()()()();\n            i0.\u0275\u0275elementStart(15, \"mat-dialog-actions\")(16, \"button\", 10);\n            i0.\u0275\u0275text(17, \"Save\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.propertiesForm);\n            i0.\u0275\u0275advance(16);\n            i0.\u0275\u0275property(\"disabled\", !ctx.propertiesForm.valid);\n          }\n        },\n        dependencies: [i1$2.\u0275NgNoValidate, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i1$2.FormGroupName, i1$2.FormArrayName, i3$2.MatButton, i1$1.MatDialogClose, i1$1.MatDialogActions, i1$1.MatDialogContent, i4$2.MatInput, i4$2.MatFormField, i5$1.DefaultLayoutDirective],\n        encapsulation: 2\n      });\n    }\n  }\n  return PropertiesDialogComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContextDialogComponent = /*#__PURE__*/(() => {\n  class ContextDialogComponent {\n    constructor(data, dialogRef, fb) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.contextForm = this.fb.group({\n        context: this.fb.control('')\n      });\n      this.context = data.context;\n    }\n    ngOnInit() {}\n    ngAfterViewInit() {\n      if (this.data.context) {\n        setTimeout(() => {\n          this.contextFormComp.contextForm.setValue({\n            name: this.data.context.name,\n            plugin: this.data.context.plugin\n          });\n          if (this.data.context.plugin === 'rest') {\n            setTimeout(() => {\n              this.contextFormComp.componentRef.instance.restSourceFormComp.restSource = {\n                url: this.data.context.rest.url,\n                params: this.data.context.rest.params\n              };\n            });\n          } else if (this.data.context.plugin === 'datasource') {\n            setTimeout(() => {\n              this.contextFormComp.componentRef.instance.datasourceFormComp.datasource = this.data.context.datasource;\n            });\n          }\n        });\n      }\n    }\n    submit() {\n      if (this.contextForm.get('context').value.name !== '') {\n        this.dialogRef.close(new InlineContext(this.contextForm.get('context').value));\n      } else {\n        this.dialogRef.close();\n      }\n    }\n    static {\n      this.\u0275fac = function ContextDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextDialogComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: ContextDialogComponent,\n        selectors: [[\"classifieds-ui-context-dialog\"]],\n        viewQuery: function ContextDialogComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(ContextFormComponent, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.contextFormComp = _t.first);\n          }\n        },\n        standalone: false,\n        decls: 6,\n        vars: 3,\n        consts: [[1, \"context-form\", 3, \"ngSubmit\", \"formGroup\"], [\"formControlName\", \"context\", 3, \"context\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\", 3, \"disabled\"]],\n        template: function ContextDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function ContextDialogComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"mat-dialog-content\");\n            i0.\u0275\u0275element(2, \"classifieds-ui-context-form\", 1);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(3, \"mat-dialog-actions\")(4, \"button\", 2);\n            i0.\u0275\u0275text(5, \"Save\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.contextForm);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"context\", ctx.context);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"disabled\", !ctx.contextForm.valid);\n          }\n        },\n        dependencies: [i1$2.\u0275NgNoValidate, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i3$2.MatButton, i1$1.MatDialogClose, i1$1.MatDialogActions, i1$1.MatDialogContent, i2$3.ContextFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return ContextDialogComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelPropsDialogComponent = /*#__PURE__*/(() => {\n  class PanelPropsDialogComponent {\n    constructor(data, dialogRef, fb) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.propsForm = this.fb.group({\n        name: this.fb.control(this.data.props.name),\n        label: this.fb.control(this.data.props.label)\n      });\n    }\n    ngOnInit() {}\n    submit() {\n      this.dialogRef.close(new PanelPropsFormPayload(this.propsForm.value));\n    }\n    static {\n      this.\u0275fac = function PanelPropsDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelPropsDialogComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PanelPropsDialogComponent,\n        selectors: [[\"classifieds-ui-panel-props-dialog\"]],\n        standalone: false,\n        decls: 11,\n        vars: 2,\n        consts: [[1, \"props-form\", 3, \"ngSubmit\", \"formGroup\"], [1, \"content-inner\"], [\"fxLayout\", \"column\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"placeholder\", \"Name\"], [\"matInput\", \"\", \"formControlName\", \"label\", \"placeholder\", \"Label\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\", 3, \"disabled\"]],\n        template: function PanelPropsDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function PanelPropsDialogComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"mat-dialog-content\")(2, \"div\", 1)(3, \"div\", 2)(4, \"mat-form-field\");\n            i0.\u0275\u0275element(5, \"input\", 3);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(6, \"mat-form-field\");\n            i0.\u0275\u0275element(7, \"input\", 4);\n            i0.\u0275\u0275elementEnd()()()();\n            i0.\u0275\u0275elementStart(8, \"mat-dialog-actions\")(9, \"button\", 5);\n            i0.\u0275\u0275text(10, \"Save\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.propsForm);\n            i0.\u0275\u0275advance(9);\n            i0.\u0275\u0275property(\"disabled\", !ctx.propsForm.valid);\n          }\n        },\n        dependencies: [i1$2.\u0275NgNoValidate, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i3$2.MatButton, i1$1.MatDialogClose, i1$1.MatDialogActions, i1$1.MatDialogContent, i4$2.MatInput, i4$2.MatFormField, i5$1.DefaultLayoutDirective],\n        encapsulation: 2\n      });\n    }\n  }\n  return PanelPropsDialogComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanePropsDialogComponent = /*#__PURE__*/(() => {\n  class PanePropsDialogComponent {\n    constructor(data, dialogRef, fb) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.propsForm = this.fb.group({\n        name: this.fb.control(this.data.props.name),\n        label: this.fb.control(this.data.props.label)\n      });\n    }\n    ngOnInit() {}\n    submit() {\n      this.dialogRef.close(new PanePropsFormPayload(this.propsForm.value));\n    }\n    static {\n      this.\u0275fac = function PanePropsDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanePropsDialogComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PanePropsDialogComponent,\n        selectors: [[\"classifieds-ui-pane-props-dialog\"]],\n        standalone: false,\n        decls: 11,\n        vars: 2,\n        consts: [[1, \"props-form\", 3, \"ngSubmit\", \"formGroup\"], [1, \"content-inner\"], [\"fxLayout\", \"column\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"placeholder\", \"Name\"], [\"matInput\", \"\", \"formControlName\", \"label\", \"placeholder\", \"Label\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\", 3, \"disabled\"]],\n        template: function PanePropsDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function PanePropsDialogComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"mat-dialog-content\")(2, \"div\", 1)(3, \"div\", 2)(4, \"mat-form-field\");\n            i0.\u0275\u0275element(5, \"input\", 3);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(6, \"mat-form-field\");\n            i0.\u0275\u0275element(7, \"input\", 4);\n            i0.\u0275\u0275elementEnd()()()();\n            i0.\u0275\u0275elementStart(8, \"mat-dialog-actions\")(9, \"button\", 5);\n            i0.\u0275\u0275text(10, \"Save\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.propsForm);\n            i0.\u0275\u0275advance(9);\n            i0.\u0275\u0275property(\"disabled\", !ctx.propsForm.valid);\n          }\n        },\n        dependencies: [i1$2.\u0275NgNoValidate, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i3$2.MatButton, i1$1.MatDialogClose, i1$1.MatDialogActions, i1$1.MatDialogContent, i4$2.MatInput, i4$2.MatFormField, i5$1.DefaultLayoutDirective],\n        encapsulation: 2\n      });\n    }\n  }\n  return PanePropsDialogComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet LayoutEditorHostDirective = /*#__PURE__*/(() => {\n  class LayoutEditorHostDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n    static {\n      this.\u0275fac = function LayoutEditorHostDirective_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LayoutEditorHostDirective)(i0.\u0275\u0275directiveInject(i0.ViewContainerRef));\n      };\n    }\n    static {\n      this.\u0275dir = /* @__PURE__ */i0.\u0275\u0275defineDirective({\n        type: LayoutEditorHostDirective,\n        selectors: [[\"\", \"classifiedsUiLayoutEditorHost\", \"\"]],\n        standalone: false\n      });\n    }\n  }\n  return LayoutEditorHostDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PaneContentHostDirective = /*#__PURE__*/(() => {\n  class PaneContentHostDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n    static {\n      this.\u0275fac = function PaneContentHostDirective_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PaneContentHostDirective)(i0.\u0275\u0275directiveInject(i0.ViewContainerRef));\n      };\n    }\n    static {\n      this.\u0275dir = /* @__PURE__ */i0.\u0275\u0275defineDirective({\n        type: PaneContentHostDirective,\n        selectors: [[\"\", \"classifiedsUiPaneContentHost\", \"\"]],\n        standalone: false\n      });\n    }\n  }\n  return PaneContentHostDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PaneStateContextResolver = /*#__PURE__*/(() => {\n  class PaneStateContextResolver {\n    /*resolverCache$ = new Map<string, Observable<any>>();\n       get entities$(): Observable<Array<PanelPageState>> {\n      return this.entityServices.getEntityCollectionService('PanelPageState').entities$.pipe(\n        tap(e => {\n          console.log('entities in store');\n          console.log(e);\n        })\n      );\n    }\n       get panelPage$(): Observable<PanelPage> {\n      return combineLatest([this.pageBuilderFacade.getPageInfo$, this.entityServices.getEntityCollectionService('PanelPage').entities$]).pipe(\n        // map(([p, entities]) => [this.fakePageInfo , entities]),\n        map<[PanelPageStateSlice, Array<PanelPage>], PanelPage>(([p, entities]) => p && p.id !== undefined && p.id !== '' && p.id !== null ? entities.findIndex(e => e.id === p.id) !== -1 ? entities.find(e => e.id === p.id) : undefined : undefined)\n      );\n    }\n       get fakePageInfo(): PanelPageStateSlice {\n      return new PanelPageStateSlice({ id: '948d6e7b-12ab-11ec-8ecd-661fdd19e6df', path: '', realPath: '', args: new Map<string, string>()});\n    }*/\n    get entityCollectionService() {\n      return this.entityServices.getEntityCollectionService('PanelPageState');\n    }\n    constructor(entityServices,\n    // private pageBuilderFacade: PageBuilderFacade,\n    // private panelStateConverterService: PanelStateConverterService,\n    attributeSerializer) {\n      this.entityServices = entityServices;\n      this.attributeSerializer = attributeSerializer;\n    }\n    resolve(ctx, data) {\n      const selectEntities = entities => entities.entities;\n      const selectById = ({\n        id\n      }) => createSelector(selectEntities, entities => entities[id] ? entities[id] : undefined);\n      const selectByPath = ({\n        id,\n        path\n      }) => createSelector(selectById({\n        id\n      }), json => jpp.JSONPath({\n        path,\n        json\n      }));\n      const path = '$.' + data.selectionPath.map((index, i) => `${(i + 1) % 2 === 0 ? 'panes' : (i === 0 ? '' : 'nestedPage.') + 'panels'}[${index}]`).join('.');\n      return this.entityCollectionService.collection$.pipe(select(selectByPath({\n        id: data.id,\n        path\n      })), map(m => m && Array.isArray(m) && m.length !== 0 ? m[0] : this.defaultPaneState(data.value ? data.value : {})), map(ps => this.attributeSerializer.deserialize(ps.state)), map(value => value ? value.root ? value.root : value : {}), tap(v => {\n        console.log(`resolved panestate[id=${data.id}]${path}`);\n        console.log(v);\n      }));\n      /*(const cacheKey = data && data.selectionPath && data.selectionPath.length !== 0 && data.id && data.id !== null && data.id !== '' ? `ps[id=${data.id}]${data.selectionPath.map(i => `${i}`).join('')}`  : undefined;\n      if (cacheKey && this.resolverCache$.has(cacheKey)) {\n        return this.resolverCache$.get(cacheKey);\n      } else {\n        const resolver = this.resolve$(ctx, data);\n        if (cacheKey) {\n          this.resolverCache$.set(cacheKey, resolver);\n        }\n        return resolver;\n      }*/\n    }\n    /*resolve$(ctx: ContextPlugin, data?: any): Observable<any> {\n      return combineLatest([this.panelPage$, this.entities$]).pipe(\n        map<[PanelPage, Array<PanelPageState>], [PanelPage, PanelPageState]>(([pp, entities]) => [pp, pp && entities.findIndex(e => e.id === pp.id) !== -1 ? entities.find(e => e.id === pp.id) : new PanelPageState()]),\n        switchMap(([pp, ps]) => this.pageBuilderFacade.getSelectionPath$.pipe(\n          map(selectionPath => data && data.selectionPath ? data.selectionPath : selectionPath), // temp hard code to see if context change is triggered\n          tap(selectionPath => selectionPath.join(',')),\n          map(s => s.map((index, i) => `${(i + 1) % 2 === 0 ? 'panes' : (i === 0 ? '' : 'nestedPage.') + 'panels'}[${index}]`)),\n          map(s => s.length === 0 ? undefined : '$.' + s.join('.')),\n          map<string, [PanelPage, PanelPageState, string]>(s => [pp, ps, s])\n        )),\n        tap(([pp, ps, query]) => {\n          console.log('page state context resolver');\n          console.log(pp);\n          console.log('query: ' + query);\n        }),\n        switchMap(([pp, ps, query]) => iif<[PanelPageState, string], [PanelPageState, string]>(\n          () => !!pp && !ps,\n          this.panelStateConverterService.convertPageToState(pp).pipe(\n            map(state => new PanelPageState({ ...state, panels: state.panels.map(p => new PanelState({ ...p, panes: p.panes.map(p2 => new PaneState({ ...p2, state: this.attributeSerializer.serialize(data.value ? data.value : {}, 'root') })) }))  })),\n            map<PanelPageState, [PanelPageState, string]>(state => [state, query])\n          ),\n          of([ps ? ps : this.defaultPaneState(data.value ? data.value : {}), query])\n        )),\n        tap(([state, _]) => {\n          console.log('rebuilt state from realtime page');\n          console.log(state);\n        }),\n        map(([json, path]) => path ? jpp.JSONPath({ path, json }) : this.defaultPaneState(data.value ? data.value : {})),\n        map(m => m && Array.isArray(m) && m.length !== 0 ? m[0] : this.defaultPaneState(data.value ? data.value : {})),\n        tap(m => {\n          console.log('json path match');\n          console.log(m);\n        }),\n        map(ps => this.attributeSerializer.deserializeAsObject(ps.state)),*/\n    /*map(m => new PaneState({ ...m[0], state: this.attributeSerializer.serialize({ displayAppJs: false }, 'root') })),*/\n    /*tap(s => {\n      console.log('final state');\n      console.log(s);\n    }),\n    map(s => s.root ? s.root : s.root === undefined && Object.keys(s).length === 1 ? {} : s)\n    );\n    }*/\n    defaultPaneState(v) {\n      return new PaneState({\n        state: this.attributeSerializer.serialize(v, 'root')\n      });\n    }\n    static {\n      this.\u0275fac = function PaneStateContextResolver_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PaneStateContextResolver)(i0.\u0275\u0275inject(i4$3.EntityServices), i0.\u0275\u0275inject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PaneStateContextResolver,\n        factory: PaneStateContextResolver.\u0275fac\n      });\n    }\n  }\n  return PaneStateContextResolver;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Putting render pane inside the same file is a documented work around for the\n * below angular partial compilation issue.\n *\n * https://angular.io/errors/NG3003\n */\nlet EditablePaneComponent = /*#__PURE__*/(() => {\n  class EditablePaneComponent {\n    set panelIndex(panelIndex) {\n      this.panelIndex$.next(panelIndex);\n    }\n    set paneIndex(paneIndex) {\n      this.paneIndex$.next(paneIndex);\n    }\n    set ancestory(ancestory) {\n      this.ancestory$.next(ancestory);\n    }\n    constructor(\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    componentFactoryResolver, panelHandler, cpm) {\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.panelHandler = panelHandler;\n      this.cpm = cpm;\n      this.settings = [];\n      this.locked = false;\n      this.contexts = [];\n      this.edit = new EventEmitter();\n      this.props = new EventEmitter();\n      this.delete = new EventEmitter();\n      this.rules = new EventEmitter();\n      this.rendererOverride = new EventEmitter();\n      this.removeRendererOverride = new EventEmitter();\n      this.nestedUpdate = new EventEmitter();\n      this.heightChange = new EventEmitter();\n      this.displayOverride = false;\n      this.hasOverride = false;\n      this.preview = false;\n      // private contentPlugins: Array<ContentPlugin> = [];\n      this.schedulePluginChange = new Subject();\n      this.pluginChangeSub = this.schedulePluginChange.pipe(switchMap(init => this.cpm.getPlugin(this.pluginName).pipe(switchMap(p => p.handler.hasRendererOverride(this.settings).pipe(map(r => [init, p, r])))))).subscribe(([init, p, r]) => {\n        this.contentPlugin = p;\n        this.displayOverride = p.handler.implementsRendererOverride();\n        this.hasOverride = !!r;\n        if (init && this.pluginName === 'panel') {\n          this.panelHandler.toObject(this.settings).subscribe(p => {\n            this.panelPage = p;\n          });\n        }\n      });\n      this.ancestory$ = new Subject();\n      this.panelIndex$ = new Subject();\n      this.paneIndex$ = new Subject();\n      this.paneAncestoryWithSelf = [];\n      this.paneAncestoryWithSelfSub = combineLatest([this.ancestory$, this.panelIndex$, this.paneIndex$]).pipe(map(([ancestory, panelIndex, paneIndex]) => [...ancestory, panelIndex, paneIndex])).subscribe(a => {\n        this.paneAncestoryWithSelf = a;\n      });\n      // this.contentPlugins = contentPlugins;\n    }\n    ngOnInit() {\n      this.schedulePluginChange.next(true);\n      console.log('here 1');\n      /*this.contentPlugin = this.contentPlugins.find(p => p.name === this.pluginName);\n      this.displayOverride = this.contentPlugin.handler.implementsRendererOverride();\n      this.contentPlugin.handler.hasRendererOverride(this.settings).subscribe(r => this.hasOverride = !!r);\n      if(this.pluginName === 'panel') {\n        this.panelHandler.toObject(this.settings).subscribe(p => {\n          this.panelPage = p;\n        });\n      }*/\n    }\n    ngOnChanges(changes) {\n      this.schedulePluginChange.next(false);\n      console.log('here 2');\n      console.log(changes);\n      /*this.contentPlugin = this.contentPlugins.find(p => p.name === this.pluginName);\n      this.displayOverride = this.contentPlugin.handler.implementsRendererOverride();\n      this.contentPlugin.handler.hasRendererOverride(this.settings).subscribe(r => this.hasOverride = !!r);*/\n    }\n    onEditClick() {\n      this.edit.emit();\n    }\n    onPropsClick() {\n      this.props.emit();\n    }\n    onRulesClick() {\n      this.rules.emit();\n    }\n    onDeleteClick() {\n      this.delete.emit();\n    }\n    onPreviewClick() {\n      this.preview = true;\n      if (this.contentPaneHost !== undefined) {\n        this.renderPaneContent();\n      }\n      setTimeout(() => this.heightChange.emit());\n    }\n    onOverrideClick() {\n      this.rendererOverride.emit();\n    }\n    onRemoveOverrideClick() {\n      this.removeRendererOverride.emit();\n    }\n    onNestedUpdate(panelPage) {\n      this.nestedUpdate.emit(panelPage);\n    }\n    onDisablePreviewClick() {\n      this.preview = false;\n      if (this.contentPaneHost !== undefined) {\n        const viewContainerRef = this.contentPaneHost.viewContainerRef;\n        viewContainerRef.clear();\n      }\n      setTimeout(() => this.heightChange.emit());\n    }\n    onAfterCollapse() {\n      this.heightChange.emit();\n    }\n    onAfterExpand() {\n      this.heightChange.emit();\n    }\n    renderPaneContent() {\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent);\n      const viewContainerRef = this.contentPaneHost.viewContainerRef;\n      viewContainerRef.clear();\n      const componentRef = viewContainerRef.createComponent(componentFactory);\n      componentRef.instance.settings = this.settings;\n    }\n    static {\n      this.\u0275fac = function EditablePaneComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || EditablePaneComponent)(i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i2$2.PanelContentHandler), i0.\u0275\u0275directiveInject(i2_1.ContentPluginManager));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: EditablePaneComponent,\n        selectors: [[\"classifieds-ui-editable-pane\"]],\n        viewQuery: function EditablePaneComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(PaneContentHostDirective, 5);\n            i0.\u0275\u0275viewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.contentPaneHost = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.contentEditor = _t.first);\n          }\n        },\n        inputs: {\n          pluginName: \"pluginName\",\n          settings: \"settings\",\n          name: \"name\",\n          label: \"label\",\n          panelIndex: \"panelIndex\",\n          paneIndex: \"paneIndex\",\n          locked: \"locked\",\n          rootContext: \"rootContext\",\n          contexts: \"contexts\",\n          ancestory: \"ancestory\"\n        },\n        outputs: {\n          edit: \"edit\",\n          props: \"props\",\n          delete: \"delete\",\n          rules: \"rules\",\n          rendererOverride: \"rendererOverride\",\n          removeRendererOverride: \"removeRendererOverride\",\n          nestedUpdate: \"nestedUpdate\",\n          heightChange: \"heightChange\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275NgOnChangesFeature],\n        decls: 17,\n        vars: 6,\n        consts: [[\"settingsTmpl\", \"\"], [\"nestedPanelTpl\", \"\"], [\"paneMenu\", \"matMenu\"], [\"contentEditor\", \"\"], [\"extraActionsArea\", \"\"], [\"class\", \"editable-pane-wrapper\", 4, \"ngIf\", \"ngIfElse\"], [\"type\", \"button\", \"mat-menu-item\", \"\", 3, \"click\", \"disabled\"], [\"type\", \"button\", \"mat-menu-item\", \"\", 3, \"click\"], [\"mat-menu-item\", \"\", \"type\", \"button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"mat-menu-item\", \"\", 1, \"delete\", 3, \"click\"], [1, \"editable-pane-wrapper\"], [\"fxLayout\", \"row\", 1, \"inner-pane-wrapper\"], [1, \"pane-menu-trigger-wrapper\"], [\"mat-button\", \"\", \"type\", \"button\", 3, \"matMenuTriggerFor\"], [\"fxFlex\", \"\", 3, \"afterCollapse\", \"afterExpand\"], [3, \"hidden\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [1, \"preview-area\", 3, \"ngClass\"], [\"class\", \"override\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"classifiedsUiPaneContentHost\", \"\"], [\"type\", \"button\", 1, \"override\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"nested-panel-wrapper\"], [3, \"nestedUpdate\", \"delete\", \"rules\", \"props\", \"panelPage\", \"savable\", \"nested\", \"locked\", \"contexts\", \"rootContext\", \"ancestory\"], [\"mat-menu-item\", \"\", \"type\", \"button\", 3, \"click\", \"disabled\"], [\"mat-menu-item\", \"\", \"type\", \"button\", 3, \"click\"]],\n        template: function EditablePaneComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.\u0275\u0275getCurrentView();\n            i0.\u0275\u0275template(0, EditablePaneComponent_div_0_Template, 18, 13, \"div\", 5)(1, EditablePaneComponent_ng_template_1_Template, 1, 1, \"ng-template\", null, 0, i0.\u0275\u0275templateRefExtractor)(3, EditablePaneComponent_ng_template_3_Template, 5, 7, \"ng-template\", null, 1, i0.\u0275\u0275templateRefExtractor);\n            i0.\u0275\u0275elementStart(5, \"mat-menu\", null, 2)(7, \"button\", 6);\n            i0.\u0275\u0275listener(\"click\", function EditablePaneComponent_Template_button_click_7_listener() {\n              i0.\u0275\u0275restoreView(_r1);\n              return i0.\u0275\u0275resetView(ctx.onEditClick());\n            });\n            i0.\u0275\u0275text(8, \"Edit\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(9, \"button\", 6);\n            i0.\u0275\u0275listener(\"click\", function EditablePaneComponent_Template_button_click_9_listener() {\n              i0.\u0275\u0275restoreView(_r1);\n              return i0.\u0275\u0275resetView(ctx.onPropsClick());\n            });\n            i0.\u0275\u0275text(10, \"Props\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(11, \"button\", 7);\n            i0.\u0275\u0275listener(\"click\", function EditablePaneComponent_Template_button_click_11_listener() {\n              i0.\u0275\u0275restoreView(_r1);\n              return i0.\u0275\u0275resetView(ctx.onRulesClick());\n            });\n            i0.\u0275\u0275text(12, \"Rules\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275template(13, EditablePaneComponent_button_13_Template, 2, 1, \"button\", 8)(14, EditablePaneComponent_button_14_Template, 2, 0, \"button\", 9);\n            i0.\u0275\u0275elementStart(15, \"button\", 10);\n            i0.\u0275\u0275listener(\"click\", function EditablePaneComponent_Template_button_click_15_listener() {\n              i0.\u0275\u0275restoreView(_r1);\n              return i0.\u0275\u0275resetView(ctx.onDeleteClick());\n            });\n            i0.\u0275\u0275text(16, \"Delete\");\n            i0.\u0275\u0275elementEnd()();\n          }\n          if (rf & 2) {\n            const nestedPanelTpl_r13 = i0.\u0275\u0275reference(4);\n            i0.\u0275\u0275property(\"ngIf\", ctx.pluginName != \"panel\" || ctx.locked)(\"ngIfElse\", nestedPanelTpl_r13);\n            i0.\u0275\u0275advance(7);\n            i0.\u0275\u0275property(\"disabled\", ctx.locked);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"disabled\", ctx.locked && ctx.settings.length !== 0);\n            i0.\u0275\u0275advance(4);\n            i0.\u0275\u0275property(\"ngIf\", !ctx.preview);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.preview);\n          }\n        },\n        dependencies: () => [i3.NgClass, i3.NgForOf, i3.NgIf, i3.NgTemplateOutlet, i3$2.MatButton, i5$2.MatExpansionPanel, i5$2.MatExpansionPanelHeader, i5$2.MatExpansionPanelTitle, i6$2.MatIcon, i7$1.MatMenu, i7$1.MatMenuItem, i7$1.MatMenuTrigger, i5$1.DefaultLayoutDirective, i5$1.DefaultFlexDirective, i9.DefaultClassDirective, ContentEditorComponent, PaneContentHostDirective, i2.AttributePipe],\n        styles: [\".editable-pane-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em;border-radius:4px;padding-left:.25em;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.nested-panel-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em}.inner-pane-wrapper[_ngcontent-%COMP%]{padding:0}.pane-header[_ngcontent-%COMP%]{background-color:#ccc;padding:0}.mat-mdc-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}button.delete[_ngcontent-%COMP%]{float:right}.preview-area[_ngcontent-%COMP%]{display:none;position:relative}.preview-area.visible[_ngcontent-%COMP%]{display:block;height:300px;overflow-y:scroll;border:1px solid black;padding:.5em}.panel-name[_ngcontent-%COMP%]{float:right;padding-right:.5em}.pane-menu-trigger-wrapper[_ngcontent-%COMP%]{display:flex}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 1em 0 .25em}\"]\n      });\n    }\n  }\n  return EditablePaneComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContentEditorComponent = /*#__PURE__*/(() => {\n  class ContentEditorComponent {\n    set ancestory(ancestory) {\n      this.ancestory$.next(ancestory);\n    }\n    get ancestory() {\n      return this.ancestory$.value;\n    }\n    get panels() {\n      return this.contentForm.get('panels');\n    }\n    get layoutType() {\n      return this.contentForm.get('layoutType');\n    }\n    get displayType() {\n      return this.contentForm.get('displayType');\n    }\n    get columnSettings() {\n      const panelLen = this.panels.length;\n      let settings = [];\n      for (let i = 0; i < panelLen; i++) {\n        settings = [...settings, new LayoutSetting(this.panels.at(i).get('columnSetting').value)];\n      }\n      return settings;\n    }\n    constructor(\n    //@Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    // @Inject(STYLE_PLUGIN) stylePlugins: Array<StylePlugin>,\n    siteName, cpm, spm, lpm, cxtm, fb, bs, dialog, panelHandler, tokenizerService, componentFactoryResolver, pageBuilderFacade, paneStateContextResolver, panelsContextService\n    // private contextManager: ContextManagerService\n    ) {\n      this.siteName = siteName;\n      this.cpm = cpm;\n      this.spm = spm;\n      this.lpm = lpm;\n      this.cxtm = cxtm;\n      this.fb = fb;\n      this.bs = bs;\n      this.dialog = dialog;\n      this.panelHandler = panelHandler;\n      this.tokenizerService = tokenizerService;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.pageBuilderFacade = pageBuilderFacade;\n      this.paneStateContextResolver = paneStateContextResolver;\n      this.panelsContextService = panelsContextService;\n      this.submitted = new EventEmitter();\n      this.nestedUpdate = new EventEmitter();\n      this.delete = new EventEmitter();\n      this.rules = new EventEmitter();\n      this.props = new EventEmitter();\n      /*set panelPage(panelPage: PanelPage) {\n        if(panelPage !== undefined) {\n          this.panelPageId = panelPage.id;\n          this.dashboard = [ ...panelPage.gridItems ];\n          panelPage.panels.forEach((p, i) => {\n            this.panels.push(this.fb.group({\n              panes: this.fb.array([])\n            }));\n            p.panes.forEach((pp, i2) => {\n              (this.panels.at(i).get('panes') as FormArray).push(this.fb.group({\n                contentPlugin: pp.contentPlugin,\n                name: new FormControl(pp.name),\n                label: new FormControl(pp.label),\n                settings: new FormArray(pp.settings.map(s => this.convertToGroup(s)))\n              }));\n            });\n                 });\n        } else {\n          this.panelPageId = undefined;\n          (this.contentForm.get('panels') as FormArray).clear();\n        }\n      }*/\n      this.savable = true;\n      this.nested = false;\n      this.locked = false;\n      this.pageBuilder = false;\n      this.contexts = [];\n      this.contentAdded = new Subject();\n      this.contentAdddedSub = this.contentAdded.subscribe(([panelIndex, paneIndex]) => {\n        this.resolvePaneContexts(panelIndex, paneIndex);\n      });\n      this.dashboard = [];\n      this.pageProperties = new PropertiesFormPayload();\n      this.persistence = new PersistenceFormPayload();\n      this.interactions = new InteractionsFormPayload();\n      this.layoutSetting = new LayoutSetting();\n      this.rowSettings = [];\n      this.ancestory$ = new BehaviorSubject([]);\n      this.onTouched = () => {};\n      this.contentForm = this.fb.group({\n        name: this.fb.control(''),\n        title: this.fb.control(''),\n        layoutType: this.fb.control('split', Validators.required),\n        displayType: this.fb.control('page', Validators.required),\n        panels: this.fb.array([])\n      });\n      this.options = {\n        gridType: GridType.Fit,\n        displayGrid: DisplayGrid.Always,\n        pushItems: true,\n        draggable: {\n          enabled: true\n        },\n        resizable: {\n          enabled: true\n        },\n        mobileBreakpoint: 0,\n        itemChangeCallback: (item, itemComponent) => {\n          // console.log(item);\n        },\n        itemInitCallback: (item, itemComponent) => {\n          if (this.nested && item.y !== 0) {\n            const matchIndex = this.gridLayout.grid.findIndex(g => g.x === item.x && g.y === item.y && g.cols === item.cols && g.rows === item.rows);\n            if (this.panelPanes(matchIndex).length === 0) {\n              this.gridLayout.setItemContentHeight(matchIndex, 200);\n            } else {}\n          }\n        }\n      };\n      this.ancestorySub = this.ancestory$.pipe(filter(() => !!this.layoutEditorRef)).subscribe(ancestory => {\n        this.layoutEditorRef.instance.ancestory = ancestory;\n      });\n      //this.contentPlugins = contentPlugins;\n      // this.stylePlugins = stylePlugins;\n    }\n    ngOnInit() {\n      this.contentForm.valueChanges.pipe(filter(() => this.nested), debounceTime(500)).subscribe(() => {\n        //console.log('nested update');\n        this.nestedUpdate.emit(this.packageFormData());\n      });\n      this.contentForm.get('layoutType').valueChanges.pipe(filter(v => v === 'gridless'), delay(1)).subscribe(v => {\n        if (this.panels.length === 0) {\n          this.panels.push(this.fb.group({\n            name: new UntypedFormControl(''),\n            label: new UntypedFormControl(''),\n            stylePlugin: new UntypedFormControl(''),\n            styleTitle: new UntypedFormControl(''),\n            settings: new UntypedFormArray([]),\n            panes: this.fb.array([]),\n            columnSetting: this.fb.group({\n              settings: this.fb.array([])\n            })\n          }));\n        }\n      });\n      this.contentForm.valueChanges.pipe(filter(() => !this.nested), debounceTime(500)).subscribe(() => {\n        const pp = this.packageFormData();\n        this.pageBuilderFacade.setPage(pp);\n      });\n    }\n    ngAfterViewInit() {\n      this.layoutType.valueChanges.pipe(filter(() => !!this.layoutEditorHost)).subscribe(v => {\n        this.renderEditorLayout(v);\n      });\n      if (this.layoutType.value) {\n        this.renderEditorLayout(this.layoutType.value);\n      }\n    }\n    ngAfterContentInit() {\n      setTimeout(() => {\n        if (!this.panelPage) {\n          this.contentForm.get('layoutType').setValue('split');\n        }\n      }, 1000);\n    }\n    ngOnChanges(changes) {\n      if (changes.panelPage && changes.panelPage.previousValue !== changes.panelPage.currentValue) {\n        this.panels.clear();\n        this.panelPageId = changes.panelPage.currentValue.panelPageId;\n        this.dashboard = changes.panelPage.currentValue.gridItems.map(o => Object.assign({}, o));\n        this.layoutType.setValue(changes.panelPage.currentValue.layoutType);\n        this.layoutSetting = new LayoutSetting(changes.panelPage.currentValue.layoutSetting);\n        this.rowSettings = changes.panelPage.currentValue.rowSettings ? changes.panelPage.currentValue.rowSettings.map(rs => new LayoutSetting(rs)) : [];\n        this.persistence = changes.panelPage.currentValue.persistence ? new PersistenceFormPayload(changes.panelPage.currentValue.persistence) : new PersistenceFormPayload();\n        this.interactions = changes.panelPage.currentValue.interactions ? new InteractionsFormPayload(changes.panelPage.currentValue.interactions) : new InteractionsFormPayload();\n        if (!this.nested) {\n          this.pageProperties = new PropertiesFormPayload({\n            name: changes.panelPage.currentValue.name,\n            title: changes.panelPage.currentValue.title,\n            path: changes.panelPage.currentValue.path,\n            readUserIds: changes.panelPage.currentValue.entityPermissions.readUserIds,\n            cssFile: changes.panelPage.currentValue.cssFile\n          });\n          this.contexts = changes.panelPage.currentValue.contexts;\n        } else {\n          this.pageProperties = new PropertiesFormPayload({\n            name: changes.panelPage.currentValue.name,\n            title: changes.panelPage.currentValue.title,\n            path: '',\n            readUserIds: [],\n            cssFile: ''\n          });\n          this.contentForm.get('name').setValue(changes.panelPage.currentValue.name);\n          this.contentForm.get('title').setValue(changes.panelPage.currentValue.title);\n        }\n        changes.panelPage.currentValue.panels.forEach((p, i) => {\n          this.panels.push(this.fb.group({\n            name: new UntypedFormControl(p.name),\n            label: new UntypedFormControl(p.label),\n            stylePlugin: new UntypedFormControl(p.stylePlugin),\n            styleTitle: new UntypedFormControl(''),\n            settings: this.fb.array(p.settings !== undefined ? p.settings.map(s => this.convertToGroup(s)) : []),\n            panes: this.fb.array([]),\n            columnSetting: this.fb.group({\n              settings: this.fb.array(p.columnSetting ? p.columnSetting.settings.map(s => this.convertToGroup(s)) : [])\n            })\n          }));\n          if (p.stylePlugin && p.stylePlugin !== '') {\n            this.spm.getPlugin(p.stylePlugin).subscribe(p => {\n              this.panels.at(i).get('styleTitle').setValue(p.title);\n            });\n          }\n          if (this.nested) {\n            this.panelPanes(this.panels.length - 1).valueChanges.pipe(debounceTime(5), delay(1)).subscribe((panelIndex => {\n              return () => {\n                if (this.gridLayout !== undefined) {\n                  const container = this.paneContainers.find((i, index) => index === panelIndex);\n                  this.gridLayout.setItemContentHeight(panelIndex, container.nativeElement.offsetHeight);\n                }\n              };\n            })(this.panels.length - 1));\n          }\n          p.panes.forEach((pp, i2) => {\n            this.panels.at(i).get('panes').push(this.fb.group({\n              contentPlugin: pp.contentPlugin,\n              name: new UntypedFormControl(pp.name),\n              label: new UntypedFormControl(pp.label),\n              locked: new UntypedFormControl(pp.locked),\n              linkedPageId: new UntypedFormControl(pp.linkedPageId),\n              rule: new UntypedFormControl(pp.rule && pp.rule !== null ? {\n                ...pp.rule,\n                rules: pp.rule.rules && Array.isArray(pp.rule.rules) ? pp.rule.rules : []\n              } : {\n                condition: '',\n                rules: []\n              }),\n              // new FormControl(pp.rule && pp.rule !== null ? { ...pp.rule, rules: [ ...( pp.rules && pp.rules !== null ? pp.rules : [] ) ] } : ''),\n              // rule: new FormControl({ condition: '', rules: [] }),\n              settings: new UntypedFormArray(pp.settings.map(s => this.convertToGroup(s)))\n            }));\n            setTimeout(() => this.resolvePaneContexts(i, i2));\n          });\n        });\n        if (this.layoutEditorRef) {\n          this.layoutEditorRef.instance.layoutSetting = this.layoutSetting;\n          this.layoutEditorRef.instance.rowSettings = this.rowSettings;\n          this.layoutEditorRef.instance.columnSettings = this.columnSettings;\n        }\n      }\n    }\n    addContent(index) {\n      console.log(this.panels.at(index));\n      this.pageBuilderFacade.getPage$.pipe(switchMap(pp => this.panelsContextService.allActivePageContexts({\n        panelPage: pp\n      })), take(1)).subscribe(paneContexts => {\n        this.bs.open(ContentSelectorComponent, {\n          data: {\n            panelForm: this.panels.at(index),\n            panelIndex: index,\n            contexts: [...(this.rootContext ? [this.rootContext] : []), ...this.contexts, ...paneContexts]\n          }\n        });\n      });\n    }\n    editPanelProps(panelIndex) {\n      const name = this.panels.at(panelIndex).get('name');\n      const label = this.panels.at(panelIndex).get('label');\n      this.dialog.open(PanelPropsDialogComponent, {\n        data: {\n          props: new PanelPropsFormPayload({\n            name: name.value,\n            label: label.value\n          })\n        }\n      }).afterClosed().subscribe(props => {\n        if (props) {\n          name.setValue(props.name);\n          label.setValue(props.label);\n        }\n      });\n    }\n    editPaneProps(panelIndex, paneIndex) {\n      const name = this.panelPane(panelIndex, paneIndex).get('name');\n      const label = this.panelPane(panelIndex, paneIndex).get('label');\n      this.dialog.open(PanePropsDialogComponent, {\n        data: {\n          props: new PanePropsFormPayload({\n            name: name.value,\n            label: label.value\n          })\n        }\n      }).afterClosed().subscribe(props => {\n        if (props) {\n          name.setValue(props.name);\n          label.setValue(props.label);\n        }\n      });\n    }\n    applyStyle(index) {\n      this.bs.open(StyleSelectorComponent, {\n        data: {\n          panelForm: this.panels.controls[index],\n          panelIndex: index,\n          contexts: this.contexts\n        }\n      });\n    }\n    removeStyle(index) {\n      this.panels.controls[index].get('stylePlugin').setValue('');\n      this.panels.controls[index].get('styleTitle').setValue('');\n    }\n    onItemAdded() {\n      console.log('item added');\n      this.panels.push(this.fb.group({\n        name: new UntypedFormControl(''),\n        label: new UntypedFormControl(''),\n        stylePlugin: new UntypedFormControl(''),\n        styleTitle: new UntypedFormControl(''),\n        settings: new UntypedFormArray([]),\n        panes: this.fb.array([]),\n        columnSetting: this.fb.group({\n          settings: this.fb.array([])\n        })\n      }));\n      if (this.nested && this.gridLayout !== undefined) {\n        setTimeout(() => {\n          this.paneContainers.forEach((p, i) => {\n            this.gridLayout.setItemContentHeight(i, p.nativeElement.offsetHeight);\n          });\n        });\n      }\n      this.panelPanes(this.panels.length - 1).valueChanges.pipe(filter(() => this.nested && this.gridLayout !== undefined), debounceTime(5), delay(1)).subscribe((panelIndex => {\n        return () => {\n          const container = this.paneContainers.find((i, index) => index === panelIndex);\n          this.gridLayout.setItemContentHeight(panelIndex, container.nativeElement.offsetHeight);\n        };\n      })(this.panels.length - 1));\n      if (this.layoutEditorRef) {\n        this.layoutEditorRef.instance.columnSettings = this.columnSettings;\n      }\n    }\n    onItemRemoved(index) {\n      this.panels.removeAt(index);\n      if (this.nested && this.gridLayout !== undefined) {\n        setTimeout(() => {\n          this.paneContainers.forEach((p, i) => {\n            this.gridLayout.setItemContentHeight(i, p.nativeElement.offsetHeight);\n          });\n        });\n      }\n      if (this.layoutEditorRef) {\n        this.layoutEditorRef.instance.columnSettings = this.columnSettings;\n      }\n    }\n    onDrop(evt) {\n      console.log(evt);\n      const newPanelIndex = +evt.container.data;\n      const oldPanelIndex = +evt.previousContainer.data;\n      if (newPanelIndex === oldPanelIndex) {\n        const dir = evt.currentIndex > evt.previousIndex ? 1 : -1;\n        const from = evt.previousIndex;\n        const to = evt.currentIndex;\n        const temp = this.panelPanes(newPanelIndex).at(from);\n        for (let i = from; i * dir < to * dir; i = i + dir) {\n          const current = this.panelPanes(newPanelIndex).at(i + dir);\n          this.panelPanes(newPanelIndex).setControl(i, current);\n        }\n        this.panelPanes(newPanelIndex).setControl(to, temp);\n      } else {\n        const temp = this.panelPanes(oldPanelIndex).at(evt.previousIndex);\n        this.panelPanes(oldPanelIndex).removeAt(evt.previousIndex);\n        this.panelPanes(newPanelIndex).insert(evt.currentIndex, temp);\n      }\n    }\n    onOverrideRenderer(index, index2) {\n      const pane = new Pane(this.panelPane(index, index2).value);\n      this.dialog.open(RenderingEditorComponent, {\n        data: {\n          panelFormGroup: this.panels.at(index),\n          paneIndex: index2,\n          pane\n        }\n      });\n    }\n    onRemoveOverrideRenderer(index, index2) {\n      const formArray = this.panelPane(index, index2).get('settings');\n      let rendererIndex;\n      formArray.controls.forEach((c, i) => {\n        if (c.get('name').value === '_renderer') {\n          rendererIndex = i;\n        }\n      });\n      if (rendererIndex !== undefined) {\n        formArray.removeAt(rendererIndex);\n      }\n    }\n    onNestedUpdate(panelPage, index, index2) {\n      const settings = this.panelHandler.buildSettings(panelPage);\n      const formArray = this.panelPane(index, index2).get('settings');\n      formArray.clear();\n      settings.forEach(s => formArray.push(this.convertToGroup(s)));\n    }\n    onPaneHeightChange(panelIndex) {\n      if (this.nested && this.gridLayout) {\n        const container = this.paneContainers.find((i, index) => index === panelIndex);\n        this.gridLayout.setItemContentHeight(panelIndex, container.nativeElement.offsetHeight);\n      }\n    }\n    onDeleteClick() {\n      this.delete.emit();\n    }\n    onRulesClick() {\n      this.rules.emit();\n    }\n    /*onPropsClick() {\n      this.props.emit();\n    }*/\n    onPropertiesClick() {\n      this.props.emit();\n      this.dialog.open(PropertiesDialogComponent, {\n        data: {\n          props: this.pageProperties\n        }\n      }).afterClosed().subscribe(props => {\n        if (props) {\n          this.pageProperties = new PropertiesFormPayload({\n            ...props\n          });\n          this.contentForm.get('name').setValue(props.name);\n          this.contentForm.get('title').setValue(props.title);\n        }\n      });\n    }\n    /*onRulesPane(index: number, index2: number) {\n      const pane = new Pane(this.panelPane(index, index2).value);\n      const rule = this.panelPane(index, index2).get('rule').value !== '' ? this.panelPane(index, index2).get('rule').value as NgRule : undefined;\n         const bindings$: Array<Observable<[number, Array<ContentBinding>]>> = [];\n      this.panelPanes(index).controls.forEach((c, i) => {\n        if(i !== index2) {\n          const pane = new Pane({ ...c.value });\n          const plugin = this.contentPlugins.find(p => p.name === pane.contentPlugin);\n          if(plugin.handler !== undefined && plugin.handler.isDynamic(pane.settings)) {\n            bindings$.push(plugin.handler.getBindings(pane.settings, 'pane').pipe(\n              map(bindings => [i, bindings])\n            ));\n          }\n        }\n      });\n         if(bindings$.length !== 0) {\n        forkJoin(bindings$).pipe(\n          map(pb => pb.reduce<Array<number>>((p, [i, b]) => [ ...p, ...(b.findIndex(cb => cb.type === 'pane' && cb.id === pane.name) > -1 ? [ i ] : []) ], [])),\n          map(indexes => indexes.length === 0 ? undefined : indexes[0]),\n          switchMap(i => iif(\n            () => i !== undefined,\n            this.contentPlugins.find(c => c.name === new Pane({ ...this.panelPane(index, i).value }).contentPlugin).handler.fetchDynamicData(new Pane({ ...this.panelPane(index, i).value }).settings, new Map<string, any>([ ['tag', uuid.v4()], ['contexts', [ ...this.contexts ]] ])),\n            of(new Dataset())\n          ))\n        ).subscribe(dataset => {\n          const contexts = [ ...(dataset.results.length > 0 ? [ ...this.contexts, new InlineContext({ name: '_root', adaptor: 'data', data: dataset.results[0] })] : this.contexts) ];\n          this.dialog\n            .open(RulesDialogComponent, { data: { rule, contexts } })\n            .afterClosed()\n            .subscribe(r => {\n              this.panelPane(index, index2).get('rule').setValue(r ? r : rule ? rule : undefined);\n            });\n        });\n      } else {\n        console.log(this.contexts);\n        this.dialog\n        .open(RulesDialogComponent, { data: { rule, contexts: [ ...(this.rootContext ? [ this.rootContext ] : [] ), ...this.contexts ] } })\n        .afterClosed()\n        .subscribe(r => {\n          this.panelPane(index, index2).get('rule').setValue(r ? r : rule ? rule : undefined);\n        });\n      }\n       }*/\n    onRulesPane(index, index2) {\n      const pane = new Pane(this.panelPane(index, index2).value);\n      const rule = this.panelPane(index, index2).get('rule').value !== '' ? this.panelPane(index, index2).get('rule').value : undefined;\n      const [editablePane] = this.editablePanes.filter((ep, i) => ep.name === pane.name);\n      this.pageBuilderFacade.getPage$.pipe(tap(() => {\n        this.pageBuilderFacade.setSelectionPath([...this.ancestory, index, index2]);\n      }), switchMap(pp => this.panelsContextService.allActivePageContexts({\n        panelPage: pp\n      })), switchMap(paneContexts => this.dialog.open(RulesDialogComponent, {\n        data: {\n          rule,\n          contexts: [...(editablePane.rootContext ? [editablePane.rootContext] : this.rootContext ? [this.rootContext] : []), ...this.contexts, ...paneContexts]\n        }\n      }).afterClosed()), take(1)).subscribe(r => {\n        this.panelPane(index, index2).get('rule').setValue(r ? r : rule ? rule : undefined);\n      });\n    }\n    onDeletePane(index, index2) {\n      console.log(`delete nested pane: ${index} | ${index2}`);\n    }\n    onAddContextClick() {\n      const pp = this.packageFormData();\n      this.pageBuilderFacade.setPage(pp);\n      this.dialog.open(ContextDialogComponent, {\n        data: {}\n      }).afterClosed().subscribe(context => {\n        if (context) {\n          this.contexts = [...this.contexts, context];\n        }\n      });\n    }\n    onEditContext(name) {\n      const editContext = this.contexts.find(c => c.name === name);\n      console.log(editContext);\n      if (editContext) {\n        const pp = this.packageFormData();\n        this.pageBuilderFacade.setPage(pp);\n        this.dialog.open(ContextDialogComponent, {\n          data: {\n            context: editContext\n          }\n        }).afterClosed().subscribe(context => {\n          if (context) {\n            this.contexts = this.contexts.map(c => c.name === name ? new InlineContext(context) : c);\n          }\n        });\n      }\n    }\n    onLayoutSettingChange(evt) {\n      this.layoutSetting = new LayoutSetting(evt);\n      if (this.nested) {\n        this.nestedUpdate.emit(this.packageFormData());\n      }\n      if (this.layoutEditorRef) {\n        this.layoutEditorRef.instance.layoutSetting = this.layoutSetting;\n      }\n    }\n    onRowSettingsChange(evt) {\n      this.rowSettings = evt.map(s => new LayoutSetting(s));\n      if (this.nested) {\n        this.nestedUpdate.emit(this.packageFormData());\n      }\n      if (this.layoutEditorRef) {\n        this.layoutEditorRef.instance.rowSettings = this.rowSettings;\n      }\n    }\n    onColumnSettingsChange(evt) {\n      const len = this.panels.length;\n      for (let i = 0; i < len; i++) {\n        this.panels.at(i).get('columnSetting').get('settings').clear();\n        for (let j = 0; j < evt[i].settings.length; j++) {\n          this.panels.at(i).get('columnSetting').get('settings').push(this.convertToGroup(evt[i].settings[j]));\n        }\n      }\n      if (this.nested) {\n        this.nestedUpdate.emit(this.packageFormData());\n      }\n      if (this.layoutEditorRef) {\n        this.layoutEditorRef.instance.columnSettings = this.columnSettings;\n      }\n    }\n    submit() {\n      this.submitted.emit(this.packageFormData());\n    }\n    packageFormData() {\n      //this.syncNestedPanelPages();\n      const gridItems = this.layoutEditorRef.instance.gridItems;\n      /*switch(this.layoutType.value) {\n        case 'grid':\n          gridItems = this.gridLayout.grid.map((gi, i) => ({ ...gi, weight: i }));\n          break;\n        case 'split':\n          // gridItems = this.splitLayout.dashboard.map((gi, i) => ({ ...gi, cols: Math.floor(gi.cols), weight: i }));\n          gridItems = this.layoutEditorRef.instance.gridItems;\n          break;\n        default:\n      }*/\n      const panelPage = new PanelPage({\n        id: this.panelPageId,\n        title: this.pageProperties.title,\n        name: this.pageProperties.name,\n        site: this.siteName,\n        path: this.pageProperties.path,\n        cssFile: this.pageProperties.cssFile,\n        displayType: this.displayType.value,\n        layoutType: this.layoutType.value,\n        gridItems,\n        contexts: this.contexts,\n        panels: this.panels.value,\n        layoutSetting: new LayoutSetting(this.layoutSetting),\n        rowSettings: this.rowSettings.map(rs => new LayoutSetting(rs)),\n        persistence: this.persistence,\n        interactions: this.interactions,\n        entityPermissions: {\n          readUserIds: this.pageProperties.readUserIds,\n          writeUserIds: [],\n          deleteUserIds: []\n        }\n      });\n      console.log(panelPage);\n      return panelPage;\n    }\n    syncNestedPanelPages() {\n      console.log('sync nested');\n      this.editablePanes.forEach(p => {\n        if (p.contentEditor !== undefined) {\n          const settings = this.panelHandler.buildSettings(p.contentEditor.packageFormData());\n          const formArray = this.panelPane(p.panelIndex, p.paneIndex).get('settings');\n          formArray.clear();\n          settings.forEach(s => formArray.push(this.convertToGroup(s)));\n        }\n      });\n    }\n    resolvePaneContexts(panelIndex, paneIndex) {\n      const pane = new Pane(this.panelPane(panelIndex, paneIndex).value);\n      const controls = this.panelPanes(panelIndex).controls;\n      // const plugin = this.contentPlugins.find(p => p.id === pane.contentPlugin);\n      this.cpm.getPlugin(pane.contentPlugin).pipe(filter(p => p.handler !== undefined && p.handler.isDynamic(pane.settings)), switchMap(p => p.handler.fetchDynamicData(pane.settings, new Map([['tag', uuid.v4()], ['contexts', [...this.contexts]]])).pipe(map(dataset => new InlineContext({\n        name: '_root',\n        adaptor: 'data',\n        data: dataset.length !== 0 ? dataset.results[0] : {}\n      })), switchMap(context => p.handler.getBindings(pane.settings, 'pane').pipe(map(bindings => [context, bindings.map(b => controls.findIndex(p => new Pane(p.value).name === b.id))])))))).subscribe(([context, paneIndexes]) => {\n        this.editablePanes.forEach((p, i) => {\n          if (paneIndexes.findIndex(pi => pi === i) > -1) {\n            p.rootContext = context;\n          }\n        });\n      });\n      /*if(plugin.handler !== undefined && plugin.handler.isDynamic(pane.settings)) {\n        plugin.handler.fetchDynamicData(pane.settings, new Map<string, any>([ ['tag', uuid.v4()], ['contexts', [ ...this.contexts ]] ])).pipe(\n          map(dataset => new InlineContext({ name: '_root', adaptor: 'data', data: dataset.results[0] })),\n          switchMap(context => plugin.handler.getBindings(pane.settings, 'pane').pipe(\n            map<Array<ContentBinding>, [InlineContext, Array<number>]>(bindings => [context, bindings.map(b => controls.findIndex(p => new Pane(p.value).name === b.id))])\n          ))\n        ).subscribe(([context, paneIndexes]) => {\n          this.editablePanes.forEach((p, i) => {\n            if(paneIndexes.findIndex(pi => pi === i) > -1) {\n              p.rootContext = context;\n            }\n          });\n        })\n      }*/\n    }\n    onPersistenceClick() {\n      this.dialog.open(PersistenceDialogComponent, {\n        data: {\n          persistence: this.persistence,\n          contexts: this.contexts\n        }\n      }).afterClosed().subscribe(payload => {\n        console.log('persistence closed', payload);\n        this.persistence = payload ? payload : this.persistence;\n      });\n    }\n    onInteractionsClick() {\n      this.dialog.open(InteractionsDialogComponent, {\n        data: {\n          interactions: this.interactions,\n          contexts: this.contexts\n        },\n        ...{\n          maxWidth: '100vw',\n          maxHeight: '100vh',\n          height: '100%',\n          width: '100%'\n        }\n      }).afterClosed().subscribe(payload => {\n        console.log('interactions closed', payload);\n        this.interactions = payload ? payload : this.interactions;\n      });\n    }\n    panelPanes(index) {\n      return this.panels.at(index).get('panes');\n    }\n    panelPane(index, index2) {\n      return this.panelPanes(index).at(index2);\n    }\n    panelPanePlugin(index, index2) {\n      return this.panelPane(index, index2).get('contentPlugin').value;\n    }\n    panelPaneSettings(index, index2) {\n      // return this.panelPane(index, index2).get('settings').value.map(s => new AttributeValue(s));\n      // console.log(this.panelPane(index, index2).get('settings').value);\n      // NOTE: No that we no longer cast to a new value its possible settings can be missing props which can cause a proplem if code expewcts the actual data model.\n      return this.panelPane(index, index2).get('settings').value;\n    }\n    panelPaneName(index, index2) {\n      return this.panelPane(index, index2).get('name').value;\n    }\n    panelPaneLabel(index, index2) {\n      return this.panelPane(index, index2).get('label').value;\n    }\n    panelPaneLocked(index, index2) {\n      if (this.locked) {\n        return this.locked;\n      }\n      const locked = this.panelPane(index, index2).get('locked');\n      return locked !== null ? locked.value : false;\n    }\n    panelPaneIsNested(index, index2) {\n      return this.panelPanePlugin(index, index2) === 'panel';\n    }\n    panelPanePanelPage(index, index2) {\n      let panelPage;\n      this.panelHandler.toObject(this.panelPaneSettings(index, index2)).subscribe(p => {\n        panelPage = p;\n      });\n      return panelPage;\n    }\n    hasPanelStyle(index) {\n      return this.panels.at(index).get('stylePlugin').value !== undefined && this.panels.at(index).get('stylePlugin').value !== '';\n    }\n    panelStyleTitle(index) {\n      return this.panels.at(index).get('styleTitle').value;\n    }\n    onPaneEdit(index, index2) {\n      const pane = new Pane(this.panelPane(index, index2).value);\n      const plugin = this.panelPanePlugin(index, index2);\n      const [editablePane] = this.editablePanes.filter((ep, i) => ep.name === pane.name);\n      /*const contentPlugin = this.contentPlugins.find(p => p.name === plugin);\n      if(contentPlugin.editorComponent !== undefined) {\n        const dialogRef = this.dialog.open(contentPlugin.editorComponent, { data: { panelFormGroup: this.panels.at(index), panelIndex: index, paneIndex: index2, contexts: this.contexts, contentAdded: this.contentAdded, pane } })\n          .afterClosed()\n          .subscribe(() => {\n            this.resolvePaneContexts(index, index2);\n          })\n      }*/\n      /*maxWidth: '100vw',\n      maxHeight: '100vh',\n      height: '100%',\n      width: '100%'*/\n      this.cpm.getPlugin(plugin).pipe(filter(p => p.editorComponent !== undefined), switchMap(p => this.pageBuilderFacade.getPage$.pipe(switchMap(pp => this.panelsContextService.allActivePageContexts({\n        panelPage: pp\n      }).pipe(map(paneContexts => [p, paneContexts]), take(1))), take(1))), switchMap(([p, paneContexts]) => p.handler ? p.handler.editorOptions(pane.settings).pipe(map(editorOptions => [p, paneContexts, editorOptions])) : of([p, paneContexts, new ContentPluginEditorOptions()]))).subscribe(([p, paneContexts, editorOptions]) => {\n        this.dialog.open(p.editorComponent, {\n          data: {\n            panelFormGroup: this.panels.at(index),\n            panelIndex: index,\n            paneIndex: index2,\n            contexts: [...(editablePane.rootContext ? [editablePane.rootContext] : this.rootContext ? [this.rootContext] : []), ...this.contexts, ...paneContexts],\n            contentAdded: this.contentAdded,\n            pane\n          },\n          ...(editorOptions.fullscreen ? {\n            maxWidth: '100vw',\n            maxHeight: '100vh',\n            height: '100%',\n            width: '100%'\n          } : {})\n        }).afterClosed().subscribe(() => {\n          this.resolvePaneContexts(index, index2);\n        });\n      });\n    }\n    onPaneDelete(index, index2) {\n      this.panelPanes(index).removeAt(index2);\n    }\n    onFileChange(event, index) {\n      const file = event.addedFiles[0];\n      // const plugin = this.contentPlugins.filter(p => p.handler !== undefined).find(p => p.handler.handlesType(file.type));\n      this.cpm.getPlugins().pipe(map(plugins => Array.from(plugins.values()).filter(p => p.handler !== undefined).find(p => p.handler.handlesType(file.type))), filter(p => p !== undefined)).subscribe(p => {\n        p.handler.handleFile(file).subscribe(settings => {\n          this.panelPanes(index).push(this.fb.group({\n            contentPlugin: p.id,\n            name: new UntypedFormControl(''),\n            label: new UntypedFormControl(''),\n            settings: this.fb.array(settings.map(s => this.fb.group({\n              name: new UntypedFormControl(s.name, Validators.required),\n              type: new UntypedFormControl(s.type, Validators.required),\n              displayName: new UntypedFormControl(s.displayName, Validators.required),\n              value: new UntypedFormControl(s.value, Validators.required),\n              computedValue: new UntypedFormControl(s.value, Validators.required)\n            })))\n          }));\n        });\n      });\n      /*if(plugin !== undefined) {\n        plugin.handler.handleFile(file).subscribe(settings => {\n          this.panelPanes(index).push(this.fb.group({\n            contentPlugin: plugin.id,\n            name: new FormControl(''),\n            label: new FormControl(''),\n            settings: this.fb.array(settings.map(s => this.fb.group({\n              name: new FormControl(s.name, Validators.required),\n              type: new FormControl(s.type, Validators.required),\n              displayName: new FormControl(s.displayName, Validators.required),\n              value: new FormControl(s.value, Validators.required),\n              computedValue: new FormControl(s.value, Validators.required),\n            })))\n          }));\n        });\n      }*/\n    }\n    writeValue(val) {\n      if (val) {\n        this.contentForm.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.contentForm.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.contentForm.disable();\n      } else {\n        this.contentForm.enable();\n      }\n    }\n    validate(c) {\n      return this.contentForm.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"content is invalid\"\n        }\n      };\n    }\n    convertToGroup(setting) {\n      const fg = this.fb.group({\n        name: new UntypedFormControl(setting.name, Validators.required),\n        type: new UntypedFormControl(setting.type, Validators.required),\n        displayName: new UntypedFormControl(setting.displayName, Validators.required),\n        value: new UntypedFormControl(setting.value, Validators.required),\n        computedValue: new UntypedFormControl(setting.value, Validators.required),\n        attributes: new UntypedFormArray([])\n      });\n      if (setting.attributes && setting.attributes.length > 0) {\n        setting.attributes.forEach(s => {\n          fg.get('attributes').push(this.convertToGroup(s));\n        });\n      }\n      return fg;\n    }\n    renderEditorLayout(layout) {\n      console.log(`render editor layout ${layout}`);\n      this.lpm.getPlugin(layout).subscribe(p => {\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(p.editor);\n        const viewContainerRef = this.layoutEditorHost.viewContainerRef;\n        viewContainerRef.clear();\n        this.layoutEditorRef = viewContainerRef.createComponent(componentFactory);\n        this.layoutEditorRef.instance.savable = this.savable;\n        this.layoutEditorRef.instance.nested = this.nested;\n        this.layoutEditorRef.instance.ancestory = this.ancestory;\n        this.layoutEditorRef.instance.editor = this;\n        this.layoutEditorRef.instance.extraActionsAreaTmpl = this.extraActionsAreaTmpl;\n        this.layoutEditorRef.instance.contextsMenuTpl = this.contextsMenuTpl;\n        this.layoutEditorRef.instance.editablePaneTpl = this.editablePaneTpl;\n        this.layoutEditorRef.instance.dashboard = this.dashboard;\n        this.layoutEditorRef.instance.layoutSetting = this.layoutSetting;\n        this.layoutEditorRef.instance.rowSettings = this.rowSettings;\n        this.layoutEditorRef.instance.columnSettings = this.columnSettings;\n      });\n    }\n    updateEditorLayoutVars() {\n      this.layoutEditorRef.instance.savable = this.savable;\n      this.layoutEditorRef.instance.nested = this.nested;\n      this.layoutEditorRef.instance.ancestory = this.ancestory;\n      this.layoutEditorRef.instance.editor = this;\n      this.layoutEditorRef.instance.extraActionsAreaTmpl = this.extraActionsAreaTmpl;\n      this.layoutEditorRef.instance.contextsMenuTpl = this.contextsMenuTpl;\n      this.layoutEditorRef.instance.editablePaneTpl = this.editablePaneTpl;\n      this.layoutEditorRef.instance.dashboard = this.dashboard;\n      this.layoutEditorRef.instance.layoutSetting = this.layoutSetting;\n      this.layoutEditorRef.instance.rowSettings = this.rowSettings;\n      this.layoutEditorRef.instance.columnSettings = this.columnSettings;\n    }\n    static {\n      this.\u0275fac = function ContentEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContentEditorComponent)(i0.\u0275\u0275directiveInject(SITE_NAME), i0.\u0275\u0275directiveInject(i2_1.ContentPluginManager), i0.\u0275\u0275directiveInject(i2$2.StylePluginManager), i0.\u0275\u0275directiveInject(i12.LayoutPluginManager), i0.\u0275\u0275directiveInject(i2$3.ContextPluginManager), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1.MatBottomSheet), i0.\u0275\u0275directiveInject(i1$1.MatDialog), i0.\u0275\u0275directiveInject(i2$2.PanelContentHandler), i0.\u0275\u0275directiveInject(i2$1.TokenizerService), i0.\u0275\u0275directiveInject(i0.ComponentFactoryResolver), i0.\u0275\u0275directiveInject(i2$2.PageBuilderFacade), i0.\u0275\u0275directiveInject(PaneStateContextResolver), i0.\u0275\u0275directiveInject(i2$2.PanelsContextService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: ContentEditorComponent,\n        selectors: [[\"classifieds-ui-content-editor\"]],\n        contentQueries: function ContentEditorComponent_ContentQueries(rf, ctx, dirIndex) {\n          if (rf & 1) {\n            i0.\u0275\u0275contentQuery(dirIndex, _c3, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.extraActionsAreaTmpl = _t.first);\n          }\n        },\n        viewQuery: function ContentEditorComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(GridLayoutComponent, 5);\n            i0.\u0275\u0275viewQuery(SplitLayoutComponent, 5);\n            i0.\u0275\u0275viewQuery(LayoutEditorHostDirective, 5);\n            i0.\u0275\u0275viewQuery(_c4, 7);\n            i0.\u0275\u0275viewQuery(_c5, 7);\n            i0.\u0275\u0275viewQuery(_c6, 5);\n            i0.\u0275\u0275viewQuery(EditablePaneComponent, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.gridLayout = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.splitLayout = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.layoutEditorHost = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.contextsMenuTpl = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.editablePaneTpl = _t.first);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.paneContainers = _t);\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.editablePanes = _t);\n          }\n        },\n        inputs: {\n          panelPage: \"panelPage\",\n          savable: \"savable\",\n          nested: \"nested\",\n          locked: \"locked\",\n          pageBuilder: \"pageBuilder\",\n          contexts: \"contexts\",\n          rootContext: \"rootContext\",\n          ancestory: \"ancestory\"\n        },\n        outputs: {\n          submitted: \"submitted\",\n          nestedUpdate: \"nestedUpdate\",\n          delete: \"delete\",\n          rules: \"rules\",\n          props: \"props\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => ContentEditorComponent),\n          multi: true\n        }, {\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => ContentEditorComponent),\n          multi: true\n        }]), i0.\u0275\u0275NgOnChangesFeature],\n        decls: 12,\n        vars: 3,\n        consts: [[\"nestedTpl\", \"\"], [\"editablePaneTpl\", \"\"], [\"contextsMenuTpl\", \"\"], [\"contextMenu\", \"matMenu\"], [\"class\", \"content-editor-wrapper\", 3, \"formGroup\", \"ngClass\", \"ngSubmit\", 4, \"ngIf\", \"ngIfElse\"], [\"type\", \"button\", \"mat-menu-item\", \"\", 3, \"click\"], [\"type\", \"button\", \"mat-menu-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"content-editor-wrapper\", 3, \"ngSubmit\", \"formGroup\", \"ngClass\"], [\"classifiedsUiLayoutEditorHost\", \"\"], [1, \"content-editor-wrapper\", 3, \"formGroup\", \"ngClass\"], [1, \"editable-pane\", 3, \"delete\", \"rules\", \"nestedUpdate\", \"rendererOverride\", \"removeRendererOverride\", \"edit\", \"props\", \"panelIndex\", \"paneIndex\", \"name\", \"label\", \"locked\", \"contexts\", \"pluginName\", \"settings\", \"ancestory\"], [\"class\", \"custom-placeholder\", 4, \"cdkDragPlaceholder\"], [1, \"custom-placeholder\"], [\"type\", \"button\", \"mat-menu-item\", \"\", 1, \"context-button\", 3, \"matMenuTriggerFor\"]],\n        template: function ContentEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.\u0275\u0275getCurrentView();\n            i0.\u0275\u0275template(0, ContentEditorComponent_form_0_Template, 3, 4, \"form\", 4)(1, ContentEditorComponent_ng_template_1_Template, 3, 4, \"ng-template\", null, 0, i0.\u0275\u0275templateRefExtractor)(3, ContentEditorComponent_ng_template_3_Template, 2, 9, \"ng-template\", null, 1, i0.\u0275\u0275templateRefExtractor)(5, ContentEditorComponent_ng_template_5_Template, 2, 1, \"ng-template\", null, 2, i0.\u0275\u0275templateRefExtractor);\n            i0.\u0275\u0275elementStart(7, \"mat-menu\", null, 3)(9, \"button\", 5);\n            i0.\u0275\u0275listener(\"click\", function ContentEditorComponent_Template_button_click_9_listener() {\n              i0.\u0275\u0275restoreView(_r1);\n              return i0.\u0275\u0275resetView(ctx.onAddContextClick());\n            });\n            i0.\u0275\u0275text(10, \"define variable\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275template(11, ContentEditorComponent_button_11_Template, 2, 1, \"button\", 6);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            const nestedTpl_r18 = i0.\u0275\u0275reference(2);\n            i0.\u0275\u0275property(\"ngIf\", !ctx.nested && !ctx.pageBuilder)(\"ngIfElse\", nestedTpl_r18);\n            i0.\u0275\u0275advance(11);\n            i0.\u0275\u0275property(\"ngForOf\", ctx.contexts);\n          }\n        },\n        dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i1$2.\u0275NgNoValidate, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i19.CdkDragPlaceholder, i7$1.MatMenu, i7$1.MatMenuItem, i7$1.MatMenuTrigger, i9.DefaultClassDirective, LayoutEditorHostDirective, EditablePaneComponent],\n        styles: [\".content-editor-wrapper[_ngcontent-%COMP%]{height:100%}.panel-inner[_ngcontent-%COMP%]{padding:1em}.content-editor-wrapper[_ngcontent-%COMP%]     ngx-dropzone{height:100%;display:block;padding:0;border:none}.content-editor-wrapper.nested[_ngcontent-%COMP%]     .grid-item-header{border-bottom:1px solid white}.layout-type[_ngcontent-%COMP%], .display-type[_ngcontent-%COMP%]{float:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:1.5em}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-mdc-form-field, .display-type[_ngcontent-%COMP%]     .mat-mdc-form-field{width:85px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .main-controls{background-color:#ccc}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .layout-inner{background-color:#ccc;padding:.75em}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .editable-pane-wrapper{border:none;margin-bottom:0}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .pane-header{background-color:#fff}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .nested-panel-wrapper{padding:.75em;margin-bottom:0}.custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;transition:transform .25s cubic-bezier(0,0,.2,1)}.context-button[_ngcontent-%COMP%]{font-style:italic;font-family:serif;font-weight:bolder;font-size:medium}\"]\n      });\n    }\n  }\n  return ContentEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet SnippetEditorComponent = /*#__PURE__*/(() => {\n  class SnippetEditorComponent {\n    constructor(data, fb, handler) {\n      this.data = data;\n      this.fb = fb;\n      this.handler = handler;\n    }\n    ngOnInit() {\n      if (this.data.pane !== undefined) {\n        this.handler.toObject(this.data.pane.settings).subscribe(snippet => {\n          this.snippet = snippet;\n        });\n      }\n    }\n    onSubmit(snippet) {\n      if (this.data.paneIndex === undefined) {\n        this.data.panelFormGroup.get('panes').push(this.fb.group({\n          contentPlugin: 'snippet',\n          name: new UntypedFormControl(''),\n          label: new UntypedFormControl(''),\n          rule: new UntypedFormControl(''),\n          settings: new UntypedFormArray(this.buildSettings(snippet))\n        }));\n      } else {\n        const paneForm = this.data.panelFormGroup.get('panes').at(this.data.paneIndex);\n        paneForm.get('settings').clear();\n        this.buildSettings(snippet).forEach(s => {\n          paneForm.get('settings').push(s);\n        });\n      }\n    }\n    buildSettings(snippet) {\n      return [this.fb.group({\n        name: new UntypedFormControl('contentType', Validators.required),\n        type: new UntypedFormControl(AttributeTypes.Text, Validators.required),\n        displayName: new UntypedFormControl('Content Type', Validators.required),\n        value: new UntypedFormControl(snippet.contentType, Validators.required),\n        computedValue: new UntypedFormControl(snippet.contentType, Validators.required)\n      }), this.fb.group({\n        name: new UntypedFormControl('content', Validators.required),\n        type: new UntypedFormControl(AttributeTypes.Text, Validators.required),\n        displayName: new UntypedFormControl('Content', Validators.required),\n        value: new UntypedFormControl(snippet.content, Validators.required),\n        computedValue: new UntypedFormControl(snippet.content, Validators.required)\n      }), this.fb.group({\n        name: new UntypedFormControl('jsScript', Validators.required),\n        type: new UntypedFormControl(AttributeTypes.Text, Validators.required),\n        displayName: new UntypedFormControl('jsScript', Validators.required),\n        value: new UntypedFormControl(snippet.jsScript),\n        computedValue: new UntypedFormControl(snippet.jsScript)\n      })];\n    }\n    static {\n      this.\u0275fac = function SnippetEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SnippetEditorComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(SnippetContentHandler));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: SnippetEditorComponent,\n        selectors: [[\"classifieds-ui-snippet-editor2\"]],\n        standalone: false,\n        decls: 1,\n        vars: 1,\n        consts: [[3, \"submitted\", \"snippet\"]],\n        template: function SnippetEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"classifieds-ui-snippet-form\", 0);\n            i0.\u0275\u0275listener(\"submitted\", function SnippetEditorComponent_Template_classifieds_ui_snippet_form_submitted_0_listener($event) {\n              return ctx.onSubmit($event);\n            });\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"snippet\", ctx.snippet);\n          }\n        },\n        dependencies: [i5.SnippetFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return SnippetEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelPageRouterComponent = /*#__PURE__*/(() => {\n  class PanelPageRouterComponent {\n    constructor(route, pageBuilderFacade, routerStore, asyncApiCallHelperSvc, crudDataHelperService, entityDefinitionService, es) {\n      this.route = route;\n      this.pageBuilderFacade = pageBuilderFacade;\n      this.routerStore = routerStore;\n      this.asyncApiCallHelperSvc = asyncApiCallHelperSvc;\n      this.crudDataHelperService = crudDataHelperService;\n      this.entityDefinitionService = entityDefinitionService;\n      this.paramMapSub = this.route.paramMap.pipe(tap(() => console.log('param map panelPageId')), map(p => p.get('panelPageId')), filter(id => id !== undefined), switchMap(() => this.route.data), withLatestFrom(this.routerStore.pipe(select(getRouterSelectors(state => state.router).selectCurrentRoute), map(route => route.params), take(1))), tap(([data, args]) => {\n        console.log('route page');\n        const realPath = '/pages/panelpage/' + data.panelPageListItem.id;\n        this.pageBuilderFacade.setPageInfo(new PanelPageStateSlice({\n          id: data.panelPageListItem.id,\n          realPath,\n          path: data.panelPageListItem.path,\n          args\n        }));\n        this.panelPageId = data.panelPageListItem.id;\n      })).subscribe();\n      this.panelPageService = es.getEntityCollectionService('PanelPage');\n    }\n    ngOnInit() {\n      const {\n        selectCurrentRoute\n      } = getRouterSelectors(state => state.router);\n      this.route.paramMap.pipe(tap(() => console.log('param map page builder facade info')), withLatestFrom(this.pageBuilderFacade.getPageInfo$), filter(([p, pageInfo]) => pageInfo !== undefined && p.get('panelPageId') !== undefined && p.get('panelPageId') === pageInfo.id), switchMap(([p, pageInfo]) => this.routerStore.pipe(select(selectCurrentRoute), map(route => [pageInfo, route.params]), take(1)))).subscribe(([pageInfo, args]) => {\n        //console.log('update page info');\n        this.pageBuilderFacade.setPageInfo(new PanelPageStateSlice({\n          ...pageInfo,\n          args\n        }));\n      });\n    }\n    static {\n      this.\u0275fac = function PanelPageRouterComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelPageRouterComponent)(i0.\u0275\u0275directiveInject(i1$3.ActivatedRoute), i0.\u0275\u0275directiveInject(i2$2.PageBuilderFacade), i0.\u0275\u0275directiveInject(i3$3.Store), i0.\u0275\u0275directiveInject(i4.AsyncApiCallHelperService), i0.\u0275\u0275directiveInject(i15.CrudDataHelperService), i0.\u0275\u0275directiveInject(i4$3.EntityDefinitionService), i0.\u0275\u0275directiveInject(i4$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PanelPageRouterComponent,\n        selectors: [[\"classifieds-ui-panel-page-router\"]],\n        standalone: false,\n        decls: 1,\n        vars: 1,\n        consts: [[3, \"id\"]],\n        template: function PanelPageRouterComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275element(0, \"classifieds-ui-panel-page\", 0);\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"id\", ctx.panelPageId);\n          }\n        },\n        dependencies: [i7$2.PanelPageComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return PanelPageRouterComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet CreatePanelPageComponent = /*#__PURE__*/(() => {\n  class CreatePanelPageComponent {\n    constructor(es) {\n      this.panelPageService = es.getEntityCollectionService('PanelPage');\n      this.panelPageListItemService = es.getEntityCollectionService('PanelPageListItem');\n    }\n    ngOnInit() {\n      console.log('here');\n    }\n    onSubmit(panelPage) {\n      console.log('create panel page', panelPage);\n      panelPage.id = uuid.v4(); // For now just do this here.\n      this.panelPageService.add(panelPage).subscribe(() => {\n        console.log('panel page created');\n      });\n    }\n    static {\n      this.\u0275fac = function CreatePanelPageComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CreatePanelPageComponent)(i0.\u0275\u0275directiveInject(i4$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: CreatePanelPageComponent,\n        selectors: [[\"classifieds-ui-create-panel-page\"]],\n        standalone: false,\n        decls: 1,\n        vars: 0,\n        consts: [[3, \"submitted\"]],\n        template: function CreatePanelPageComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"classifieds-ui-content-editor\", 0);\n            i0.\u0275\u0275listener(\"submitted\", function CreatePanelPageComponent_Template_classifieds_ui_content_editor_submitted_0_listener($event) {\n              return ctx.onSubmit($event);\n            });\n            i0.\u0275\u0275elementEnd();\n          }\n        },\n        dependencies: [ContentEditorComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return CreatePanelPageComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet EditPanelPageComponent = /*#__PURE__*/(() => {\n  class EditPanelPageComponent {\n    constructor(route, pageBuilderFacade, routerStore, moduleLoader, es) {\n      this.route = route;\n      this.pageBuilderFacade = pageBuilderFacade;\n      this.routerStore = routerStore;\n      this.moduleLoader = moduleLoader;\n      this.panelPageService = es.getEntityCollectionService('PanelPage');\n      this.panelPageListItemService = es.getEntityCollectionService('PanelPageListItem');\n    }\n    ngOnInit() {\n      this.route.paramMap.pipe(map(p => p.get('panelPageId')), filter(id => id !== undefined), distinctUntilChanged(), switchMap(id => this.panelPageService.getByKey(id)), switchMap(pp => pp ? forkJoin(pp.contexts.filter(c => c.plugin === 'module').map(c => this.moduleLoader.loadModule(() => loadRemoteModule({\n        //type: 'module',\n        remoteEntry: c.data.remoteEntry,\n        remoteName: \"plugin\",\n        exposedModule: c.data.exposedModule\n      }).then(m => m[c.data.moduleName])))).pipe(delay(1), map(() => pp), defaultIfEmpty(pp)) : of(pp)), switchMap(pp => this.routerStore.pipe(select(getRouterSelectors(state => state.router).selectCurrentRoute), map(route => [pp, route.params]), take(1))), tap(([pp, args]) => this.pageBuilderFacade.setPageInfo(new PanelPageStateSlice({\n        id: pp.id,\n        realPath: `/pages/panelpage/${pp.id}`,\n        path: pp.path,\n        args\n      })))).subscribe(([panelPage]) => {\n        console.log(panelPage);\n        this.panelPage = panelPage;\n      });\n    }\n    onSubmit(panelPage) {\n      console.log('submitted');\n      // console.log(panelPage);\n      this.panelPageService.update(new PanelPage({\n        ...panelPage,\n        id: this.panelPage.id\n      })).subscribe(() => {\n        alert('panel page updated');\n      });\n    }\n    static {\n      this.\u0275fac = function EditPanelPageComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || EditPanelPageComponent)(i0.\u0275\u0275directiveInject(i1$3.ActivatedRoute), i0.\u0275\u0275directiveInject(i2$2.PageBuilderFacade), i0.\u0275\u0275directiveInject(i3$3.Store), i0.\u0275\u0275directiveInject(i4.ModuleLoaderService), i0.\u0275\u0275directiveInject(i4$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: EditPanelPageComponent,\n        selectors: [[\"classifieds-ui-edit-panel-page\"]],\n        standalone: false,\n        decls: 1,\n        vars: 1,\n        consts: [[3, \"submitted\", \"panelPage\"]],\n        template: function EditPanelPageComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"classifieds-ui-content-editor\", 0);\n            i0.\u0275\u0275listener(\"submitted\", function EditPanelPageComponent_Template_classifieds_ui_content_editor_submitted_0_listener($event) {\n              return ctx.onSubmit($event);\n            });\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"panelPage\", ctx.panelPage);\n          }\n        },\n        dependencies: [ContentEditorComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return EditPanelPageComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet AttributeSelectorComponent = /*#__PURE__*/(() => {\n  class AttributeSelectorComponent {\n    // private contentPlugin: ContentPlugin;\n    constructor(\n    // @Inject(ATTRIBUTE_WIDGET) attributeWidgets: Array<AttributeWidget>,\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    bottomSheetRef, handler, fb, dialog, cpm, wpm) {\n      this.bottomSheetRef = bottomSheetRef;\n      this.handler = handler;\n      this.fb = fb;\n      this.dialog = dialog;\n      this.cpm = cpm;\n      this.wpm = wpm;\n      // this.attributeWidgets = attributeWidgets;\n      // this.contentPlugin = contentPlugins.find(p => p.name === 'attribute');\n    }\n    ngOnInit() {\n      this.attributeWidgets = this.wpm.getPlugins();\n    }\n    onItemSelect(widget) {\n      console.log(widget);\n      this.panelFormGroup.get('panes').push(this.fb.group({\n        contentPlugin: 'attribute',\n        name: new UntypedFormControl(''),\n        label: new UntypedFormControl(''),\n        rule: new UntypedFormControl(''),\n        settings: this.fb.array(this.handler.widgetSettings(widget).map(s => this.fb.group({\n          name: new UntypedFormControl(s.name, Validators.required),\n          type: new UntypedFormControl(s.type, Validators.required),\n          displayName: new UntypedFormControl(s.displayName, Validators.required),\n          value: new UntypedFormControl(s.value, Validators.required),\n          computedValue: new UntypedFormControl(s.computedValue, Validators.required)\n        })))\n      }));\n      const formArray = this.panelFormGroup.get('panes');\n      const paneIndex = formArray.length - 1;\n      const pane = new Pane(formArray.at(paneIndex).value);\n      this.cpm.getPlugin('attribute').subscribe(plugin => {\n        this.dialog.open(plugin.editorComponent, {\n          data: {\n            panelFormGroup: this.panelFormGroup,\n            pane,\n            paneIndex\n          }\n        });\n      });\n      this.bottomSheetRef.dismiss();\n    }\n    static {\n      this.\u0275fac = function AttributeSelectorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AttributeSelectorComponent)(i0.\u0275\u0275directiveInject(i1.MatBottomSheetRef), i0.\u0275\u0275directiveInject(AttributeContentHandler), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1$1.MatDialog), i0.\u0275\u0275directiveInject(i2_1.ContentPluginManager), i0.\u0275\u0275directiveInject(i2.WidgetPluginManager));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: AttributeSelectorComponent,\n        selectors: [[\"classifieds-ui-attribute-selector\"]],\n        inputs: {\n          panelFormGroup: \"panelFormGroup\"\n        },\n        standalone: false,\n        decls: 4,\n        vars: 5,\n        consts: [[\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\"], [\"mat-line\", \"\"]],\n        template: function AttributeSelectorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"mat-nav-list\");\n            i0.\u0275\u0275template(1, AttributeSelectorComponent_a_1_Template, 3, 1, \"a\", 0);\n            i0.\u0275\u0275pipe(2, \"async\");\n            i0.\u0275\u0275pipe(3, \"keyvalue\");\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(3, 3, i0.\u0275\u0275pipeBind1(2, 1, ctx.attributeWidgets)));\n          }\n        },\n        dependencies: [i3.NgForOf, i6.MatLine, i7.MatNavList, i7.MatListItem, i3.AsyncPipe, i3.KeyValuePipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return AttributeSelectorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet AttributeEditorComponent = /*#__PURE__*/(() => {\n  class AttributeEditorComponent {\n    get name() {\n      return this.attributesFormGroup.get('name');\n    }\n    get label() {\n      return this.attributesFormGroup.get('label');\n    }\n    constructor(data, attributeWidgets, dialogRef, fb, handler) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.handler = handler;\n      this.attributes = [];\n      this.attributeValues = [];\n      this.attributesFormGroup = this.fb.group({\n        name: new UntypedFormControl(''),\n        label: new UntypedFormControl(''),\n        attributes: new UntypedFormControl('')\n      });\n      const widgetSetting = this.data.pane.settings.find(s => s.name === 'widget');\n      this.widget = attributeWidgets.find(w => w.name === widgetSetting.value);\n    }\n    ngOnInit() {\n      const value = this.data.pane.settings.find(s => s.name === 'value');\n      this.attributes = [new Attribute({\n        ...this.widget.schema,\n        widget: this.widget.name,\n        label: 'Value',\n        name: 'value'\n      })];\n      const name = this.data.panelFormGroup.get('panes').at(this.data.paneIndex).get('name').value;\n      const label = this.data.panelFormGroup.get('panes').at(this.data.paneIndex).get('label').value;\n      this.attributesFormGroup.get('name').setValue(name);\n      this.attributesFormGroup.get('label').setValue(label);\n      if (value !== undefined) {\n        this.attributeValues = this.handler.valueSettings(this.data.pane.settings);\n        console.log(this.attributeValues);\n      } else {\n        this.attributeValues = [new AttributeValue({\n          name: 'value',\n          type: this.widget.schema.type,\n          displayName: 'Value',\n          value: '',\n          computedValue: '',\n          intValue: 0,\n          attributes: []\n        })];\n      }\n    }\n    submit() {\n      const name = this.name.value;\n      const label = this.label.value;\n      this.data.panelFormGroup.get('panes').at(this.data.paneIndex).get('name').setValue(name);\n      this.data.panelFormGroup.get('panes').at(this.data.paneIndex).get('label').setValue(label);\n      const pane = new Pane({\n        name,\n        label,\n        contentPlugin: 'attribute',\n        settings: this.attributesFormGroup.get('attributes').value === '' ? [] : this.attributesFormGroup.get('attributes').value\n      });\n      if (pane.settings.length !== 0) {\n        this.handler.rendererSnippet(this.data.pane.settings).subscribe(r => {\n          const renderer = r !== undefined ? this.handler.rendererOverrideSettings(r) : [];\n          const formArray = this.data.panelFormGroup.get('panes').at(this.data.paneIndex).get('settings');\n          formArray.clear();\n          [...this.handler.widgetSettings(this.widget), ...pane.settings, ...renderer].forEach(s => formArray.push(this.convertToGroup(s)));\n          this.dialogRef.close();\n        });\n      } else {\n        this.dialogRef.close();\n      }\n    }\n    convertToGroup(setting) {\n      const fg = this.fb.group({\n        name: new UntypedFormControl(setting.name, Validators.required),\n        type: new UntypedFormControl(setting.type, Validators.required),\n        displayName: new UntypedFormControl(setting.displayName, Validators.required),\n        value: new UntypedFormControl(setting.value, Validators.required),\n        computedValue: new UntypedFormControl(setting.value, Validators.required),\n        attributes: new UntypedFormArray([])\n      });\n      if (setting.attributes && setting.attributes.length > 0) {\n        setting.attributes.forEach(s => {\n          fg.get('attributes').push(this.convertToGroup(s));\n        });\n      }\n      return fg;\n    }\n    static {\n      this.\u0275fac = function AttributeEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AttributeEditorComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(ATTRIBUTE_WIDGET), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(AttributeContentHandler));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: AttributeEditorComponent,\n        selectors: [[\"classifieds-ui-attribute-editor\"]],\n        standalone: false,\n        decls: 10,\n        vars: 3,\n        consts: [[3, \"ngSubmit\", \"formGroup\"], [\"fxLayout\", \"column\"], [\"matInput\", \"\", \"placeholder\", \"Name\", \"formControlName\", \"name\"], [\"matInput\", \"\", \"placeholder\", \"Label\", \"formControlName\", \"label\"], [\"formControlName\", \"attributes\", 3, \"attributes\", \"attributeValues\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\"]],\n        template: function AttributeEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function AttributeEditorComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"mat-dialog-content\", 1)(2, \"mat-form-field\");\n            i0.\u0275\u0275element(3, \"input\", 2);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(4, \"mat-form-field\");\n            i0.\u0275\u0275element(5, \"input\", 3);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275element(6, \"classifieds-ui-attributes-builder\", 4);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(7, \"mat-dialog-actions\")(8, \"button\", 5);\n            i0.\u0275\u0275text(9, \"Save\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.attributesFormGroup);\n            i0.\u0275\u0275advance(6);\n            i0.\u0275\u0275property(\"attributes\", ctx.attributes)(\"attributeValues\", ctx.attributeValues);\n          }\n        },\n        dependencies: [i1$2.\u0275NgNoValidate, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i3$2.MatButton, i1$1.MatDialogClose, i1$1.MatDialogActions, i1$1.MatDialogContent, i4$2.MatInput, i4$2.MatFormField, i5$1.DefaultLayoutDirective, i2.AttributesBuilderComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return AttributeEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet AttributePaneRendererComponent = /*#__PURE__*/(() => {\n  class AttributePaneRendererComponent {\n    /*passThruForm = this.fb.group({\n      name: this.fb.control('value', Validators.required),\n      type: this.fb.control(AttributeTypes.Complex, Validators.required),\n      displayName: this.fb.control('Value', Validators.required),\n      value: this.fb.control(''),\n      attributes: this.fb.control('')\n    });*/\n    constructor(widgets, handler, tokenizerService, fb, controlContainer) {\n      this.widgets = widgets;\n      this.handler = handler;\n      this.tokenizerService = tokenizerService;\n      this.fb = fb;\n      this.controlContainer = controlContainer;\n      this.settings = [];\n      this.appearance = 'legacy';\n      this.attributes = [];\n    }\n    ngOnInit() {\n      this.attributes = [new Attribute({\n        ...this.widgets.find(w => w.name === this.settings.find(s => s.name === 'widget').value).schema,\n        name: 'value',\n        label: 'Value'\n      })];\n      this.attributeValues = this.handler.valueSettings(this.settings);\n      this.tokens = this.tokenizerService.generateTokens(this.attributeValues);\n      this.handler.rendererSnippet(this.settings).subscribe(snippet => {\n        this.rendererOverride = snippet;\n        if (snippet !== undefined) {\n          this.rendererSettings = this.handler.rendererOverrideSettings(snippet)[0].attributes;\n        }\n      });\n      /*this.passThruForm.valueChanges.subscribe(v => {\n        console.log(v);\n        this.controlContainer.control.setValue({\n          ...this.controlContainer.control.value,\n          settings: [v]\n        });\n      });*/\n    }\n    static {\n      this.\u0275fac = function AttributePaneRendererComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AttributePaneRendererComponent)(i0.\u0275\u0275directiveInject(ATTRIBUTE_WIDGET), i0.\u0275\u0275directiveInject(AttributeContentHandler), i0.\u0275\u0275directiveInject(i2$1.TokenizerService), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1$2.ControlContainer, 8));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: AttributePaneRendererComponent,\n        selectors: [[\"classifieds-ui-attribute-pane-renderer\"]],\n        inputs: {\n          settings: \"settings\",\n          appearance: \"appearance\",\n          name: \"name\",\n          label: \"label\",\n          displayType: \"displayType\"\n        },\n        standalone: false,\n        decls: 3,\n        vars: 2,\n        consts: [[\"overrideTpl\", \"\"], [\"settingsTmpl\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [4, \"ngIf\"], [3, \"formGroup\", 4, \"ngIf\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [4, \"ngFor\", \"ngForOf\"], [3, \"formGroup\"], [\"formControlName\", \"settings\", 3, \"attributes\", \"attributeValues\"], [3, \"settings\", \"tokens\"]],\n        template: function AttributePaneRendererComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275template(0, AttributePaneRendererComponent_div_0_Template, 3, 2, \"div\", 2)(1, AttributePaneRendererComponent_ng_template_1_Template, 1, 2, \"ng-template\", null, 0, i0.\u0275\u0275templateRefExtractor);\n          }\n          if (rf & 2) {\n            const overrideTpl_r5 = i0.\u0275\u0275reference(2);\n            i0.\u0275\u0275property(\"ngIf\", !ctx.rendererOverride)(\"ngIfElse\", overrideTpl_r5);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i3.NgTemplateOutlet, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i2.AttributesBuilderComponent, SnippetPaneRendererComponent, i2.AttributePipe],\n        styles: [\".override[_ngcontent-%COMP%]{position:absolute;top:.5em;right:.5em}\"]\n      });\n    }\n  }\n  return AttributePaneRendererComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MediaContentHandler = /*#__PURE__*/(() => {\n  class MediaContentHandler {\n    constructor(filesService, attributeSerializer) {\n      this.filesService = filesService;\n      this.attributeSerializer = attributeSerializer;\n      this.types = ['image/png', 'image/jpg', 'image/jpeg', 'image/gif'];\n    }\n    handleFile(file) {\n      return this.filesService.bulkUpload({\n        files: [file]\n      }).pipe(map(files => this.buildSettings(files[0])));\n    }\n    handlesType(type) {\n      return this.types.find(t => t === type) !== undefined;\n    }\n    implementsRendererOverride() {\n      return false;\n    }\n    hasRendererOverride(settings) {\n      return of(false);\n    }\n    isDynamic(settings) {\n      return false;\n    }\n    isData(settings) {\n      return false;\n    }\n    buildDynamicItems(settings, metadata) {\n      return of([]);\n    }\n    fetchDynamicData(settings, metadata) {\n      return of(new Dataset());\n    }\n    getBindings(settings, type, metadata) {\n      return of([]);\n    }\n    toObject(settings) {\n      return of(this.attributeSerializer.deserializeAsObject(settings));\n    }\n    buildSettings(mediaFile) {\n      mediaFile.fileName = 'placeholdername';\n      return this.attributeSerializer.serialize(mediaFile, 'root').attributes;\n    }\n    stateDefinition(settings) {\n      return of({\n        mediaLoading: 'y',\n        mediaLoaded: 'n',\n        loadError: 'n',\n        loadDuration: 'y'\n      });\n    }\n    editorOptions(settings) {\n      return of(new ContentPluginEditorOptions());\n    }\n    static {\n      this.\u0275fac = function MediaContentHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MediaContentHandler)(i0.\u0275\u0275inject(i1$4.FilesService), i0.\u0275\u0275inject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: MediaContentHandler,\n        factory: MediaContentHandler.\u0275fac\n      });\n    }\n  }\n  return MediaContentHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MediaEditorComponent = /*#__PURE__*/(() => {\n  class MediaEditorComponent {\n    constructor(data, dialogRef, fb, filesService, handler) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.filesService = filesService;\n      this.handler = handler;\n      this.mediaTypes = '.png,.jpg,.jpeg,.gif,.svg';\n    }\n    ngOnInit() {\n      if (this.data.pane !== undefined) {\n        this.handler.toObject(this.data.pane.settings).pipe(switchMap(mediaFile => this.filesService.convertToFiles([mediaFile]))).subscribe(files => {\n          this.media = files[0];\n        });\n      }\n    }\n    onSelectMedia(event) {\n      this.media = event.addedFiles[0];\n      this.handler.handleFile(this.media).subscribe(settings => {\n        if (this.data.paneIndex === undefined) {\n          this.data.panelFormGroup.get('panes').push(this.fb.group({\n            contentPlugin: 'media',\n            name: new UntypedFormControl(''),\n            label: new UntypedFormControl(''),\n            rule: new UntypedFormControl(''),\n            settings: new UntypedFormArray(settings.map(s => this.fb.group({\n              name: new UntypedFormControl(s.name, Validators.required),\n              type: new UntypedFormControl(s.type, Validators.required),\n              displayName: new UntypedFormControl(s.displayName, Validators.required),\n              value: new UntypedFormControl(s.value, Validators.required),\n              computedValue: new UntypedFormControl(s.value, Validators.required)\n            })))\n          }));\n        }\n        this.dialogRef.close();\n      });\n    }\n    onRemoveMedia(event) {\n      this.media = undefined;\n    }\n    static {\n      this.\u0275fac = function MediaEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MediaEditorComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1$4.FilesService), i0.\u0275\u0275directiveInject(MediaContentHandler));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: MediaEditorComponent,\n        selectors: [[\"classifieds-ui-media-editor\"]],\n        standalone: false,\n        decls: 4,\n        vars: 3,\n        consts: [[3, \"change\", \"multiple\", \"accept\"], [3, \"removable\", \"file\", \"removed\", 4, \"ngIf\"], [3, \"removed\", \"removable\", \"file\"]],\n        template: function MediaEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"ngx-dropzone\", 0);\n            i0.\u0275\u0275listener(\"change\", function MediaEditorComponent_Template_ngx_dropzone_change_0_listener($event) {\n              return ctx.onSelectMedia($event);\n            });\n            i0.\u0275\u0275elementStart(1, \"ngx-dropzone-label\");\n            i0.\u0275\u0275text(2, \"Drag and Drop Media Here\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275template(3, MediaEditorComponent_ngx_dropzone_image_preview_3_Template, 3, 4, \"ngx-dropzone-image-preview\", 1);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"multiple\", false)(\"accept\", ctx.mediaTypes);\n            i0.\u0275\u0275advance(3);\n            i0.\u0275\u0275property(\"ngIf\", ctx.media);\n          }\n        },\n        dependencies: [i3.NgIf, i6$3.NgxDropzoneComponent, i6$3.NgxDropzoneLabelDirective, i6$3.NgxDropzoneImagePreviewComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return MediaEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MediaPaneRendererComponent = /*#__PURE__*/(() => {\n  class MediaPaneRendererComponent {\n    constructor(mediaSettings, handler, attributeSerializer, es) {\n      this.mediaSettings = mediaSettings;\n      this.handler = handler;\n      this.attributeSerializer = attributeSerializer;\n      this.settings = [];\n      this.ancestory = [];\n      this.state = {};\n      this.stateChange = new EventEmitter();\n      this.panelPageStateService = es.getEntityCollectionService('PanelPageState');\n    }\n    ngOnInit() {\n      console.log('media ancestory is');\n      console.log(this.ancestory);\n      console.log('my state is:');\n      console.log(this.state);\n      this.mediaBaseUrl = this.mediaSettings.imageUrl;\n      this.handler.toObject(this.settings).subscribe(mediaFile => {\n        this.mediaFile = mediaFile;\n      });\n    }\n    ngAfterViewInit() {\n      this.image.nativeElement.onload = () => {\n        console.log('image loaded');\n        this.stateChange.emit({\n          mediaLoading: 'n'\n        });\n        // hard coded test.\n        // @todo: need a way for any content to easily update its state without knowing page id or ancestory or context used could be used outside pages.\n        /*this.panelPageStateService.upsert(new PanelPageState({\n          // id: '0e5f4638-20d6-11ec-b5a7-de55e72cff0f',\n          id: '0e5f4638-20d6-11ec-b5a7-de55e72cff0f',\n          panels: [\n            {\n              panes: [\n                {\n                  state: this.attributeSerializer.serialize({ mediaLoading: 'n' }, 'root')\n                }\n              ]\n            },\n            {\n              panes: [\n              ]\n            }\n          ]\n        })).subscribe();*/\n      };\n    }\n    ngOnChanges() {\n      this.mediaBaseUrl = this.mediaSettings.imageUrl;\n      this.handler.toObject(this.settings).subscribe(mediaFile => {\n        this.mediaFile = mediaFile;\n      });\n    }\n    static {\n      this.\u0275fac = function MediaPaneRendererComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MediaPaneRendererComponent)(i0.\u0275\u0275directiveInject(MEDIA_SETTINGS), i0.\u0275\u0275directiveInject(MediaContentHandler), i0.\u0275\u0275directiveInject(i2.AttributeSerializerService), i0.\u0275\u0275directiveInject(i4$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: MediaPaneRendererComponent,\n        selectors: [[\"classifieds-ui-media-pane-renderer\"]],\n        viewQuery: function MediaPaneRendererComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(_c8, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.image = _t.first);\n          }\n        },\n        inputs: {\n          settings: \"settings\",\n          ancestory: \"ancestory\",\n          state: \"state\"\n        },\n        outputs: {\n          stateChange: \"stateChange\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275NgOnChangesFeature],\n        decls: 2,\n        vars: 3,\n        consts: [[\"img\", \"\"], [3, \"src\"]],\n        template: function MediaPaneRendererComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275element(0, \"img\", 1, 0);\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"src\", i0.\u0275\u0275interpolate2(\"\", ctx.mediaBaseUrl, \"/\", ctx.mediaFile.path), i0.\u0275\u0275sanitizeUrl);\n          }\n        },\n        styles: [\"img[_ngcontent-%COMP%]{max-width:100%}\"]\n      });\n    }\n  }\n  return MediaPaneRendererComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RestContentHandler = /*#__PURE__*/(() => {\n  class RestContentHandler {\n    constructor(siteName, snippetHandler, pageBuilderFacade, store, tokenizerService, panelHandler, urlGeneratorService, attributeSerializer, rulesResolver) {\n      this.siteName = siteName;\n      this.snippetHandler = snippetHandler;\n      this.pageBuilderFacade = pageBuilderFacade;\n      this.store = store;\n      this.tokenizerService = tokenizerService;\n      this.panelHandler = panelHandler;\n      this.urlGeneratorService = urlGeneratorService;\n      this.attributeSerializer = attributeSerializer;\n      this.rulesResolver = rulesResolver;\n    }\n    handleFile(file) {\n      return of([]);\n    }\n    handlesType(type) {\n      return false;\n    }\n    implementsRendererOverride() {\n      return true;\n    }\n    hasRendererOverride(settings) {\n      return of(false);\n    }\n    isDynamic(settings) {\n      return ['snippet', 'pane'].indexOf(this.getRenderType(settings)) > -1;\n    }\n    isData(settings) {\n      return false;\n    }\n    fetchDynamicData(settings, metadata) {\n      const subject = new Subject();\n      this.toObject(settings).pipe(switchMap(r => this.urlGeneratorService.getUrl(r.url, r.params, metadata).pipe(map(url => [r, url])))).subscribe(([r, url]) => {\n        this.pageBuilderFacade.loadRestData(`${metadata.get('tag')}`, new Rest({\n          ...r,\n          url\n        }));\n        this.store.pipe(select(selectDataset(`${metadata.get('tag')}`)), filter(dataset => dataset !== undefined)).subscribe(dataset => {\n          subject.next(dataset);\n          subject.complete();\n        });\n      });\n      return subject;\n    }\n    buildDynamicItems(settings, metadata) {\n      const subject = new Subject();\n      console.log('build dynamic items rest');\n      this.toObject(settings).pipe(switchMap(r => this.urlGeneratorService.getUrl(r.url, r.params, metadata).pipe(map(url => [r, url])))).subscribe(([r, url]) => {\n        console.log('Load in rest data');\n        this.pageBuilderFacade.loadRestData(`${metadata.get('tag')}`, new Rest({\n          ...r,\n          url\n        }));\n        this.store.pipe(select(selectDataset(`${metadata.get('tag')}`)), filter(dataset => dataset !== undefined),\n        // apply query here to dataset.\n        switchMap(dataset => this.getBindings(settings, 'pane').pipe(map(bindings => [dataset, bindings]))), switchMap(([dataset, bindings]) => iif(() => dataset.results.length !== 0 && bindings.length > 0, new Observable(obs => {\n          forkJoin(dataset.results.map(row => from(bindings).pipe(map(binding => metadata.get('panes').find(p => p.name === binding.id)), switchMap(pane => iif(() => pane.rule && pane.rule !== null && pane.rule.condition !== '', this.rulesResolver.evaluate(pane.rule, [...metadata.get('contexts'), ...(pane.contexts !== undefined ? pane.contexts : []), new InlineContext({\n            name: \"_root\",\n            adaptor: 'data',\n            data: row\n          })]).pipe(map(res => [pane, res])), of(false).pipe(map(b => [pane, b])))), filter(([pane, res]) => res), map(([pane, res]) => pane.name), defaultIfEmpty(bindings[0].id), take(1)))).pipe(map(groups => [dataset, groups])).subscribe(d => {\n            obs.next(d);\n            obs.complete();\n          });\n        }), new Observable(obs => {\n          obs.next([dataset]);\n          obs.complete();\n        }))), map(([dataset, paneMappings]) => {\n          if (r.renderer.type === 'pane') {\n            return dataset.results.map((row, rowIndex) => {\n              const attachedPane = metadata.get('panes').find(p => p.name === paneMappings[rowIndex]);\n              const name = uuid.v4();\n              return new Pane({\n                ...attachedPane,\n                rule: undefined,\n                label: name,\n                contexts: [...metadata.get('contexts'), new InlineContext({\n                  name: \"_root\",\n                  adaptor: 'data',\n                  data: row\n                })]\n              });\n            });\n          } else {\n            return dataset.results.map(row => new Pane({\n              contentPlugin: 'snippet',\n              name: uuid.v4(),\n              label: undefined,\n              contexts: [...metadata.get('contexts'), new InlineContext({\n                name: \"_root\",\n                adaptor: 'data',\n                data: row\n              })],\n              settings: this.snippetHandler.buildSettings({\n                ...r.renderer.data,\n                content: r.renderer.data.content\n              })\n            }));\n          }\n        }), map(panes => new Panel({\n          stylePlugin: undefined,\n          settings: [],\n          panes,\n          columnSetting: new LayoutSetting()\n        })), map(panel => this.panelHandler.buildSettings(new PanelPage({\n          id: undefined,\n          layoutType: 'grid',\n          displayType: 'page',\n          site: this.siteName,\n          gridItems: [],\n          layoutSetting: new LayoutSetting(),\n          rowSettings: [],\n          panels: [panel]\n        })))).subscribe(panelSettings => {\n          subject.next(panelSettings.find(s => s.name === 'panels').attributes[0].attributes.find(s => s.name === 'panes').attributes);\n          subject.complete();\n        });\n      });\n      return subject;\n    }\n    buildSelectOptionItems(settings, metadata) {\n      this.toObject(settings).pipe(switchMap(r => this.urlGeneratorService.getUrl(r.url, r.params, metadata).pipe(map(url => [r, url]))), map(([r, url]) => new Rest({\n        ...r,\n        url\n      }))).subscribe(r => {\n        this.pageBuilderFacade.loadRestData(`${metadata.get('tag')}`, r);\n      });\n      return this.store.pipe(select(selectDataset(`${metadata.get('tag')}`)), filter(d => d !== undefined), map(d => [d, d.results.map(r => this.tokenizerService.generateGenericTokens(r))]), map(([d, tokens]) => [d, tokens, new SelectMapping(JSON.parse(metadata.get('snippet').content))]), map(([d, tokens, mapping]) => tokens.map((t, i) => new SelectOption({\n        dataItem: d.results[i],\n        value: mapping.value === '[.]' ? this.attributeSerializer.serialize(d.results[i], 'value') : this.attributeSerializer.serialize(this.tokenizerService.replaceTokens(mapping.value, t), 'value'),\n        label: this.tokenizerService.replaceTokens(mapping.label, t)\n      }))));\n    }\n    getBindings(settings, type, metadata) {\n      if (type === 'context') {\n        return this.toObject(settings).pipe(map(rest => rest.params.reduce((p, c) => [...p, ...(c.mapping.type === 'form' ? [new ContentBinding({\n          id: `form__${c.mapping.value.split('.', 2)[0].trim()}`,\n          type: 'context'\n        })] : [])], [])));\n      } else {\n        return this.toObject(settings).pipe(switchMap(rest => iif(() => rest.renderer.type === type, of(rest.renderer.bindings), of([]))));\n      }\n    }\n    toObject(settings) {\n      return of(this.attributeSerializer.deserializeAsObject(settings));\n    }\n    buildSettings(rest) {\n      return this.attributeSerializer.serialize(rest, 'root').attributes;\n    }\n    getRenderType(settings) {\n      const renderType = [settings.find(s => s.name === 'renderer')].map(r => r.attributes.find(s => s.name === 'type'));\n      return renderType.length > 0 ? renderType[0].value : undefined;\n    }\n    stateDefinition(settings) {\n      return of({\n        autocomplete: {\n          input: ''\n        }\n      });\n    }\n    editorOptions(settings) {\n      return of(new ContentPluginEditorOptions());\n    }\n    static {\n      this.\u0275fac = function RestContentHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestContentHandler)(i0.\u0275\u0275inject(SITE_NAME), i0.\u0275\u0275inject(SnippetContentHandler), i0.\u0275\u0275inject(i2$2.PageBuilderFacade), i0.\u0275\u0275inject(i3$3.Store), i0.\u0275\u0275inject(i2$1.TokenizerService), i0.\u0275\u0275inject(i2$2.PanelContentHandler), i0.\u0275\u0275inject(i5$3.UrlGeneratorService), i0.\u0275\u0275inject(i2.AttributeSerializerService), i0.\u0275\u0275inject(i4$1.RulesResolverService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: RestContentHandler,\n        factory: RestContentHandler.\u0275fac\n      });\n    }\n  }\n  return RestContentHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RestFormComponent = /*#__PURE__*/(() => {\n  class RestFormComponent {\n    set rest(rest) {\n      if (rest !== undefined) {\n        this._rest = rest;\n        const defaultSelect = {\n          value: '',\n          label: '',\n          id: '',\n          multiple: '',\n          limit: ''\n        };\n        this.restForm.setValue({\n          renderer: {\n            trackBy: '',\n            query: '',\n            ...rest.renderer,\n            data: rest.renderer.data ? {\n              ...rest.renderer.data,\n              jsScript: rest.renderer.data.jsScript ? rest.renderer.data.jsScript : ''\n            } : {\n              content: '',\n              contentType: '',\n              jsScript: ''\n            },\n            select: ['pane', 'snippet'].findIndex(t => t === rest.renderer.type) > -1 ? defaultSelect : JSON.parse(rest.renderer.data.content),\n            bindings: []\n          },\n          source: {\n            url: '',\n            // rest.url,\n            params: [],\n            // rest.params\n            method: '',\n            body: ''\n          }\n        });\n        if (rest.renderer.type === 'pane') {\n          this.bindings.clear();\n          rest.renderer.bindings.forEach(b => {\n            if (b.type === 'pane') {\n              this.bindings.push(this.fb.group({\n                id: this.fb.control(b.id, Validators.required),\n                type: this.fb.control(b.type, Validators.required)\n              }));\n            }\n          });\n        }\n        if (rest.renderer.type === 'pane') {\n          this.restForm.get('renderer').get('data').disable();\n        } else {\n          this.restForm.get('renderer').get('data').enable();\n        }\n        setTimeout(() => {\n          this.restSource = {\n            url: rest.url,\n            params: rest.params,\n            method: rest.method ? rest.method : '',\n            body: rest.body ? {\n              ...rest.body,\n              jsScript: ''\n            } : ''\n          };\n          this.sourceForm.refreshData$.next(undefined);\n        });\n      }\n    }\n    get rendererType() {\n      return this.restForm.get('renderer').get('type');\n    }\n    get isSelectable() {\n      return this.restForm.get('renderer').get('type').value && this.restForm.get('renderer').get('type').value !== 'snippet' && this.restForm.get('renderer').get('type').value !== 'pane';\n    }\n    get bindings() {\n      return this.restForm.get('renderer').get('bindings');\n    }\n    get valid() {\n      return this.restForm.valid;\n    }\n    constructor(fb, tokenizerService) {\n      this.fb = fb;\n      this.tokenizerService = tokenizerService;\n      this.panes = [];\n      this.submitted = new EventEmitter();\n      this.contexts = [];\n      this.forms = [];\n      this.snippetValidation = true;\n      this.restForm = this.fb.group({\n        source: this.fb.control(''),\n        renderer: this.fb.group({\n          type: 'snippet',\n          query: this.fb.control(''),\n          trackBy: this.fb.control(''),\n          data: this.fb.control(''),\n          bindings: this.fb.array([]),\n          select: this.fb.group({\n            value: this.fb.control(''),\n            label: this.fb.control(''),\n            id: this.fb.control(''),\n            multiple: this.fb.control(''),\n            limit: this.fb.control('')\n          })\n        })\n      });\n    }\n    ngOnInit() {\n      console.log(this.contexts);\n      this.restForm.get('renderer').get('type').valueChanges.subscribe(v => {\n        if (this.rendererType.value === 'pane') {\n          this.restForm.get('renderer').get('data').disable();\n        } else {\n          this.restForm.get('renderer').get('data').enable();\n        }\n        this.restForm.get('renderer').get('data').setValue({\n          contentType: '',\n          content: '',\n          jsScript: ''\n        });\n      });\n      this.restForm.get('renderer').get('select').valueChanges.subscribe(v => {\n        this.restForm.get('renderer').get('data').setValue({\n          contentType: 'application/json',\n          content: JSON.stringify({\n            value: v.value,\n            label: v.label,\n            id: v.id,\n            multiple: v.multiple,\n            limit: v.limit\n          }),\n          jsScript: ''\n        });\n      });\n    }\n    ngAfterViewInit() {\n      /*if(this.rest !== undefined) {\n        console.log('rest next');\n        this.sourceForm.refreshData$.next();\n      }*/\n    }\n    onDataChange(data) {\n      this.tokens = this.tokenizerService.generateGenericTokens(data[0]);\n    }\n    addPane() {\n      this.bindings.push(this.fb.group({\n        type: this.fb.control('pane', Validators.required),\n        id: this.fb.control('', Validators.required)\n      }));\n    }\n    submit() {\n      const rest = new Rest({\n        ...this.restForm.value,\n        url: this.restForm.value.source.url,\n        params: this.restForm.value.source.params,\n        method: this.restForm.value.source.method,\n        body: this.restForm.value.source.body\n      });\n      this.submitted.emit(rest);\n    }\n    static {\n      this.\u0275fac = function RestFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestFormComponent)(i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2$1.TokenizerService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RestFormComponent,\n        selectors: [[\"classifieds-ui-rest-form\"]],\n        viewQuery: function RestFormComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(RestSourceFormComponent, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.sourceForm = _t.first);\n          }\n        },\n        inputs: {\n          panes: \"panes\",\n          contexts: \"contexts\",\n          rest: \"rest\"\n        },\n        outputs: {\n          submitted: \"submitted\"\n        },\n        standalone: false,\n        decls: 34,\n        vars: 9,\n        consts: [[1, \"rest-form\", 3, \"ngSubmit\", \"formGroup\"], [\"direction\", \"vertical\", 1, \"content-inner\"], [\"as-split-area\", \"\", \"size\", \"50\"], [\"formControlName\", \"source\", 3, \"dataChange\", \"contexts\", \"restSource\"], [\"size\", \"50\", \"formGroupName\", \"renderer\"], [\"matInput\", \"\", \"formControlName\", \"query\", \"placeholder\", \"Query\"], [\"matInput\", \"\", \"formControlName\", \"trackBy\", \"placeholder\", \"Track By\"], [\"required\", \"\", \"formControlName\", \"type\"], [\"label\", \"Output\"], [\"value\", \"snippet\"], [\"value\", \"pane\"], [\"label\", \"Input\"], [\"value\", \"select\"], [\"value\", \"radiogroup\"], [\"value\", \"checkboxgroup\"], [\"value\", \"autocomplete\"], [\"formControlName\", \"data\", \"splitDirection\", \"horizontal\", \"rows\", \"10\", \"cols\", \"40\", 3, \"hidden\", \"rootForm\", \"tokens\"], [\"formArrayName\", \"bindings\", 4, \"ngIf\"], [\"formGroupName\", \"select\", 4, \"ngIf\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\", 3, \"disabled\"], [\"formArrayName\", \"bindings\"], [\"type\", \"button\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [3, \"formGroupName\"], [\"required\", \"\", \"formControlName\", \"id\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"formGroupName\", \"select\"], [\"matInput\", \"\", \"formControlName\", \"id\", \"placeholder\", \"Id\"], [\"matInput\", \"\", \"formControlName\", \"value\", \"placeholder\", \"Value\"], [\"matInput\", \"\", \"formControlName\", \"label\", \"placeholder\", \"Label\"], [\"formControlName\", \"multiple\"], [\"matInput\", \"\", \"formControlName\", \"limit\", \"placeholder\", \"Limit\"]],\n        template: function RestFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function RestFormComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"mat-dialog-content\")(2, \"as-split\", 1)(3, \"div\", 2)(4, \"classifieds-ui-rest-source-form\", 3);\n            i0.\u0275\u0275listener(\"dataChange\", function RestFormComponent_Template_classifieds_ui_rest_source_form_dataChange_4_listener($event) {\n              return ctx.onDataChange($event);\n            });\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275elementStart(5, \"as-split-area\", 4)(6, \"mat-form-field\");\n            i0.\u0275\u0275element(7, \"input\", 5);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(8, \"mat-form-field\");\n            i0.\u0275\u0275element(9, \"input\", 6);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(10, \"mat-form-field\")(11, \"mat-label\");\n            i0.\u0275\u0275text(12, \"Type\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(13, \"mat-select\", 7)(14, \"mat-optgroup\", 8)(15, \"mat-option\", 9);\n            i0.\u0275\u0275text(16, \"Snippet\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(17, \"mat-option\", 10);\n            i0.\u0275\u0275text(18, \"Pane\");\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275elementStart(19, \"mat-optgroup\", 11)(20, \"mat-option\", 12);\n            i0.\u0275\u0275text(21, \"Select\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(22, \"mat-option\", 13);\n            i0.\u0275\u0275text(23, \"Radio Group\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(24, \"mat-option\", 14);\n            i0.\u0275\u0275text(25, \"Checkbox Group\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(26, \"mat-option\", 15);\n            i0.\u0275\u0275text(27, \"Autocomplete\");\n            i0.\u0275\u0275elementEnd()()()();\n            i0.\u0275\u0275element(28, \"classifieds-ui-snippet-form\", 16);\n            i0.\u0275\u0275template(29, RestFormComponent_div_29_Template, 5, 1, \"div\", 17)(30, RestFormComponent_div_30_Template, 12, 0, \"div\", 18);\n            i0.\u0275\u0275elementEnd()()();\n            i0.\u0275\u0275elementStart(31, \"mat-dialog-actions\")(32, \"button\", 19);\n            i0.\u0275\u0275text(33, \"Save\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.restForm);\n            i0.\u0275\u0275advance(4);\n            i0.\u0275\u0275property(\"contexts\", ctx.contexts)(\"restSource\", ctx.restSource);\n            i0.\u0275\u0275advance(24);\n            i0.\u0275\u0275property(\"hidden\", ctx.rendererType.value != \"snippet\")(\"rootForm\", false)(\"tokens\", ctx.tokens);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.rendererType.value == \"pane\");\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.isSelectable);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"disabled\", !ctx.valid);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i1$2.\u0275NgNoValidate, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.RequiredValidator, i1$2.FormGroupDirective, i1$2.FormControlName, i1$2.FormGroupName, i1$2.FormArrayName, i5$4.MatOption, i5$4.MatOptgroup, i3$2.MatButton, i6$4.MatCheckbox, i1$1.MatDialogClose, i1$1.MatDialogActions, i1$1.MatDialogContent, i4$2.MatInput, i4$2.MatFormField, i4$2.MatLabel, i9$1.MatSelect, i10.SplitComponent, i10.SplitAreaDirective, i11.RestSourceFormComponent, i5.SnippetFormComponent],\n        styles: [\".rest-form[_ngcontent-%COMP%]     .content-inner{height:auto}\"]\n      });\n    }\n  }\n  return RestFormComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RestEditorComponent = /*#__PURE__*/(() => {\n  class RestEditorComponent {\n    constructor(data, dialogRef, fb, handler) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.handler = handler;\n      this.panes = [];\n      this.contexts = [];\n      this.contexts = this.data.contexts;\n    }\n    ngOnInit() {\n      this.panes = this.data.panelFormGroup.get('panes').controls.reduce((p, c) => c.get('name').value ? [...p, c.get('name').value] : [...p], []);\n      if (this.data.pane !== undefined) {\n        this.handler.toObject(this.data.pane.settings).subscribe(rest => {\n          this.rest = rest;\n        });\n      }\n    }\n    submitted(rest) {\n      const panes = this.data.panelFormGroup.get('panes');\n      if (this.data.paneIndex === undefined) {\n        panes.push(this.fb.group({\n          contentPlugin: 'rest',\n          name: new UntypedFormControl(''),\n          label: new UntypedFormControl(''),\n          rule: new UntypedFormControl(''),\n          settings: this.fb.array(this.handler.buildSettings(rest).map(s => this.convertToGroup(s)))\n        }));\n        this.data.contentAdded.next([this.data.panelIndex, panes.length - 1]);\n      } else {\n        const paneForm = panes.at(this.data.paneIndex);\n        paneForm.get('settings').clear();\n        this.handler.buildSettings(rest).forEach(s => {\n          paneForm.get('settings').push(this.convertToGroup(s));\n        });\n      }\n      this.dialogRef.close();\n    }\n    convertToGroup(setting) {\n      const fg = this.fb.group({\n        name: new UntypedFormControl(setting.name, Validators.required),\n        type: new UntypedFormControl(setting.type, Validators.required),\n        displayName: new UntypedFormControl(setting.displayName, Validators.required),\n        value: new UntypedFormControl(setting.value, Validators.required),\n        computedValue: new UntypedFormControl(setting.value, Validators.required),\n        attributes: new UntypedFormArray([])\n      });\n      if (setting.attributes && setting.attributes.length > 0) {\n        setting.attributes.forEach(s => {\n          fg.get('attributes').push(this.convertToGroup(s));\n        });\n      }\n      return fg;\n    }\n    static {\n      this.\u0275fac = function RestEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestEditorComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(RestContentHandler));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RestEditorComponent,\n        selectors: [[\"classifieds-ui-rest-editor\"]],\n        standalone: false,\n        decls: 1,\n        vars: 3,\n        consts: [[3, \"submitted\", \"panes\", \"rest\", \"contexts\"]],\n        template: function RestEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"classifieds-ui-rest-form\", 0);\n            i0.\u0275\u0275listener(\"submitted\", function RestEditorComponent_Template_classifieds_ui_rest_form_submitted_0_listener($event) {\n              return ctx.submitted($event);\n            });\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"panes\", ctx.panes)(\"rest\", ctx.rest)(\"contexts\", ctx.contexts);\n          }\n        },\n        dependencies: [RestFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return RestEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet SelectionComponent = /*#__PURE__*/(() => {\n  class SelectionComponent {\n    set values(values) {\n      this.options = values;\n      this.buildOptions();\n    }\n    get attributesArray() {\n      return this.selectionForm.get('attributes');\n    }\n    constructor(fb, attributeSerializer, tokenizerService) {\n      this.fb = fb;\n      this.attributeSerializer = attributeSerializer;\n      this.tokenizerService = tokenizerService;\n      this.searchChange = new EventEmitter();\n      this.selectionForm = this.fb.group({\n        attributes: this.fb.array([])\n      });\n      this.onTouched = () => {};\n      this.displayAuto = opt => {\n        return tokenizerService.replaceTokens(this.selectMapping.label, this.tokenizerService.generateGenericTokens(opt.dataItem));\n      };\n    }\n    ngOnInit() {\n      this.attributesArray.push(this.fb.group({\n        name: new UntypedFormControl('value', Validators.required),\n        type: new UntypedFormControl(AttributeTypes.Array, Validators.required),\n        displayName: new UntypedFormControl('Value', Validators.required),\n        value: new UntypedFormControl(''),\n        attributes: ['checkboxgroup'].findIndex(r => r === this.renderType) > -1 ? this.fb.array([]) : new UntypedFormControl('')\n      }));\n      if (this.renderType === 'autocomplete') {\n        this.attributesArray.at(0).addControl('_proxy', this.fb.control(''));\n        this.attributesArray.at(0).get('_proxy').valueChanges.pipe(distinctUntilChanged(), debounceTime(500)).subscribe(v => {\n          this.searchChange.emit(v);\n        });\n      }\n    }\n    onOptionSelected(evt) {\n      this.attributesArray.at(0).get('attributes').setValue(evt.option.value.value);\n      this.attributesArray.at(0).get('attributes').updateValueAndValidity();\n    }\n    writeValue(val) {\n      if (val) {\n        this.attributesArray.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.attributesArray.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.attributesArray.disable();\n      } else {\n        this.attributesArray.enable();\n      }\n    }\n    validate(c) {\n      return this.selectionForm.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"selection is invalid\"\n        }\n      };\n    }\n    buildOptions() {\n      if (this.renderType === 'checkboxgroup' && this.options !== undefined) {\n        const formArray = this.attributesArray.controls[0].get('attributes');\n        formArray.clear();\n        this.options.forEach(option => {\n          const group = this.attributeSerializer.convertToGroup(option.value);\n          group.addControl('_store', new UntypedFormControl(false));\n          formArray.push(group);\n        });\n      }\n    }\n    static {\n      this.\u0275fac = function SelectionComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SelectionComponent)(i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2.AttributeSerializerService), i0.\u0275\u0275directiveInject(i2$1.TokenizerService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: SelectionComponent,\n        selectors: [[\"classifieds-ui-selection\"]],\n        inputs: {\n          name: \"name\",\n          label: \"label\",\n          values: \"values\",\n          renderType: \"renderType\",\n          selectMapping: \"selectMapping\"\n        },\n        outputs: {\n          searchChange: \"searchChange\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => SelectionComponent),\n          multi: true\n        }, {\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => SelectionComponent),\n          multi: true\n        }])],\n        decls: 9,\n        vars: 6,\n        consts: [[\"autocomplete\", \"matAutocomplete\"], [3, \"formGroup\"], [\"formArrayName\", \"attributes\"], [\"formGroupName\", \"0\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [\"formControlName\", \"attributes\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [4, \"ngFor\", \"ngForOf\"], [3, \"formGroupName\"], [\"formControlName\", \"_store\"], [\"matInput\", \"\", \"formControlName\", \"_proxy\", 3, \"placeholder\", \"matAutocomplete\"], [3, \"optionSelected\", \"displayWith\"]],\n        template: function SelectionComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"div\");\n            i0.\u0275\u0275elementContainerStart(4, 4);\n            i0.\u0275\u0275template(5, SelectionComponent_ng_container_5_Template, 6, 2, \"ng-container\", 5)(6, SelectionComponent_ng_container_6_Template, 6, 2, \"ng-container\", 5)(7, SelectionComponent_ng_container_7_Template, 4, 1, \"ng-container\", 5)(8, SelectionComponent_ng_container_8_Template, 6, 4, \"ng-container\", 5);\n            i0.\u0275\u0275elementContainerEnd();\n            i0.\u0275\u0275elementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.selectionForm);\n            i0.\u0275\u0275advance(4);\n            i0.\u0275\u0275property(\"ngSwitch\", ctx.renderType);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngSwitchCase\", \"select\");\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngSwitchCase\", \"radiogroup\");\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngSwitchCase\", \"checkboxgroup\");\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngSwitchCase\", \"autocomplete\");\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgSwitch, i3.NgSwitchCase, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i1$2.FormGroupName, i1$2.FormArrayName, i5$4.MatAutocomplete, i5$4.MatOption, i5$4.MatAutocompleteTrigger, i6$4.MatCheckbox, i4$2.MatInput, i4$2.MatFormField, i4$2.MatLabel, i8$1.MatRadioGroup, i8$1.MatRadioButton, i9$1.MatSelect],\n        encapsulation: 2\n      });\n    }\n  }\n  return SelectionComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RestPaneRendererComponent = /*#__PURE__*/(() => {\n  class RestPaneRendererComponent {\n    get renderType() {\n      return this.restHandler.getRenderType(this.settings);\n    }\n    constructor(restHandler, controlContainer) {\n      this.restHandler = restHandler;\n      this.controlContainer = controlContainer;\n      this.settings = [];\n      this.contexts = [];\n      this.state = {};\n      this.stateChange = new EventEmitter();\n      this.tag = uuid.v4();\n      this.searchChange$ = new Subject();\n    }\n    ngOnInit() {\n      this.restHandler.toObject(this.settings).pipe(tap(r => {\n        this.snippet = r.renderer.data;\n        this.selectMapping = new SelectMapping(JSON.parse(this.snippet.content));\n      }), filter(() => this.renderType !== 'autocomplete'), switchMap(r => this.restHandler.buildSelectOptionItems(this.settings, new Map([['tag', this.tag], ['snippet', r.renderer.data], ['contexts', this.contexts]])))).subscribe(options => {\n        this.options = options;\n      });\n      this.searchChange$.pipe(tap(input => {\n        this.stateChange.emit({\n          autocomplete: {\n            input\n          }\n        });\n      }), switchMap(r => this.restHandler.buildSelectOptionItems(this.settings, new Map([['tag', uuid.v4()], ['snippet', this.snippet], ['contexts', this.contexts]])))).subscribe(options => {\n        this.options = options;\n      });\n    }\n    onSearchChange(searchString) {\n      this.searchChange$.next(searchString);\n    }\n    static {\n      this.\u0275fac = function RestPaneRendererComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestPaneRendererComponent)(i0.\u0275\u0275directiveInject(RestContentHandler), i0.\u0275\u0275directiveInject(i1$2.ControlContainer));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: RestPaneRendererComponent,\n        selectors: [[\"classifieds-ui-rest-pane-renderer\"]],\n        inputs: {\n          settings: \"settings\",\n          name: \"name\",\n          label: \"label\",\n          displayType: \"displayType\",\n          contexts: \"contexts\",\n          state: \"state\"\n        },\n        outputs: {\n          stateChange: \"stateChange\"\n        },\n        standalone: false,\n        decls: 2,\n        vars: 6,\n        consts: [[3, \"formGroup\"], [\"formControlName\", \"settings\", 3, \"searchChange\", \"name\", \"label\", \"renderType\", \"values\", \"selectMapping\"]],\n        template: function RestPaneRendererComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0)(1, \"classifieds-ui-selection\", 1);\n            i0.\u0275\u0275listener(\"searchChange\", function RestPaneRendererComponent_Template_classifieds_ui_selection_searchChange_1_listener($event) {\n              return ctx.onSearchChange($event);\n            });\n            i0.\u0275\u0275elementEnd()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.controlContainer.control);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"name\", ctx.name)(\"label\", ctx.label)(\"renderType\", ctx.renderType)(\"values\", ctx.options)(\"selectMapping\", ctx.selectMapping);\n          }\n        },\n        dependencies: [i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, SelectionComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return RestPaneRendererComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet SliceContentHandler = /*#__PURE__*/(() => {\n  class SliceContentHandler {\n    constructor(siteName, tokenizerService, panelHandler, mediaHandler, attributeSerializer, inlineContextResolver) {\n      this.siteName = siteName;\n      this.tokenizerService = tokenizerService;\n      this.panelHandler = panelHandler;\n      this.mediaHandler = mediaHandler;\n      this.attributeSerializer = attributeSerializer;\n      this.inlineContextResolver = inlineContextResolver;\n    }\n    handleFile(file) {\n      return of();\n    }\n    handlesType(type) {\n      return false;\n    }\n    implementsRendererOverride() {\n      return false;\n    }\n    hasRendererOverride(settings) {\n      return of(false);\n    }\n    isDynamic(settings) {\n      return true;\n    }\n    isData(settings) {\n      return false;\n    }\n    fetchDynamicData(settings, metadata) {\n      return of(new Dataset());\n    }\n    buildDynamicItems(settings, metadata) {\n      return this.toObject(settings).pipe(map(slice => [slice, metadata.get('contexts').find(c => c.name === slice.context)]), switchMap(([slice, context]) => this.extractDataArray(context, slice.query).pipe(map(data => [slice, context, data]))), switchMap(([slice, context, dataArray]) => this.transformDataArray(dataArray, slice.plugin)), map(panes => new Panel({\n        stylePlugin: undefined,\n        settings: [],\n        panes,\n        columnSetting: new LayoutSetting()\n      })), map(panel => this.panelHandler.buildSettings(new PanelPage({\n        id: undefined,\n        layoutType: 'grid',\n        displayType: 'page',\n        site: this.siteName,\n        gridItems: [],\n        layoutSetting: new LayoutSetting(),\n        rowSettings: [],\n        panels: [panel]\n      }))), map(panelSettings => panelSettings.find(s => s.name === 'panels').attributes[0].attributes.find(s => s.name === 'panes').attributes));\n    }\n    getBindings(settings, type, metadata) {\n      if (type === 'context') {\n        return this.toObject(settings).pipe(map(slice => [new ContentBinding({\n          id: slice.context,\n          type: 'context'\n        })]));\n      } else {\n        return of([]);\n      }\n    }\n    toObject(settings) {\n      return of(this.attributeSerializer.deserializeAsObject(settings));\n    }\n    buildSettings(dataSlice) {\n      return this.attributeSerializer.serialize(dataSlice, 'root').attributes;\n    }\n    extractDataArray(context, query) {\n      return this.inlineContextResolver.resolve(context).pipe(map(data => {\n        const pieces = query.split('.');\n        const len = pieces.length;\n        if (context === undefined) {\n          return of([]);\n        }\n        let current = Array.isArray(data) ? data[0] : data;\n        for (let i = 0; i < len; i++) {\n          if (pieces[i] === '') {\n            continue;\n          }\n          current = current[pieces[i]];\n        }\n        return current;\n      }));\n    }\n    transformDataArray(dataArray, plugin) {\n      if (plugin === 'media') {\n        return of(dataArray.map(d => new MediaFile(d)).map(m => new Pane({\n          contentPlugin: 'media',\n          name: undefined,\n          label: undefined,\n          settings: this.mediaHandler.buildSettings(m)\n        })));\n      } else {\n        return of();\n      }\n    }\n    stateDefinition(settings) {\n      return of({});\n    }\n    editorOptions(settings) {\n      return of(new ContentPluginEditorOptions());\n    }\n    static {\n      this.\u0275fac = function SliceContentHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SliceContentHandler)(i0.\u0275\u0275inject(SITE_NAME), i0.\u0275\u0275inject(i2$1.TokenizerService), i0.\u0275\u0275inject(i2$2.PanelContentHandler), i0.\u0275\u0275inject(MediaContentHandler), i0.\u0275\u0275inject(i2.AttributeSerializerService), i0.\u0275\u0275inject(i2$3.InlineContextResolverService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: SliceContentHandler,\n        factory: SliceContentHandler.\u0275fac\n      });\n    }\n  }\n  return SliceContentHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass DataSlice {\n  constructor(data) {\n    if (data) {\n      this.context = data.context;\n      this.query = data.query;\n      this.plugin = data.plugin;\n    }\n  }\n}\n/*export class SelectOption {\n  value: AttributeValue;\n  label: string;\n  dataItem: any;\n  constructor(data?: SelectOption) {\n    if(data) {\n      this.label = data.label;\n      this.dataItem = data.dataItem;\n      if(data.value !== undefined) {\n        this.value = new AttributeValue(data.value);\n      }\n    }\n  }\n}*/\n/*export class SelectMapping {\n  value: string;\n  label: string;\n  id: string;\n  multiple: boolean;\n  limit: number;\n  constructor(data?: SelectMapping) {\n    if(data) {\n      this.value = data.value;\n      this.label = data.label;\n      this.id = data.id;\n      this.multiple = data.multiple;\n      this.limit = data.limit;\n    }\n  }\n}*/\nlet SliceFormComponent = /*#__PURE__*/(() => {\n  class SliceFormComponent {\n    constructor(fb) {\n      this.fb = fb;\n      this.contexts = [];\n      this.submitted = new EventEmitter();\n      this.sliceForm = this.fb.group({\n        context: this.fb.control('', Validators.required),\n        query: this.fb.control('', Validators.required),\n        plugin: this.fb.control('', Validators.required)\n      });\n    }\n    ngOnInit() {}\n    submit() {\n      const dataSlice = new DataSlice(this.sliceForm.value);\n      this.submitted.emit(dataSlice);\n    }\n    static {\n      this.\u0275fac = function SliceFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SliceFormComponent)(i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: SliceFormComponent,\n        selectors: [[\"classifieds-ui-slice-form\"]],\n        inputs: {\n          contexts: \"contexts\"\n        },\n        outputs: {\n          submitted: \"submitted\"\n        },\n        standalone: false,\n        decls: 20,\n        vars: 3,\n        consts: [[1, \"slice-form\", 3, \"ngSubmit\", \"formGroup\"], [\"required\", \"\", \"formControlName\", \"context\"], [\"value\", \"_root\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"placeholder\", \"Query\", \"formControlName\", \"query\", \"required\", \"\"], [\"required\", \"\", \"formControlName\", \"plugin\"], [\"value\", \"media\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\", 3, \"disabled\"], [3, \"value\"]],\n        template: function SliceFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function SliceFormComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"mat-dialog-content\")(2, \"mat-form-field\")(3, \"mat-label\");\n            i0.\u0275\u0275text(4, \"Type\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(5, \"mat-select\", 1)(6, \"mat-option\", 2);\n            i0.\u0275\u0275text(7, \"_root\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275template(8, SliceFormComponent_mat_option_8_Template, 2, 2, \"mat-option\", 3);\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275elementStart(9, \"mat-form-field\");\n            i0.\u0275\u0275element(10, \"input\", 4);\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(11, \"mat-form-field\")(12, \"mat-label\");\n            i0.\u0275\u0275text(13, \"Plugin\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(14, \"mat-select\", 5)(15, \"mat-option\", 6);\n            i0.\u0275\u0275text(16, \"Media\");\n            i0.\u0275\u0275elementEnd()()()();\n            i0.\u0275\u0275elementStart(17, \"mat-dialog-actions\")(18, \"button\", 7);\n            i0.\u0275\u0275text(19, \"Save\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.sliceForm);\n            i0.\u0275\u0275advance(8);\n            i0.\u0275\u0275property(\"ngForOf\", ctx.contexts);\n            i0.\u0275\u0275advance(10);\n            i0.\u0275\u0275property(\"disabled\", !ctx.sliceForm.valid);\n          }\n        },\n        dependencies: [i3.NgForOf, i1$2.\u0275NgNoValidate, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.RequiredValidator, i1$2.FormGroupDirective, i1$2.FormControlName, i5$4.MatOption, i3$2.MatButton, i1$1.MatDialogClose, i1$1.MatDialogActions, i1$1.MatDialogContent, i4$2.MatInput, i4$2.MatFormField, i4$2.MatLabel, i9$1.MatSelect],\n        encapsulation: 2\n      });\n    }\n  }\n  return SliceFormComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet SliceEditorComponent = /*#__PURE__*/(() => {\n  class SliceEditorComponent {\n    constructor(data, dialogRef, fb, handler) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.handler = handler;\n      this.contexts = [];\n      this.contexts = this.data.contexts;\n    }\n    ngOnInit() {}\n    submitted(dataSlice) {\n      this.data.panelFormGroup.get('panes').push(this.fb.group({\n        contentPlugin: 'slice',\n        name: new UntypedFormControl(''),\n        label: new UntypedFormControl(''),\n        rule: new UntypedFormControl(''),\n        settings: this.fb.array(this.handler.buildSettings(dataSlice).map(s => this.convertToGroup(s)))\n      }));\n      this.dialogRef.close();\n    }\n    convertToGroup(setting) {\n      const fg = this.fb.group({\n        name: new UntypedFormControl(setting.name, Validators.required),\n        type: new UntypedFormControl(setting.type, Validators.required),\n        displayName: new UntypedFormControl(setting.displayName, Validators.required),\n        value: new UntypedFormControl(setting.value, Validators.required),\n        computedValue: new UntypedFormControl(setting.value, Validators.required),\n        attributes: new UntypedFormArray([])\n      });\n      if (setting.attributes && setting.attributes.length > 0) {\n        setting.attributes.forEach(s => {\n          fg.get('attributes').push(this.convertToGroup(s));\n        });\n      }\n      return fg;\n    }\n    static {\n      this.\u0275fac = function SliceEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SliceEditorComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(SliceContentHandler));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: SliceEditorComponent,\n        selectors: [[\"classifieds-ui-slice-editor\"]],\n        standalone: false,\n        decls: 1,\n        vars: 1,\n        consts: [[3, \"submitted\", \"contexts\"]],\n        template: function SliceEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"classifieds-ui-slice-form\", 0);\n            i0.\u0275\u0275listener(\"submitted\", function SliceEditorComponent_Template_classifieds_ui_slice_form_submitted_0_listener($event) {\n              return ctx.submitted($event);\n            });\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"contexts\", ctx.contexts);\n          }\n        },\n        dependencies: [SliceFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return SliceEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ContextEditorComponent = /*#__PURE__*/(() => {\n  class ContextEditorComponent {\n    constructor(fb, controlContainer) {\n      this.fb = fb;\n      this.controlContainer = controlContainer;\n    }\n    ngOnInit() {\n      this.controlContainer.control.addControl('adaptor', this.fb.control('rest', Validators.required));\n      this.controlContainer.control.addControl('rest', this.fb.control(''));\n    }\n    static {\n      this.\u0275fac = function ContextEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ContextEditorComponent)(i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1$2.ControlContainer));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: ContextEditorComponent,\n        selectors: [[\"classifieds-ui-context-editor\"]],\n        viewQuery: function ContextEditorComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(RestSourceFormComponent, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.restSourceFormComp = _t.first);\n          }\n        },\n        standalone: false,\n        decls: 2,\n        vars: 1,\n        consts: [[3, \"formGroup\"], [\"formControlName\", \"rest\"]],\n        template: function ContextEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementContainerStart(0, 0);\n            i0.\u0275\u0275element(1, \"classifieds-ui-rest-source-form\", 1);\n            i0.\u0275\u0275elementContainerEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.controlContainer.control);\n          }\n        },\n        dependencies: [i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i11.RestSourceFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return ContextEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TabsPanelEditorComponent = /*#__PURE__*/(() => {\n  class TabsPanelEditorComponent {\n    get labels() {\n      return this.formGroup.get('labels');\n    }\n    constructor(data, dialogRef, fb, attributeSerializer) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.attributeSerializer = attributeSerializer;\n      this.contexts = [];\n      this.panes = [];\n      this.formGroup = this.fb.group({\n        labels: this.fb.array([this.buildLabelGroup()])\n      });\n      this.contexts = this.data.contexts;\n    }\n    ngOnInit() {\n      this.panes = new Panel(this.data.panelFormGroup.value).panes;\n    }\n    submit() {\n      this.data.panelFormGroup.get('settings').clear();\n      this.attributeSerializer.serialize(this.formGroup.value, 'root').attributes.forEach(a => {\n        console.log('label mappings');\n        console.log(this.attributeSerializer.convertToGroup(a));\n        this.data.panelFormGroup.get('settings').push(this.attributeSerializer.convertToGroup(a));\n      });\n    }\n    onRemoveMapping(index) {\n      this.labels.removeAt(index);\n    }\n    onAddMapping() {\n      this.labels.push(this.buildLabelGroup());\n    }\n    buildLabelGroup() {\n      return this.fb.group({\n        mapping: this.fb.control('')\n      });\n    }\n    static {\n      this.\u0275fac = function TabsPanelEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || TabsPanelEditorComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i1$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: TabsPanelEditorComponent,\n        selectors: [[\"druid-tabs-panel-editor\"]],\n        standalone: false,\n        decls: 7,\n        vars: 3,\n        consts: [[3, \"ngSubmit\", \"formGroup\"], [\"formArrayName\", \"labels\"], [3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\", 3, \"disabled\"], [3, \"formGroupName\"], [\"formControlName\", \"mapping\", 3, \"panes\"]],\n        template: function TabsPanelEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function TabsPanelEditorComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.\u0275\u0275elementStart(1, \"div\", 1);\n            i0.\u0275\u0275template(2, TabsPanelEditorComponent_div_2_Template, 4, 2, \"div\", 2);\n            i0.\u0275\u0275elementStart(3, \"button\", 3);\n            i0.\u0275\u0275listener(\"click\", function TabsPanelEditorComponent_Template_button_click_3_listener() {\n              return ctx.onAddMapping();\n            });\n            i0.\u0275\u0275text(4, \"Add\");\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275elementStart(5, \"button\", 4);\n            i0.\u0275\u0275text(6, \"Save\");\n            i0.\u0275\u0275elementEnd()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.formGroup);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"ngForOf\", ctx.labels.controls);\n            i0.\u0275\u0275advance(3);\n            i0.\u0275\u0275property(\"disabled\", !ctx.formGroup.valid);\n          }\n        },\n        dependencies: [i3.NgForOf, i1$2.\u0275NgNoValidate, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, i1$2.FormGroupName, i1$2.FormArrayName, i3$2.MatButton, i1$1.MatDialogClose, i2$2.PanelPageLinkedlistComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return TabsPanelEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TabsPanelRendererComponent = /*#__PURE__*/(() => {\n  class TabsPanelRendererComponent {\n    constructor(attributeSerializer) {\n      this.attributeSerializer = attributeSerializer;\n      this.settings = [];\n      this.panes = [];\n      this.originMappings = [];\n      this.labelMappingsEnabled = false;\n    }\n    ngOnInit() {\n      console.log('tabs panels contexts');\n      console.log(this.panes);\n      const obj = this.attributeSerializer.deserialize(new AttributeValue({\n        name: '',\n        displayName: '',\n        computedValue: '',\n        type: AttributeTypes.Complex,\n        value: '',\n        intValue: 0,\n        attributes: this.settings\n      }));\n      this.labelMappingsEnabled = obj && obj.labels !== undefined && Array.isArray(obj.labels) && obj.labels.length > 0 ? true : false;\n    }\n    static {\n      this.\u0275fac = function TabsPanelRendererComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || TabsPanelRendererComponent)(i0.\u0275\u0275directiveInject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: TabsPanelRendererComponent,\n        selectors: [[\"classifieds-ui-tabs-panel-renderer\"]],\n        inputs: {\n          settings: \"settings\",\n          panes: \"panes\",\n          originPanes: \"originPanes\",\n          originMappings: \"originMappings\"\n        },\n        standalone: false,\n        decls: 2,\n        vars: 2,\n        consts: [[\"mat-align-tabs\", \"start\", 4, \"ngIf\"], [\"mat-align-tabs\", \"start\"], [4, \"for\"], [\"mat-tab-label\", \"\"], [3, \"pluginName\", \"settings\", \"contexts\"], [\"label\", \"The Label\", 4, \"ngFor\", \"ngForOf\"], [\"label\", \"The Label\"]],\n        template: function TabsPanelRendererComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275template(0, TabsPanelRendererComponent_mat_tab_group_0_Template, 2, 1, \"mat-tab-group\", 0)(1, TabsPanelRendererComponent_mat_tab_group_1_Template, 2, 1, \"mat-tab-group\", 0);\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"ngIf\", ctx.labelMappingsEnabled);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", !ctx.labelMappingsEnabled);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i8.MatTabLabel, i8.MatTab, i8.MatTabGroup, i4.ForDirective, i7$2.RenderPaneComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return TabsPanelRendererComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PageStateFormComponent = /*#__PURE__*/(() => {\n  class PageStateFormComponent {\n    set panelPage(pp) {\n      this.panelPage$.next(pp);\n    }\n    set context(context) {\n      this.context$.next(context);\n    }\n    constructor(fb, controlContainer) {\n      this.fb = fb;\n      this.controlContainer = controlContainer;\n      this.panelPages = [];\n      this.panelPage$ = new BehaviorSubject(new PanelPage());\n      this.context$ = new BehaviorSubject(undefined);\n      this.formGroup = this.fb.group({\n        // selectionPath: this.fb.control([]),\n        state: this.fb.control('', [Validators.required])\n        /*type: this.fb.control('', [ ]),\n        defaultValue: this.fb.control(''),*/\n      });\n      this.stateCtrl = this.fb.control('');\n      /*selectionPathCtrl = this.fb.control('');\n             selectionPathCtrlSub = this.selectionPathCtrl.valueChanges.pipe(\n        map(v => v && v !== '' ? this.flattenSelector(v) : [])\n      ).subscribe(v => {\n        this.formGroup.get('selectionPath').setValue(v);\n      });*/\n      this.stateCtrlSub = this.stateCtrl.valueChanges.pipe(debounceTime(250), distinctUntilChanged(), filter(v => {\n        try {\n          JSON.parse(v);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      }), map(v => JSON.parse(v))).subscribe(v => {\n        console.log('write state');\n        console.log(v);\n        this.formGroup.get('state').setValue(v);\n      });\n      this.onTouched = () => {};\n    }\n    ngOnInit() {\n      this.panelPage$.subscribe(pp => {\n        this.panelPages = [pp];\n      });\n      this.context$.subscribe(c => {\n        if (c) {\n          this.stateCtrl.setValue(JSON.stringify(c.data.state));\n          // this.formGroup.get('selectionPath').setValue(c.data.selectionPath);\n          // @todo: reselect path\n        } else {\n          this.stateCtrl.setValue('');\n          // this.formGroup.get('selectionPath').setValue([]);\n        }\n      });\n    }\n    writeValue(val) {\n      if (val) {\n        this.formGroup.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.formGroup.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.formGroup.disable();\n      } else {\n        this.formGroup.enable();\n      }\n    }\n    validate(c) {\n      return this.formGroup.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"source is invalid\"\n        }\n      };\n    }\n    flattenSelector(selector) {\n      const flat = [];\n      if (selector.panel !== undefined && selector.panel !== null) {\n        flat.push(selector.panel);\n      }\n      if (selector.pane !== undefined && selector.pane !== null) {\n        flat.push(selector.pane);\n      }\n      if (selector.nested !== undefined && selector.nested !== null && typeof selector.nested === 'object') {\n        this.flattenSelector(selector.nested).forEach(i => flat.push(i));\n      }\n      return flat;\n    }\n    static {\n      this.\u0275fac = function PageStateFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PageStateFormComponent)(i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1$2.ControlContainer));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PageStateFormComponent,\n        selectors: [[\"classifieds-ui-page-state-form\"]],\n        inputs: {\n          panelPage: \"panelPage\",\n          context: \"context\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => PageStateFormComponent),\n          multi: true\n        }, {\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => PageStateFormComponent),\n          multi: true\n        }])],\n        decls: 3,\n        vars: 2,\n        consts: [[3, \"formGroup\"], [\"cols\", \"40\", \"rows\", \"20\", \"required\", \"\", 3, \"formControl\"]],\n        template: function PageStateFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0);\n            i0.\u0275\u0275text(1, \" <\");\n            i0.\u0275\u0275element(2, \"textarea\", 1);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.formGroup);\n            i0.\u0275\u0275advance(2);\n            i0.\u0275\u0275property(\"formControl\", ctx.stateCtrl);\n          }\n        },\n        dependencies: [i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.RequiredValidator, i1$2.FormControlDirective, i1$2.FormGroupDirective],\n        encapsulation: 2\n      });\n    }\n  }\n  return PageStateFormComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PageStateEditorComponent = /*#__PURE__*/(() => {\n  class PageStateEditorComponent {\n    constructor(fb, pageBuilderFacade, controlContainer) {\n      this.fb = fb;\n      this.pageBuilderFacade = pageBuilderFacade;\n      this.controlContainer = controlContainer;\n    }\n    ngOnInit() {\n      this.controlContainer.control.addControl('adaptor', this.fb.control('data', Validators.required));\n      this.controlContainer.control.addControl('data', this.fb.control(''));\n      this.pageBuilderFacade.getPage$.pipe(take(1)).subscribe(pp => {\n        this.panelPage = pp;\n      });\n    }\n    static {\n      this.\u0275fac = function PageStateEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PageStateEditorComponent)(i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2$2.PageBuilderFacade), i0.\u0275\u0275directiveInject(i1$2.ControlContainer));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PageStateEditorComponent,\n        selectors: [[\"classifieds-ui-page-state-editor\"]],\n        viewQuery: function PageStateEditorComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275viewQuery(PageStateFormComponent, 7);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.\u0275\u0275queryRefresh(_t = i0.\u0275\u0275loadQuery()) && (ctx.restSourceFormComp = _t.first);\n          }\n        },\n        inputs: {\n          context: \"context\"\n        },\n        standalone: false,\n        decls: 2,\n        vars: 3,\n        consts: [[3, \"formGroup\"], [\"formControlName\", \"data\", 3, \"panelPage\", \"context\"]],\n        template: function PageStateEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementContainerStart(0, 0);\n            i0.\u0275\u0275element(1, \"classifieds-ui-page-state-form\", 1);\n            i0.\u0275\u0275elementContainerEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.controlContainer.control);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"panelPage\", ctx.panelPage)(\"context\", ctx.context);\n          }\n        },\n        dependencies: [i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, PageStateFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return PageStateEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet FormDatasourceFormComponent = /*#__PURE__*/(() => {\n  class FormDatasourceFormComponent {\n    set settings(settings) {\n      this.settings$.next(settings);\n    }\n    constructor(fb, attributeSerializer) {\n      this.fb = fb;\n      this.attributeSerializer = attributeSerializer;\n      this.settings$ = new BehaviorSubject(undefined);\n      this.formGroup = this.fb.group({\n        name: this.fb.control('', [Validators.required]),\n        field: this.fb.control('', [Validators.required])\n      });\n      this.settingsSub = this.settings$.pipe(map(s => s ? new FormDatasource(this.attributeSerializer.deserializeAsObject(s)) : undefined)).subscribe(ds => {\n        if (ds) {\n          this.formGroup.get('name').setValue(ds.name);\n          this.formGroup.get('field').setValue(ds.field);\n        } else {\n          this.formGroup.get('name').setValue('');\n          this.formGroup.get('field').setValue('');\n        }\n      });\n      this.onTouched = () => {};\n    }\n    ngOnInit() {}\n    writeValue(val) {\n      if (val) {\n        this.formGroup.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.formGroup.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.formGroup.disable();\n      } else {\n        this.formGroup.enable();\n      }\n    }\n    validate(c) {\n      return this.formGroup.valid ? null : {\n        invalidForm: {\n          valid: false,\n          message: \"content is invalid\"\n        }\n      };\n    }\n    static {\n      this.\u0275fac = function FormDatasourceFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FormDatasourceFormComponent)(i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: FormDatasourceFormComponent,\n        selectors: [[\"classifieds-ui-form-datasource-form\"]],\n        inputs: {\n          settings: \"settings\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => FormDatasourceFormComponent),\n          multi: true\n        }, {\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => FormDatasourceFormComponent),\n          multi: true\n        }])],\n        decls: 11,\n        vars: 1,\n        consts: [[3, \"formGroup\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"required\", \"\"], [\"matInput\", \"\", \"formControlName\", \"field\", \"required\", \"\"]],\n        template: function FormDatasourceFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0)(1, \"div\")(2, \"mat-form-field\")(3, \"mat-label\");\n            i0.\u0275\u0275text(4, \"Name\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275element(5, \"input\", 1);\n            i0.\u0275\u0275elementEnd()();\n            i0.\u0275\u0275elementStart(6, \"div\")(7, \"mat-form-field\")(8, \"mat-label\");\n            i0.\u0275\u0275text(9, \"Field\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275element(10, \"input\", 2);\n            i0.\u0275\u0275elementEnd()()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.formGroup);\n          }\n        },\n        dependencies: [i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.RequiredValidator, i1$2.FormGroupDirective, i1$2.FormControlName, i4$2.MatInput, i4$2.MatFormField, i4$2.MatLabel],\n        encapsulation: 2\n      });\n    }\n  }\n  return FormDatasourceFormComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet FormDatasourceComponent = /*#__PURE__*/(() => {\n  class FormDatasourceComponent {\n    constructor(controlContainer) {\n      this.controlContainer = controlContainer;\n      this.settings = [];\n    }\n    static {\n      this.\u0275fac = function FormDatasourceComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FormDatasourceComponent)(i0.\u0275\u0275directiveInject(i1$2.ControlContainer));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: FormDatasourceComponent,\n        selectors: [[\"classifieds-ui-form-datasource\"]],\n        inputs: {\n          settings: \"settings\"\n        },\n        standalone: false,\n        decls: 2,\n        vars: 2,\n        consts: [[3, \"formGroup\"], [\"formControlName\", \"settings\", 3, \"settings\"]],\n        template: function FormDatasourceComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementContainerStart(0, 0);\n            i0.\u0275\u0275element(1, \"classifieds-ui-form-datasource-form\", 1);\n            i0.\u0275\u0275elementContainerEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.controlContainer.control);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"settings\", ctx.settings);\n          }\n        },\n        dependencies: [i1$2.NgControlStatus, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.FormControlName, FormDatasourceFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return FormDatasourceComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// import { PanelContentHandler } from './handlers/panel-content.handler';\nconst snippetContentPluginFactory = handler => {\n  return new ContentPlugin({\n    id: 'snippet',\n    title: 'Snippet',\n    selectionComponent: undefined,\n    editorComponent: SnippetEditorComponent,\n    renderComponent: SnippetPaneRendererComponent,\n    handler\n  });\n};\nconst attributeContentPluginFactory = handler => {\n  return new ContentPlugin({\n    id: 'attribute',\n    title: 'Attribute',\n    selectionComponent: AttributeSelectorComponent,\n    editorComponent: AttributeEditorComponent,\n    renderComponent: AttributePaneRendererComponent,\n    handler\n  });\n};\nconst mediaContentPluginFactory = handler => {\n  return new ContentPlugin({\n    id: 'media',\n    title: 'Media',\n    selectionComponent: undefined,\n    editorComponent: MediaEditorComponent,\n    renderComponent: MediaPaneRendererComponent,\n    handler\n  });\n};\n/*export const panelContentPluginFactory = (handler: PanelContentHandler) => {\n  return new ContentPlugin<string>({\n    id: 'panel',\n    title: 'Panel',\n    selectionComponent: PanelSelectorComponent,\n    editorComponent: PanelEditorComponent,\n    renderComponent: undefined,\n    handler\n  })\n}*/\nconst restContentPluginFactory = handler => {\n  return new ContentPlugin({\n    id: 'rest',\n    title: 'REST',\n    selectionComponent: undefined,\n    editorComponent: RestEditorComponent,\n    renderComponent: RestPaneRendererComponent,\n    handler\n  });\n};\nconst sliceContentPluginFactory = handler => {\n  return new ContentPlugin({\n    id: 'slice',\n    title: 'Slice',\n    selectionComponent: undefined,\n    editorComponent: SliceEditorComponent,\n    renderComponent: undefined,\n    handler\n  });\n};\nconst pageContextFactory = resolver => {\n  const baseObject = {\n    path: ''\n  };\n  return new ContextPlugin({\n    id: \"page\",\n    name: 'page',\n    title: 'Page',\n    global: true,\n    group: 'pages',\n    baseObject,\n    resolver\n  });\n};\nconst restContextFactory = resolver => {\n  const baseObject = {\n    dataset: new Dataset()\n  };\n  return new ContextPlugin({\n    id: \"rest\",\n    name: 'rest',\n    title: 'Rest',\n    baseObject,\n    resolver,\n    editorComponent: ContextEditorComponent\n  });\n};\nconst formContextFactory = resolver => {\n  const baseObject = {\n    dataset: new Dataset()\n  };\n  return new ContextPlugin({\n    id: \"form\",\n    name: 'form',\n    title: 'Form',\n    baseObject,\n    resolver\n  });\n};\nconst paneStateContextFactory = resolver => {\n  const baseObject = new PaneState({\n    state: new AttributeValue()\n  });\n  return new ContextPlugin({\n    id: 'panestate',\n    name: 'panestate',\n    title: 'Pane State',\n    internal: true,\n    baseObject,\n    resolver\n  });\n};\nconst pageStateContextFactory = resolver => {\n  const baseObject = new PaneState({\n    state: new AttributeValue()\n  });\n  return new ContextPlugin({\n    id: 'pagestate',\n    name: 'pagestate',\n    title: 'Page State',\n    internal: true,\n    baseObject,\n    resolver,\n    editorComponent: PageStateEditorComponent\n  });\n};\nconst tabsStylePluginFactory = handler => {\n  return new StylePlugin({\n    id: 'tabs',\n    name: 'tabs',\n    title: 'Tabs',\n    handler,\n    editorComponent: TabsPanelEditorComponent,\n    renderComponent: TabsPanelRendererComponent\n  });\n};\nconst formParamPluginFactory = (tokenizerService, formService, pageBuilderFacade) => {\n  return new ParamPlugin({\n    id: 'form',\n    title: 'Form',\n    usedContexts: ({\n      param,\n      metadata\n    }) => of([`form__${param.mapping.value.substr(0, param.mapping.value.indexOf('.'))}`]),\n    evalParam: ({\n      param,\n      metadata\n    }) => {\n      const name = param.mapping.value.substr(0, param.mapping.value.indexOf('.'));\n      const value = param.mapping.value.substr(param.mapping.value.indexOf('.') + 1);\n      console.log(`form: ${name} || ${value}`);\n      return pageBuilderFacade.getForm$(name).pipe(take(1), map(form => form ? form : new PanelPageForm()), map(form => formService.serializeForm(form)), map(obj => tokenizerService.generateGenericTokens(obj)), tap(tokens => console.log(tokens)), map(tokens => {\n        if (!tokens.has(`.${value}`)) {\n          return '';\n        } else {\n          return tokenizerService.replaceTokens(`[.${value}]` /*`[.${value}.value]`*/, tokens);\n        }\n      }), tap(value => {\n        console.log('form value');\n        console.log(value);\n      }));\n    }\n  });\n};\nconst formResolvedContextPluginFactory = pageBuilderFacade => {\n  return new ResolvedContextPlugin({\n    id: 'form',\n    title: 'Form',\n    resolve: () => pageBuilderFacade.getFormNames$.pipe(switchMap(names => names.length === 0 ? of([]) : combineLatest(names.map(n => pageBuilderFacade.getForm$(n).pipe(map(f => [n, f]))))), map(v => v.reduce((p, [n, f]) => ({\n      ...p,\n      [`form__${n}`]: f\n    }), {}))),\n    resolveSingle: () => pageBuilderFacade.getFormNames$.pipe(switchMap(names => merge(...names.map(n => pageBuilderFacade.getForm$(n).pipe(map(f => [`form__${n}`, f]))))))\n  });\n};\nconst pagesFormBridgeFactory = formService => {\n  return new BridgeBuilderPlugin({\n    id: 'pages_form',\n    title: 'Pages Form',\n    build: () => {\n      PublicApiBridgeService.prototype['serializePageForm'] = form => {\n        return new Promise(res => {\n          res(formService.serializeForm(form));\n        });\n      };\n    }\n  });\n};\nconst formSerializationEntityCrudAdaptorPluginFactory = (paramsEvaluatorService, formService) => {\n  return new CrudAdaptorPlugin({\n    id: 'panelpageform_serialize',\n    title: 'Panelpageform Serialize',\n    create: ({\n      object\n    }) => of({\n      success: false,\n      entity: formService.serializeForm(new PanelPageForm(object))\n    }),\n    read: ({}) => of({\n      success: false\n    }),\n    update: ({}) => of({\n      success: false\n    }),\n    delete: ({}) => of({\n      success: false\n    })\n  });\n};\nconst formDatasourcePluginFactory = (attributeSerializer, pageBuilderFacade, formService) => {\n  return new DatasourcePlugin({\n    id: 'form',\n    title: 'Form',\n    editor: FormDatasourceComponent,\n    fetch: ({\n      settings\n    }) => of(new Dataset()).pipe(map(() => new FormDatasource(attributeSerializer.deserializeAsObject(settings))), switchMap(ds => pageBuilderFacade.getForm$(ds.name).pipe(map(form => [ds, form ? form : new PanelPageForm()]), defaultIfEmpty([ds, new PanelPageForm()]), take(1))), map(([ds, form]) => [ds, formService.serializeForm(form)]), map(([ds, json]) => new Dataset({\n      results: jpp.JSONPath({\n        path: `$.${ds.field}.*`,\n        json\n      })\n    }))),\n    getBindings: ({\n      settings,\n      metadata\n    }) => of([]).pipe(map(() => new FormDatasource(attributeSerializer.deserializeAsObject(settings))), map(ds => [new ContentBinding({\n      id: `form__${ds.name}`,\n      type: 'context'\n    })]))\n  });\n};\nconst createMatcher = panelPage => {\n  return url => {\n    if (('/' + url.map(u => u.path).join('/')).indexOf(panelPage.path) === 0) {\n      const pathLen = panelPage.path.substr(1).split('/').length;\n      return {\n        consumed: url,\n        posParams: url.reduce((p, c, index) => {\n          if (index === 0) {\n            return {\n              ...p,\n              panelPageId: new UrlSegment(panelPage.id, {})\n            };\n          } else if (index > pathLen - 1) {\n            return {\n              ...p,\n              [`arg${index - pathLen}`]: new UrlSegment(c.path, {})\n            };\n          } else {\n            return {\n              ...p\n            };\n          }\n        }, {})\n      };\n    } else {\n      return null;\n    }\n  };\n};\nconst createEditMatcher = panelPage => {\n  return url => {\n    if (('/' + url.map(u => u.path).join('/')).indexOf(panelPage.path) === 0 && url.map(u => u.path).join('/').indexOf('/manage') > -1) {\n      const pathLen = panelPage.path.substr(1).split('/').length;\n      return {\n        consumed: url,\n        posParams: url.reduce((p, c, index) => {\n          if (index === 0) {\n            return {\n              ...p,\n              panelPageId: new UrlSegment(panelPage.id, {})\n            };\n          } else {\n            return {\n              ...p\n            };\n          }\n        }, {})\n      };\n    } else {\n      return null;\n    }\n  };\n};\nlet GalleryEditorComponent = /*#__PURE__*/(() => {\n  class GalleryEditorComponent {\n    constructor() {}\n    ngOnInit() {}\n    static {\n      this.\u0275fac = function GalleryEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || GalleryEditorComponent)();\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: GalleryEditorComponent,\n        selectors: [[\"classifieds-ui-gallery-editor\"]],\n        standalone: false,\n        decls: 2,\n        vars: 0,\n        template: function GalleryEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"p\");\n            i0.\u0275\u0275text(1, \"gallery-editor works!\");\n            i0.\u0275\u0275elementEnd();\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return GalleryEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet DatasourceSelectorComponent = /*#__PURE__*/(() => {\n  class DatasourceSelectorComponent {\n    // private contentPlugin: ContentPlugin;\n    constructor(\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    bottomSheetRef, fb, dialog) {\n      this.bottomSheetRef = bottomSheetRef;\n      this.fb = fb;\n      this.dialog = dialog;\n      // this.contentPlugin = contentPlugins.find(p => p.name === 'datasource');\n    }\n    ngOnInit() {}\n    onItemSelect(datasource) {\n      /*(this.panelFormGroup.get('panes') as FormArray).push(this.fb.group({\n        contentPlugin: 'attribute',\n        name: new FormControl(''),\n        label: new FormControl(''),\n        settings: this.fb.array(this.handler.widgetSettings(widget).map(s => this.fb.group({\n          name: new FormControl(s.name, Validators.required),\n          type: new FormControl(s.type, Validators.required),\n          displayName: new FormControl(s.displayName, Validators.required),\n          value: new FormControl(s.value, Validators.required),\n          computedValue: new FormControl(s.computedValue, Validators.required),\n        })))\n      }));\n      const formArray = (this.panelFormGroup.get('panes') as FormArray);\n      const paneIndex = formArray.length - 1;\n      const pane = new Pane(formArray.at(paneIndex).value);\n      this.dialog.open(this.contentPlugin.editorComponent, { data: { panelFormGroup: this.panelFormGroup, pane, paneIndex } });\n      this.bottomSheetRef.dismiss();*/\n    }\n    static {\n      this.\u0275fac = function DatasourceSelectorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || DatasourceSelectorComponent)(i0.\u0275\u0275directiveInject(i1.MatBottomSheetRef), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1$1.MatDialog));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: DatasourceSelectorComponent,\n        selectors: [[\"classifieds-ui-datasource-selector\"]],\n        inputs: {\n          panelFormGroup: \"panelFormGroup\"\n        },\n        standalone: false,\n        decls: 4,\n        vars: 0,\n        consts: [[\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\"], [\"mat-line\", \"\"]],\n        template: function DatasourceSelectorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"mat-nav-list\")(1, \"a\", 0);\n            i0.\u0275\u0275listener(\"click\", function DatasourceSelectorComponent_Template_a_click_1_listener() {\n              return ctx.onItemSelect(\"rest\");\n            });\n            i0.\u0275\u0275elementStart(2, \"span\", 1);\n            i0.\u0275\u0275text(3, \"REST API\");\n            i0.\u0275\u0275elementEnd()()();\n          }\n        },\n        dependencies: [i6.MatLine, i7.MatNavList, i7.MatListItem],\n        encapsulation: 2\n      });\n    }\n  }\n  return DatasourceSelectorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet VirtualListPanelRendererComponent = /*#__PURE__*/(() => {\n  class VirtualListPanelRendererComponent {\n    constructor(tokenizerService, panelResolverService, styleResolverService, paneDatasource) {\n      this.tokenizerService = tokenizerService;\n      this.panelResolverService = panelResolverService;\n      this.styleResolverService = styleResolverService;\n      this.paneDatasource = paneDatasource;\n      this.settings = [];\n      this.panes = [];\n      this.originMappings = [];\n      this.resolvedContext = {};\n      /*this.trackByMapping = (index: number, pane: Pane): string => {\n        // Changing this to root lookup for now...\n        // return this.tokenizerService.replaceTokens(this.trackByTpl, this.tokenizerService.generateGenericTokens(pane.contexts[0].data));\n        console.log(`track by item: ${this.tokenizerService.replaceTokens(this.trackByTpl, this.tokenizerService.generateGenericTokens(pane.resolvedContext))}`);\n        const tokens = this.tokenizerService.generateGenericTokens(pane.resolvedContext);\n        const mapping = this.tokenizerService.replaceTokens(this.trackByTpl, tokens);\n        console.log(`track by: ${mapping} | name: ${tokens.get('._root.name')}`);\n        return mapping;\n      };*/\n    }\n    ngOnInit() {\n      this.paneDatasource.pageChange$.pipe(skip(1), switchMap(page => this.panelResolverService.resolvePanes({\n        panes: this.originPanes.map(p => new Pane({\n          ...p,\n          metadata: new Map([...(p.metadata ? p.metadata : []), ['page', page], ['limit', this.paneDatasource.pageSize]])\n        })),\n        contexts: this.contexts,\n        resolvedContext: this.resolvedContext\n      })), switchMap(({\n        resolvedPanes,\n        originMappings\n      }) => this.styleResolverService.alterResolvedPanes({\n        panel: this.panel,\n        resolvedPanes,\n        originMappings\n      }))).subscribe(({\n        resolvedPanes,\n        originMappings\n      }) => {\n        this.originMappings = originMappings;\n        this.paneDatasource.panes = resolvedPanes;\n      });\n      this.paneDatasource.panes = this.panes;\n      this.trackByTpl = '[._root.id]';\n    }\n    static {\n      this.\u0275fac = function VirtualListPanelRendererComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || VirtualListPanelRendererComponent)(i0.\u0275\u0275directiveInject(i2$1.TokenizerService), i0.\u0275\u0275directiveInject(i2$2.PanelResolverService), i0.\u0275\u0275directiveInject(i2$2.StyleResolverService), i0.\u0275\u0275directiveInject(i2$2.PaneDatasourceService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: VirtualListPanelRendererComponent,\n        selectors: [[\"classifieds-ui-virtual-list-panel-renderer\"]],\n        inputs: {\n          settings: \"settings\",\n          panes: \"panes\",\n          originPanes: \"originPanes\",\n          originMappings: \"originMappings\",\n          contexts: \"contexts\",\n          resolvedContext: \"resolvedContext\",\n          panel: \"panel\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([PaneDatasourceService])],\n        decls: 2,\n        vars: 2,\n        consts: [[1, \"panes-viewport\", 3, \"itemSize\"], [\"class\", \"pane-item\", 4, \"cdkVirtualFor\", \"cdkVirtualForOf\"], [1, \"pane-item\"], [3, \"pluginName\", \"settings\", \"contexts\", \"resolvedContext\"]],\n        template: function VirtualListPanelRendererComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"cdk-virtual-scroll-viewport\", 0);\n            i0.\u0275\u0275template(1, VirtualListPanelRendererComponent_div_1_Template, 2, 4, \"div\", 1);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"itemSize\", 75);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"cdkVirtualForOf\", ctx.paneDatasource);\n          }\n        },\n        dependencies: [i3$4.CdkFixedSizeVirtualScroll, i3$4.CdkVirtualForOf, i3$4.CdkVirtualScrollViewport, i7$2.RenderPaneComponent],\n        styles: [\"[_nghost-%COMP%]{position:relative}.panes-viewport[_ngcontent-%COMP%]{height:100%;width:100%}\"]\n      });\n    }\n  }\n  return VirtualListPanelRendererComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PageRouterLinkComponent = /*#__PURE__*/(() => {\n  class PageRouterLinkComponent {\n    constructor(router) {\n      this.router = router;\n    }\n    ngOnInit() {\n      //console.log(\"Here\");\n    }\n    onClick() {\n      this.router.navigateByUrl(this.href);\n    }\n    static {\n      this.\u0275fac = function PageRouterLinkComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PageRouterLinkComponent)(i0.\u0275\u0275directiveInject(i1$3.Router));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PageRouterLinkComponent,\n        selectors: [[\"classifieds-ui-page-router-link\"]],\n        inputs: {\n          href: \"href\",\n          text: \"text\"\n        },\n        standalone: false,\n        decls: 2,\n        vars: 1,\n        consts: [[3, \"click\"]],\n        template: function PageRouterLinkComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"a\", 0);\n            i0.\u0275\u0275listener(\"click\", function PageRouterLinkComponent_Template_a_click_0_listener() {\n              return ctx.onClick();\n            });\n            i0.\u0275\u0275text(1);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275textInterpolate(ctx.text);\n          }\n        },\n        styles: [\"[_nghost-%COMP%]:hover{cursor:pointer}\"]\n      });\n    }\n  }\n  return PageRouterLinkComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet CatchAllRouterComponent = /*#__PURE__*/(() => {\n  class CatchAllRouterComponent {\n    constructor(routerStore, router, es) {\n      this.routerStore = routerStore;\n      this.router = router;\n      this.panelPageListItemsService = es.getEntityCollectionService('PanelPageListItem');\n    }\n    ngOnInit() {\n      /*const { selectCurrentRoute } = getSelectors((state: any) => state.router);\n      console.log('routing page...');\n      this.routerStore.pipe(\n        select(selectCurrentRoute),\n        map(route => [(route as ActivatedRouteSnapshot).url.reduce<Array<string>>((p, c, i) => [ ...p, i === 0 ? `/${c.path}` : `${p[i - 1]}/${c.path}` ], []), route]),\n        map(([paths, route])  => ['path=' + paths.join('&path='), route]),\n        switchMap(([qs, route]) => this.panelPageListItemsService.getWithQuery(qs).pipe(\n          catchError(e => of<Array<PanelPageListItem>>([])),\n          tap(pages => console.log(pages)),\n          map(pages => [pages.reduce<PanelPageListItem>((p, c) => p === undefined ? c : p.path.split('/').length < c.path.split('/').length ? c : p , undefined), route])\n        )),\n        take(1)\n      ).subscribe(([panelPage, route]) => {\n        if(panelPage) {\n          const argPath = (route as ActivatedRouteSnapshot).url.map(s => s.path).slice(panelPage.path.split('/').length - 1).join('/');\n          this.router.navigateByUrl(`/pages/panelpage/${panelPage.id}/${argPath}?${qs.stringify(route.queryParams)}`, {skipLocationChange: true, queryParams: { ...((route as ActivatedRouteSnapshot).queryParams) }, fragment: (route as ActivatedRouteSnapshot).fragment });\n        }\n      });*/\n    }\n    static {\n      this.\u0275fac = function CatchAllRouterComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CatchAllRouterComponent)(i0.\u0275\u0275directiveInject(i3$3.Store), i0.\u0275\u0275directiveInject(i1$3.Router), i0.\u0275\u0275directiveInject(i4$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: CatchAllRouterComponent,\n        selectors: [[\"classifieds-ui-catch-all-router\"]],\n        standalone: false,\n        decls: 2,\n        vars: 0,\n        template: function CatchAllRouterComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"p\");\n            i0.\u0275\u0275text(1, \"Page Not Found\");\n            i0.\u0275\u0275elementEnd();\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return CatchAllRouterComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst PAGES_SETTINGS = /*#__PURE__*/new InjectionToken('PagesSettings');\nclass PagesSettings {\n  constructor(data) {\n    this.disableRouting = false;\n    if (data) {\n      this.disableRouting = data.disableRouting;\n    }\n  }\n}\nlet CatchAllGuard = /*#__PURE__*/(() => {\n  class CatchAllGuard {\n    constructor(siteName, pagesSettings, router, es) {\n      this.siteName = siteName;\n      this.pagesSettings = pagesSettings;\n      this.router = router;\n      this.routesLoaded = false;\n      this.panelPageListItemsService = es.getEntityCollectionService('PanelPageListItem');\n    }\n    canActivate(route, state) {\n      if (this.pagesSettings.disableRouting) {\n        return new Promise(res => res(true));\n      } else {\n        return new Promise(res => {\n          let url = state.url;\n          if (url.indexOf('?') !== -1) {\n            url = state.url.substr(0, url.indexOf('?'));\n          }\n          const matchPathQuery = 'path=' + url.substr(1).split('/').reduce((p, c, i) => [...p, i === 0 ? `/${c}` : `${p[i - 1]}/${c}`], []).map(p => this.encodePathComponent(p)).join('&path=') + `&site=${encodeURIComponent(`{\"term\":{\"site.keyword\":{\"value\":\"${this.siteName}\"}}}`)}`;\n          setTimeout(() => {});\n          forkJoin([iif(() => !this.routesLoaded, this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{\"term\":{\"site.keyword\":{\"value\":\"${this.siteName}\"}}}`)}&path={\"wildcard\":{\"path.keyword\":{\"value\":\"*\"}}}`).pipe(tap(() => console.log('loaded page list items')), map(pp => pp.filter(p => p.path !== undefined && p.path !== '')), map(pp => pp.map(o => new PanelPage(o)).sort((a, b) => {\n            if (a.path.split('/').length === b.path.split('/').length) {\n              return a.path.split('/')[a.path.split('/').length - 1] > b.path.split('/')[b.path.split('/').length - 1] ? -1 : 1;\n            }\n            return a.path.split('/').length > b.path.split('/').length ? -1 : 1;\n          })), tap(pp => pp.sort((a, b) => a.path.length > b.path.length ? 1 : -1)), tap(pp => {\n            // const target = (this.router.config[0] as any)._loadedConfig.routes;\n            const target = this.router.config;\n            pp.forEach(p => {\n              target.unshift({\n                matcher: createEditMatcher(p),\n                component: EditPanelPageComponent\n              });\n              target.unshift({\n                matcher: createMatcher(p),\n                component: PanelPageRouterComponent,\n                data: {\n                  panelPageListItem: p\n                }\n              });\n              console.log(`panels matcher: ${p.path}`);\n            });\n            this.routesLoaded = true;\n          }), map(() => [])), of([])), this.panelPageListItemsService.getWithQuery(matchPathQuery).pipe(catchError(e => {\n            return of([]);\n          }), tap(() => console.log('loaded specific matched')), map(pages => pages.reduce((p, c) => p === undefined ? c : p.path.split('/').length < c.path.split('/').length ? c : p, undefined)), map(panelPage => {\n            const argPath = state.url.substr(1).split('/').slice(panelPage.path.split('/').length - 1).join('/');\n            return [panelPage, argPath];\n          }))]).pipe(map(([pp, [panelPage, argPath]]) => [panelPage, argPath])).subscribe(([panelPage, argPath]) => {\n            const targetUrl = `${panelPage.path}${argPath === '' ? '' : `/${argPath}`}?${qs.stringify(route.queryParams)}`;\n            const urlTree = this.router.parseUrl(targetUrl);\n            console.log(`panels garud navigate: ${panelPage.path}${argPath === '' ? '' : `/${argPath}`}?${qs.stringify(route.queryParams)}`);\n            // this.router.navigateByUrl(`${panelPage.path}${argPath === '' ? '' : `/${argPath}`}?${qs.stringify(route.queryParams)}`, /* Removed unsupported properties by Angular migration: queryParams, fragment. */ {});\n            // res(true);\n            res(urlTree);\n          });\n        });\n      }\n    }\n    encodePathComponent(v) {\n      return `{\"term\":{\"path.keyword\":{\"value\":\"${v}\"}}}`;\n    }\n    static {\n      this.\u0275fac = function CatchAllGuard_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CatchAllGuard)(i0.\u0275\u0275inject(SITE_NAME), i0.\u0275\u0275inject(PAGES_SETTINGS), i0.\u0275\u0275inject(i1$3.Router), i0.\u0275\u0275inject(i4$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: CatchAllGuard,\n        factory: CatchAllGuard.\u0275fac\n      });\n    }\n  }\n  return CatchAllGuard;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PageContextResolver = /*#__PURE__*/(() => {\n  class PageContextResolver {\n    constructor(pageBuilderFacade) {\n      this.pageBuilderFacade = pageBuilderFacade;\n    }\n    resolve(ctx, data) {\n      return this.pageBuilderFacade.getPageInfo$;\n      /*return this.pageBuilderFacade.getPageInfo$.pipe(\n        take(1)\n      );*/\n    }\n    static {\n      this.\u0275fac = function PageContextResolver_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PageContextResolver)(i0.\u0275\u0275inject(i2$2.PageBuilderFacade));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PageContextResolver,\n        factory: PageContextResolver.\u0275fac\n      });\n    }\n  }\n  return PageContextResolver;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet RestContextResolver = /*#__PURE__*/(() => {\n  class RestContextResolver {\n    constructor(pageBuilderFacade, store, urlGeneratorService, routerStore) {\n      this.pageBuilderFacade = pageBuilderFacade;\n      this.store = store;\n      this.urlGeneratorService = urlGeneratorService;\n      this.routerStore = routerStore;\n    }\n    resolve(context, data) {\n      const rest = new Rest(data);\n      return (rest.params && Array.isArray(rest.params) && rest.params.length > 0 ? this.changePipeline(rest.params) : of([])).pipe(switchMap(() => rest.params && Array.isArray(rest.params) && rest.params.length > 0 ? this.rebuildParams(rest.params) : of([])), map(params => [params, new Map([['tag', uuid.v4()]])]), switchMap(([params, metadata]) => this.urlGeneratorService.getUrl(rest.url, params, metadata).pipe(map(url => [url, metadata]))), switchMap(([url, metadata]) => {\n        this.pageBuilderFacade.loadRestData(`${metadata.get('tag')}`, new Rest({\n          ...rest,\n          url\n        }));\n        return this.store.pipe(select(selectDataset(`${metadata.get('tag')}`)), filter(dataset => dataset !== undefined), map(dataset => dataset.results), take(1));\n      }));\n      /*this.urlGeneratorService.generateUrl(rest.url, rest.params, metadata).subscribe(url => {\n        this.store.pipe(\n          select(selectDataset(`${metadata.get('tag')}`)),\n          filter(dataset => dataset !== undefined),\n          take(1)\n        ).subscribe(dataset => {\n          subject.next(dataset.results);\n          subject.complete();\n        });\n        this.pageBuilderFacade.loadRestData(`${metadata.get('tag')}`, new Rest({ ...rest, url }));\n      });*/\n      //return subject;\n    }\n    changePipeline(params) {\n      const pipeline = params.reduce((p, c) => {\n        switch (c.mapping.type) {\n          case 'route':\n            return [...p, this.routeArgChange(c.mapping.value)];\n          case 'querystring':\n            return [...p, this.queryStringChange(c.mapping.value)];\n          case 'form':\n            return [...p, this.formChange(c.mapping.value)];\n          default:\n            return [...p];\n        }\n      }, []);\n      return merge(...pipeline);\n    }\n    routeArgChange(arg) {\n      //const sub = new Subject<undefined>();\n      //return sub;\n      return this.pageBuilderFacade.getPageInfo$.pipe(map(() => undefined));\n      /*const { selectCurrentRoute } = getSelectors((state: any) => state.router);\n      return this.routerStore.pipe(\n        select(selectCurrentRoute),\n        map(() => undefined)\n      );*/\n    }\n    queryStringChange(name) {\n      const sub = new Subject();\n      return sub;\n    }\n    formChange(query) {\n      const [name, value] = query.split('.', 2);\n      return this.pageBuilderFacade.getForm$(name).pipe(tap(() => console.log('form change')), map(() => undefined));\n    }\n    rebuildParams(params) {\n      return this.pageBuilderFacade.getPageInfo$.pipe(map(pageInfo => pageInfo ? params : this.testParams(params)));\n    }\n    testParams(params) {\n      const newParams = [];\n      const len = params.length;\n      for (let i = 0; i < len; i++) {\n        if (params[i].mapping.type === 'route') {\n          newParams.push(new Param({\n            ...params[i],\n            mapping: {\n              type: 'static',\n              value: params[i].mapping.testValue,\n              context: undefined,\n              testValue: undefined\n            }\n          }));\n        } else {\n          newParams.push(new Param(params[i]));\n        }\n      }\n      return newParams;\n    }\n    static {\n      this.\u0275fac = function RestContextResolver_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RestContextResolver)(i0.\u0275\u0275inject(i2$2.PageBuilderFacade), i0.\u0275\u0275inject(i3$3.Store), i0.\u0275\u0275inject(i5$3.UrlGeneratorService), i0.\u0275\u0275inject(i3$3.Store));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: RestContextResolver,\n        factory: RestContextResolver.\u0275fac\n      });\n    }\n  }\n  return RestContextResolver;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet FormContextResolver = /*#__PURE__*/(() => {\n  class FormContextResolver {\n    constructor(pageBuilderFacade) {\n      this.pageBuilderFacade = pageBuilderFacade;\n    }\n    resolve(ctx, data) {\n      return this.pageBuilderFacade.getForm$(data);\n      /*return this.pageBuilderFacade.getPageInfo$.pipe(\n        take(1)\n      );*/\n    }\n    static {\n      this.\u0275fac = function FormContextResolver_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FormContextResolver)(i0.\u0275\u0275inject(i2$2.PageBuilderFacade));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: FormContextResolver,\n        factory: FormContextResolver.\u0275fac\n      });\n    }\n  }\n  return FormContextResolver;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TablePanelRendererComponent = /*#__PURE__*/(() => {\n  class TablePanelRendererComponent extends PanelStyleRendererBaseComponent {\n    get displayedColumns() {\n      const targetIndex = this.panes.findIndex(p => p.contexts.findIndex(c => c.name === '_root') > -1);\n      return targetIndex > -1 ? Object.keys(this.panes[targetIndex].contexts.find(c => c.name === '_root').data) : [];\n    }\n    constructor(tokenizerService, paneDatasource) {\n      super();\n      this.tokenizerService = tokenizerService;\n      this.paneDatasource = paneDatasource;\n      this.trackByMapping = (index, pane) => {\n        return this.tokenizerService.replaceTokens(this.trackByTpl, this.tokenizerService.generateGenericTokens(pane.contexts[0].data));\n      };\n    }\n    ngOnInit() {\n      console.log(this.panes);\n      this.paneDatasource.panes = this.panes;\n    }\n    rowData(name, pane) {\n      console.log(`name: ${name}`);\n      return `${pane.contexts.find(c => c.name === '_root').data[name]}`;\n    }\n    static {\n      this.\u0275fac = function TablePanelRendererComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || TablePanelRendererComponent)(i0.\u0275\u0275directiveInject(i2$1.TokenizerService), i0.\u0275\u0275directiveInject(i2$2.PaneDatasourceService));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: TablePanelRendererComponent,\n        selectors: [[\"lib-table-panel-renderer\"]],\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([PaneDatasourceService]), i0.\u0275\u0275InheritDefinitionFeature],\n        decls: 4,\n        vars: 4,\n        consts: [[\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [3, \"matColumnDef\", 4, \"ngFor\", \"ngForOf\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [3, \"matColumnDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n        template: function TablePanelRendererComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"table\", 0);\n            i0.\u0275\u0275template(1, TablePanelRendererComponent_ng_container_1_Template, 3, 1, \"ng-container\", 1)(2, TablePanelRendererComponent_tr_2_Template, 1, 0, \"tr\", 2)(3, TablePanelRendererComponent_tr_3_Template, 1, 0, \"tr\", 3);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"dataSource\", ctx.paneDatasource);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngForOf\", ctx.displayedColumns);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"matHeaderRowDef\", ctx.displayedColumns);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"matRowDefColumns\", ctx.displayedColumns);\n          }\n        },\n        dependencies: [i3.NgForOf, i4$4.MatSort, i4$4.MatSortHeader, i5$5.MatTable, i5$5.MatHeaderCellDef, i5$5.MatHeaderRowDef, i5$5.MatColumnDef, i5$5.MatCellDef, i5$5.MatRowDef, i5$5.MatHeaderCell, i5$5.MatCell, i5$5.MatHeaderRow, i5$5.MatRow],\n        encapsulation: 2\n      });\n    }\n  }\n  return TablePanelRendererComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelContentHandler = /*#__PURE__*/(() => {\n  class PanelContentHandler {\n    constructor(attributeSerializer) {\n      this.attributeSerializer = attributeSerializer;\n    }\n    handleFile(file) {\n      return of();\n    }\n    handlesType(type) {\n      return false;\n    }\n    implementsRendererOverride() {\n      return false;\n    }\n    hasRendererOverride(settings) {\n      return of(false);\n    }\n    isDynamic(settings) {\n      return false;\n    }\n    isData(settings) {\n      return false;\n    }\n    buildDynamicItems(settings, metadata) {\n      return of([]);\n    }\n    fetchDynamicData(settings, metadata) {\n      return of(new Dataset());\n    }\n    getBindings(settings, type) {\n      return of([]);\n    }\n    toObject(settings) {\n      return of(this.attributeSerializer.deserializeAsObject(settings));\n    }\n    buildSettings(panelPage) {\n      return this.attributeSerializer.serialize(panelPage, 'root').attributes;\n    }\n    fromPanes(panesAsSettings) {\n      return panesAsSettings.map(p => new Pane(this.attributeSerializer.deserialize(p)));\n    }\n    wrapPanel(panes) {\n      return new Panel({\n        stylePlugin: undefined,\n        settings: [],\n        panes: panes,\n        columnSetting: new LayoutSetting()\n      });\n    }\n    stateDefinition(settings) {\n      return of({});\n    }\n    editorOptions(settings) {\n      return of(new ContentPluginEditorOptions());\n    }\n    static {\n      this.\u0275fac = function PanelContentHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelContentHandler)(i0.\u0275\u0275inject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelContentHandler,\n        factory: PanelContentHandler.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PanelContentHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TabsStyleHandler = /*#__PURE__*/(() => {\n  class TabsStyleHandler {\n    constructor(panelHandler, attributeSerializer, panelsLoaderService, panelsSelectorService) {\n      this.panelHandler = panelHandler;\n      this.attributeSerializer = attributeSerializer;\n      this.panelsLoaderService = panelsLoaderService;\n      this.panelsSelectorService = panelsSelectorService;\n    }\n    alterResolvedPanes({\n      settings,\n      resolvedPanes,\n      originMappings /*, resolvedContexts */\n    }) {\n      // this.panelHandler.toObject();\n      const obj = this.attributeSerializer.deserialize(new AttributeValue({\n        name: '',\n        displayName: '',\n        computedValue: '',\n        type: AttributeTypes.Complex,\n        value: '',\n        intValue: 0,\n        attributes: settings\n      }));\n      // console.log('Deserialized settings:');\n      const selectors = obj && obj.labels !== undefined && Array.isArray(obj.labels) ? obj.labels.map(l => new PanelPageSelector(l.mapping)) : [];\n      // console.log(selectors);\n      let flatSelectors = [];\n      if (selectors.length === 0) {\n        // Short circuit - no need to manipulate at this point - path of least resistence? :/\n        // We could try to dynamically create the titles but I think that is more trouble than its worth.\n        return of({\n          resolvedPanes,\n          originMappings /*, resolvedContexts */\n        });\n      } else {\n        // attempt rebuild to support dynamic panes automatically like those generated from rest.\n        if (resolvedPanes.length !== selectors.length) {\n          flatSelectors = resolvedPanes.map((_, i) => new PanelPageSelector({\n            ...(i < selectors.length ? selectors[i] : selectors[selectors.length - 1]),\n            pane: i\n          })).map(s => {\n            // console.log(`flat selector for ${index}`);\n            //console.log(this.flattenSelector(s));\n            return this.flattenSelector(s);\n            // We don't have access to page. So this needs to be a type of partial reduction.\n            // partial, selection - reducetion?\n            // this.panelsLoaderService.reducePage(new PanelPage({ panels:  }));\n          });\n        } else {\n          flatSelectors = selectors.map(s => {\n            // console.log(`flat selector for ${index}`);\n            //console.log(this.flattenSelector(s));\n            return this.flattenSelector(s);\n            // We don't have access to page. So this needs to be a type of partial reduction.\n            // partial, selection - reducetion?\n            // this.panelsLoaderService.reducePage(new PanelPage({ panels:  }));\n          });\n        }\n      }\n      /*forkJoin(resolvedPanes.map((p, index) => forkJoin(this.panelsLoaderService.reducePanes([], p, index)))).subscribe(v => {\n        console.log('reduced panes');\n        console.log(v);\n      });*/\n      // is - 0 right?\n      return forkJoin(resolvedPanes.map((c2, i2) => {\n        // console.log('Inside reduce: ' + i2);\n        // console.log(c2);\n        const reduced = this.panelsLoaderService.reducePanes([], c2, 0);\n        // console.log(reduced);\n        // console.log('reduced length ' + reduced.length);\n        return reduced[0]; // Need to handle none nested content since reducePanes only fills in nested pages otherwise empty array\n      })).pipe(map(v => v.reduce((p2, [_, pp]) => [...p2, pp], [])), map(v => {\n        // const flatSelectorsMock = [ [0, 0,    1, 1], [0, 1,    1, 1] ]; // this is right... creates page with only title pane.\n        // const flatSelectorsMock2 = [ [0, 0,   0, -1], [0, 1,   0, -1] ]; // this is right... creates page without selected target cinluding tab content only. \n        const withTarget = flatSelectors.map(s => this.selectWithTarget(s));\n        const withoutTarget = flatSelectors.map(s => this.selectWithoutTarget(s));\n        const rebuilt = withTarget.map((s, i) => this.panelsSelectorService.rebuildPage(v[flatSelectors[i][0]], s.slice(1)));\n        const rebuilt2 = withoutTarget.map((s, i) => this.panelsSelectorService.rebuildPage(v[flatSelectors[i][0]], s.slice(1)));\n        const rebuildResolvedPanes = [];\n        const len = resolvedPanes.length;\n        for (let i = 0; i < len; i++) {\n          rebuildResolvedPanes.push(new Pane({\n            ...resolvedPanes[i],\n            settings: this.panelHandler.buildSettings(rebuilt[i])\n          }));\n          rebuildResolvedPanes.push(new Pane({\n            ...resolvedPanes[i],\n            settings: this.panelHandler.buildSettings(rebuilt2[i])\n          }));\n        }\n        return {\n          resolvedPanes: rebuildResolvedPanes,\n          originMappings /*, resolvedContexts */\n        };\n      })); /*.subscribe(v => {\n           console.log(`reduced panes 2`);\n           console.log(flatSelectors);\n           // console.log(v);\n           // Something is needed to convert the flat selectors to the selectors combatible with the panels selector service.\n           // Right now just hard coding for proof of concept instead of implmenting that right now.\n           const flatSelectorsMock = [ [0, 0,    1, 1], [0, 1,    1, 1] ]; // this is right... creates page with only title pane.\n           const flatSelectorsMock2 = [ [0, 0,   0, -1], [0, 1,   0, -1] ]; // this is right... creates page without selected target cinluding tab content only.\n           // The selector settings need to be stored relative to the panel not root page.\n           // The original plan was to allow any pane to selected. However, that comes with way to issues.\n           // Instead all we really need to do is allow any pane within the panel to be selected. Forget about selecting outside panes. Not worth it.\n           // In this case I know that the first two selectors can be tossed out since we are already inside there with the exception of matching the pane index 1.\n           const rebuilt = flatSelectorsMock.map((s, i) => this.panelsSelectorService.rebuildPage(v[s[1]], s.slice(2)));\n           const rebuilt2 = flatSelectorsMock2.map((s, i) => this.panelsSelectorService.rebuildPage(v[s[1]], s.slice(2)));\n           console.log(rebuilt);\n           console.log(rebuilt2);\n             const rebuildResolvedPanes: Array<Pane> = [];\n           const len = resolvedPanes.length;\n           for(let i = 0; i < len; i++) {\n           rebuildResolvedPanes.push(new Pane({ ...resolvedPanes[i], settings: this.panelHandler.buildSettings(rebuilt[i]) }));\n           rebuildResolvedPanes.push(new Pane({ ...resolvedPanes[i], settings: this.panelHandler.buildSettings(rebuilt2[i]) }));\n           }\n           // I think now we just need to serialize the nested pages back into the origin pane, right?\n           // We should end up with 2 catgories containing 2 panes in an array.\n           // cat = title & cat = content\n           // This is a mass deviation from how this works. Before we were working with arrays. Now we are\n           // changing the interface to a map with separate categories?\n           // or do we keep the existing interface and use a map for \"extra\", categories panes instead?\n           // This is a type of extract and categorize.\n           // Perhaps adding a map but keeping the existing interface is the way to go... hmm\n           // or we could just leave it as a array and skip out categoizations for now.... hmmm\n           // Where the renderer component would be responsible for knowing that evens [0,2,4] are titles. odds [1,3,5] as content\n           // I'm starting to lean towards keeping the signature the same as an array.\n           // Relying on the renderer component to know about how to handle this.\n           // which makes sense since the handler is directly coupled to the renderer.\n           // In that case we return 4 panes in the array instead of 2. It would ALWAYS be doubled to include title selections.\n           });*/\n      // For now use the first pane inside a nested panel as the label. -- this is just a proof of concept at the moment\n      console.log('TabsStyleHandler::alterResolvedPanes');\n      console.log(resolvedPanes);\n      console.log(originMappings);\n      //console.log(resolvedContexts);\n      // @todo: support linked pages\n      /*const nestedPages$: Array<Observable<[Pane, PanelPage]>> = resolvedPanes.map(p => p.contentPlugin === 'panel' ? this.panelHandler.toObject(p.settings).pipe(map<PanelPage, [Pane, PanelPage]>(page => [p, page])) : undefined).filter(p => p !== undefined);\n      return forkJoin(nestedPages$).pipe(\n        map(pages => pages.reduce((p, [cp, c]) => [\n          ...p,\n          new Pane({ ...cp, settings: this.panelHandler.buildSettings(new PanelPage({ ...c, panels: [ new Panel({ ...c.panels[0], panes: [ new Pane({ ...c.panels[0].panes[0] }) ] }) ] })) }),\n          new Pane({ ...cp, settings: this.panelHandler.buildSettings(new PanelPage({ ...c, panels: [ ...c.panels.map((p2, i) => i !== 0 ? p2 : new Panel({ ...p2, panes: p2.panes.map(p3 => new Pane(p3)).filter((_, i2) => i2 !== 0) })) ] })) })\n        ], [])),\n        tap(rebuiltPanes => {\n          console.log('Rebuilt Panes');\n          console.log(rebuiltPanes);\n        }),\n        map(rebuiltPanes => [ rebuiltPanes, originMappings, resolvedContexts])\n      );*/\n      return of({\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      });\n    }\n    stateDefinition(settings) {\n      return of({});\n    }\n    flattenSelector(selector) {\n      const flat = [];\n      if (selector.panel !== undefined && selector.panel !== null) {\n        flat.push(selector.panel);\n      }\n      if (selector.pane !== undefined && selector.pane !== null) {\n        flat.push(selector.pane);\n      }\n      if (selector.nested !== undefined && selector.nested !== null && typeof selector.nested === 'object') {\n        this.flattenSelector(selector.nested).forEach(i => flat.push(i));\n      }\n      return flat;\n    }\n    selectWithTarget(s) {\n      return s.map(v => v + 1);\n    }\n    selectWithoutTarget(s) {\n      return s.map((v, i) => i === s.length - 1 ? (v + 1) * -1 : 0);\n    }\n    static {\n      this.\u0275fac = function TabsStyleHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || TabsStyleHandler)(i0.\u0275\u0275inject(PanelContentHandler), i0.\u0275\u0275inject(i2.AttributeSerializerService), i0.\u0275\u0275inject(i2$2.PanelsLoaderService), i0.\u0275\u0275inject(i2$2.PanelsSelectorService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: TabsStyleHandler,\n        factory: TabsStyleHandler.\u0275fac\n      });\n    }\n  }\n  return TabsStyleHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PageStateContextResolver = /*#__PURE__*/(() => {\n  class PageStateContextResolver {\n    get emptyPaneState() {\n      return new PaneState({\n        state: this.attributeSerializer.serialize({\n          displayAssociatedPane: ''\n        }, 'root')\n      });\n    }\n    get entities$() {\n      return this.entityServices.getEntityCollectionService('PanelPageState').entities$.pipe(tap(e => {\n        console.log('entities in store');\n        console.log(e);\n      }));\n    }\n    get panelPage$() {\n      return combineLatest([this.pageBuilderFacade.getPageInfo$, this.entityServices.getEntityCollectionService('PanelPage').entities$]).pipe(\n      // map(([p, entities]) => [this.fakePageInfo , entities]),\n      map(([p, entities]) => p && p.id !== undefined && p.id !== '' && p.id !== null ? entities.findIndex(e => e.id === p.id) !== -1 ? entities.find(e => e.id === p.id) : undefined : undefined));\n    }\n    get fakePageInfo() {\n      return new PanelPageStateSlice({\n        id: '948d6e7b-12ab-11ec-8ecd-661fdd19e6df',\n        path: '',\n        realPath: '',\n        args: new Map()\n      });\n    }\n    constructor(entityServices, pageBuilderFacade, panelStateConverterService, attributeSerializer) {\n      this.entityServices = entityServices;\n      this.pageBuilderFacade = pageBuilderFacade;\n      this.panelStateConverterService = panelStateConverterService;\n      this.attributeSerializer = attributeSerializer;\n      this.resolverCache$ = new Map();\n    }\n    resolve(ctx, data) {\n      const cacheKey = data && data.selectionMethod && data.selectionMethod.length !== 0 && data.id && data.id !== null && data.id !== '' ? `ps[id=${data.id}]${data.selectionMethod.map(i => `${i}`).join('')}` : undefined;\n      if (cacheKey && this.resolverCache$.has(cacheKey)) {\n        return this.resolverCache$.get(cacheKey);\n      } else {\n        const resolver = this.resolve$(ctx, data);\n        if (cacheKey) {\n          this.resolverCache$.set(cacheKey, resolver);\n        }\n        return resolver;\n      }\n    }\n    resolve$(ctx, data) {\n      return combineLatest([this.panelPage$, this.entities$]).pipe(map(([pp, entities]) => [pp, pp && entities.findIndex(e => e.id === pp.id) !== -1 ? entities.find(e => e.id === pp.id) : new PanelPageState()]), switchMap(([pp, ps]) => this.pageBuilderFacade.getSelectionPath$.pipe(map(selectionPath => data && data.selectionPath ? data.selectionPath : selectionPath),\n      // temp hard code to see if context change is triggered\n      tap(selectionPath => selectionPath.join(',')), map(s => s.map((index, i) => `${(i + 1) % 2 === 0 ? 'panes' : (i === 0 ? '' : 'nestedPage.') + 'panels'}[${index}]`)), map(s => s.length === 0 ? undefined : '$.' + s.join('.')), map(s => [pp, ps, s]))), tap(([pp, ps, query]) => {\n        console.log('page state context resolver');\n        console.log(pp);\n        console.log('query: ' + query);\n      }), switchMap(([pp, ps, query]) => iif(() => !!pp && !ps, this.panelStateConverterService.convertPageToState(pp).pipe(map(state => new PanelPageState({\n        ...state,\n        panels: state.panels.map(p => new PanelState({\n          ...p,\n          panes: p.panes.map(p2 => new PaneState({\n            ...p2,\n            state: this.attributeSerializer.serialize({\n              displayAssociatedPane: 'y'\n            }, 'root')\n          }))\n        }))\n      })), map(state => [state, query])), of([ps /*? ps : this.emptyPaneState*/, query]))), tap(([state, _]) => {\n        console.log('rebuilt state from realtime page');\n        console.log(state);\n      }), map(([json, path]) => path ? jpp.JSONPath({\n        path,\n        json\n      }) : this.emptyPaneState), map(m => m && Array.isArray(m) && m.length !== 0 ? m[0] : this.emptyPaneState), tap(m => {\n        console.log('json path match');\n        console.log(m);\n      }), map(ps => this.attributeSerializer.deserializeAsObject(ps.state)), /*map(m => new PaneState({ ...m[0], state: this.attributeSerializer.serialize({ displayAppJs: false }, 'root') })),*/\n      tap(s => {\n        console.log('final state');\n        console.log(s);\n      }));\n    }\n    static {\n      this.\u0275fac = function PageStateContextResolver_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PageStateContextResolver)(i0.\u0275\u0275inject(i4$3.EntityServices), i0.\u0275\u0275inject(i2$2.PageBuilderFacade), i0.\u0275\u0275inject(i2$2.PanelStateConverterService), i0.\u0275\u0275inject(i2.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PageStateContextResolver,\n        factory: PageStateContextResolver.\u0275fac\n      });\n    }\n  }\n  return PageStateContextResolver;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelSelectorComponent = /*#__PURE__*/(() => {\n  class PanelSelectorComponent {\n    // private contentPlugin: ContentPlugin;\n    constructor(\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    siteName, bottomSheetRef, handler, dialog, fb, es) {\n      this.siteName = siteName;\n      this.bottomSheetRef = bottomSheetRef;\n      this.handler = handler;\n      this.dialog = dialog;\n      this.fb = fb;\n      this.selectedIndex = 0;\n      this.panelPagesService = es.getEntityCollectionService('PanelPage');\n      this.panelPageListItemsService = es.getEntityCollectionService('PanelPageListItem');\n      // this.contentPlugin = contentPlugins.find(p => p.name === 'panel');\n    }\n    ngOnInit() {}\n    onNewSelect() {\n      const name = uuid.v4();\n      const newPanel = new PanelPage({\n        id: undefined,\n        layoutType: 'grid',\n        displayType: 'page',\n        site: this.siteName,\n        gridItems: [],\n        panels: [],\n        layoutSetting: new LayoutSetting(),\n        rowSettings: []\n      });\n      this.panelFormGroup.get('panes').push(this.fb.group({\n        contentPlugin: 'panel',\n        name: name,\n        label: name,\n        rule: new UntypedFormControl(''),\n        settings: this.fb.array(this.handler.buildSettings(newPanel).map(s => this.convertToGroup(s)))\n      }));\n      this.bottomSheetRef.dismiss();\n    }\n    onLinkSelect() {\n      this.selectedIndex = 1;\n      this.panels$ = this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(this.siteName)}`);\n    }\n    onItemSelect(panel) {\n      const name = uuid.v4();\n      //this.panelPagesService.getByKey(panel).subscribe(p => {\n      //this.dialog.open(this.contentPlugin.editorComponent, { data: { panelFormGroup: this.panelFormGroup, pane: undefined, paneIndex: undefined, panelPage: p } });\n      this.panelFormGroup.get('panes').push(this.fb.group({\n        contentPlugin: 'panel',\n        name: name,\n        label: name,\n        rule: new UntypedFormControl(''),\n        linkedPageId: new UntypedFormControl(panel, Validators.required),\n        locked: new UntypedFormControl(true),\n        // settings: this.fb.array(this.handler.buildSettings(p).map(s => this.convertToGroup(s)))\n        settings: this.fb.array([])\n      }));\n      this.bottomSheetRef.dismiss();\n      //});\n    }\n    convertToGroup(setting) {\n      const fg = this.fb.group({\n        name: new UntypedFormControl(setting.name, Validators.required),\n        type: new UntypedFormControl(setting.type, Validators.required),\n        displayName: new UntypedFormControl(setting.displayName, Validators.required),\n        value: new UntypedFormControl(setting.value, Validators.required),\n        computedValue: new UntypedFormControl(setting.value, Validators.required),\n        attributes: new UntypedFormArray([])\n      });\n      if (setting.attributes && setting.attributes.length > 0) {\n        setting.attributes.forEach(s => {\n          fg.get('attributes').push(this.convertToGroup(s));\n        });\n      }\n      return fg;\n    }\n    static {\n      this.\u0275fac = function PanelSelectorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelSelectorComponent)(i0.\u0275\u0275directiveInject(SITE_NAME), i0.\u0275\u0275directiveInject(i1.MatBottomSheetRef), i0.\u0275\u0275directiveInject(i2$2.PanelContentHandler), i0.\u0275\u0275directiveInject(i1$1.MatDialog), i0.\u0275\u0275directiveInject(i1$2.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i4$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PanelSelectorComponent,\n        selectors: [[\"classifieds-ui-panel-selector\"]],\n        inputs: {\n          panelFormGroup: \"panelFormGroup\"\n        },\n        standalone: false,\n        decls: 9,\n        vars: 1,\n        consts: [[\"mat-align-tabs\", \"start\", 3, \"selectedIndex\"], [\"label\", \"Type\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\"], [\"label\", \"Search\"], [\"matTabContent\", \"\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-line\", \"\"]],\n        template: function PanelSelectorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"mat-tab-group\", 0)(1, \"mat-tab\", 1)(2, \"mat-nav-list\")(3, \"a\", 2);\n            i0.\u0275\u0275listener(\"click\", function PanelSelectorComponent_Template_a_click_3_listener() {\n              return ctx.onNewSelect();\n            });\n            i0.\u0275\u0275text(4, \"New Panel\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(5, \"a\", 2);\n            i0.\u0275\u0275listener(\"click\", function PanelSelectorComponent_Template_a_click_5_listener() {\n              return ctx.onLinkSelect();\n            });\n            i0.\u0275\u0275text(6, \"Link Panel\");\n            i0.\u0275\u0275elementEnd()()();\n            i0.\u0275\u0275elementStart(7, \"mat-tab\", 3);\n            i0.\u0275\u0275template(8, PanelSelectorComponent_ng_template_8_Template, 3, 3, \"ng-template\", 4);\n            i0.\u0275\u0275elementEnd()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"selectedIndex\", ctx.selectedIndex);\n          }\n        },\n        dependencies: [i3.NgForOf, i6.MatLine, i7.MatNavList, i7.MatListItem, i8.MatTabContent, i8.MatTab, i8.MatTabGroup, i3.AsyncPipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return PanelSelectorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// import { PanelpageModule } from 'panelpage';\n// import { EditablepaneModule } from 'editablepane';\n// import { FlexLayoutServerModule } from '@angular/flex-layout/server';\nconst panePageMatcher = url => {\n  if (url[0] !== undefined && url[0].path === 'panelpage') {\n    return {\n      consumed: url,\n      posParams: url.reduce((p, c, index) => {\n        if (index === 1) {\n          return {\n            ...p,\n            panelPageId: new UrlSegment(c.path, {})\n          };\n        } else if (index > 1) {\n          return {\n            ...p,\n            [`arg${index - 2}`]: new UrlSegment(c.path, {})\n          };\n        } else {\n          return {\n            ...p\n          };\n        }\n      }, {})\n    };\n  } else {\n    return null;\n  }\n};\nconst routes = [{\n  path: 'pages',\n  children: [{\n    path: 'create-panel-page',\n    component: CreatePanelPageComponent\n  }, {\n    path: 'panelpage/:panelPageId/manage',\n    component: EditPanelPageComponent\n  }\n  //{ matcher: panePageMatcher, component: PanelPageRouterComponent },\n  ]\n}\n//{ path: '**', component: CatchAllRouterComponent, canActivate: [ CatchAllGuard ] }\n];\nlet PagesModule = /*#__PURE__*/(() => {\n  class PagesModule {\n    constructor(contentPlugins, stylePlugins, cpm, cxm, spm, eds, ppm, rcm, pluginConfigurationManager, contextManager, tokenizerService, formService, pageBuilderFacade, pageContextResolver, restContextResolver, formContextResolver, paneStateContextResolver, pageStateContextResolver, bpm, http, pluralizer, dataServiceConfig, crud, entityDefinitionService, entityDataService, paramEvaluatorService, dpm, attributeSerializer, crudDataHelper) {\n      eds.registerMetadataMap(entityMetadata);\n      const contextPlugins = [pageContextFactory(pageContextResolver), restContextFactory(restContextResolver), formContextFactory(formContextResolver), paneStateContextFactory(paneStateContextResolver), pageStateContextFactory(pageStateContextResolver)];\n      /*contextManager.register(pageContextFactory(pageContextResolver));\n      contextManager.register(restContextFactory(restContextResolver));\n      contextManager.register(formContextFactory(formContextResolver));*/\n      contextPlugins.forEach(p => {\n        // contextManager.register(p); // This will eventually go away once code uses plugin manager instead.\n        cxm.register(p);\n      });\n      // Remove this since much easier just to leave as is for now.\n      // Proof of concept - snippet is not really worth decoupling.\n      /*pluginConfigurationManager.addConfig(new PluginConfig({\n        modules: [\n          { module: () => import('./plugins/snippet/snippet.module').then(m => m.SnippetModule), plugins: new Map<string, Array<string>>([ ['content', [ 'snippet' ]] ]) }\n        ]\n      }));*/\n      contentPlugins.forEach(p => cpm.register(p));\n      stylePlugins.forEach(p => spm.register(p));\n      ppm.register(formParamPluginFactory(tokenizerService, formService, pageBuilderFacade));\n      rcm.register(formResolvedContextPluginFactory(pageBuilderFacade));\n      bpm.register(pagesFormBridgeFactory(formService));\n      // build because this is after the built phase since module is lazy loaded.\n      // There is probably a better solution but for now this will work.\n      // Probably is better to schedule builds using a queue to automatically add.\n      // It doesn't really do any harm calling build though since prototype will just overriden and shouldn't have state anyway.\n      bpm.getPlugin('pages_form').subscribe(p => p.build());\n      // Experimental - form testing\n      //entityDataService.registerService('PanelPageForm', new CrudDataService<PanelPageForm>('PanelPageForm', crud, entityDefinitionService, crudDataHelper));\n      crud.register(formSerializationEntityCrudAdaptorPluginFactory(paramEvaluatorService, formService));\n      dpm.register(formDatasourcePluginFactory(attributeSerializer, pageBuilderFacade, formService));\n    }\n    static {\n      this.\u0275fac = function PagesModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PagesModule)(i0.\u0275\u0275inject(CONTENT_PLUGIN), i0.\u0275\u0275inject(STYLE_PLUGIN), i0.\u0275\u0275inject(i2_1.ContentPluginManager), i0.\u0275\u0275inject(i2$3.ContextPluginManager), i0.\u0275\u0275inject(i2$2.StylePluginManager), i0.\u0275\u0275inject(i4$3.EntityDefinitionService), i0.\u0275\u0275inject(i5$6.ParamPluginManager), i0.\u0275\u0275inject(i2$3.ResolvedContextPluginManager), i0.\u0275\u0275inject(i6$5.PluginConfigurationManager), i0.\u0275\u0275inject(i2$3.ContextManagerService), i0.\u0275\u0275inject(i2$1.TokenizerService), i0.\u0275\u0275inject(i2$2.FormService), i0.\u0275\u0275inject(i2$2.PageBuilderFacade), i0.\u0275\u0275inject(PageContextResolver), i0.\u0275\u0275inject(RestContextResolver), i0.\u0275\u0275inject(FormContextResolver), i0.\u0275\u0275inject(PaneStateContextResolver), i0.\u0275\u0275inject(PageStateContextResolver), i0.\u0275\u0275inject(i13.BridgeBuilderPluginManager), i0.\u0275\u0275inject(i14.HttpClient), i0.\u0275\u0275inject(i4$3.Pluralizer), i0.\u0275\u0275inject(i4$3.DefaultDataServiceConfig), i0.\u0275\u0275inject(i15.CrudAdaptorPluginManager), i0.\u0275\u0275inject(i4$3.EntityDefinitionService), i0.\u0275\u0275inject(i4$3.EntityDataService), i0.\u0275\u0275inject(i5$6.ParamEvaluatorService), i0.\u0275\u0275inject(i16.DatasourcePluginManager), i0.\u0275\u0275inject(i2.AttributeSerializerService), i0.\u0275\u0275inject(i15.CrudDataHelperService));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: PagesModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        providers: [CatchAllGuard, PageContextResolver, RestContextResolver, FormContextResolver, PaneStateContextResolver, PageStateContextResolver, {\n          provide: EMBEDDABLE_COMPONENT,\n          useValue: PageRouterLinkComponent,\n          multi: true\n        }, {\n          provide: EMBEDDABLE_COMPONENT,\n          useValue: MarkdownComponent,\n          multi: true\n        }, {\n          provide: EMBEDDABLE_COMPONENT,\n          useValue: PanelPageRouterComponent,\n          multi: true\n        }, {\n          provide: SnippetContentHandler,\n          useClass: SnippetContentHandler\n        }, {\n          provide: AttributeContentHandler,\n          useClass: AttributeContentHandler\n        }, {\n          provide: MediaContentHandler,\n          useClass: MediaContentHandler\n        }, /*{ provide: PanelContentHandler, useClass: PanelContentHandler },*/\n        {\n          provide: RestContentHandler,\n          useClass: RestContentHandler\n        }, {\n          provide: SliceContentHandler,\n          useClass: SliceContentHandler\n        }, {\n          provide: TabsStyleHandler,\n          useClass: TabsStyleHandler\n        },\n        //{ provide: CONTEXT_PLUGIN, useFactory: pageContextFactory, multi: true, deps: [ PageContextResolver ] },\n        {\n          provide: CONTENT_PLUGIN,\n          useFactory: snippetContentPluginFactory,\n          multi: true,\n          deps: [SnippetContentHandler]\n        }, {\n          provide: CONTENT_PLUGIN,\n          useFactory: attributeContentPluginFactory,\n          multi: true,\n          deps: [AttributeContentHandler]\n        }, {\n          provide: CONTENT_PLUGIN,\n          useFactory: mediaContentPluginFactory,\n          multi: true,\n          deps: [MediaContentHandler]\n        },\n        // { provide: CONTENT_PLUGIN, useFactory: panelContentPluginFactory, multi: true, deps: [ PanelContentHandler ] }, -> moved to panels module\n        {\n          provide: CONTENT_PLUGIN,\n          useFactory: restContentPluginFactory,\n          multi: true,\n          deps: [RestContentHandler]\n        }, {\n          provide: CONTENT_PLUGIN,\n          useFactory: sliceContentPluginFactory,\n          multi: true,\n          deps: [SliceContentHandler]\n        },\n        // { provide: STYLE_PLUGIN, useValue: new StylePlugin<string>({ id: 'gallery', name: 'gallery', title: 'Gallery', editorComponent: undefined, renderComponent: GalleryPanelRendererComponent }), multi: true },\n        {\n          provide: STYLE_PLUGIN,\n          useValue: new StylePlugin({\n            id: 'virtuallist',\n            name: 'virtuallist',\n            title: 'Virtual List',\n            editorComponent: undefined,\n            renderComponent: VirtualListPanelRendererComponent\n          }),\n          multi: true\n        }, {\n          provide: STYLE_PLUGIN,\n          useFactory: tabsStylePluginFactory,\n          multi: true,\n          deps: [TabsStyleHandler]\n        }, {\n          provide: STYLE_PLUGIN,\n          useValue: new StylePlugin({\n            id: 'table',\n            name: 'table',\n            title: 'Table',\n            editorComponent: undefined,\n            renderComponent: TablePanelRendererComponent\n          }),\n          multi: true\n        }],\n        imports: [CommonModule,\n        // HttpClientModule,\n        FormsModule, ReactiveFormsModule, MaterialModule, FlexLayoutModule,\n        // FlexLayoutServerModule,\n        AngularSplitModule, RouterModule.forChild(routes), NgxJsonViewerModule, MarkdownModule.forChild(), NgxDropzoneModule, GridsterModule, UtilsModule, TokenModule, ContextModule, AttributesModule, MediaModule, LayoutModule,\n        // NgxGalleryModule,\n        NgxAngularQueryBuilderModule,\n        // TaxonomyModule,\n        // StoreModule.forFeature(fromPageBuilder.pageBuilderFeatureKey, fromPageBuilder.reducer),\n        // EffectsModule.forFeature([PageBuilderEffects]),\n        PanelsModule, RestModule, SnippetModule, DparamModule, BridgeModule, DatasourceModule, RenderModule]\n      });\n    }\n  }\n  return PagesModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// export * from './lib/models/page.models';\n// export * from './lib/plugins/snippet/snippet.module';\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CatchAllGuard, CatchAllRouterComponent, EditPanelPageComponent, PAGES_SETTINGS, PagesModule, PagesSettings, PanelPageRouterComponent, attributeContentPluginFactory, createEditMatcher, createMatcher, formContextFactory, formDatasourcePluginFactory, formParamPluginFactory, formResolvedContextPluginFactory, formSerializationEntityCrudAdaptorPluginFactory, mediaContentPluginFactory, pageContextFactory, pageStateContextFactory, pagesFormBridgeFactory, paneStateContextFactory, restContentPluginFactory, restContextFactory, sliceContentPluginFactory, snippetContentPluginFactory, tabsStylePluginFactory };\n"],
  "mappings": "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",
  "names": ["i0", "EventEmitter", "forwardRef", "InjectionToken", "i3", "CommonModule", "i1$3", "UrlSegment", "RouterModule", "i1$2", "UntypedFormArray", "UntypedFormControl", "Validators", "NG_VALUE_ACCESSOR", "NG_VALIDATORS", "FormsModule", "ReactiveFormsModule", "i3$1", "MarkdownModule", "MarkdownComponent", "FlexLayoutModule", "i10", "AngularSplitModule", "i6$3", "NgxDropzoneModule", "MaterialModule", "NgxJsonViewerModule", "i6$1", "NgxAngularQueryBuilderModule", "i1$4", "MEDIA_SETTINGS", "MediaFile", "MediaModule", "i4", "SITE_NAME", "UtilsModule", "EMBEDDABLE_COMPONENT", "i2$1", "TokenModule", "i2", "AttributeValue", "AttributeTypes", "Attribute", "ATTRIBUTE_WIDGET", "AttributesModule", "i12", "GridLayoutComponent", "SplitLayoutComponent", "LayoutModule", "i11", "RestSourceFormComponent", "RestModule", "i5", "Snippet", "SnippetModule", "i2_1", "ContentBinding", "ContentPluginEditorOptions", "ContentPlugin", "CONTENT_PLUGIN", "i2$3", "InlineContext", "ContextFormComponent", "ContextPlugin", "ResolvedContextPlugin", "ContextModule", "DisplayGrid", "GridType", "GridsterModule", "i1", "MAT_BOTTOM_SHEET_DATA", "i1$1", "MAT_DIALOG_DATA", "i6", "i7", "i8", "Observable", "of", "Subject", "BehaviorSubject", "combineLatest", "forkJoin", "iif", "from", "merge", "map", "switchMap", "tap", "filter", "debounceTime", "delay", "take", "withLatestFrom", "distinctUntilChanged", "defaultIfEmpty", "skip", "catchError", "i16", "Dataset", "Rest", "SelectMapping", "SelectOption", "DatasourcePlugin", "DatasourceModule", "jpp", "i2$2", "PropertiesFormPayload", "PanelPropsFormPayload", "PanePropsFormPayload", "PaneState", "LayoutSetting", "Pane", "PanelPage", "PanelPageStateSlice", "selectDataset", "Panel", "FormDatasource", "StylePlugin", "PanelPageForm", "PaneDatasourceService", "PanelStyleRendererBaseComponent", "PanelPageSelector", "PanelPageState", "PanelState", "STYLE_PLUGIN", "PanelsModule", "PersistenceFormPayload", "PersistenceDialogComponent", "i4$1", "i3$2", "i4$2", "i5$1", "InteractionsFormPayload", "InteractionsDialogComponent", "i5$2", "i6$2", "i7$1", "i9", "i3$3", "createSelector", "select", "i4$3", "i19", "getRouterSelectors", "i15", "CrudAdaptorPlugin", "i7$2", "RenderModule", "i5$3", "i5$4", "i6$4", "i9$1", "i8$1", "i5$6", "ParamPlugin", "Param", "DparamModule", "i13", "BridgeBuilderPlugin", "PublicApiBridgeService", "BridgeModule", "i3$4", "qs", "i4$4", "i5$5", "i6$5", "i14", "ContentSelectorComponent_a_4_Template", "rf", "ctx", "_r1", "p_r2", "ctx_r2", "ContentSelectorComponent_ng_template_9_Template", "SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_0_Template", "ctx_r1", "SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_1_Template", "_r3", "StyleSelectorComponent_a_4_Template", "s_r2", "StyleSelectorComponent_ng_template_9_Template", "_c0", "_c1", "a0", "_c2", "EditablePaneComponent_div_0_ng_container_12_Template", "EditablePaneComponent_div_0_button_14_Template", "_r4", "EditablePaneComponent_div_0_button_15_Template", "_r5", "EditablePaneComponent_div_0_ng_template_17_Template", "EditablePaneComponent_div_0_Template", "_r2", "settingsTmpl_r6", "paneMenu_r7", "EditablePaneComponent_ng_template_1_li_0_span_2_Template", "setting_r8", "settings_r9", "EditablePaneComponent_ng_template_1_li_0_ul_3_ng_container_1_Template", "EditablePaneComponent_ng_template_1_li_0_ul_3_Template", "EditablePaneComponent_ng_template_1_li_0_Template", "EditablePaneComponent_ng_template_1_Template", "EditablePaneComponent_ng_template_3_ng_template_3_Template", "EditablePaneComponent_ng_template_3_Template", "_r10", "$event", "EditablePaneComponent_button_13_Template", "_r11", "EditablePaneComponent_button_14_Template", "_r12", "_c3", "_c4", "_c5", "_c6", "_c7", "ContentEditorComponent_form_0_ng_template_2_Template", "ContentEditorComponent_form_0_Template", "ContentEditorComponent_ng_template_1_ng_template_2_Template", "ContentEditorComponent_ng_template_1_Template", "ContentEditorComponent_ng_template_3_div_1_Template", "ContentEditorComponent_ng_template_3_Template", "ctx_r4", "i_r6", "j_r7", "ctx_r7", "ctx_r8", "ctx_r9", "ctx_r10", "ctx_r11", "ctx_r12", "ctx_r13", "ContentEditorComponent_ng_template_5_Template", "contextMenu_r15", "ContentEditorComponent_button_11_Template", "_r16", "c_r17", "AttributeSelectorComponent_a_1_Template", "widget_r2", "AttributePaneRendererComponent_div_0_div_1_ng_container_1_Template", "AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_span_1_Template", "setting_r1", "AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_span_2_Template", "settings_r2", "AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_div_3_ng_container_1_Template", "AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_div_3_Template", "settingsTmpl_r3", "AttributePaneRendererComponent_div_0_div_1_ng_template_2_div_0_Template", "AttributePaneRendererComponent_div_0_div_1_ng_template_2_Template", "AttributePaneRendererComponent_div_0_div_1_Template", "ctx_r3", "AttributePaneRendererComponent_div_0_div_2_Template", "AttributePaneRendererComponent_div_0_Template", "AttributePaneRendererComponent_ng_template_1_Template", "MediaEditorComponent_ngx_dropzone_image_preview_3_Template", "_c8", "RestFormComponent_div_29_div_4_mat_option_5_Template", "pane_r3", "RestFormComponent_div_29_div_4_Template", "i_r4", "RestFormComponent_div_29_Template", "RestFormComponent_div_30_Template", "SelectionComponent_ng_container_5_mat_option_5_Template", "opt_r1", "SelectionComponent_ng_container_5_Template", "SelectionComponent_ng_container_6_mat_radio_button_5_Template", "opt_r3", "SelectionComponent_ng_container_6_Template", "SelectionComponent_ng_container_7_div_3_Template", "opt_r4", "i_r5", "SelectionComponent_ng_container_7_Template", "SelectionComponent_ng_container_8_mat_option_5_Template", "opt_r7", "SelectionComponent_ng_container_8_Template", "_r6", "autocomplete_r8", "SliceFormComponent_mat_option_8_Template", "c_r1", "TabsPanelEditorComponent_div_2_Template", "i_r2", "TabsPanelRendererComponent_mat_tab_group_0_mat_tab_1_ng_template_1_Template", "i_r1", "TabsPanelRendererComponent_mat_tab_group_0_mat_tab_1_Template", "TabsPanelRendererComponent_mat_tab_group_0_Template", "TabsPanelRendererComponent_mat_tab_group_1_mat_tab_1_Template", "TabsPanelRendererComponent_mat_tab_group_1_Template", "VirtualListPanelRendererComponent_div_1_Template", "pane_r1", "TablePanelRendererComponent_ng_container_1_th_1_Template", "n_r1", "TablePanelRendererComponent_ng_container_1_td_2_Template", "row_r2", "TablePanelRendererComponent_ng_container_1_Template", "TablePanelRendererComponent_tr_2_Template", "TablePanelRendererComponent_tr_3_Template", "entityMetadata", "ContentSelectionHostDirective", "viewContainerRef", "__ngFactoryType__", "ContentSelectorComponent", "data", "bottomSheetRef", "dialog", "componentFactoryResolver", "fb", "contentPluginManager", "plugin", "o", "dialogRef", "__spreadValues", "componentFactory", "componentRef", "MAT_BOTTOM_SHEET_DATA", "rf", "ctx", "_t", "ContentSelectorComponent_a_4_Template", "ContentSelectorComponent_ng_template_9_Template", "SnippetContentHandler", "attributeSerializer", "tokenizrService", "file", "Observable", "obs", "reader", "Snippet", "type", "t", "settings", "of", "metadata", "map", "snippet", "ContentBinding", "Dataset", "ContentPluginEditorOptions", "SnippetPaneRendererComponent", "resolvedContext", "hostEl", "handler", "tokenizerService", "markdownService", "Subject", "BehaviorSubject", "combineLatest", "_", "content", "switchMap", "tokens", "_0", "__async", "replacedTokens", "compiledContent", "v", "value", "key", "name", "js", "script", "SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_0_Template", "SnippetPaneRendererComponent_classifieds_ui_dynamic_content_viewer_1_Template", "AttributeContentHandler", "snippetHandler", "attributeValues", "attributeValue", "snippet$", "s", "AttributeValue", "AttributeTypes", "widget", "RenderingEditorComponent", "rendererIndex", "setting", "renderer", "formArray", "c", "index", "fg", "UntypedFormControl", "Validators", "UntypedFormArray", "MAT_DIALOG_DATA", "$event", "StyleSelectorComponent", "spm", "StyleSelectorComponent_a_4_Template", "StyleSelectorComponent_ng_template_9_Template", "RulesDialogComponent", "inlineContextResolver", "rulesParser", "res", "fieldMap", "f", "k", "__spreadProps", "PropertiesDialogComponent", "PropertiesFormPayload", "id", "ContextDialogComponent", "InlineContext", "ContextFormComponent", "PanelPropsDialogComponent", "PanelPropsFormPayload", "PanePropsDialogComponent", "PanePropsFormPayload", "LayoutEditorHostDirective", "PaneContentHostDirective", "PaneStateContextResolver", "entityServices", "selectEntities", "entities", "selectById", "createSelector", "selectByPath", "path", "json", "i", "select", "m", "ps", "tap", "PaneState", "EditablePaneComponent", "panelIndex", "paneIndex", "ancestory", "panelHandler", "cpm", "EventEmitter", "init", "p", "r", "changes", "panelPage", "_c0", "_r1", "EditablePaneComponent_div_0_Template", "EditablePaneComponent_ng_template_1_Template", "EditablePaneComponent_ng_template_3_Template", "EditablePaneComponent_button_13_Template", "EditablePaneComponent_button_14_Template", "nestedPanelTpl_r13", "ContentEditorComponent", "panelLen", "LayoutSetting", "siteName", "lpm", "cxtm", "bs", "pageBuilderFacade", "paneStateContextResolver", "panelsContextService", "PersistenceFormPayload", "InteractionsFormPayload", "GridType", "DisplayGrid", "item", "itemComponent", "matchIndex", "g", "filter", "debounceTime", "delay", "pp", "rs", "container", "i2", "take", "paneContexts", "label", "props", "evt", "newPanelIndex", "oldPanelIndex", "dir", "from", "to", "temp", "current", "index2", "pane", "Pane", "rule", "editablePane", "ep", "context", "editContext", "len", "j", "gridItems", "PanelPage", "controls", "v4_default", "dataset", "bindings", "b", "paneIndexes", "pi", "PersistenceDialogComponent", "payload", "InteractionsDialogComponent", "locked", "editorOptions", "event", "plugins", "val", "fn", "isDisabled", "layout", "SITE_NAME", "dirIndex", "_c3", "GridLayoutComponent", "SplitLayoutComponent", "_c4", "_c5", "_c6", "NG_VALUE_ACCESSOR", "forwardRef", "NG_VALIDATORS", "ContentEditorComponent_form_0_Template", "ContentEditorComponent_ng_template_1_Template", "ContentEditorComponent_ng_template_3_Template", "ContentEditorComponent_ng_template_5_Template", "ContentEditorComponent_button_11_Template", "nestedTpl_r18", "SnippetEditorComponent", "paneForm", "PanelPageRouterComponent", "route", "routerStore", "asyncApiCallHelperSvc", "crudDataHelperService", "entityDefinitionService", "es", "withLatestFrom", "getRouterSelectors", "state", "args", "realPath", "PanelPageStateSlice", "selectCurrentRoute", "pageInfo", "CreatePanelPageComponent", "EditPanelPageComponent", "moduleLoader", "distinctUntilChanged", "forkJoin", "loadRemoteModule", "defaultIfEmpty", "AttributeSelectorComponent", "wpm", "AttributeSelectorComponent_a_1_Template", "AttributeEditorComponent", "attributeWidgets", "widgetSetting", "w", "Attribute", "ATTRIBUTE_WIDGET", "AttributePaneRendererComponent", "widgets", "controlContainer", "AttributePaneRendererComponent_div_0_Template", "AttributePaneRendererComponent_ng_template_1_Template", "overrideTpl_r5", "MediaContentHandler", "filesService", "files", "mediaFile", "MediaEditorComponent", "MediaEditorComponent_ngx_dropzone_image_preview_3_Template", "MediaPaneRendererComponent", "mediaSettings", "MEDIA_SETTINGS", "_c8", "RestContentHandler", "store", "urlGeneratorService", "rulesResolver", "subject", "url", "Rest", "selectDataset", "iif", "row", "binding", "groups", "d", "paneMappings", "rowIndex", "attachedPane", "panes", "Panel", "panel", "panelSettings", "SelectMapping", "mapping", "SelectOption", "rest", "renderType", "RestFormComponent", "defaultSelect", "RestSourceFormComponent", "RestFormComponent_div_29_Template", "RestFormComponent_div_30_Template", "RestEditorComponent", "SelectionComponent", "values", "opt", "option", "group", "SelectionComponent_ng_container_5_Template", "SelectionComponent_ng_container_6_Template", "SelectionComponent_ng_container_7_Template", "SelectionComponent_ng_container_8_Template", "RestPaneRendererComponent", "restHandler", "options", "input", "searchString", "SliceContentHandler", "mediaHandler", "slice", "dataArray", "dataSlice", "query", "pieces", "MediaFile", "DataSlice", "SliceFormComponent", "SliceFormComponent_mat_option_8_Template", "SliceEditorComponent", "ContextEditorComponent", "TabsPanelEditorComponent", "a", "TabsPanelEditorComponent_div_2_Template", "TabsPanelRendererComponent", "obj", "TabsPanelRendererComponent_mat_tab_group_0_Template", "TabsPanelRendererComponent_mat_tab_group_1_Template", "PageStateFormComponent", "selector", "flat", "PageStateEditorComponent", "FormDatasourceFormComponent", "FormDatasource", "ds", "FormDatasourceComponent", "snippetContentPluginFactory", "ContentPlugin", "attributeContentPluginFactory", "mediaContentPluginFactory", "restContentPluginFactory", "sliceContentPluginFactory", "pageContextFactory", "resolver", "baseObject", "ContextPlugin", "restContextFactory", "formContextFactory", "paneStateContextFactory", "pageStateContextFactory", "tabsStylePluginFactory", "StylePlugin", "formParamPluginFactory", "formService", "ParamPlugin", "param", "form", "PanelPageForm", "formResolvedContextPluginFactory", "ResolvedContextPlugin", "names", "n", "merge", "pagesFormBridgeFactory", "BridgeBuilderPlugin", "PublicApiBridgeService", "formSerializationEntityCrudAdaptorPluginFactory", "paramsEvaluatorService", "CrudAdaptorPlugin", "object", "formDatasourcePluginFactory", "DatasourcePlugin", "createMatcher", "u", "pathLen", "UrlSegment", "createEditMatcher", "VirtualListPanelRendererComponent", "tokenizerService", "panelResolverService", "styleResolverService", "paneDatasource", "skip", "switchMap", "page", "p", "Pane", "__spreadProps", "__spreadValues", "resolvedPanes", "originMappings", "__ngFactoryType__", "PaneDatasourceService", "rf", "ctx", "VirtualListPanelRendererComponent_div_1_Template", "PageRouterLinkComponent", "router", "CatchAllRouterComponent", "routerStore", "es", "PAGES_SETTINGS", "InjectionToken", "PagesSettings", "data", "CatchAllGuard", "siteName", "pagesSettings", "route", "state", "res", "url", "matchPathQuery", "i", "forkJoin", "iif", "tap", "map", "pp", "o", "PanelPage", "a", "b", "target", "createEditMatcher", "EditPanelPageComponent", "createMatcher", "PanelPageRouterComponent", "of", "catchError", "e", "pages", "c", "panelPage", "argPath", "targetUrl", "qs", "urlTree", "v", "SITE_NAME", "PageContextResolver", "pageBuilderFacade", "RestContextResolver", "store", "urlGeneratorService", "context", "rest", "Rest", "params", "v4_default", "metadata", "select", "selectDataset", "filter", "dataset", "take", "pipeline", "merge", "arg", "name", "Subject", "query", "value", "pageInfo", "newParams", "len", "Param", "FormContextResolver", "TablePanelRendererComponent", "PanelStyleRendererBaseComponent", "targetIndex", "index", "pane", "TablePanelRendererComponent_ng_container_1_Template", "TablePanelRendererComponent_tr_2_Template", "TablePanelRendererComponent_tr_3_Template", "PanelContentHandler", "attributeSerializer", "file", "type", "settings", "Dataset", "panesAsSettings", "panes", "Panel", "LayoutSetting", "ContentPluginEditorOptions", "TabsStyleHandler", "panelHandler", "panelsLoaderService", "panelsSelectorService", "obj", "AttributeValue", "AttributeTypes", "selectors", "l", "PanelPageSelector", "flatSelectors", "_", "s", "c2", "i2", "p2", "withTarget", "withoutTarget", "rebuilt", "rebuilt2", "rebuildResolvedPanes", "selector", "flat", "PageStateContextResolver", "PaneState", "combineLatest", "entities", "PanelPageStateSlice", "entityServices", "panelStateConverterService", "cacheKey", "resolver", "PanelPageState", "ps", "selectionPath", "PanelState", "json", "path", "m", "routes", "CreatePanelPageComponent", "EditPanelPageComponent", "PagesModule", "contentPlugins", "stylePlugins", "cpm", "cxm", "spm", "eds", "ppm", "rcm", "pluginConfigurationManager", "contextManager", "tokenizerService", "formService", "pageBuilderFacade", "pageContextResolver", "restContextResolver", "formContextResolver", "paneStateContextResolver", "pageStateContextResolver", "bpm", "http", "pluralizer", "dataServiceConfig", "crud", "entityDefinitionService", "entityDataService", "paramEvaluatorService", "dpm", "attributeSerializer", "crudDataHelper", "entityMetadata", "pageContextFactory", "restContextFactory", "formContextFactory", "paneStateContextFactory", "pageStateContextFactory", "p", "formParamPluginFactory", "formResolvedContextPluginFactory", "pagesFormBridgeFactory", "formSerializationEntityCrudAdaptorPluginFactory", "formDatasourcePluginFactory", "__ngFactoryType__", "CONTENT_PLUGIN", "STYLE_PLUGIN", "PageContextResolver", "RestContextResolver", "FormContextResolver", "PaneStateContextResolver", "PageStateContextResolver", "CatchAllGuard", "EMBEDDABLE_COMPONENT", "PageRouterLinkComponent", "MarkdownComponent", "PanelPageRouterComponent", "SnippetContentHandler", "AttributeContentHandler", "MediaContentHandler", "RestContentHandler", "SliceContentHandler", "TabsStyleHandler", "snippetContentPluginFactory", "attributeContentPluginFactory", "mediaContentPluginFactory", "restContentPluginFactory", "sliceContentPluginFactory", "StylePlugin", "VirtualListPanelRendererComponent", "tabsStylePluginFactory", "TablePanelRendererComponent", "CommonModule", "FormsModule", "ReactiveFormsModule", "MaterialModule", "FlexLayoutModule", "AngularSplitModule", "RouterModule", "NgxJsonViewerModule", "MarkdownModule", "NgxDropzoneModule", "GridsterModule", "UtilsModule", "TokenModule", "ContextModule", "AttributesModule", "MediaModule", "LayoutModule", "NgxAngularQueryBuilderModule", "PanelsModule", "RestModule", "SnippetModule", "DparamModule", "BridgeModule", "DatasourceModule", "RenderModule"]
}
