{
  "version": 3,
  "sources": ["../../cssjson/cssjson.js", "../../@rollthecloudinc/panels/fesm2022/rollthecloudinc-panels.mjs"],
  "sourcesContent": ["/**\r\n * CSS-JSON Converter for JavaScript\r\n * Converts CSS to JSON and back.\r\n * Version 2.1\r\n *\r\n * Released under the MIT license.\r\n *\r\n * Copyright (c) 2013 Aram Kocharyan, http://aramk.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\r\n documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\r\n the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\r\n to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in all copies or substantial portions\r\n of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO\r\n THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n */\n\n/*******************************************************************************\r\n *  UMD pattern for exporting module\r\n */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.CSSJSON = factory();\n  }\n})(this, function () {\n  var CSSJSON = new function () {\n    var base = this;\n    base.init = function () {\n      // String functions\n      String.prototype.trim = function () {\n        return this.replace(/^\\s+|\\s+$/g, '');\n      };\n      String.prototype.repeat = function (n) {\n        return new Array(1 + n).join(this);\n      };\n    };\n    base.init();\n    var selX = /([^\\s\\;\\{\\}][^\\;\\{\\}]*)\\{/g;\n    var endX = /\\}/g;\n    var lineX = /([^\\;\\{\\}]*)\\;/g;\n    var commentX = /\\/\\*[\\s\\S]*?\\*\\//g;\n    var lineAttrX = /([^\\:]+):([^\\;]*);/;\n\n    // This is used, a concatenation of all above. We use alternation to\n    // capture.\n    var altX = /(\\/\\*[\\s\\S]*?\\*\\/)|([^\\s\\;\\{\\}][^\\;\\{\\}]*(?=\\{))|(\\})|([^\\;\\{\\}]+\\;(?!\\s*\\*\\/))/gmi;\n\n    // Capture groups\n    var capComment = 1;\n    var capSelector = 2;\n    var capEnd = 3;\n    var capAttr = 4;\n    var isEmpty = function (x) {\n      return typeof x == 'undefined' || x.length == 0 || x == null;\n    };\n\n    /**\r\n     * Input is css string and current pos, returns JSON object\r\n     *\r\n     * @param cssString\r\n     *            The CSS string.\r\n     * @param args\r\n     *            An optional argument object. ordered: Whether order of\r\n     *            comments and other nodes should be kept in the output. This\r\n     *            will return an object where all the keys are numbers and the\r\n     *            values are objects containing \"name\" and \"value\" keys for each\r\n     *            node. comments: Whether to capture comments. split: Whether to\r\n     *            split each comma separated list of selectors.\r\n     */\n    base.toJSON = function (cssString, args) {\n      var node = {\n        children: {},\n        attributes: {}\n      };\n      var match = null;\n      var count = 0;\n      if (typeof args == 'undefined') {\n        var args = {\n          ordered: false,\n          comments: false,\n          stripComments: false,\n          split: false\n        };\n      }\n      if (args.stripComments) {\n        args.comments = false;\n        cssString = cssString.replace(commentX, '');\n      }\n      while ((match = altX.exec(cssString)) != null) {\n        if (!isEmpty(match[capComment]) && args.comments) {\n          // Comment\n          var add = match[capComment].trim();\n          node[count++] = add;\n        } else if (!isEmpty(match[capSelector])) {\n          // New node, we recurse\n          var name = match[capSelector].trim();\n          // This will return when we encounter a closing brace\n          var newNode = base.toJSON(cssString, args);\n          if (args.ordered) {\n            var obj = {};\n            obj['name'] = name;\n            obj['value'] = newNode;\n            // Since we must use key as index to keep order and not\n            // name, this will differentiate between a Rule Node and an\n            // Attribute, since both contain a name and value pair.\n            obj['type'] = 'rule';\n            node[count++] = obj;\n          } else {\n            if (args.split) {\n              var bits = name.split(',');\n            } else {\n              var bits = [name];\n            }\n            for (i in bits) {\n              var sel = bits[i].trim();\n              if (sel in node.children) {\n                for (var att in newNode.attributes) {\n                  node.children[sel].attributes[att] = newNode.attributes[att];\n                }\n              } else {\n                node.children[sel] = newNode;\n              }\n            }\n          }\n        } else if (!isEmpty(match[capEnd])) {\n          // Node has finished\n          return node;\n        } else if (!isEmpty(match[capAttr])) {\n          var line = match[capAttr].trim();\n          var attr = lineAttrX.exec(line);\n          if (attr) {\n            // Attribute\n            var name = attr[1].trim();\n            var value = attr[2].trim();\n            if (args.ordered) {\n              var obj = {};\n              obj['name'] = name;\n              obj['value'] = value;\n              obj['type'] = 'attr';\n              node[count++] = obj;\n            } else {\n              if (name in node.attributes) {\n                var currVal = node.attributes[name];\n                if (!(currVal instanceof Array)) {\n                  node.attributes[name] = [currVal];\n                }\n                node.attributes[name].push(value);\n              } else {\n                node.attributes[name] = value;\n              }\n            }\n          } else {\n            // Semicolon terminated line\n            node[count++] = line;\n          }\n        }\n      }\n      return node;\n    };\n\n    /**\r\n     * @param node\r\n     *            A JSON node.\r\n     * @param depth\r\n     *            The depth of the current node; used for indentation and\r\n     *            optional.\r\n     * @param breaks\r\n     *            Whether to add line breaks in the output.\r\n     */\n    base.toCSS = function (node, depth, breaks) {\n      var cssString = '';\n      if (typeof depth == 'undefined') {\n        depth = 0;\n      }\n      if (typeof breaks == 'undefined') {\n        breaks = false;\n      }\n      if (node.attributes) {\n        for (i in node.attributes) {\n          var att = node.attributes[i];\n          if (att instanceof Array) {\n            for (var j = 0; j < att.length; j++) {\n              cssString += strAttr(i, att[j], depth);\n            }\n          } else {\n            cssString += strAttr(i, att, depth);\n          }\n        }\n      }\n      if (node.children) {\n        var first = true;\n        for (i in node.children) {\n          if (breaks && !first) {\n            cssString += '\\n';\n          } else {\n            first = false;\n          }\n          cssString += strNode(i, node.children[i], depth);\n        }\n      }\n      return cssString;\n    };\n\n    // Helpers\n\n    var strAttr = function (name, value, depth) {\n      return '\\t'.repeat(depth) + name + ': ' + value + ';\\n';\n    };\n    var strNode = function (name, value, depth) {\n      var cssString = '\\t'.repeat(depth) + name + ' {\\n';\n      cssString += base.toCSS(value, depth + 1);\n      cssString += '\\t'.repeat(depth) + '}\\n';\n      return cssString;\n    };\n  }();\n  return CSSJSON;\n});", "import * as i3 from '@angular/common';\nimport { isPlatformServer, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, forwardRef, Input, Component, Inject, InjectionToken, PLATFORM_ID, NgModule, Optional } from '@angular/core';\nimport * as i1$3 from '@ngrx/data';\nimport { DefaultPluralizer, Pluralizer } from '@ngrx/data';\nimport * as i1$1 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS, UntypedFormControl, Validators, UntypedFormArray, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { of, BehaviorSubject, iif, forkJoin, Observable, Subject, Subscription } from 'rxjs';\nimport { map, switchMap, filter, defaultIfEmpty, catchError, concatMap, tap, take } from 'rxjs/operators';\nimport * as i1 from '@rollthecloudinc/attributes';\nimport { AttributeValue } from '@rollthecloudinc/attributes';\nimport * as i3$5 from '@rollthecloudinc/context';\nimport { InlineContext } from '@rollthecloudinc/context';\nimport { PersistenceFormPayload } from '@rollthecloudinc/refinery';\nimport { InteractionsFormPayload } from '@rollthecloudinc/detour';\nimport * as i2 from '@rollthecloudinc/content';\nimport { ContentPluginEditorOptions, ContentBinding, ContentPlugin, CONTENT_PLUGIN } from '@rollthecloudinc/content';\nimport * as i4$1 from '@rollthecloudinc/datasource';\nimport { Dataset, Datasource, DatasourceModule } from '@rollthecloudinc/datasource';\nimport * as i4 from '@angular/material/autocomplete';\nimport * as i5 from '@angular/material/input';\nimport * as i6 from '@angular/material/select';\nimport * as i2$1 from '@rollthecloudinc/utils';\nimport { SITE_NAME, NoopDataService } from '@rollthecloudinc/utils';\nimport { MaterialModule } from '@rollthecloudinc/material';\nimport * as uuid from 'uuid';\nimport * as i1$2 from '@angular/material/bottom-sheet';\nimport * as i3$1 from '@angular/material/dialog';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i7 from '@angular/material/grid-list';\nimport * as i8 from '@angular/material/list';\nimport * as i9 from '@angular/material/tabs';\nimport * as i3$4 from '@rollthecloudinc/bridge';\nimport { BridgeBuilderPlugin, PublicApiBridgeService } from '@rollthecloudinc/bridge';\nimport * as i5$1 from '@rollthecloudinc/crud';\nimport { CrudAdaptorPlugin, CrudDataService, CrudModule } from '@rollthecloudinc/crud';\nimport * as i3$2 from '@rollthecloudinc/rules';\nimport * as cssJson from 'cssjson';\nimport { Aws3Module } from '@rollthecloudinc/aws3';\nimport { AwosModule } from '@rollthecloudinc/awos';\nimport { AuthModule } from '@rollthecloudinc/auth';\nimport * as i1$4 from '@ngrx/effects';\nimport { createEffect, ofType, EffectsModule } from '@ngrx/effects';\nimport * as jpp from 'jsonpath-plus';\nimport * as i1$5 from '@ngrx/store';\nimport { createAction, props, createReducer, on, StoreModule, createFeatureSelector, createSelector, select } from '@ngrx/store';\nimport * as i3$3 from '@rollthecloudinc/snippet';\nimport * as i1$6 from '@rollthecloudinc/plugin';\nimport { BasePluginManager, PluginDef, Plugin } from '@rollthecloudinc/plugin';\nimport { DataSource } from '@angular/cdk/collections';\nimport merge from 'deepmerge-json';\nimport { pluralize } from 'inflected';\n\n//import { EntityMetadataMap } from '@ngrx/data';\nfunction PanelPageLinkedlistComponent_mat_form_field_1_mat_option_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 5);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const i_r1 = ctx.index;\n    i0.\u0275\u0275property(\"value\", i_r1);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate1(\"panel page | level: \", i_r1);\n  }\n}\nfunction PanelPageLinkedlistComponent_mat_form_field_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-form-field\")(1, \"mat-select\", 3);\n    i0.\u0275\u0275template(2, PanelPageLinkedlistComponent_mat_form_field_1_mat_option_2_Template, 2, 2, \"mat-option\", 4);\n    i0.\u0275\u0275pipe(3, \"async\");\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(3, 1, ctx_r1.panelPages$));\n  }\n}\nfunction PanelPageLinkedlistComponent_mat_form_field_2_mat_option_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 5);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const i_r3 = ctx.index;\n    i0.\u0275\u0275property(\"value\", i_r3);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate1(\"panel | \", i_r3);\n  }\n}\nfunction PanelPageLinkedlistComponent_mat_form_field_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-form-field\")(1, \"mat-select\", 6);\n    i0.\u0275\u0275template(2, PanelPageLinkedlistComponent_mat_form_field_2_mat_option_2_Template, 2, 2, \"mat-option\", 4);\n    i0.\u0275\u0275pipe(3, \"async\");\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(3, 1, ctx_r1.panels$));\n  }\n}\nfunction PanelPageLinkedlistComponent_mat_form_field_3_mat_option_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-option\", 5);\n    i0.\u0275\u0275text(1);\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const i_r4 = ctx.index;\n    i0.\u0275\u0275property(\"value\", i_r4);\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275textInterpolate1(\"pane | \", i_r4);\n  }\n}\nfunction PanelPageLinkedlistComponent_mat_form_field_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-form-field\")(1, \"mat-select\", 7);\n    i0.\u0275\u0275template(2, PanelPageLinkedlistComponent_mat_form_field_3_mat_option_2_Template, 2, 2, \"mat-option\", 4);\n    i0.\u0275\u0275pipe(3, \"async\");\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(3, 1, ctx_r1.panes$));\n  }\n}\nfunction PanelPageLinkedlistComponent_druid_panels_panelpage_linkedlist_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275element(0, \"druid-panels-panelpage-linkedlist\", 8);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275property(\"panelPages\", ctx_r1.nested);\n  }\n}\nfunction PanelSelectorComponent_ng_template_10_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.\u0275\u0275getCurrentView();\n    i0.\u0275\u0275elementStart(0, \"a\", 2);\n    i0.\u0275\u0275listener(\"click\", function PanelSelectorComponent_ng_template_10_a_1_Template_a_click_0_listener() {\n      const panel_r2 = i0.\u0275\u0275restoreView(_r1).$implicit;\n      const ctx_r2 = i0.\u0275\u0275nextContext(2);\n      return i0.\u0275\u0275resetView(ctx_r2.onItemSelect(panel_r2.id));\n    });\n    i0.\u0275\u0275elementStart(1, \"span\", 6);\n    i0.\u0275\u0275text(2);\n    i0.\u0275\u0275elementEnd()();\n  }\n  if (rf & 2) {\n    const panel_r2 = ctx.$implicit;\n    i0.\u0275\u0275advance(2);\n    i0.\u0275\u0275textInterpolate2(\"\", panel_r2.title, \" [\", panel_r2.id, \"]\");\n  }\n}\nfunction PanelSelectorComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.\u0275\u0275elementStart(0, \"mat-nav-list\");\n    i0.\u0275\u0275template(1, PanelSelectorComponent_ng_template_10_a_1_Template, 3, 2, \"a\", 5);\n    i0.\u0275\u0275pipe(2, \"async\");\n    i0.\u0275\u0275elementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.\u0275\u0275nextContext();\n    i0.\u0275\u0275advance();\n    i0.\u0275\u0275property(\"ngForOf\", i0.\u0275\u0275pipeBind1(2, 1, ctx_r2.panels$));\n  }\n}\nconst entityMetadataFactory = (platformId, panelsSettings) => {\n  return {\n    PanelPageListItem: {\n      entityName: 'PanelPageListItem',\n      crud: {\n        /*rest: {\n          // ops: ['query'],\n          params: {\n            entityName: 'PanelPageListItem'\n          }\n        },*/\n        /*aws_opensearch_template: {\n          ops: ['query'],\n          params: {\n            id: 'panelpagelistitems',\n            index: 'classified_panelpages',\n            hits: true,\n            source: true,\n            // domain: 'search-classifieds-ui-dev-eldczuhq3vesgpjnr3vie6cagq',\n            domain: panelsSettings.openSearchDomain,\n            region: 'us-east-1'\n          }\n        },*/\n        /*aws_opensearch_entity: {\n          ops: ['create', 'update'],\n          params: {\n            index: 'classified_panelpages',\n            // domain: 'search-classifieds-ui-dev-eldczuhq3vesgpjnr3vie6cagq',\n            domain: panelsSettings.openSearchDomain,\n            region: 'us-east-1'\n          }\n        },*/\n        ...(isPlatformServer(platformId) ? {} : {\n          idb_keyval: {\n            params: {\n              prefix: 'panelpage__'\n            },\n            queryMappings: new Map([\n            // ['path', { defaultOperator: 'startsWith' }]\n            ['site', {\n              defaultOperator: 'term||wildcard'\n            }], ['path', {\n              defaultOperator: 'term||wildcard'\n            }]])\n          }\n        }),\n        /*aws_opensearch_entity: {\n          ops: ['create', 'update', 'read', 'delete']\n        },*/\n        idb_keyval: {\n          params: {\n            prefix: 'panelpage__'\n          },\n          queryMappings: new Map([\n          // ['path', { defaultOperator: 'startsWith' }]\n          ['site', {\n            defaultOperator: 'term||wildcard'\n          }], ['path', {\n            defaultOperator: 'term||wildcard'\n          }]])\n        }\n      }\n    },\n    PanelPage: {\n      entityName: 'PanelPage',\n      crud: {\n        /*aws_s3_entity: {\n          ops: ['query', 'create', 'update'],\n          params: {\n            // bucket: 'classifieds-ui-dev',\n            bucket: panelsSettings.s3Bucket,\n            prefix: 'panelpages/'\n          }\n        }*/\n        save: {\n          ops: ['create', 'update'],\n          plugin: 'rest',\n          params: {\n            entityName: 'PanelPage'\n          }\n        },\n        ...(isPlatformServer(platformId) ? {} : {\n          readPrimary: {\n            fallback: true,\n            ops: ['create', 'update', 'query'],\n            plugin: 'idb_keyval',\n            params: {\n              prefix: 'panelpage__'\n            }\n          }\n        }),\n        readFallback: {\n          fallback: true,\n          ops: ['query'],\n          plugin: 'rest',\n          params: {\n            entityName: 'PanelPage',\n            root: panelsSettings.objectsRootUrl,\n            // root: 'https://rollthecloudinc.github.io/ipe-objects',\n            // root: '/assets/objects',\n            suffix: '.json'\n          }\n        },\n        ...(isPlatformServer(platformId) ? {} : {\n          idb_keyval: {\n            params: {\n              prefix: 'panelpage__'\n            }\n          }\n        })\n      }\n    },\n    PanelPageState: {\n      entityName: 'PanelPageState'\n    }\n  };\n};\nclass PanelsSettings {\n  constructor(data) {\n    if (data) {\n      this.openSearchDomain = data.openSearchDomain;\n      this.s3Bucket = data.s3Bucket;\n      this.objectsRootUrl = data.objectsRootUrl;\n    }\n  }\n}\nclass PanelPage {\n  constructor(data) {\n    this.gridItems = [];\n    this.panels = [];\n    this.contexts = [];\n    this.rowSettings = [];\n    this.entityPermissions = new PanelPagePermissions();\n    if (data) {\n      this.id = data.id;\n      this.layoutType = data.layoutType;\n      this.displayType = data.displayType;\n      this.name = data.name ? data.name : undefined;\n      this.title = data.title ? data.title : undefined;\n      this.site = data.site ? data.site : undefined;\n      this.userId = data.userId ? data.userId : undefined;\n      this.path = data.path ? data.path : undefined;\n      this.persistence = data.persistence ? new PersistenceFormPayload(data.persistence) : undefined;\n      this.interactions = data.interactions ? new InteractionsFormPayload(data.interactions) : undefined;\n      if (data.panels) {\n        this.panels = data.panels.map(p => new Panel(p));\n      }\n      if (data.gridItems) {\n        this.gridItems = data.gridItems.map(i => new GridItem(i));\n      }\n      if (data.contexts) {\n        this.contexts = data.contexts.map(c => new InlineContext(c));\n      }\n      if (data.layoutSetting) {\n        this.layoutSetting = new LayoutSetting(data.layoutSetting);\n      }\n      if (data.rowSettings && Array.isArray(data.rowSettings)) {\n        this.rowSettings = data.rowSettings.map(s => new LayoutSetting(s));\n      }\n      if (data.entityPermissions) {\n        this.entityPermissions = new PanelPagePermissions(data.entityPermissions);\n      }\n      if (data.cssFile) {\n        this.cssFile = data.cssFile;\n      }\n    }\n  }\n}\nclass PanelPageListItem extends PanelPage {}\nclass GridLayout {\n  constructor(data) {\n    this.gridItems = [];\n    if (data) {\n      this.id = data.id;\n      this.site = data.site;\n      if (data.gridItems) {\n        this.gridItems = data.gridItems.map(i => new GridItem(i));\n      }\n    }\n  }\n}\nclass Panel {\n  constructor(data) {\n    this.settings = [];\n    this.panes = [];\n    if (data) {\n      this.name = data.name ? data.name : undefined;\n      this.label = data.label ? data.label : undefined;\n      this.stylePlugin = data.stylePlugin;\n      if (data.settings) {\n        this.settings = data.settings.map(a => new AttributeValue(a));\n      }\n      if (data.panes) {\n        this.panes = data.panes.map(p => new Pane(p));\n      }\n      if (data.columnSetting) {\n        this.columnSetting = new LayoutSetting(data.columnSetting);\n      }\n    }\n  }\n}\nclass Pane {\n  constructor(data) {\n    this.settings = [];\n    this.locked = false;\n    this.contexts = [];\n    if (data) {\n      this.name = data.name;\n      this.label = data.label;\n      this.contentPlugin = data.contentPlugin;\n      this.locked = data.locked !== undefined ? data.locked : false;\n      if (data.linkedPageId) {\n        this.linkedPageId = data.linkedPageId;\n      }\n      if (data.metadata !== undefined) {\n        this.metadata = new Map([...data.metadata]);\n      }\n      if (data.settings !== undefined) {\n        this.settings = data.settings.map(a => new AttributeValue(a));\n      }\n      if (data.contexts !== undefined) {\n        this.contexts = data.contexts.map(c => new InlineContext(c));\n      }\n      if (data.rule !== undefined && typeof data.rule !== 'string') {\n        this.rule = {\n          ...data.rule\n        };\n      }\n      if (data.nestedPage) {\n        this.nestedPage = new PanelPage(data.nestedPage);\n      }\n      if (data.resolvedContext) {\n        this.resolvedContext = {\n          ...data.resolvedContext\n        };\n      }\n    }\n  }\n}\nclass GridItem {\n  constructor(data) {\n    if (data) {\n      this.cols = data.cols;\n      this.rows = data.rows;\n      this.x = data.x;\n      this.y = data.y;\n      this.weight = data.weight;\n    }\n  }\n}\nclass LayoutSetting {\n  constructor(data) {\n    this.settings = [];\n    if (data) {\n      if (data.settings && Array.isArray(data.settings)) {\n        this.settings = data.settings.map(v => new AttributeValue(v));\n      }\n    }\n  }\n}\nclass PanelPagePermissions {\n  constructor(data) {\n    this.readUserIds = [];\n    this.writeUserIds = [];\n    this.deleteUserIds = [];\n    if (data) {\n      this.readUserIds = data.readUserIds ? data.readUserIds.map(id => id) : [];\n      this.writeUserIds = data.writeUserIds ? data.writeUserIds.map(id => id) : [];\n      this.deleteUserIds = data.deleteUserIds ? data.deleteUserIds.map(id => id) : [];\n    }\n  }\n}\n/*<classifieds-ui-gridless-layout cdkDropListGroup>\n    <ng-template #extraActions>\n      <button *ngIf=\"savable\" type=\"submit\">Save</button>\n      <button *ngIf=\"savable\" type=\"button\" (click)=\"onPropertiesClick()\">Properties</button>\n      <ng-container *ngIf=\"savable\"><ng-container *ngTemplateOutlet=\"contextsMenuTpl\"></ng-container></ng-container>\n      <button *ngIf=\"nested\" type=\"button\" (click)=\"onDeleteClick()\">Delete</button>\n      <button *ngIf=\"nested\" type=\"button\" (click)=\"onRulesClick()\">Rules</button>\n      <button type=\"button\" (mousedown)=\"addContent(0)\" (touchstart)=\"addContent(0)\">Add Content</button>\n      <button type=\"button\" (mousedown)=\"editPanelProps(0)\" (touchstart)=\"editPanelProps(0)\" >Props</button>\n      <span *ngIf=\"hasPanelStyle(0)\">Style: {{ panelStyleTitle(0) }}</span>\n      <button *ngIf=\"!hasPanelStyle(0)\" type=\"button\" (mousedown)=\"applyStyle(0)\" (touchstart)=\"applyStyle(0)\">Apply Style</button>\n      <div class=\"layout-type\">\n        <mat-form-field>\n          <mat-select required [formControl]=\"layoutType\">\n            <mat-option value=\"grid\">Grid</mat-option>\n            <mat-option value=\"gridless\">Gridless</mat-option>\n            <mat-option value=\"split\">Split</mat-option>\n          </mat-select>\n        </mat-form-field>\n      </div>\n      <ng-container *ngTemplateOutlet=\"extraActionsAreaTmpl\"></ng-container>\n    </ng-template>\n    <ng-template #gridItemActions let-i=\"i\"></ng-template>\n    <ng-template #innerGridItem let-i=\"i\">\n      <ngx-dropzone [cdkDropListData]=\"i\" class=\"panel-dropzone\" [multiple]=\"true\" [disableClick]=\"true\" (change)=\"onFileChange($event, i)\" cdkDropList (cdkDropListDropped)=\"onDrop($event)\">\n        <div #panes>\n          <classifieds-ui-editable-pane *ngFor=\"let pane of panelPanes(i).controls; let j = index\" class=\"editable-pane\" (delete)=\"onDeletePane(i, j)\" (rules)=\"onRulesPane(i, j)\" (nestedUpdate)=\"onNestedUpdate($event, i, j)\" (rendererOverride)=\"onOverrideRenderer(i, j)\" (removeRendererOverride)=\"onRemoveOverrideRenderer(i, j)\" (edit)=\"onPaneEdit(i, j)\" (delete)=\"onPaneDelete(i, j)\" [panelIndex]=\"i\" [paneIndex]=\"j\" [name]=\"panelPaneName(i, j)\" [label]=\"panelPaneLabel(i, j)\" [locked]=\"panelPaneLocked(i, j)\" [contexts]=\"contexts\" [pluginName]=\"panelPanePlugin(i, j)\" [settings]=\"panelPaneSettings(i, j)\" cdkDrag>\n            <div class=\"custom-placeholder\" *cdkDragPlaceholder></div>\n          </classifieds-ui-editable-pane>\n        </div>\n      </ngx-dropzone>\n    </ng-template>\n  </classifieds-ui-gridless-layout>*/\nlet PanelContentHandler = /*#__PURE__*/(() => {\n  class PanelContentHandler {\n    constructor(attributeSerializer) {\n      this.attributeSerializer = attributeSerializer;\n    }\n    handleFile(file) {\n      return of();\n    }\n    handlesType(type) {\n      return false;\n    }\n    implementsRendererOverride() {\n      return false;\n    }\n    hasRendererOverride(settings) {\n      return of(false);\n    }\n    isDynamic(settings) {\n      return false;\n    }\n    isData(settings) {\n      return false;\n    }\n    buildDynamicItems(settings, metadata) {\n      return of([]);\n    }\n    fetchDynamicData(settings, metadata) {\n      return of(new Dataset());\n    }\n    getBindings(settings, type) {\n      return of([]);\n    }\n    toObject(settings) {\n      return of(this.attributeSerializer.deserializeAsObject(settings));\n    }\n    buildSettings(panelPage) {\n      return this.attributeSerializer.serialize(panelPage, 'root').attributes;\n    }\n    fromPanes(panesAsSettings) {\n      return panesAsSettings.map(p => new Pane(this.attributeSerializer.deserialize(p)));\n    }\n    wrapPanel(panes) {\n      return new Panel({\n        stylePlugin: undefined,\n        settings: [],\n        panes: panes,\n        columnSetting: new LayoutSetting()\n      });\n    }\n    stateDefinition(settings) {\n      return of({});\n    }\n    editorOptions(settings) {\n      return of(new ContentPluginEditorOptions());\n    }\n    static {\n      this.\u0275fac = function PanelContentHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelContentHandler)(i0.\u0275\u0275inject(i1.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelContentHandler,\n        factory: PanelContentHandler.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PanelContentHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelPageLinkedlistComponent = /*#__PURE__*/(() => {\n  class PanelPageLinkedlistComponent {\n    set panelPages(panelPages) {\n      this.panelPages$.next(panelPages);\n    }\n    set panels(panels) {\n      this.panels$.next(panels);\n    }\n    set panes(panes) {\n      this.panes$.next(panes);\n    }\n    get panelPages() {\n      return this.panelPages$.value && Array.isArray(this.panelPages$.value) ? this.panelPages$.value : [];\n    }\n    get panels() {\n      return this.panels$.value && Array.isArray(this.panels$.value) ? this.panels$.value : [];\n    }\n    get panes() {\n      return this.panes$.value && Array.isArray(this.panes$.value) ? this.panes$.value : [];\n    }\n    get nested() {\n      return this.nested$.value && typeof this.nested$.value !== undefined && this.nested$.value.length > 0 ? [...this.nested$.value] : undefined;\n    }\n    constructor(fb, panelHandler) {\n      this.fb = fb;\n      this.panelHandler = panelHandler;\n      this.panelPages$ = new BehaviorSubject([]);\n      this.panels$ = new BehaviorSubject([]);\n      this.panes$ = new BehaviorSubject([]);\n      this.nested$ = new BehaviorSubject([]);\n      this.formGroup = this.fb.group({\n        panelPage: this.fb.control(undefined),\n        panel: this.fb.control(undefined),\n        pane: this.fb.control(undefined),\n        nested: this.fb.control(undefined)\n      });\n      this.panelPageSub = this.formGroup.get('panelPage').valueChanges.subscribe(index => {\n        this.panels$.next(new PanelPage(this.panelPages$.value[index]).panels);\n      });\n      this.panelSub = this.formGroup.get('panel').valueChanges.subscribe(index => {\n        this.panes$.next(new Panel(this.panels$.value[index]).panes);\n      });\n      this.paneSub = this.formGroup.get('pane').valueChanges.pipe(map(index => this.panes$.value[index]), switchMap(pane => iif(() => pane.contentPlugin === 'panel', this.panelHandler.toObject(pane.settings), of(undefined))), filter(p => !!p)).subscribe(panelPage => {\n        this.nested$.next([panelPage]);\n      });\n      this.onTouched = () => {};\n    }\n    writeValue(val) {\n      if (val) {\n        this.formGroup.setValue(val, {\n          emitEvent: false\n        });\n      }\n    }\n    registerOnChange(fn) {\n      this.formGroup.valueChanges.subscribe(fn);\n    }\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n      if (isDisabled) {\n        this.formGroup.disable();\n      } else {\n        this.formGroup.enable();\n      }\n    }\n    validate(c) {\n      return this.formGroup.valid ? null : {\n        invalidForm: {\n          valid: false\n        }\n      };\n    }\n    static {\n      this.\u0275fac = function PanelPageLinkedlistComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelPageLinkedlistComponent)(i0.\u0275\u0275directiveInject(i1$1.UntypedFormBuilder), i0.\u0275\u0275directiveInject(PanelContentHandler));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PanelPageLinkedlistComponent,\n        selectors: [[\"druid-panels-panelpage-linkedlist\"]],\n        inputs: {\n          panelPages: \"panelPages\",\n          panels: \"panels\",\n          panes: \"panes\"\n        },\n        standalone: false,\n        features: [i0.\u0275\u0275ProvidersFeature([{\n          provide: NG_VALUE_ACCESSOR,\n          useExisting: forwardRef(() => PanelPageLinkedlistComponent),\n          multi: true\n        }, {\n          provide: NG_VALIDATORS,\n          useExisting: forwardRef(() => PanelPageLinkedlistComponent),\n          multi: true\n        }])],\n        decls: 5,\n        vars: 5,\n        consts: [[3, \"formGroup\"], [4, \"ngIf\"], [\"formControlName\", \"nested\", 3, \"panelPages\", 4, \"ngIf\"], [\"required\", \"\", \"formControlName\", \"panelPage\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"required\", \"\", \"formControlName\", \"panel\"], [\"required\", \"\", \"formControlName\", \"pane\"], [\"formControlName\", \"nested\", 3, \"panelPages\"]],\n        template: function PanelPageLinkedlistComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"div\", 0);\n            i0.\u0275\u0275template(1, PanelPageLinkedlistComponent_mat_form_field_1_Template, 4, 3, \"mat-form-field\", 1)(2, PanelPageLinkedlistComponent_mat_form_field_2_Template, 4, 3, \"mat-form-field\", 1)(3, PanelPageLinkedlistComponent_mat_form_field_3_Template, 4, 3, \"mat-form-field\", 1)(4, PanelPageLinkedlistComponent_druid_panels_panelpage_linkedlist_4_Template, 1, 1, \"druid-panels-panelpage-linkedlist\", 2);\n            i0.\u0275\u0275elementEnd();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.formGroup);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.panelPages.length > 0);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.panels.length > 0);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.panes.length > 0);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"ngIf\", ctx.nested);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i1$1.NgControlStatus, i1$1.NgControlStatusGroup, i1$1.RequiredValidator, i1$1.FormGroupDirective, i1$1.FormControlName, i4.MatOption, i5.MatFormField, i6.MatSelect, PanelPageLinkedlistComponent, i3.AsyncPipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return PanelPageLinkedlistComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelSelectorComponent = /*#__PURE__*/(() => {\n  class PanelSelectorComponent {\n    // private contentPlugin: ContentPlugin;\n    constructor(\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    siteName, bottomSheetRef, handler, dialog, fb, es) {\n      this.siteName = siteName;\n      this.bottomSheetRef = bottomSheetRef;\n      this.handler = handler;\n      this.dialog = dialog;\n      this.fb = fb;\n      this.selectedIndex = 0;\n      this.panelPagesService = es.getEntityCollectionService('PanelPage');\n      this.panelPageListItemsService = es.getEntityCollectionService('PanelPageListItem');\n      // this.contentPlugin = contentPlugins.find(p => p.name === 'panel');\n    }\n    ngOnInit() {}\n    onNewSelect() {\n      const name = uuid.v4();\n      const newPanel = new PanelPage({\n        id: undefined,\n        layoutType: 'split',\n        displayType: 'page',\n        site: this.siteName,\n        gridItems: [],\n        panels: [],\n        layoutSetting: new LayoutSetting(),\n        rowSettings: []\n      });\n      this.panelFormGroup.get('panes').push(this.fb.group({\n        contentPlugin: 'panel',\n        name: name,\n        label: name,\n        rule: new UntypedFormControl(''),\n        settings: this.fb.array(this.handler.buildSettings(newPanel).map(s => this.convertToGroup(s)))\n      }));\n      this.bottomSheetRef.dismiss();\n    }\n    onLinkSelect() {\n      this.selectedIndex = 1;\n      this.panels$ = this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(this.siteName)}`);\n    }\n    onEmbedSelect() {\n      const name = uuid.v4();\n      this.panelFormGroup.get('panes').push(this.fb.group({\n        contentPlugin: 'panel',\n        name: name,\n        label: name,\n        rule: new UntypedFormControl(''),\n        locked: new UntypedFormControl(true),\n        settings: this.fb.array([])\n      }));\n      this.bottomSheetRef.dismiss();\n    }\n    onItemSelect(panel) {\n      const name = uuid.v4();\n      //this.panelPagesService.getByKey(panel).subscribe(p => {\n      //this.dialog.open(this.contentPlugin.editorComponent, { data: { panelFormGroup: this.panelFormGroup, pane: undefined, paneIndex: undefined, panelPage: p } });\n      this.panelFormGroup.get('panes').push(this.fb.group({\n        contentPlugin: 'panel',\n        name: name,\n        label: name,\n        rule: new UntypedFormControl(''),\n        linkedPageId: new UntypedFormControl(panel, Validators.required),\n        locked: new UntypedFormControl(true),\n        // settings: this.fb.array(this.handler.buildSettings(p).map(s => this.convertToGroup(s)))\n        settings: this.fb.array([])\n      }));\n      this.bottomSheetRef.dismiss();\n      //});\n    }\n    convertToGroup(setting) {\n      const fg = this.fb.group({\n        name: new UntypedFormControl(setting.name, Validators.required),\n        type: new UntypedFormControl(setting.type, Validators.required),\n        displayName: new UntypedFormControl(setting.displayName, Validators.required),\n        value: new UntypedFormControl(setting.value, Validators.required),\n        computedValue: new UntypedFormControl(setting.value, Validators.required),\n        attributes: new UntypedFormArray([])\n      });\n      if (setting.attributes && setting.attributes.length > 0) {\n        setting.attributes.forEach(s => {\n          fg.get('attributes').push(this.convertToGroup(s));\n        });\n      }\n      return fg;\n    }\n    static {\n      this.\u0275fac = function PanelSelectorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelSelectorComponent)(i0.\u0275\u0275directiveInject(SITE_NAME), i0.\u0275\u0275directiveInject(i1$2.MatBottomSheetRef), i0.\u0275\u0275directiveInject(PanelContentHandler), i0.\u0275\u0275directiveInject(i3$1.MatDialog), i0.\u0275\u0275directiveInject(i1$1.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PanelSelectorComponent,\n        selectors: [[\"classifieds-ui-panel-selector\"]],\n        inputs: {\n          panelFormGroup: \"panelFormGroup\"\n        },\n        standalone: false,\n        decls: 11,\n        vars: 1,\n        consts: [[\"mat-align-tabs\", \"start\", 3, \"selectedIndex\"], [\"label\", \"Type\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\"], [\"label\", \"Search\"], [\"matTabContent\", \"\"], [\"mat-list-item\", \"\", \"mat-list-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-line\", \"\"]],\n        template: function PanelSelectorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"mat-tab-group\", 0)(1, \"mat-tab\", 1)(2, \"mat-nav-list\")(3, \"a\", 2);\n            i0.\u0275\u0275listener(\"click\", function PanelSelectorComponent_Template_a_click_3_listener() {\n              return ctx.onNewSelect();\n            });\n            i0.\u0275\u0275text(4, \"New Panel\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(5, \"a\", 2);\n            i0.\u0275\u0275listener(\"click\", function PanelSelectorComponent_Template_a_click_5_listener() {\n              return ctx.onLinkSelect();\n            });\n            i0.\u0275\u0275text(6, \"Link Panel\");\n            i0.\u0275\u0275elementEnd();\n            i0.\u0275\u0275elementStart(7, \"a\", 2);\n            i0.\u0275\u0275listener(\"click\", function PanelSelectorComponent_Template_a_click_7_listener() {\n              return ctx.onEmbedSelect();\n            });\n            i0.\u0275\u0275text(8, \"Embed Panel\");\n            i0.\u0275\u0275elementEnd()()();\n            i0.\u0275\u0275elementStart(9, \"mat-tab\", 3);\n            i0.\u0275\u0275template(10, PanelSelectorComponent_ng_template_10_Template, 3, 3, \"ng-template\", 4);\n            i0.\u0275\u0275elementEnd()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"selectedIndex\", ctx.selectedIndex);\n          }\n        },\n        dependencies: [i3.NgForOf, i7.MatLine, i8.MatNavList, i8.MatListItem, i9.MatTabContent, i9.MatTab, i9.MatTabGroup, i3.AsyncPipe],\n        encapsulation: 2\n      });\n    }\n  }\n  return PanelSelectorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelEditorComponent = /*#__PURE__*/(() => {\n  class PanelEditorComponent {\n    constructor() {}\n    ngOnInit() {}\n    static {\n      this.\u0275fac = function PanelEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelEditorComponent)();\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PanelEditorComponent,\n        selectors: [[\"classifieds-ui-panel-editor\"]],\n        standalone: false,\n        decls: 2,\n        vars: 0,\n        template: function PanelEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"p\");\n            i0.\u0275\u0275text(1, \"panel-editor works!\");\n            i0.\u0275\u0275elementEnd();\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return PanelEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass PanelPageState {\n  constructor(data) {\n    this.panels = [];\n    if (data) {\n      this.id = data.id;\n      if (data.panels !== undefined && Array.isArray(data.panels)) {\n        this.panels = data.panels.map(p => new PanelState(p));\n      }\n    }\n  }\n}\nclass PanelState {\n  constructor(data) {\n    this.panes = [];\n    if (data) {\n      if (data.panes !== undefined && Array.isArray(data.panes)) {\n        this.panes = data.panes.map(p => new PaneState(p));\n      }\n    }\n  }\n}\nclass PaneState {\n  constructor(data) {\n    if (data) {\n      if (data.state !== undefined) {\n        this.state = new AttributeValue(data.state);\n      }\n      if (data.nestedPage !== undefined && data.nestedPage !== null) {\n        this.nestedPage = new PanelPageState(data.nestedPage);\n      }\n    }\n  }\n}\nlet DatasourceContentHandler = /*#__PURE__*/(() => {\n  class DatasourceContentHandler {\n    constructor(siteName, panelHandler, attributeSerializer, rulesResolver, dpm, datasourceEvalutator) {\n      this.siteName = siteName;\n      this.panelHandler = panelHandler;\n      this.attributeSerializer = attributeSerializer;\n      this.rulesResolver = rulesResolver;\n      this.dpm = dpm;\n      this.datasourceEvalutator = datasourceEvalutator;\n    }\n    handleFile(file) {\n      return of([]);\n    }\n    handlesType(type) {\n      return false;\n    }\n    implementsRendererOverride() {\n      return true;\n    }\n    hasRendererOverride(settings) {\n      return of(false);\n    }\n    isDynamic(settings) {\n      return true;\n    }\n    isData(settings) {\n      return true;\n    }\n    fetchDynamicData(settings, metadata) {\n      const dataPanes = metadata.has('dataPanes') ? new Map(metadata.get('dataPanes').map(p => [p.name, p])) : new Map([]);\n      const datasources = new Map(Array.from(dataPanes).map(([k, v]) => [k, new Datasource(this.attributeSerializer.deserializeAsObject(v.settings))]));\n      return this.toObject(settings).pipe(switchMap(ds => this.datasourceEvalutator.evalDatasource({\n        datasource: ds,\n        metadata,\n        datasources\n      })));\n      /*return this.toObject(settings).pipe(\n        switchMap(ds => this.dpm.getPlugin(ds.plugin).pipe(\n          map<DatasourcePlugin<string>, [Datasource, DatasourcePlugin<string>]>(p => [ds, p])\n        )),\n        switchMap(([ds, p]) => p.fetch({ settings: ds.settings, metadata, datasource: ds }).pipe(\n          map<Dataset, [Datasource, Dataset]>(d => [ds, d])\n        )),\n        switchMap(([ds, dataset]) =>\n          forkJoin(\n            ds.renderer.bindings.reduce<Array<Observable<Datasource>>>((p, c) => [ ...p, ...(dataPanes.has(c.id) ? [ this.toObject(dataPanes.get(c.id).settings) ] : []) ], [])\n          ).pipe(\n            switchMap(datasources => datasources.reduce<Observable<Dataset>>((p, c) => p.pipe(\n              switchMap<Dataset, Observable<[DatasourcePlugin<string>, Dataset, Datasource]>>(dataset2 => this.dpm.getPlugin(c.plugin).pipe(\n                map(dsp => [dsp, dataset2, c])\n              )),\n              switchMap(([dsp, dataset2, nestedDatasource]) => dsp.fetch({ settings: c.settings, dataset: dataset2, metadata, datasource: nestedDatasource }))\n            ), of(dataset))),\n            map(dataset => dataset),\n            defaultIfEmpty(dataset)\n          )\n        )\n      );*/\n    }\n    buildDynamicItems(settings, metadata) {\n      const dataPanes = new Map(metadata.get('dataPanes').map(p => [p.name, p]));\n      return this.fetchDynamicData(settings, metadata).pipe(switchMap(dataset => this.toObject(settings).pipe(map(ds => [ds, dataset]))), switchMap(([ds, dataset]) => this.getBindings(settings, 'pane').pipe(map(bindings => [ds, dataset, bindings]))), switchMap(([ds, dataset, bindings]) => iif(() => dataset.results.length !== 0 && bindings.length > 0, forkJoin(dataset.results.map(row => forkJoin(bindings.filter(b => !dataPanes.has(b.id)).map(binding => of(metadata.get('panes').find(p => p.name === binding.id)).pipe(switchMap(pane => iif(() => pane && pane.rule && pane.rule !== null && pane.rule.condition !== '', pane ? this.rulesResolver.evaluate(pane.rule, [...metadata.get('contexts'), ...(pane.contexts !== undefined ? pane.contexts : []), new InlineContext({\n        name: \"_root\",\n        adaptor: 'data',\n        data: row\n      })]).pipe(map(res => [pane, res])) : of([pane, false]), of(false).pipe(map(b => [pane, b])))), filter(([_, res]) => res), map(([pane, _]) => pane.name), defaultIfEmpty(binding.id)))).pipe(map(groups => groups.reduce((p, c) => [...p, c], []))))).pipe(map(groups => [ds, dataset, groups])), new Observable(obs => {\n        obs.next([ds, dataset, []]);\n        obs.complete();\n      }))), map(([_, dataset, paneMappings]) => dataset.results.reduce((p, row, rowIndex) => [...p, ...(paneMappings[rowIndex] ? paneMappings[rowIndex].map(bId => new Pane({\n        ...metadata.get('panes').find(p => p.name === bId),\n        rule: undefined,\n        label: uuid.v4(),\n        contexts: [...metadata.get('contexts'), new InlineContext({\n          name: \"_root\",\n          adaptor: 'data',\n          data: row\n        })]\n      })) : [])], [])), map(panes => new Panel({\n        stylePlugin: undefined,\n        settings: [],\n        panes,\n        columnSetting: new LayoutSetting()\n      })), map(panel => this.panelHandler.buildSettings(new PanelPage({\n        id: undefined,\n        layoutType: 'grid',\n        displayType: 'page',\n        site: this.siteName,\n        gridItems: [],\n        layoutSetting: new LayoutSetting(),\n        rowSettings: [],\n        panels: [panel]\n      }))), map(panelSettings => panelSettings.find(s => s.name === 'panels').attributes[0].attributes.find(s => s.name === 'panes').attributes));\n    }\n    getBindings(settings, type, metadata) {\n      const dataPanes = metadata ? new Map(metadata.get('dataPanes').map(p => [p.name, p])) : new Map();\n      if (type === 'context') {\n        return this.toObject(settings).pipe(map(ds => [ds, ds.params ? ds.params.reduce((p, c) => [...p, ...(c.mapping.type === 'form' ? [new ContentBinding({\n          id: `form__${c.mapping.value.split('.', 2)[0].trim()}`,\n          type: 'context'\n        })] : [])], []) : []]), switchMap(([ds, bindings]) => this.dpm.getPlugin(ds.plugin).pipe(switchMap(dsp => dsp.getBindings({\n          settings: ds.settings,\n          metadata\n        }).pipe(map(bindings => [ds, bindings]))))), switchMap(([ds, bindings]) => forkJoin(ds.renderer.bindings.reduce((p, c) => [...p, ...(dataPanes.has(c.id) ? [this.toObject(dataPanes.get(c.id).settings)] : [])], [])).pipe(switchMap(datasources => forkJoin(datasources.map(d => this.dpm.getPlugin(d.plugin).pipe(switchMap(dsp => dsp.getBindings({\n          settings: d.settings,\n          metadata\n        }))))).pipe(map(dsBindings => dsBindings.reduce((p, c) => [...p, ...c], bindings)), defaultIfEmpty(bindings))), defaultIfEmpty(bindings))));\n      } else {\n        return this.toObject(settings).pipe(switchMap(ds => iif(() => ds.renderer.type === type, of(ds.renderer.bindings), of([]))));\n      }\n    }\n    toObject(settings) {\n      return of(this.attributeSerializer.deserializeAsObject(settings));\n    }\n    buildSettings(rest) {\n      return this.attributeSerializer.serialize(rest, 'root').attributes;\n    }\n    getRenderType(settings) {\n      const renderType = [settings.find(s => s.name === 'renderer')].map(r => r.attributes.find(s => s.name === 'type'));\n      return renderType.length > 0 ? renderType[0].value : undefined;\n    }\n    stateDefinition(settings) {\n      // What about this?\n      return of({\n        autocomplete: {\n          input: ''\n        },\n        loading: 'y'\n      });\n    }\n    editorOptions(settings) {\n      return this.toObject(settings).pipe(switchMap(ds => this.dpm.getPlugin(ds && ds.plugin ? ds.plugin : 'data').pipe(map(p => [ds, p]))), switchMap(([ds, p]) => p.editorOptions ? p.editorOptions({\n        settings: ds && ds.settings ? ds.settings : []\n      }) : of(undefined)), map(o => new ContentPluginEditorOptions({\n        fullscreen: o ? o.fullscreen : false\n      })));\n    }\n    static {\n      this.\u0275fac = function DatasourceContentHandler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || DatasourceContentHandler)(i0.\u0275\u0275inject(SITE_NAME), i0.\u0275\u0275inject(PanelContentHandler), i0.\u0275\u0275inject(i1.AttributeSerializerService), i0.\u0275\u0275inject(i3$2.RulesResolverService), i0.\u0275\u0275inject(i4$1.DatasourcePluginManager), i0.\u0275\u0275inject(i4$1.DatasourceEvaluator));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: DatasourceContentHandler,\n        factory: DatasourceContentHandler.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return DatasourceContentHandler;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet DatasourceEditorComponent = /*#__PURE__*/(() => {\n  class DatasourceEditorComponent {\n    constructor(data, dialogRef, fb, attributeSerializer, datasourceHandler) {\n      this.data = data;\n      this.dialogRef = dialogRef;\n      this.fb = fb;\n      this.attributeSerializer = attributeSerializer;\n      this.datasourceHandler = datasourceHandler;\n      this.datasource = new Datasource();\n      this.bindableOptions = [];\n      this.contexts = [];\n      this.formGroup = this.fb.group({\n        source: this.fb.control('')\n      });\n    }\n    ngOnInit() {\n      const panesArray = this.data.panelFormGroup.get('panes');\n      this.bindableOptions = panesArray.controls.reduce((p, c) => c.get('name').value ? [...p, c.get('name').value] : [...p], []);\n      this.contexts = this.data.contexts.map(c => c.name);\n      if (this.data.panelIndex !== undefined && this.data.paneIndex < panesArray.length) {\n        const settings = panesArray.at(this.data.paneIndex).get('settings').value.map(s => new AttributeValue(s));\n        this.datasourceHandler.toObject(settings).subscribe(ds => {\n          this.datasource = ds;\n        });\n      }\n    }\n    onSubmit() {\n      const sourceSettings = this.attributeSerializer.serialize(this.formGroup.value.source, 'source');\n      const paneForm = this.data.panelFormGroup.get('panes').at(this.data.paneIndex);\n      if (this.data.paneIndex === undefined) {\n        this.data.panelFormGroup.get('panes').push(this.fb.group({\n          contentPlugin: 'datasource',\n          name: new UntypedFormControl(''),\n          label: new UntypedFormControl(''),\n          rule: new UntypedFormControl(''),\n          settings: this.fb.array(sourceSettings.attributes.map(a => this.attributeSerializer.convertToGroup(a)))\n        }));\n        console.log(this.data.panelFormGroup.get('panes').value);\n      } else {\n        paneForm.get('settings').clear();\n        sourceSettings.attributes.forEach(a => paneForm.get('settings').push(this.attributeSerializer.convertToGroup(a)));\n      }\n      this.dialogRef.close();\n    }\n    static {\n      this.\u0275fac = function DatasourceEditorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || DatasourceEditorComponent)(i0.\u0275\u0275directiveInject(MAT_DIALOG_DATA), i0.\u0275\u0275directiveInject(i3$1.MatDialogRef), i0.\u0275\u0275directiveInject(i1$1.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i1.AttributeSerializerService), i0.\u0275\u0275directiveInject(DatasourceContentHandler));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: DatasourceEditorComponent,\n        selectors: [[\"classifieds-ui-datasource-editor\"]],\n        standalone: false,\n        decls: 4,\n        vars: 4,\n        consts: [[3, \"ngSubmit\", \"formGroup\"], [\"formControlName\", \"source\", 3, \"bindableOptions\", \"contexts\", \"datasource\"], [\"type\", \"submit\"]],\n        template: function DatasourceEditorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.\u0275\u0275elementStart(0, \"form\", 0);\n            i0.\u0275\u0275listener(\"ngSubmit\", function DatasourceEditorComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.onSubmit();\n            });\n            i0.\u0275\u0275element(1, \"classifieds-ui-datasource-form\", 1);\n            i0.\u0275\u0275elementStart(2, \"button\", 2);\n            i0.\u0275\u0275text(3, \"Save\");\n            i0.\u0275\u0275elementEnd()();\n          }\n          if (rf & 2) {\n            i0.\u0275\u0275property(\"formGroup\", ctx.formGroup);\n            i0.\u0275\u0275advance();\n            i0.\u0275\u0275property(\"bindableOptions\", ctx.bindableOptions)(\"contexts\", ctx.contexts)(\"datasource\", ctx.datasource);\n          }\n        },\n        dependencies: [i1$1.\u0275NgNoValidate, i1$1.NgControlStatus, i1$1.NgControlStatusGroup, i1$1.FormGroupDirective, i1$1.FormControlName, i4$1.DatasourceFormComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return DatasourceEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst panelContentPluginFactory = handler => {\n  return new ContentPlugin({\n    id: 'panel',\n    title: 'Panel',\n    selectionComponent: PanelSelectorComponent,\n    editorComponent: PanelEditorComponent,\n    renderComponent: undefined,\n    handler\n  });\n};\nconst datasourceContentPluginFactory = handler => {\n  return new ContentPlugin({\n    id: 'datasource',\n    title: 'Datasource',\n    selectionComponent: undefined,\n    editorComponent: DatasourceEditorComponent,\n    renderComponent: undefined,\n    handler\n  });\n};\nconst panelsBridgeFactory = (es, attributeSerializer) => {\n  return new BridgeBuilderPlugin({\n    id: 'panels',\n    title: 'Panels',\n    build: () => {\n      PublicApiBridgeService.prototype['writePaneState'] = (f, v) => {\n        return new Promise(res => {\n          const svc = es.getEntityCollectionService('PanelPageState');\n          svc.getByKey(f.id).pipe(catchError(() => of(new PanelPageState({\n            id: f.id,\n            panels: []\n          }))), map(p => p === undefined ? new PanelPageState({\n            id: f.id,\n            panels: []\n          }) : p), map(p => {\n            const state = attributeSerializer.serialize(v, 'root');\n            let panelPageState = new PanelPageState({\n              ...p,\n              panels: []\n            });\n            for (let i = 0; i < f.panelIndex + 1; i++) {\n              panelPageState.panels.push(i < p.panels.length ? new PanelState({\n                ...p.panels[i],\n                panes: []\n              }) : new PanelState());\n              for (let j = 0; j < f.paneIndex + 1; j++) {\n                if (i === f.panelIndex && j === f.paneIndex) {\n                  panelPageState.panels[i].panes.push(i < p.panels.length && j < p.panels[i].panes.length ? new PaneState({\n                    ...p.panels[i].panes[j],\n                    state\n                  }) : new PaneState({\n                    state\n                  }));\n                } else {\n                  panelPageState.panels[i].panes.push(i < p.panels.length && j < p.panels[i].panes.length ? new PaneState({\n                    ...p.panels[i].panes[j]\n                  }) : new PaneState());\n                }\n              }\n            }\n            return panelPageState;\n          }), switchMap(pps => svc.upsert(pps))).subscribe(pps => {\n            res(pps);\n          });\n        });\n      };\n    }\n  });\n};\nconst panelpageStylesheetToFileCrudAdaptorPluginFactory = fileService => {\n  return new CrudAdaptorPlugin({\n    id: 'panelpagestylesheet_upload',\n    title: 'panelpagestylesheet_upload',\n    create: ({\n      object\n    }) => of({\n      success: false,\n      entity: new File([cssJson.toCSS(object.styles)], `panelpage__${object.id}.css`, {\n        type: 'text/css'\n      })\n    }).pipe(switchMap(({\n      entity\n    }) => fileService.bulkUpload({\n      files: [entity],\n      fileNameOverride: `panelpage__${object.id}.css`\n    })), map(() => ({\n      success: true,\n      entity: undefined\n    }))),\n    read: ({}) => of({\n      success: false\n    }),\n    update: ({\n      object\n    }) => of({\n      success: false,\n      entity: new File([cssJson.toCSS(object.styles)], `panelpage__${object.id}.css`, {\n        type: 'text/css'\n      })\n    }).pipe(switchMap(({\n      entity\n    }) => fileService.bulkUpload({\n      files: [entity],\n      fileNameOverride: `panelpage__${object.id}.css`\n    })), map(() => ({\n      success: true,\n      entity: undefined\n    }))),\n    delete: ({}) => of({\n      success: false\n    })\n  });\n};\nconst loadRestData = createAction('[PageBuilder] Load Rest Data', props());\nconst loadRestDataSuccess = createAction('[PageBuilder] Load Rest Data Success', props());\nconst loadRestDataError = createAction('[PageBuilder] Load Rest Data Error', props());\nconst setPageInfo = createAction('[PageBuilder] Set Page Info', props());\nconst setForm = createAction('[PageBuilder] Set Form', props());\nconst setPage = createAction('[PageBuilder] Set Page', props());\nconst setSelectionPath = createAction('[PageBuilder] Selection Path', props());\n\n/// import { DatasourceApiService } from '../../services/datasource-api.service';\nlet PageBuilderEffects = /*#__PURE__*/(() => {\n  class PageBuilderEffects {\n    fetchRestdata$(rest) {\n      const method = rest.method ? rest.method : 'get';\n      switch (method) {\n        case 'post':\n        case 'POST':\n          return of([]).pipe(switchMap(() => this.snippetParserService.parseSnippet({\n            snippet: rest.body\n          })), switchMap(body => this.datasourceApi.postData({\n            url: rest.url,\n            body\n          })));\n        default:\n          return this.datasourceApi.getData(rest.url);\n      }\n    }\n    constructor(actions$, datasourceApi, snippetParserService) {\n      this.actions$ = actions$;\n      this.datasourceApi = datasourceApi;\n      this.snippetParserService = snippetParserService;\n      this.loadRestData$ = createEffect(() => this.actions$.pipe(ofType(loadRestData), concatMap(p => this.fetchRestdata$(p.rest).pipe(catchError(() => {\n        return [];\n      }), map(results => p.rest.renderer !== undefined && p.rest.renderer.query !== undefined && p.rest.renderer.query !== '' ? jpp.JSONPath({\n        path: p.rest.renderer.query,\n        json: results\n      }) : results), map(results => loadRestDataSuccess({\n        tag: p.tag,\n        data: new Dataset({\n          results\n        })\n      }))))));\n    }\n    static {\n      this.\u0275fac = function PageBuilderEffects_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PageBuilderEffects)(i0.\u0275\u0275inject(i1$4.Actions), i0.\u0275\u0275inject(i4$1.DatasourceApiService), i0.\u0275\u0275inject(i3$3.SnippetParserService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PageBuilderEffects,\n        factory: PageBuilderEffects.\u0275fac\n      });\n    }\n  }\n  return PageBuilderEffects;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass PanelPageStateSlice {\n  constructor(data) {\n    if (data) {\n      this.id = data.id;\n      this.path = data.path;\n      this.realPath = data.realPath;\n      this.args = data.args;\n    }\n  }\n}\nconst pageBuilderFeatureKey = 'pageBuilder';\nconst initialState = {\n  dataTags: [],\n  datasets: [],\n  pageInfo: undefined,\n  formNames: [],\n  forms: [],\n  page: undefined,\n  selectionPath: []\n};\nconst pageBuilderReducer = createReducer(initialState, on(loadRestDataSuccess, (state, action) => {\n  const tagIndex = state.dataTags.findIndex(t => t === action.tag);\n  if (tagIndex > -1 && state.forms[tagIndex] !== undefined) {\n    // @todo: fix this - causing error - this is why rest was not completing when same tag was used.\n    const newState = {\n      ...state\n    };\n    newState.datasets[tagIndex].push(action.data);\n    return newState;\n  } else {\n    return {\n      ...state,\n      dataTags: [...state.dataTags, action.tag],\n      datasets: [...state.datasets, [action.data]]\n    };\n  }\n}), on(setForm, (state, action) => {\n  const nameIndex = state.formNames.findIndex(n => n === action.name);\n  if (nameIndex > -1 && state.forms[nameIndex] !== undefined) {\n    return {\n      ...state,\n      forms: state.forms.map((f, i) => i === nameIndex ? action.form : f)\n    };\n  } else {\n    return {\n      ...state,\n      formNames: [...state.formNames, action.name],\n      forms: [...state.forms, action.form]\n    };\n  }\n}), on(setPageInfo, (state, action) => {\n  return {\n    ...state,\n    pageInfo: action.info !== undefined ? new PanelPageStateSlice(action.info) : undefined\n  };\n}), on(setPage, (state, action) => {\n  return {\n    ...state,\n    page: action.page !== undefined ? new PanelPage(action.page) : undefined\n  };\n}), on(setSelectionPath, (state, action) => {\n  return {\n    ...state,\n    selectionPath: action.path !== undefined ? action.path : []\n  };\n}));\nfunction reducer(state, action) {\n  return pageBuilderReducer(state, action);\n}\nconst STYLE_PLUGIN = /*#__PURE__*/new InjectionToken('StylePlugin');\nconst PANELS_SETTINGS = /*#__PURE__*/new InjectionToken('PanelsSettings');\n\n// import { PanelsStateContextEditorComponent } from './components/panels-state-context-editor/panels-state-context-editor.component';\nlet PanelsModule = /*#__PURE__*/(() => {\n  class PanelsModule {\n    constructor(platformId, contentPlugins, panelsSettings, eds, cpm, entityDataService, bpm, es, attributesSerialzer, crud, entityDefinitionService,\n    /*ctxm: ContextPluginManager,\n    panelsStateContextResolver: PanelsStateContextResolver*/\n    crudDataHelper) {\n      const entityMetadata = entityMetadataFactory(platformId, panelsSettings);\n      eds.registerMetadataMap(entityMetadata);\n      entityDataService.registerService('PanelPageState', new NoopDataService('PanelPageState'));\n      // Just for testing - data service will be configurable. - different service for separate ops ie. search vs. save\n      entityDataService.registerService('PanelPage', new CrudDataService('PanelPage', crud, entityDefinitionService, crudDataHelper));\n      entityDataService.registerService('PanelPageListItem', new CrudDataService('PanelPageListItem', crud, entityDefinitionService, crudDataHelper));\n      contentPlugins.forEach(p => cpm.register(p));\n      bpm.register(panelsBridgeFactory(es, attributesSerialzer));\n      // ctxm.register(panelsStateContextFactory(panelsStateContextResolver));\n      // console.log('register panel page state');\n      // Experimental - form testing\n      entityDataService.registerService('PanelPageForm', new CrudDataService('PanelPageForm', crud, entityDefinitionService, crudDataHelper));\n    }\n    static {\n      this.\u0275fac = function PanelsModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelsModule)(i0.\u0275\u0275inject(PLATFORM_ID), i0.\u0275\u0275inject(CONTENT_PLUGIN), i0.\u0275\u0275inject(PANELS_SETTINGS), i0.\u0275\u0275inject(i1$3.EntityDefinitionService), i0.\u0275\u0275inject(i2.ContentPluginManager), i0.\u0275\u0275inject(i1$3.EntityDataService), i0.\u0275\u0275inject(i3$4.BridgeBuilderPluginManager), i0.\u0275\u0275inject(i1$3.EntityServices), i0.\u0275\u0275inject(i1.AttributeSerializerService), i0.\u0275\u0275inject(i5$1.CrudAdaptorPluginManager), i0.\u0275\u0275inject(i1$3.EntityDefinitionService), i0.\u0275\u0275inject(i5$1.CrudDataHelperService));\n      };\n    }\n    static {\n      this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n        type: PanelsModule\n      });\n    }\n    static {\n      this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n        providers: [{\n          provide: PanelContentHandler,\n          useClass: PanelContentHandler\n        },\n        //{ provide: PanelContentHandler, useClass: PanelContentHandler },\n        {\n          provide: CONTENT_PLUGIN,\n          useFactory: panelContentPluginFactory,\n          multi: true,\n          deps: [PanelContentHandler]\n        }, {\n          provide: CONTENT_PLUGIN,\n          useFactory: datasourceContentPluginFactory,\n          multi: true,\n          deps: [DatasourceContentHandler]\n        }, {\n          provide: Pluralizer,\n          useClass: DefaultPluralizer\n        }],\n        imports: [CommonModule,\n        // HttpClientModule,\n        FormsModule, ReactiveFormsModule, StoreModule.forFeature(pageBuilderFeatureKey, reducer), EffectsModule.forFeature([PageBuilderEffects]), MaterialModule, DatasourceModule, AuthModule, Aws3Module, AwosModule, CrudModule]\n      });\n    }\n  }\n  return PanelsModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass PanelPageSelector {\n  constructor(data) {\n    if (data) {\n      this.panelPage = data.panelPage;\n      if (data.panel !== undefined && data.panel !== null) {\n        this.panel = data.panel;\n      }\n      if (data.pane !== undefined && data.pane !== null) {\n        this.pane = data.pane;\n      }\n      if (data.nested !== undefined && data.nested !== null && typeof data.nested === 'object') {\n        this.nested = new PanelPageSelector(data.nested);\n      }\n    }\n  }\n}\nlet LayoutEditorBaseComponent = /*#__PURE__*/(() => {\n  class LayoutEditorBaseComponent {\n    get gridItems() {\n      return [];\n    }\n    constructor(controlContainer) {\n      this.controlContainer = controlContainer;\n      this.savable = true;\n      this.nested = false;\n      this.dashboard = [];\n      this.layoutSetting = new LayoutSetting();\n      this.rowSettings = [];\n      this.ancestory = [];\n    }\n    static {\n      this.\u0275fac = function LayoutEditorBaseComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LayoutEditorBaseComponent)(i0.\u0275\u0275directiveInject(i1$1.ControlContainer));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: LayoutEditorBaseComponent,\n        selectors: [[\"classifieds-ui-layout-editor-base\"]],\n        inputs: {\n          savable: \"savable\",\n          nested: \"nested\",\n          editor: \"editor\",\n          dashboard: \"dashboard\",\n          layoutSetting: \"layoutSetting\",\n          rowSettings: \"rowSettings\",\n          columnSettings: \"columnSettings\",\n          editablePaneTpl: \"editablePaneTpl\",\n          extraActionsAreaTmpl: \"extraActionsAreaTmpl\",\n          contextsMenuTpl: \"contextsMenuTpl\",\n          ancestory: \"ancestory\"\n        },\n        standalone: false,\n        decls: 0,\n        vars: 0,\n        template: function LayoutEditorBaseComponent_Template(rf, ctx) {},\n        encapsulation: 2\n      });\n    }\n  }\n  return LayoutEditorBaseComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet LayoutRendererBaseComponent = /*#__PURE__*/(() => {\n  class LayoutRendererBaseComponent {\n    get columnSettings() {\n      const settings = this.panelPage ? this.panelPage.panels.reduce((p, c) => [...p, new LayoutSetting(c.columnSetting)], []) : [];\n      return settings;\n    }\n    constructor(controlContainer) {\n      this.controlContainer = controlContainer;\n      this.displayMainControls = false;\n      this.displayItemHeader = false;\n    }\n    static {\n      this.\u0275fac = function LayoutRendererBaseComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LayoutRendererBaseComponent)(i0.\u0275\u0275directiveInject(i1$1.ControlContainer, 8));\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: LayoutRendererBaseComponent,\n        selectors: [[\"classifieds-ui-layout-renderer-base\"]],\n        inputs: {\n          panelPage: \"panelPage\",\n          displayMainControls: \"displayMainControls\",\n          displayItemHeader: \"displayItemHeader\",\n          renderPanelTpl: \"renderPanelTpl\"\n        },\n        standalone: false,\n        decls: 0,\n        vars: 0,\n        template: function LayoutRendererBaseComponent_Template(rf, ctx) {},\n        encapsulation: 2\n      });\n    }\n  }\n  return LayoutRendererBaseComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelStyleRendererBaseComponent = /*#__PURE__*/(() => {\n  class PanelStyleRendererBaseComponent {\n    constructor() {\n      this.settings = [];\n      this.panes = [];\n      this.originMappings = [];\n      this.ancestory = [];\n    }\n    mergeContexts(contexts) {\n      if (contexts === undefined && this.contexts === undefined) {\n        return undefined;\n      } else if (contexts !== undefined && this.contexts !== undefined) {\n        return [...contexts, ...this.contexts];\n      } else if (contexts !== undefined) {\n        return contexts;\n      } else {\n        return this.contexts;\n      }\n      //return [ ...( this.contexts !== undefined ? this.contexts.map(c => new InlineContext(c)) : [] ), ...( contexts !== undefined ? contexts.map(c => new InlineContext(c)) : [] ) ];\n    }\n    static {\n      this.\u0275fac = function PanelStyleRendererBaseComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelStyleRendererBaseComponent)();\n      };\n    }\n    static {\n      this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n        type: PanelStyleRendererBaseComponent,\n        selectors: [[\"classifieds-ui-panel-style-renderer-base\"]],\n        inputs: {\n          settings: \"settings\",\n          panes: \"panes\",\n          originPanes: \"originPanes\",\n          originMappings: \"originMappings\",\n          contexts: \"contexts\",\n          ancestory: \"ancestory\"\n        },\n        standalone: false,\n        decls: 0,\n        vars: 0,\n        template: function PanelStyleRendererBaseComponent_Template(rf, ctx) {},\n        encapsulation: 2\n      });\n    }\n  }\n  return PanelStyleRendererBaseComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelsLoaderService = /*#__PURE__*/(() => {\n  class PanelsLoaderService {\n    get panelPageService() {\n      return this.es.getEntityCollectionService('PanelPage');\n    }\n    constructor(es, panelHandler) {\n      this.es = es;\n      this.panelHandler = panelHandler;\n    }\n    reducePage(pp) {\n      return pp.panels.reduce((p, c, i) => this.reducePanels(p, c, i), []);\n    }\n    reducePanels(p, c, i) {\n      return [...p, ...c.panes.reduce((p2, c2, i2) => this.reducePanes(p2, c2, i2).map(o => o.pipe(map(([i3, pp]) => [i, i3, pp]))), [])];\n    }\n    reducePanes(p, c, i) {\n      return [...p, ...(c.contentPlugin === 'panel' ? [this.nestedPage$(c).pipe(map(pp => [i, pp]))] : [])];\n    }\n    nestedPage$(p) {\n      console.log('get nested panel page');\n      return p.linkedPageId && p.linkedPageId !== '' ? this.getByKey(p.linkedPageId).pipe(tap(() => console.log(`get(${p.linkedPageId})`))) : this.getEmbedded(p.settings).pipe(tap(() => console.log('toObject()')));\n    }\n    remapNested(p, nested) {\n      nested.forEach(([index1, index2, np]) => {\n        p.panels[index1].panes[index2].nestedPage = np;\n      });\n    }\n    getByKey(key) {\n      return this.panelPageService.getByKey(key).pipe(map(p => new PanelPage(p)), switchMap(p => iif(() => this.reducePage(p).length > 0, forkJoin(this.reducePage(p)).pipe(tap(nested => this.remapNested(p, nested)), map(() => p)), of(p))));\n    }\n    getEmbedded(settings) {\n      return this.panelHandler.toObject(settings).pipe(map(p => new PanelPage(p)), switchMap(p => iif(() => this.reducePage(p).length > 0, forkJoin(this.reducePage(p)).pipe(tap(nested => this.remapNested(p, nested)), map(() => p)), of(p))));\n    }\n    static {\n      this.\u0275fac = function PanelsLoaderService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelsLoaderService)(i0.\u0275\u0275inject(i1$3.EntityServices), i0.\u0275\u0275inject(PanelContentHandler));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelsLoaderService,\n        factory: PanelsLoaderService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PanelsLoaderService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelsSelectorService = /*#__PURE__*/(() => {\n  class PanelsSelectorService {\n    constructor(panelHandler) {\n      this.panelHandler = panelHandler;\n    }\n    rebuildPage(panelPage, path) {\n      return new PanelPage({\n        ...panelPage,\n        panels: this.rebuildPanels(panelPage.panels, [...path])\n      });\n    }\n    rebuildPanels(panels, path) {\n      return panels.filter((_, i) => this.rebuildCondition(path[0], i)).map(p => new Panel({\n        ...p,\n        panes: this.rebuildPanes(p.panes, path.slice(1))\n      }));\n    }\n    rebuildPanes(panes, path) {\n      return panes.filter((_, i) => this.rebuildCondition(path[0], i)).map(p => p.contentPlugin === 'panel' ? new Pane({\n        ...p,\n        nestedPage: undefined,\n        settings: this.panelHandler.buildSettings(this.rebuildPage(p.nestedPage, path.slice(1)))\n      }) : new Pane({\n        ...p\n      }));\n    }\n    rebuildCondition(s, i) {\n      return s !== 0 ? s > -1 ? i === s + s * -1 : i !== s * -1 + s : true;\n    }\n    static {\n      this.\u0275fac = function PanelsSelectorService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelsSelectorService)(i0.\u0275\u0275inject(PanelContentHandler));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelsSelectorService,\n        factory: PanelsSelectorService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PanelsSelectorService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelStateConverterService = /*#__PURE__*/(() => {\n  class PanelStateConverterService {\n    constructor(panelHandler) {\n      this.panelHandler = panelHandler;\n    }\n    convertPageToState(pp) {\n      return of(new PanelPageState()).pipe(switchMap(() => forkJoin(pp.panels.map(p => this.convertPanelToState(p)))), map(panels => new PanelPageState({\n        id: pp.id,\n        panels\n      })));\n    }\n    convertPanelToState(panel) {\n      return of(new PanelState()).pipe(switchMap(() => forkJoin(panel.panes.map(p => this.convertPaneToState(p)))), map(panes => new PanelState({\n        panes\n      })));\n    }\n    convertPaneToState(pane) {\n      return of(new PaneState()).pipe(switchMap(state => iif(() => this.hasNestedPanelPage(pane), this.panelHandler.toObject(pane.settings).pipe(switchMap(panelPage => this.convertPageToState(panelPage)), map(nestedPage => new PaneState({\n        state: new AttributeValue(),\n        nestedPage\n      }))), of(state))));\n    }\n    hasNestedPanelPage(pane) {\n      return pane.contentPlugin === 'panel' && (pane.linkedPageId === undefined || pane.linkedPageId === null || pane.linkedPageId === '');\n    }\n    static {\n      this.\u0275fac = function PanelStateConverterService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelStateConverterService)(i0.\u0275\u0275inject(PanelContentHandler));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelStateConverterService,\n        factory: PanelStateConverterService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PanelStateConverterService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelsWalkerService = /*#__PURE__*/(() => {\n  class PanelsWalkerService {\n    constructor(panelsLoaderService) {\n      this.panelsLoaderService = panelsLoaderService;\n    }\n    walkPageHierarchy({\n      panelPage,\n      visitorFunc,\n      defaultv,\n      ancestory\n    }) {\n      return new Observable(obs => {\n        const len = panelPage.panels.length;\n        const visitors$ = [];\n        for (let i = 0; i < len; i++) {\n          const len2 = panelPage.panels[i].panes.length;\n          for (let j = 0; j < len2; j++) {\n            visitors$.push(visitorFunc({\n              pane: panelPage.panels[i].panes[j],\n              panelPage,\n              ancestoryWithSelf: [...ancestory, i, j]\n            }));\n            if (panelPage.panels[i].panes[j].nestedPage && panelPage.panels[i].panes[j].nestedPage.panels && panelPage.panels[i].panes[j].nestedPage.panels.length !== 0) {\n              visitors$.push(this.walkPageHierarchy({\n                panelPage,\n                visitorFunc,\n                defaultv,\n                ancestory: [...ancestory, i, j]\n              }));\n            } else if (panelPage.panels[i].panes[j].contentPlugin === 'panel') {\n              // @todo: This is causing infinite recusion on adbrowser page. :( - max call stack exceeded\n              /*visitors$.push(this.panelsLoaderService.nestedPage$(panelPage.panels[i].panes[j]).pipe(\n                switchMap(nestedPage => this.walkPageHierarchy<T>({ panelPage: nestedPage, visitorFunc, defaultv, ancestory: [ ...ancestory, i, j ] }))\n              ));*/\n            }\n          }\n        }\n        if (visitors$.length === 0) {\n          obs.next(defaultv);\n          obs.complete();\n        } else {\n          forkJoin(visitors$).pipe(map(groups => groups.reduce((p, c) => [...p, ...c], defaultv)), tap(values => {\n            obs.next(values);\n            obs.complete();\n          })).subscribe();\n        }\n      });\n    }\n    static {\n      this.\u0275fac = function PanelsWalkerService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelsWalkerService)(i0.\u0275\u0275inject(PanelsLoaderService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelsWalkerService,\n        factory: PanelsWalkerService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PanelsWalkerService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelsContextService = /*#__PURE__*/(() => {\n  class PanelsContextService {\n    constructor(panelsVisitorService, cpm) {\n      this.panelsVisitorService = panelsVisitorService;\n      this.cpm = cpm;\n      this.gatherPaneContexts = ({\n        pane,\n        panelPage,\n        ancestoryWithSelf\n      }) => this.cpm.getPlugin(pane.contentPlugin).pipe(switchMap(p => /*p &&*/p.handler ? p.handler.stateDefinition(pane.settings) : of({})), map(state => new InlineContext({\n        // name: 'panestate' + ancestoryWithSelf.map(i => `[${i}]`).join(''), \n        name: 'panestate-' + ancestoryWithSelf.join('-'),\n        adaptor: 'data',\n        plugin: 'panestate',\n        data: {\n          id: panelPage ? panelPage.id : '',\n          selectionPath: [...ancestoryWithSelf],\n          value: state\n        }\n      })), map(paneContext => [paneContext]), take(1));\n    }\n    allActivePageContexts({\n      panelPage,\n      ancestory = []\n    }) {\n      return this.panelsVisitorService.walkPageHierarchy({\n        panelPage,\n        ancestory,\n        visitorFunc: this.gatherPaneContexts,\n        defaultv: []\n      });\n    }\n    static {\n      this.\u0275fac = function PanelsContextService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelsContextService)(i0.\u0275\u0275inject(PanelsWalkerService), i0.\u0275\u0275inject(i2.ContentPluginManager));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelsContextService,\n        factory: PanelsContextService.\u0275fac,\n        providedIn: \"root\"\n      });\n    }\n  }\n  return PanelsContextService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelStateArchitectService = /*#__PURE__*/(() => {\n  class PanelStateArchitectService {\n    constructor(attributeSerializer) {\n      this.attributeSerializer = attributeSerializer;\n    }\n    buildToAncestorySpec({\n      panelPageState,\n      ancestory\n    }) {\n      for (let i = 0; i < ancestory[0] + 1; i++) {\n        if (panelPageState.panels.length < i + 1) {\n          panelPageState.panels.push(new PanelState());\n        }\n        if (i === ancestory[0] && ancestory.length > 1) {\n          for (let j = 0; j < ancestory[1] + 1; j++) {\n            if (panelPageState.panels[ancestory[0]].panes.length < j + 1) {\n              panelPageState.panels[ancestory[0]].panes.push(new PaneState({\n                state: this.attributeSerializer.serialize({}, 'root')\n              }));\n            }\n            if (j === ancestory[1] && ancestory.length > 2) {\n              if (!panelPageState.panels[ancestory[0]].panes[j].nestedPage) {\n                panelPageState.panels[ancestory[0]].panes[j].nestedPage = new PanelPageState();\n              }\n              this.buildToAncestorySpec({\n                panelPageState: panelPageState.panels[ancestory[0]].panes[j].nestedPage,\n                ancestory: ancestory.slice(2)\n              });\n            }\n          }\n        }\n      }\n    }\n    static {\n      this.\u0275fac = function PanelStateArchitectService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelStateArchitectService)(i0.\u0275\u0275inject(i1.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelStateArchitectService,\n        factory: PanelStateArchitectService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PanelStateArchitectService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet DynamicPaneService = /*#__PURE__*/(() => {\n  class DynamicPaneService {\n    static {\n      this.\u0275fac = function DynamicPaneService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || DynamicPaneService)();\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: DynamicPaneService,\n        factory: DynamicPaneService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return DynamicPaneService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet StylePluginManager = /*#__PURE__*/(() => {\n  class StylePluginManager extends BasePluginManager {\n    constructor(pcm, moduleLoader) {\n      super(pcm, moduleLoader);\n    }\n    pluginDef() {\n      return of(new PluginDef({\n        name: 'style'\n      }));\n    }\n    static {\n      this.\u0275fac = function StylePluginManager_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || StylePluginManager)(i0.\u0275\u0275inject(i1$6.PluginConfigurationManager), i0.\u0275\u0275inject(i2$1.ModuleLoaderService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: StylePluginManager,\n        factory: StylePluginManager.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return StylePluginManager;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet StyleResolverService = /*#__PURE__*/(() => {\n  class StyleResolverService {\n    constructor(spm) {\n      this.spm = spm;\n    }\n    alterResolvedPanes({\n      panel,\n      resolvedPanes,\n      originMappings /*, resolvedContexts */\n    }) {\n      return of(undefined).pipe(switchMap(() => panel.stylePlugin && panel.stylePlugin !== '' ? this.spm.getPlugin(panel.stylePlugin) : of(undefined)), switchMap(p => p && p.handler ? p.handler.alterResolvedPanes({\n        settings: panel.settings,\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      }) : of({\n        resolvedPanes,\n        originMappings /*, resolvedContexts */\n      })));\n    }\n    static {\n      this.\u0275fac = function StyleResolverService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || StyleResolverService)(i0.\u0275\u0275inject(StylePluginManager));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: StyleResolverService,\n        factory: StyleResolverService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return StyleResolverService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet PanelResolverService = /*#__PURE__*/(() => {\n  class PanelResolverService {\n    // ontentPlugins: Array<ContentPlugin> = [];\n    constructor(\n    // @Inject(CONTENT_PLUGIN) contentPlugins: Array<ContentPlugin>,\n    panelHandler, rulesResolver, inlineContextResolver, cpm) {\n      this.panelHandler = panelHandler;\n      this.rulesResolver = rulesResolver;\n      this.inlineContextResolver = inlineContextResolver;\n      this.cpm = cpm;\n      // this.contentPlugins = contentPlugins;\n    }\n    /**\n     * @todo: This needs to include looking through the rules. Otherwise contexts\n     * only used in rules will not trigger context update chain. A hacky work-around\n     * to this is to include the context token being used in a rule as a hidden value\n     * part of the content. This works for snippets and for the time being is an ok\n     * solution since states are only really relevant to snippets. However, in the long term\n     * the disovery needs to include rules.\n     */\n    usedContexts(panes) {\n      return this.panesPlugins(panes).pipe(switchMap(plugins => this.dataPanes(panes).pipe(map(dataPanes => ({\n        plugins,\n        dataPanes\n      })))), switchMap(({\n        plugins,\n        dataPanes\n      }) => forkJoin(panes.reduce((p, c) => {\n        const plugin = plugins.get(c.contentPlugin);\n        if (plugin.handler !== undefined) {\n          return [...p, plugin.handler.getBindings(c.settings, 'context', new Map([['dataPanes', dataPanes]])).pipe(map(cb => cb.map(b => b.id)))];\n        } else {\n          return [...p];\n        }\n      }, [])).pipe(map(v => v.reduce((p, c) => [...p, ...c], [])))));\n    }\n    staticPanes(panes) {\n      return this.cpm.getPlugins(panes.reduce((p, c) => {\n        return p.findIndex(cp => cp === c.contentPlugin) === -1 ? [...p, c.contentPlugin] : [...p];\n      }, [])).pipe(map(plugins => panes.filter(p => plugins.get(p.contentPlugin).handler === undefined || !plugins.get(p.contentPlugin).handler.isDynamic(p.settings))));\n    }\n    dataPanes(panes) {\n      return this.cpm.getPlugins(panes.reduce((p, c) => {\n        return p.findIndex(cp => cp === c.contentPlugin) === -1 ? [...p, c.contentPlugin] : [...p];\n      }, [])).pipe(map(plugins => panes.filter(p => plugins.get(p.contentPlugin).handler !== undefined && plugins.get(p.contentPlugin).handler.isData(p.settings))));\n    }\n    panesPlugins(panes) {\n      return this.cpm.getPlugins(panes.reduce((p, c) => {\n        return p.findIndex(cp => cp === c.contentPlugin) === -1 ? [...p, c.contentPlugin] : [...p];\n      }, []));\n    }\n    resolvePanes({\n      panes,\n      contexts,\n      resolvedContext\n    }) {\n      /*const staticPanes = panes.reduce<Array<Pane>>((p, c) => {\n        const plugin = this.contentPlugins.find(cp => cp.name === c.contentPlugin);\n        if(plugin.handler === undefined || !plugin.handler.isDynamic(c.settings)) {\n          return [ ...p, c ];\n        } else {\n          return [ ...p ];\n        }\n      }, []);*/\n      console.log('resolve panes');\n      return this.panesPlugins(panes).pipe(switchMap(plugins => forkJoin(panes.reduce((p, c) => {\n        const plugin = plugins.get(c.contentPlugin);\n        if (/*plugin &&*/plugin.handler !== undefined) {\n          return [...p, plugin.handler.getBindings(c.settings, 'pane').pipe(map(c => c.map(c => c.id)))];\n        } else {\n          return [...p, of([])];\n        }\n      }, []))))\n      /*return forkJoin(panes.reduce<Array<Observable<Array<string>>>>((p, c) => {\n        const plugin = this.contentPlugins.find(cp => cp.name === c.contentPlugin);\n        if(plugin.handler !== undefined) {\n          return [ ...p, plugin.handler.getBindings(c.settings, 'pane').pipe(\n            map(c => c.map(c => c.id))\n          ) ];\n        } else {\n          return [ ...p, of([])];\n        }\n      }, []))*/.pipe(map(groups => groups.reduce((p, c) => [...p, ...c], [])), switchMap(bindings => this.panesPlugins(panes).pipe(map(plugins => [bindings, plugins]))), switchMap(([bindings, plugins]) => forkJoin(panes.reduce((p, c) => {\n        const plugin = plugins.get(c.contentPlugin);\n        if (/*plugin &&*/plugin.handler !== undefined && plugin.handler.isDynamic(c.settings)) {\n          // data panes that are used in bindings will not be displayed.\n          return [...p, plugin.handler.isData(c.settings) && bindings.findIndex(n => n === c.name) !== -1 ? of([]) : forkJoin([this.staticPanes(panes), this.dataPanes(panes)]).pipe(switchMap(([staticPanes, dataPanes]) => plugin.handler.buildDynamicItems(c.settings, new Map([...(c.metadata === undefined ? [] : c.metadata), ['tag', uuid.v4()], ['panes', staticPanes], ['dataPanes', dataPanes], ['contexts', contexts !== undefined ? contexts : []]])).pipe(map(items => this.panelHandler.fromPanes(items)), map(panes => this.panelHandler.wrapPanel(panes).panes), take(1))))];\n        } else if (c.name === '' || bindings.findIndex(n => n === c.name) === -1) {\n          return [...p, of([new Pane({\n            ...c,\n            contexts: [...contexts, ...(c.contexts ? c.contexts : [])]\n          })]).pipe(switchMap(panes => iif(() => panes[0].rule !== undefined && panes[0].rule !== null && panes[0].rule.condition !== '', this.rulesResolver.evaluate(panes[0].rule, [...contexts, ...(c.contexts ? c.contexts : [])]).pipe(map(res => res ? panes : [])), of(panes))))];\n        } else {\n          return [...p];\n        }\n      }, [])).pipe(switchMap(paneGroups => iif(() => paneGroups.reduce((p, c) => [...p, ...c], []).length === 0, of([paneGroups, []]), forkJoin([...paneGroups.reduce((p, c) => [...p, ...c.map(pa => pa.contexts && pa.contexts.length !== 0 ? this.inlineContextResolver.resolveAll(pa.contexts).pipe(take(1)) : of({}).pipe(take(1)))], [])]).pipe(map(pc => [paneGroups, pc.map(c => ({\n        ...c,\n        ...resolvedContext\n      }))])))),\n      /*switchMap(paneGroups => paneGroups.reduce((p, c) => [ ...p, ...c ], []).length === 0 ? of([paneGroups,[]]) : forkJoin([\n        ...paneGroups.reduce<Array<Observable<any>>>((p, c) => [ ...p, ...c.map(pa => (pa.contexts && pa.contexts.length !== 0 ? this.inlineContextResolver.resolveAll(pa.contexts).pipe(take(1)) : of({}).pipe(take(1))))], [])\n      ]).pipe(\n        map(pc => [paneGroups, pc.map(c => ({ ...c, ...resolvedContext }))])\n      )),*/\n      map(([paneGroups, resolvedContexts]) => {\n        let resolvedPanes = [];\n        let originMappings = [];\n        paneGroups.forEach((panes, index) => {\n          resolvedPanes = [...(resolvedPanes === undefined ? [] : resolvedPanes), ...panes.map((p, index2) => new Pane({\n            ...p,\n            resolvedContext: resolvedContexts[resolvedPanes.length + index2]\n          }))];\n          originMappings = [...(originMappings ? [] : originMappings), ...panes.map(() => index)];\n        });\n        return {\n          resolvedPanes,\n          originMappings /*, resolvedContexts */\n        };\n      }))));\n    }\n    static {\n      this.\u0275fac = function PanelResolverService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PanelResolverService)(i0.\u0275\u0275inject(PanelContentHandler), i0.\u0275\u0275inject(i3$2.RulesResolverService), i0.\u0275\u0275inject(i3$5.InlineContextResolverService), i0.\u0275\u0275inject(i2.ContentPluginManager));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PanelResolverService,\n        factory: PanelResolverService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PanelResolverService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass StylePlugin extends Plugin {\n  constructor(data) {\n    super(data);\n    if (data) {\n      this.name = this.id;\n      this.title = data.title;\n      this.editorComponent = data.editorComponent ? data.editorComponent : undefined;\n      this.renderComponent = data.renderComponent ? data.renderComponent : undefined;\n      if (data.handler) {\n        this.handler = data.handler;\n      }\n    }\n  }\n}\nlet PaneDatasourceService = /*#__PURE__*/(() => {\n  class PaneDatasourceService extends DataSource {\n    // private fetchedPages = new Set<number>();\n    constructor() {\n      super();\n      this.pageChange$ = new Subject();\n      this.pageSize = 20;\n      this.dataStream = new BehaviorSubject([]);\n      this.subscription = new Subscription();\n      this.lastPage = 0;\n      this.paneItems = [];\n    }\n    set panes(panes) {\n      this.paneItems = [...this.paneItems, ...panes];\n      // console.log(this.paneItems);\n      this.dataStream.next(this.paneItems);\n      // this.dataStream.next(panes);\n    }\n    connect(collectionViewer) {\n      this.subscription.add(collectionViewer.viewChange.subscribe(range => {\n        const currentPage = Math.ceil((range.end + 1) / this.pageSize);\n        if (currentPage > this.lastPage) {\n          this.lastPage = currentPage;\n          this.pageChange$.next(currentPage);\n        }\n      }));\n      return this.dataStream;\n    }\n    /*connect(collectionViewer: CollectionViewer): Observable<Array<any>> {\n      this.subscription.add(collectionViewer.viewChange.subscribe(range => {\n        const startPage = Math.floor(range.start / this.pageSize);\n        const endPage = Math.floor((range.end - 1) / this.pageSize);\n        for (let i = startPage; i <= endPage; i++) {\n          if (this.fetchedPages.has(i)) {\n            return;\n          }\n          console.log(`fetch page ${i}`);\n          this.pageChange$.next(i);\n          this.fetchedPages.add(i);\n        }\n      }));\n      return this.dataStream;\n    }*/\n    disconnect(collectionViewer) {\n      this.subscription.unsubscribe();\n    }\n    static {\n      this.\u0275fac = function PaneDatasourceService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PaneDatasourceService)();\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PaneDatasourceService,\n        factory: PaneDatasourceService.\u0275fac\n      });\n    }\n  }\n  return PaneDatasourceService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst selectPageBuilderState = createFeatureSelector(pageBuilderFeatureKey);\nconst selectDataset = tag => createSelector(selectPageBuilderState, state => {\n  const index = state.dataTags.findIndex(t => t === tag);\n  if (index > -1) {\n    return state.datasets[index][state.datasets[index].length - 1];\n  } else {\n    return undefined;\n  }\n});\nconst selectPageInfo = createSelector(selectPageBuilderState, state => state.pageInfo);\nconst selectPage = createSelector(selectPageBuilderState, state => state.page);\nconst selectSelectionPath = createSelector(selectPageBuilderState, state => state.selectionPath);\nconst selectFormNames = createSelector(selectPageBuilderState, state => state.formNames);\nconst selectForms = createSelector(selectPageBuilderState, state => state.forms);\nconst selectForm = createSelector(selectFormNames, selectForms, (names, forms, props) => {\n  const index = names.findIndex(n => n === props.name);\n  if (index > -1) {\n    return forms[index];\n  } else {\n    return undefined;\n  }\n});\n/*export const selectForm = () => createSelector(selectPageBuilderState, (, props) => {\n  const index = state.formNames.findIndex(n => n === props.name);\n  if(index > -1) {\n    return state.forms[index];\n  } else {\n    return undefined;\n  }\n});*/\nlet PageBuilderFacade = /*#__PURE__*/(() => {\n  class PageBuilderFacade {\n    constructor(store) {\n      this.store = store;\n      this.getPageInfo$ = this.store.pipe(select(selectPageInfo));\n      this.getPage$ = this.store.pipe(select(selectPage));\n      this.getSelectionPath$ = this.store.pipe(select(selectSelectionPath));\n      this.getFormNames$ = this.store.pipe(select(selectFormNames));\n      this.getForm$ = name => this.store.pipe(select(selectForm, {\n        name\n      }));\n    }\n    loadRestData(tag, rest) {\n      this.store.dispatch(loadRestData({\n        tag,\n        rest\n      }));\n    }\n    setPageInfo(info) {\n      this.store.dispatch(setPageInfo({\n        info\n      }));\n    }\n    setPage(page) {\n      this.store.dispatch(setPage({\n        page\n      }));\n    }\n    setSelectionPath(path) {\n      this.store.dispatch(setSelectionPath({\n        path\n      }));\n    }\n    setForm(name, form) {\n      this.store.dispatch(setForm({\n        name,\n        form\n      }));\n    }\n    static {\n      this.\u0275fac = function PageBuilderFacade_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PageBuilderFacade)(i0.\u0275\u0275inject(i1$5.Store));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PageBuilderFacade,\n        factory: PageBuilderFacade.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PageBuilderFacade;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass PropertiesFormPayload {\n  constructor(data) {\n    this.readUserIds = [];\n    if (data) {\n      this.title = data.title;\n      this.name = data.name;\n      this.path = data.path;\n      this.cssFile = data.cssFile;\n      if (data.readUserIds) {\n        this.readUserIds = data.readUserIds.map(id => id);\n      }\n    }\n  }\n}\nclass PanelPropsFormPayload {\n  constructor(data) {\n    if (data) {\n      this.label = data.label;\n      this.name = data.name;\n    }\n  }\n}\nclass PanePropsFormPayload {\n  constructor(data) {\n    if (data) {\n      this.label = data.label;\n      this.name = data.name;\n    }\n  }\n}\nclass PanelPageForm {\n  constructor(data) {\n    this.panels = [];\n    if (data) {\n      this.id = data.id;\n      this.name = data.name;\n      this.title = data.title;\n      this.derivativeId = data.derivativeId;\n      this.valid = data.valid ? true : false;\n      if (data.persistence) {\n        this.persistence = new PersistenceFormPayload(data.persistence);\n      }\n      if (data.panels) {\n        this.panels = data.panels.map(p => new PanelPageFormPanel(p));\n      }\n    }\n  }\n}\nclass PanelPageFormPanel {\n  constructor(data) {\n    this.panes = [];\n    if (data) {\n      this.name = data.name;\n      this.label = data.label;\n      if (data.panes) {\n        this.panes = data.panes.map(p => new PanelPageFormPane(p));\n      }\n    }\n  }\n}\nclass PanelPageFormPane {\n  constructor(data) {\n    this.settings = [];\n    if (data) {\n      this.name = data.name;\n      this.label = data.label;\n      this.contentPlugin = data.contentPlugin;\n      if (data.settings) {\n        this.settings = data.settings.map(s => new AttributeValue(s));\n      }\n    }\n  }\n}\nclass FormDatasource {\n  constructor(data) {\n    if (data) {\n      this.name = data.name;\n      this.field = data.field;\n    }\n  }\n}\nlet PaneStateService = /*#__PURE__*/(() => {\n  class PaneStateService {\n    constructor(pageBuilderFacade, panelStateArchitectService, attributeSerializer, es) {\n      this.pageBuilderFacade = pageBuilderFacade;\n      this.panelStateArchitectService = panelStateArchitectService;\n      this.attributeSerializer = attributeSerializer;\n      this.selectEntities = entities => entities.entities;\n      this.selectById = ({\n        id\n      }) => createSelector(this.selectEntities, entities => entities[id] ? entities[id] : undefined);\n      this.panelPageStateService = es.getEntityCollectionService('PanelPageState');\n    }\n    mergeState({\n      state,\n      settings,\n      plugin,\n      ancestory\n    }) {\n      return of(state).pipe(switchMap(s => this.pageBuilderFacade.getPageInfo$.pipe(map(p => [s, p]))), switchMap(([s, p]) => plugin.handler.stateDefinition(settings).pipe(map(d => [s, p, d]))), switchMap(([s, p, d]) => this.panelPageStateService.collection$.pipe(select(this.selectById({\n        id: p.id\n      })), map(ps => [s, new PanelPageState(ps ? ps : {\n        id: p.id,\n        panels: []\n      }), d]), take(1))), map(([s, ps, d]) => {\n        this.panelStateArchitectService.buildToAncestorySpec({\n          panelPageState: ps,\n          ancestory: [...ancestory]\n        });\n        const path = '$.' + ancestory.map((index, i) => `${(i + 1) % 2 === 0 ? 'panes' : (i === 0 ? '' : 'nestedPage.') + 'panels'}[${index}]`).join('.');\n        const paneState = jpp.JSONPath({\n          path,\n          json: ps\n        })[0];\n        return [s, ps, d, paneState];\n      }), tap(([s, _, d, ps2]) => {\n        const deserializedState = ps2.state ? ps2.state.root ? this.attributeSerializer.deserialize(ps2.state).root : this.attributeSerializer.deserialize(ps2.state) : {};\n        const newState = merge(!deserializedState || Object.keys(deserializedState).length === 0 ? d : deserializedState, s);\n        ps2.state = this.attributeSerializer.serialize(newState, 'root');\n      }), map(([_, ps, __, ps2]) => ({\n        paneState: ps2,\n        pageState: ps\n      })));\n    }\n    static {\n      this.\u0275fac = function PaneStateService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PaneStateService)(i0.\u0275\u0275inject(PageBuilderFacade), i0.\u0275\u0275inject(PanelStateArchitectService), i0.\u0275\u0275inject(i1.AttributeSerializerService), i0.\u0275\u0275inject(i1$3.EntityServices));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: PaneStateService,\n        factory: PaneStateService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PaneStateService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet FormService = /*#__PURE__*/(() => {\n  class FormService {\n    constructor(attributeSerializer) {\n      this.attributeSerializer = attributeSerializer;\n    }\n    serializeForm(form) {\n      const len = form.panels.length;\n      let value = {};\n      for (let i = 0; i < len; i++) {\n        const len2 = form.panels[i].panes.length;\n        // const dsPanes = form.panels[i].panes.map(p => p.contentPlugin === 'datasource' ? this.attributeSerializer.deserializeAsObject(p.settings) : undefined).filter(s => s !== undefined).map(s => s.settings.renderer.contentBindings.map(b => b.id)).reduce((p, c) => [...p, ...c],[]);\n        const dsValues = new Map();\n        for (let j = 0; j < len2; j++) {\n          const serializedValue = this.serializeFormPane(form.panels[i].panes[j]);\n          if (form.panels[i].panes[j].name && form.panels[i].panes[j].name !== null && (value[form.panels[i].panes[j].name] || form.panels[i].panes[j].name === pluralize(form.panels[i].panes[j].name))) {\n            if (!dsValues.has(form.panels[i].panes[j].name)) {\n              dsValues.set(form.panels[i].panes[j].name, typeof value[form.panels[i].panes[j].name] !== 'undefined' ? [value[form.panels[i].panes[j].name]] : []);\n            }\n            const arrayValues = dsValues.get(form.panels[i].panes[j].name);\n            dsValues.set(form.panels[i].panes[j].name, [...arrayValues, serializedValue]);\n          } else {\n            if (form.panels[i].panes[j].name && form.panels[i].panes[j].name !== '') {\n              value = {\n                ...value,\n                [form.panels[i].panes[j].name]: serializedValue\n              };\n            } else {\n              value = {\n                ...value,\n                ...serializedValue\n              };\n            }\n          }\n        }\n        Array.from(dsValues).forEach(([k, v]) => value[k] = v);\n      }\n      return value;\n    }\n    serializeFormPane(pane) {\n      if (pane.contentPlugin === 'panel') {\n        return this.serializeForm(new PanelPageForm(this.attributeSerializer.deserializeAsObject(pane.settings, true)));\n      } else {\n        const value = this.attributeSerializer.deserializeAsObject(pane.settings, true);\n        return value !== undefined ? value.value : undefined;\n      }\n    }\n    static {\n      this.\u0275fac = function FormService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FormService)(i0.\u0275\u0275inject(i1.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: FormService,\n        factory: FormService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return FormService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet FormStateConverterService = /*#__PURE__*/(() => {\n  class FormStateConverterService {\n    constructor(attributeSerializer) {\n      this.attributeSerializer = attributeSerializer;\n    }\n    convertPageToForm({\n      pp,\n      pp2,\n      ancestory,\n      debugPath = []\n    }) {\n      return of(new PanelPageState()).pipe(switchMap(() => forkJoin(pp.panels.map((p, index) => this.convertPanelToForm({\n        panel: p,\n        panel2: pp2.panels[index],\n        ancestory,\n        debugPath: [...debugPath, `convertPageToForm{ index: ${index} }`]\n      })))), map(panels => new PanelPageForm({\n        id: pp.id,\n        panels,\n        name: pp2.name,\n        title: pp2.title,\n        derivativeId: ''\n      })));\n    }\n    convertPanelToForm({\n      panel,\n      panel2,\n      ancestory,\n      debugPath = []\n    }) {\n      return of(new PanelPageFormPanel()).pipe(switchMap(() => forkJoin(panel.panes.map((p, index) => this.convertPaneToForm({\n        pane: p,\n        pane2: panel2.panes[index],\n        ancestory,\n        debugPath: [...debugPath, `convertPanelToForm{ index: ${index} }`]\n      })))), map(panes => new PanelPageFormPanel({\n        panes,\n        name: panel2.name,\n        label: panel2.label\n      })));\n    }\n    convertPaneToForm({\n      pane,\n      pane2,\n      ancestory,\n      debugPath = []\n    }) {\n      const value = pane.state.attributes.find(a => a.name === 'value');\n      return of(new PanelPageFormPane({\n        settings: value ? [value] : [],\n        name: pane2.name,\n        label: pane2.label,\n        contentPlugin: pane2.contentPlugin\n      })).pipe(switchMap(form => iif(() => this.hasNestedPanelPage(pane), pane.nestedPage ? this.convertPageToForm({\n        ancestory,\n        pp: pane.nestedPage,\n        pp2: new PanelPage(this.attributeSerializer.deserializeAsObject(pane2.settings)),\n        debugPath: [...debugPath, `convertPaneToForm`]\n      }).pipe(map(nestedPage => new PanelPageFormPane({\n        ...form,\n        settings: this.attributeSerializer.serialize(nestedPage, 'root').attributes\n      }))) : of(form), of(form))));\n    }\n    hasNestedPanelPage(pane) {\n      return !!pane.nestedPage;\n    }\n    static {\n      this.\u0275fac = function FormStateConverterService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FormStateConverterService)(i0.\u0275\u0275inject(i1.AttributeSerializerService));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: FormStateConverterService,\n        factory: FormStateConverterService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return FormStateConverterService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet FormGroupConverterService = /*#__PURE__*/(() => {\n  class FormGroupConverterService {\n    constructor(attributeSerializer, fb) {\n      this.attributeSerializer = attributeSerializer;\n      this.fb = fb;\n    }\n    makeFormGroupFromPage(pp, pp2) {\n      return of(this.fb.group({\n        /*name: this.fb.control(pp.name),*/panels: this.fb.array([])\n      })).pipe(switchMap(pageFormGroup => forkJoin(pp.panels.map((p, index) => this.makeFormGroupFromPanel(p, pp2.panels[index]))).pipe(map(panelGroups => ({\n        panelGroups,\n        pageFormGroup\n      })))), tap(({\n        panelGroups,\n        pageFormGroup\n      }) => {\n        const len = panelGroups.length;\n        for (let i = 0; i < len; i++) {\n          pageFormGroup.get('panels').push(panelGroups[i]);\n        }\n      }), map(({\n        pageFormGroup\n      }) => pageFormGroup));\n    }\n    makeFormGroupFromPanel(panel, panel2) {\n      return of(this.fb.group({\n        name: this.fb.control(panel.name),\n        panes: this.fb.array([])\n      })).pipe(switchMap(panelFormGroup => forkJoin(panel.panes.map((p, index) => this.makeFormGroupFromPane(p, panel2.panes[index]))).pipe(map(paneGroups => ({\n        paneGroups,\n        panelFormGroup\n      })))), tap(({\n        paneGroups,\n        panelFormGroup\n      }) => {\n        const len = paneGroups.length;\n        for (let i = 0; i < len; i++) {\n          panelFormGroup.get('panes').push(paneGroups[i]);\n        }\n      }), map(({\n        panelFormGroup\n      }) => panelFormGroup));\n    }\n    makeFormGroupFromPane(pane, pane2) {\n      const value = pane2 ? pane2.settings.find(a => a.name === 'value') : undefined;\n      return of(this.fb.group({\n        name: this.fb.control(pane.name),\n        contentPlugin: this.fb.control(''),\n        settings: this.fb.array([])\n      })).pipe(switchMap(paneFormGroup => iif(() => this.hasNestedPanelPage(pane), this.hasNestedPanelPage(pane) ? this.makeFormGroupFromPage(pane.nestedPage, new PanelPageForm(this.attributeSerializer.deserializeAsObject(pane2.settings))).pipe(tap(pageFormGroup => {\n        const newGroup = this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(pageFormGroup.value, 'value').attributes[0]);\n        paneFormGroup.get('contentPlugin').setValue('panel');\n        paneFormGroup.get('settings').push(newGroup);\n      }), map(() => paneFormGroup)) : of(paneFormGroup).pipe(tap(() => {\n        if (value) {\n          const newGroup = this.attributeSerializer.convertToGroup(value);\n          paneFormGroup.get('settings').push(newGroup);\n        }\n      })), of(paneFormGroup).pipe(tap(() => {\n        if (value) {\n          const newGroup = this.attributeSerializer.convertToGroup(value);\n          paneFormGroup.get('settings').push(newGroup);\n        }\n      })))));\n    }\n    hasNestedPanelPage(pane) {\n      return !!pane.nestedPage;\n    }\n    static {\n      this.\u0275fac = function FormGroupConverterService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FormGroupConverterService)(i0.\u0275\u0275inject(i1.AttributeSerializerService), i0.\u0275\u0275inject(i1$1.UntypedFormBuilder));\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: FormGroupConverterService,\n        factory: FormGroupConverterService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return FormGroupConverterService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet CssHelperService = /*#__PURE__*/(() => {\n  class CssHelperService {\n    makeJsonNode() {\n      return {\n        attributes: {},\n        children: {}\n      };\n    }\n    reduceCss(css, match, matches = true) {\n      return css && css.children ? Object.keys(css.children).filter(k => matches ? k.indexOf(match) === 0 : k.indexOf(match) !== 0).reduce((p, c) => ({\n        ...p,\n        children: {\n          ...p.children,\n          [matches ? c.substr(c.indexOf(match) + match.length).trim() : c]: css.children[c]\n        }\n      }), this.makeJsonNode()) : this.makeJsonNode();\n    }\n    reduceSelector(css, match, matches = true) {\n      return css ? Object.keys(css).filter(k => matches ? k.indexOf(match) === 0 : k.indexOf(match) !== 0).reduce((p, c) => ({\n        ...p,\n        [matches ? c.substr(c.indexOf(match) + match.length).trim() : c]: css[c]\n      }), {}) : {};\n    }\n    static {\n      this.\u0275fac = function CssHelperService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CssHelperService)();\n      };\n    }\n    static {\n      this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n        token: CssHelperService,\n        factory: CssHelperService.\u0275fac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return CssHelperService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of panels\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CssHelperService, DatasourceContentHandler, DatasourceEditorComponent, DynamicPaneService, FormDatasource, FormGroupConverterService, FormService, FormStateConverterService, GridItem, GridLayout, LayoutEditorBaseComponent, LayoutRendererBaseComponent, LayoutSetting, PANELS_SETTINGS, PageBuilderFacade, Pane, PaneDatasourceService, PanePropsFormPayload, PaneState, PaneStateService, Panel, PanelContentHandler, PanelEditorComponent, PanelPage, PanelPageForm, PanelPageFormPane, PanelPageFormPanel, PanelPageLinkedlistComponent, PanelPageListItem, PanelPagePermissions, PanelPageSelector, PanelPageState, PanelPageStateSlice, PanelPropsFormPayload, PanelResolverService, PanelSelectorComponent, PanelState, PanelStateArchitectService, PanelStateConverterService, PanelStyleRendererBaseComponent, PanelsContextService, PanelsLoaderService, PanelsModule, PanelsSelectorService, PanelsSettings, PanelsWalkerService, PropertiesFormPayload, STYLE_PLUGIN, StylePlugin, StylePluginManager, StyleResolverService, initialState, loadRestData, loadRestDataError, loadRestDataSuccess, pageBuilderFeatureKey, reducer, selectDataset, selectForm, selectFormNames, selectForms, selectPage, selectPageBuilderState, selectPageInfo, selectSelectionPath, setForm, setPage, setPageInfo, setSelectionPath };\n"],
  "mappings": "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",
  "names": ["require_cssjson", "__commonJSMin", "exports", "module", "root", "factory", "CSSJSON", "base", "n", "selX", "endX", "lineX", "commentX", "lineAttrX", "altX", "capComment", "capSelector", "capEnd", "capAttr", "isEmpty", "x", "cssString", "args", "node", "match", "count", "add", "line", "attr", "name", "value", "obj", "currVal", "newNode", "bits", "sel", "att", "depth", "breaks", "j", "strAttr", "first", "strNode", "i3", "isPlatformServer", "CommonModule", "i0", "forwardRef", "InjectionToken", "PLATFORM_ID", "i1$3", "DefaultPluralizer", "Pluralizer", "i1$1", "NG_VALUE_ACCESSOR", "NG_VALIDATORS", "UntypedFormControl", "Validators", "UntypedFormArray", "FormsModule", "ReactiveFormsModule", "of", "BehaviorSubject", "iif", "forkJoin", "Observable", "Subject", "Subscription", "map", "switchMap", "filter", "defaultIfEmpty", "catchError", "concatMap", "tap", "take", "i1", "AttributeValue", "i3$5", "InlineContext", "PersistenceFormPayload", "InteractionsFormPayload", "i2", "ContentPluginEditorOptions", "ContentBinding", "ContentPlugin", "CONTENT_PLUGIN", "i4$1", "Dataset", "Datasource", "DatasourceModule", "i4", "i5", "i6", "i2$1", "SITE_NAME", "NoopDataService", "MaterialModule", "cssJson", "jpp", "i1$2", "i3$1", "MAT_DIALOG_DATA", "i7", "i8", "i9", "i3$4", "BridgeBuilderPlugin", "PublicApiBridgeService", "i5$1", "CrudAdaptorPlugin", "CrudDataService", "CrudModule", "i3$2", "Aws3Module", "AwosModule", "AuthModule", "i1$4", "createEffect", "ofType", "EffectsModule", "i1$5", "createAction", "props", "createReducer", "on", "StoreModule", "createFeatureSelector", "createSelector", "select", "i3$3", "i1$6", "BasePluginManager", "PluginDef", "Plugin", "DataSource", "merge", "pluralize", "PanelPageLinkedlistComponent_mat_form_field_1_mat_option_2_Template", "rf", "ctx", "i_r1", "PanelPageLinkedlistComponent_mat_form_field_1_Template", "ctx_r1", "PanelPageLinkedlistComponent_mat_form_field_2_mat_option_2_Template", "i_r3", "PanelPageLinkedlistComponent_mat_form_field_2_Template", "PanelPageLinkedlistComponent_mat_form_field_3_mat_option_2_Template", "i_r4", "PanelPageLinkedlistComponent_mat_form_field_3_Template", "PanelPageLinkedlistComponent_druid_panels_panelpage_linkedlist_4_Template", "PanelSelectorComponent_ng_template_10_a_1_Template", "_r1", "panel_r2", "ctx_r2", "PanelSelectorComponent_ng_template_10_Template", "entityMetadataFactory", "platformId", "panelsSettings", "__spreadProps", "__spreadValues", "isPlatformServer", "PanelsSettings", "data", "PanelPage", "PanelPagePermissions", "PersistenceFormPayload", "InteractionsFormPayload", "p", "Panel", "i", "GridItem", "c", "InlineContext", "LayoutSetting", "s", "PanelPageListItem", "GridLayout", "a", "AttributeValue", "Pane", "v", "id", "PanelContentHandler", "attributeSerializer", "file", "of", "type", "settings", "metadata", "Dataset", "panelPage", "panesAsSettings", "panes", "ContentPluginEditorOptions", "__ngFactoryType__", "PanelPageLinkedlistComponent", "panelPages", "panels", "fb", "panelHandler", "BehaviorSubject", "index", "map", "switchMap", "pane", "iif", "filter", "val", "fn", "isDisabled", "NG_VALUE_ACCESSOR", "forwardRef", "NG_VALIDATORS", "PanelSelectorComponent", "siteName", "bottomSheetRef", "handler", "dialog", "es", "name", "v4_default", "newPanel", "UntypedFormControl", "panel", "Validators", "setting", "fg", "UntypedFormArray", "SITE_NAME", "PanelEditorComponent", "PanelPageState", "PanelState", "PaneState", "DatasourceContentHandler", "rulesResolver", "dpm", "datasourceEvalutator", "dataPanes", "datasources", "k", "Datasource", "ds", "dataset", "bindings", "forkJoin", "row", "b", "binding", "res", "_", "defaultIfEmpty", "groups", "Observable", "obs", "paneMappings", "rowIndex", "bId", "panelSettings", "ContentBinding", "dsp", "d", "dsBindings", "rest", "renderType", "r", "o", "DatasourceEditorComponent", "dialogRef", "datasourceHandler", "panesArray", "sourceSettings", "paneForm", "MAT_DIALOG_DATA", "panelContentPluginFactory", "ContentPlugin", "datasourceContentPluginFactory", "panelsBridgeFactory", "BridgeBuilderPlugin", "PublicApiBridgeService", "f", "svc", "catchError", "state", "panelPageState", "j", "pps", "loadRestData", "createAction", "props", "loadRestDataSuccess", "loadRestDataError", "setPageInfo", "setForm", "setPage", "setSelectionPath", "PageBuilderEffects", "rest", "of", "switchMap", "body", "actions$", "datasourceApi", "snippetParserService", "createEffect", "ofType", "concatMap", "p", "catchError", "map", "results", "Dataset", "__ngFactoryType__", "PanelPageStateSlice", "data", "pageBuilderFeatureKey", "initialState", "pageBuilderReducer", "createReducer", "on", "state", "action", "tagIndex", "newState", "__spreadValues", "__spreadProps", "nameIndex", "n", "f", "i", "PanelPage", "reducer", "STYLE_PLUGIN", "InjectionToken", "PANELS_SETTINGS", "PanelsModule", "platformId", "contentPlugins", "panelsSettings", "eds", "cpm", "entityDataService", "bpm", "es", "attributesSerialzer", "crud", "entityDefinitionService", "crudDataHelper", "entityMetadata", "entityMetadataFactory", "NoopDataService", "CrudDataService", "panelsBridgeFactory", "PLATFORM_ID", "CONTENT_PLUGIN", "PanelContentHandler", "panelContentPluginFactory", "datasourceContentPluginFactory", "DatasourceContentHandler", "Pluralizer", "DefaultPluralizer", "CommonModule", "FormsModule", "ReactiveFormsModule", "StoreModule", "EffectsModule", "MaterialModule", "DatasourceModule", "AuthModule", "Aws3Module", "AwosModule", "CrudModule", "PanelPageSelector", "_PanelPageSelector", "LayoutEditorBaseComponent", "controlContainer", "LayoutSetting", "rf", "ctx", "LayoutRendererBaseComponent", "c", "PanelStyleRendererBaseComponent", "contexts", "PanelsLoaderService", "panelHandler", "pp", "p2", "c2", "i2", "o", "i3", "tap", "nested", "index1", "index2", "np", "key", "iif", "forkJoin", "settings", "PanelsSelectorService", "panelPage", "path", "panels", "_", "Panel", "panes", "Pane", "s", "PanelStateConverterService", "PanelPageState", "panel", "PanelState", "pane", "PaneState", "nestedPage", "AttributeValue", "PanelsWalkerService", "panelsLoaderService", "visitorFunc", "defaultv", "ancestory", "Observable", "obs", "len", "visitors$", "len2", "j", "groups", "values", "PanelsContextService", "panelsVisitorService", "ancestoryWithSelf", "InlineContext", "paneContext", "take", "PanelStateArchitectService", "attributeSerializer", "panelPageState", "DynamicPaneService", "StylePluginManager", "BasePluginManager", "pcm", "moduleLoader", "PluginDef", "StyleResolverService", "spm", "resolvedPanes", "originMappings", "PanelResolverService", "rulesResolver", "inlineContextResolver", "plugins", "dataPanes", "plugin", "cb", "b", "v", "cp", "resolvedContext", "bindings", "staticPanes", "v4_default", "items", "res", "paneGroups", "pa", "pc", "resolvedContexts", "index", "StylePlugin", "Plugin", "PaneDatasourceService", "DataSource", "Subject", "BehaviorSubject", "Subscription", "collectionViewer", "range", "currentPage", "selectPageBuilderState", "createFeatureSelector", "selectDataset", "tag", "createSelector", "selectPageInfo", "selectPage", "selectSelectionPath", "selectFormNames", "selectForms", "selectForm", "names", "forms", "PageBuilderFacade", "store", "select", "name", "info", "page", "form", "PropertiesFormPayload", "id", "PanelPropsFormPayload", "PanePropsFormPayload", "PanelPageForm", "PersistenceFormPayload", "PanelPageFormPanel", "PanelPageFormPane", "FormDatasource", "PaneStateService", "pageBuilderFacade", "panelStateArchitectService", "entities", "d", "ps", "paneState", "ps2", "deserializedState", "merge", "__", "FormService", "value", "dsValues", "serializedValue", "pluralize", "arrayValues", "k", "FormStateConverterService", "pp2", "debugPath", "panel2", "pane2", "a", "FormGroupConverterService", "fb", "pageFormGroup", "panelGroups", "panelFormGroup", "paneFormGroup", "newGroup", "CssHelperService", "css", "match", "matches"]
}
