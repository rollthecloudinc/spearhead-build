import { a as se } from "@nf-internal/chunk-FM6WEN77";
import { a as F, b as U } from "@nf-internal/chunk-J4XOFOAH";
import * as A from "@angular/common";
import { isPlatformServer as ye, isPlatformBrowser as K, CommonModule as He } from "@angular/common";
import * as e from "@angular/core";
import { PLATFORM_ID as ce, forwardRef as q, DOCUMENT as _e, EventEmitter as De } from "@angular/core";
import * as y from "@angular/forms";
import { NG_VALUE_ACCESSOR as de, NG_ASYNC_VALIDATORS as he, Validators as Le, FormsModule as Ve, ReactiveFormsModule as Ue } from "@angular/forms";
import * as ee from "@rollthecloudinc/utils";
import { UtilsModule as qe } from "@rollthecloudinc/utils";
import * as $e from "@rollthecloudinc/layout";
import { GridLayoutComponent as Ge, LayoutModule as We } from "@rollthecloudinc/layout";
import * as Ie from "@rollthecloudinc/media";
import { MEDIA_SETTINGS as Qe } from "@rollthecloudinc/media";
import * as te from "@rollthecloudinc/context";
import { InlineContext as pe } from "@rollthecloudinc/context";
import * as b from "@rollthecloudinc/panels";
import { PanelPageForm as Ce, PanelPage as re, PanelsModule as ke } from "@rollthecloudinc/panels";
import { Subject as E, BehaviorSubject as w, combineLatest as V, iif as xe, of as H, Observable as ze, forkJoin as Be } from "rxjs";
import { tap as p, filter as R, debounceTime as D, distinctUntilChanged as Ze, map as h, switchMap as I, take as L, skip as oe, bufferTime as Je, takeUntil as Ke, delay as ue, concatMap as Pe, catchError as Ye, defaultIfEmpty as Xe, startWith as ge } from "rxjs/operators";
import * as ie from "@rollthecloudinc/sheath";
import { ClassClassification as me, isSelectorValid as Y } from "@rollthecloudinc/sheath";
import { camelize as Fe } from "inflected";
import ae from "deepmerge-json";
import * as Re from "@ngrx/store";
import * as fe from "@rollthecloudinc/content";
import * as we from "@angular/common/http";
import * as je from "@rollthecloudinc/attributes";
import * as Ee from "@rollthecloudinc/crud";
import * as B from "@ngrx/data";
import * as Ne from "@rollthecloudinc/refinery";
import * as Oe from "@rollthecloudinc/auth";
import * as Te from "@rollthecloudinc/detour";
import { InteractionHandlerPlugin as Ae } from "@rollthecloudinc/detour";
var et = ["renderPanelTpl"];
function tt(s, a) { }
function it(s, a) { if (s & 1) {
    let t = e.\u0275\u0275getCurrentView();
    e.\u0275\u0275elementStart(0, "button", 4), e.\u0275\u0275listener("click", function () { e.\u0275\u0275restoreView(t); let r = e.\u0275\u0275nextContext(); return e.\u0275\u0275resetView(r.submit()); }), e.\u0275\u0275text(1, "Submit"), e.\u0275\u0275elementEnd();
} }
function nt(s, a) { if (s & 1 && (e.\u0275\u0275elementContainerStart(0, 1)(1, 5), e.\u0275\u0275element(2, "classifieds-ui-render-panel", 6), e.\u0275\u0275elementContainerEnd()()), s & 2) {
    let t = a.i, i = e.\u0275\u0275nextContext();
    e.\u0275\u0275property("formGroup", i.pageForm), e.\u0275\u0275advance(2), e.\u0275\u0275property("formControlName", t)("panel", i.panelPageCached.panels[t])("nested", i.nested$.value)("contexts", i.contexts$.value)("resolvedContext", i.resolvedContext)("contextsChanged", i.contextsChanged)("displayType", i.panelPageCached.displayType)("indexPosition", t)("css", i.filteredCss)("listeners", i.filteredListeners)("ancestory", i.ancestory$.value);
} }
function st(s, a) { }
function rt(s, a) { if (s & 1 && e.\u0275\u0275element(0, "classifieds-ui-panel-page", 4), s & 2) {
    let t = e.\u0275\u0275nextContext();
    e.\u0275\u0275property("panelPage", t.panelPage)("nested", !0)("contexts", t.contexts)("css", t.filteredCss)("listeners", t.filteredListeners)("ancestory", t.ancestoryWithSelf);
} }
function ot(s, a) { if (s & 1 && e.\u0275\u0275element(0, "classifieds-ui-panel-page", 5), s & 2) {
    let t = e.\u0275\u0275nextContext();
    e.\u0275\u0275property("id", t.linkedPageId)("nested", !0)("contexts", t.contexts)("ancestory", t.ancestoryWithSelf);
} }
function at(s, a) { if (s & 1 && e.\u0275\u0275element(0, "classifieds-ui-panel-page", 4), s & 2) {
    let t = e.\u0275\u0275nextContext();
    e.\u0275\u0275property("panelPage", t.embedPanel)("nested", !0)("contexts", t.contexts)("css", t.filteredCss)("listeners", t.filteredListeners)("ancestory", t.ancestoryWithSelf);
} }
var lt = ["panes"];
function ct(s, a) { }
function dt(s, a) { if (s & 1 && e.\u0275\u0275element(0, "classifieds-ui-render-pane", 8), s & 2) {
    let t = a.$implicit, i = a.index, r = e.\u0275\u0275nextContext(3), v = e.\u0275\u0275reference(1);
    e.\u0275\u0275property("formControlName", i)("pluginName", t.contentPlugin)("settings", t.settings)("name", t.name)("label", t.label)("originPane", r.panel.panes[r.originMappings[i]])("contexts", t.contexts)("displayType", r.displayType)("resolvedContext", t.resolvedContext)("indexPosition", i)("css", r.filteredCss)("listeners", r.filteredListeners)("ancestory", r.ancestoryWithSelf$.value)("panes", v)("originPanes", r.originPanes);
} }
function ht(s, a) { if (s & 1 && (e.\u0275\u0275elementContainerStart(0)(1)(2, 6), e.\u0275\u0275template(3, dt, 1, 15, "classifieds-ui-render-pane", 7), e.\u0275\u0275elementContainerEnd()()()), s & 2) {
    let t = e.\u0275\u0275nextContext(2);
    e.\u0275\u0275advance(3), e.\u0275\u0275property("ngForOf", t.resolvedPanes);
} }
function pt(s, a) { if (s & 1 && e.\u0275\u0275element(0, "classifieds-ui-render-pane", 10), s & 2) {
    let t = a.$implicit, i = a.index, r = e.\u0275\u0275nextContext(3), v = e.\u0275\u0275reference(1);
    e.\u0275\u0275property("pluginName", t.contentPlugin)("settings", t.settings)("name", t.name)("label", t.label)("originPane", r.panel.panes[r.originMappings[i]])("contexts", t.contexts)("linkedPageId", t.linkedPageId)("displayType", r.displayType)("resolvedContext", t.resolvedContext)("indexPosition", i)("css", r.filteredCss)("listeners", r.filteredListeners)("ancestory", r.ancestoryWithSelf$.value)("panes", v)("originPanes", r.originPanes);
} }
function ut(s, a) { if (s & 1 && (e.\u0275\u0275elementContainerStart(0), e.\u0275\u0275template(1, pt, 1, 15, "classifieds-ui-render-pane", 9), e.\u0275\u0275elementContainerEnd()), s & 2) {
    let t = e.\u0275\u0275nextContext(2);
    e.\u0275\u0275advance(), e.\u0275\u0275property("ngForOf", t.resolvedPanes);
} }
function gt(s, a) { if (s & 1 && (e.\u0275\u0275elementContainerStart(0)(1, 4), e.\u0275\u0275template(2, ht, 4, 1, "ng-container", 5)(3, ut, 2, 1, "ng-container", 5), e.\u0275\u0275elementContainerEnd()()), s & 2) {
    let t = e.\u0275\u0275nextContext();
    e.\u0275\u0275advance(), e.\u0275\u0275property("ngSwitch", t.displayType), e.\u0275\u0275advance(), e.\u0275\u0275property("ngSwitchCase", "form"), e.\u0275\u0275advance(), e.\u0275\u0275property("ngSwitchCase", "page");
} }
var X = (() => { class s {
    constructor(t) { this.viewContainerRef = t; }
    static { this.\u0275fac = function (i) { return new (i || s)(e.\u0275\u0275directiveInject(e.ViewContainerRef)); }; }
    static { this.\u0275dir = e.\u0275\u0275defineDirective({ type: s, selectors: [["", "classifiedsUiPaneContentHost", ""]], standalone: !1 }); }
} return s; })(), be = (() => { class s {
    constructor(t) { this.viewContainerRef = t; }
    static { this.\u0275fac = function (i) { return new (i || s)(e.\u0275\u0275directiveInject(e.ViewContainerRef)); }; }
    static { this.\u0275dir = e.\u0275\u0275defineDirective({ type: s, selectors: [["", "classifiedsUiLayoutRendererHost", ""]], standalone: !1 }); }
} return s; })(), le = class s {
    static { this.registredContextListeners = new Set; }
    set id(a) { this.id$.next(a); }
    set panelPage(a) { this.panelPage$.next(a); }
    set nested(a) { this.nested$.next(a); }
    set contexts(a) { this.contexts$.next(a); }
    set ancestory(a) { this.ancestory$.next(a); }
    set css(a) { this.css$.next(a); }
    set listeners(a) { this.listeners$.next(a); }
    get panelsArray() { return this.pageForm.get("panels"); }
    constructor(a, t, i, r, v, O, G, W, Q, k, z, c, o, g, f, d, l, m, C, x, P, _, N, T, M, Me, ne) {
        this.platformId = a, this.mediaSettings = t, this.routerStore = i, this.fb = r, this.el = v, this.inlineContextResolver = O, this.pageBuilderFacade = G, this.cpm = W, this.cxm = Q, this.lpm = k, this.componentFactoryResolver = z, this.styleLoader = c, this.http = o, this.cssHelper = g, this.attributeSerializer = f, this.formService = d, this.panelsContextService = l, this.asyncApiCallHelperSvc = m, this.crudDataHelperService = C, this.entityDefinitionService = x, this.ngZone = P, this.persistService = _, this.stylizerService = N, this.classifyService = T, this.fileService = M, this.authFacade = Me, this.resolvedContext = {}, this.contextsChanged = [], this.persistenceEnabled = !1, this.onInit$ = new E, this.afterViewInit$ = new E, this.afterContentInit$ = new E, this.renderLayout$ = new E, this.id$ = new w(void 0), this.panelPage$ = new w(void 0), this.nested$ = new w(!1), this.ancestory$ = new w([]), this.contexts$ = new w([]), this.instanceUniqueIdentity = se(), this.isStable = !1, this.managedCssCache = "", this.managedClassesCache = {}, this.filteredListeners = [], this.css$ = new w({ css: this.cssHelper.makeJsonNode(), classes: {} }), this.cssSub = this.css$.subscribe(n => { this.nested$.value && console.log("filtered css nested", n), this.filteredCss = n; }), this.listeners$ = new w([]), this.listenersSub = this.listeners$.pipe(p(n => { this.filteredListeners = n; })).subscribe(), this.settingsFormArray = this.fb.array([]), this.pageForm = this.fb.group({ panels: this.fb.array([]) }), this.bridgeSub = this.pageForm.valueChanges.pipe(R(() => this.nested$.value), D(500)).subscribe(n => { console.log("write page"), console.log(n), this.settingsFormArray.clear(); let u = this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(n, "value").attributes[0]); this.settingsFormArray.push(u), console.log(u.value); }), this.idOrPanelPageSub = V([this.id$, this.panelPage$]).pipe(Ze(), h(([n, u]) => ({ id: n, panelPage: u })), R(({ id: n, panelPage: u }) => !!n || !!u), I(({ id: n, panelPage: u }) => xe(() => !n, H({ panelPage: u }), new ze($ => { let j = this.entityDefinitionService.getDefinition("PanelPage").metadata; return this.crudDataHelperService.evaluateCollectionPlugins({ query: `identity=${n}`, plugins: j.crud, op: "query" }).pipe(h(S => S && S.length !== 0 ? S[0] : void 0), p(S => { $.next({ panelPage: S }), $.complete(); })).subscribe(); }))), I(({ panelPage: n }) => this.cpm.getPlugins(n.panels.reduce((u, $) => ($.panes.forEach(j => { u.includes(j.contentPlugin) || u.push(j.contentPlugin); }), u), [])).pipe(h(() => ({ panelPage: n })))), I(({ panelPage: n }) => xe(() => !this.nested$.value, this.panelsContextService.allActivePageContexts({ panelPage: n }).pipe(h(u => ({ panelPage: n, contexts: Array.from(u) }))), H({ panelPage: n, contexts: [] }))), p(({ panelPage: n, contexts: u }) => { this.hookupFormChange({ panelPage: n }), this.populatePanelsFormArray({ panelPage: n }), this.panelPageCached = n, this.persistenceEnabled = n.persistence && n.persistence.dataduct && n.persistence.dataduct.plugin && n.persistence.dataduct.plugin !== "", this.filteredListeners = n.interactions && n.interactions.interactions && n.interactions.interactions.listeners ? n.interactions.interactions.listeners : [], this.renderLayout$.next(n), this.contexts$.next([...n.contexts ? n.contexts.map($ => new pe($)) : [], ...u]), this.hookupCss({ file: n.cssFile ? n.cssFile.trim() : void 0 }), console.log(`cached panel page: ${n.id}`); })).subscribe(), this.hookupContextSub = V(this.contexts$, this.afterContentInit$).pipe(h(([n]) => n), I(n => this.inlineContextResolver.resolveMerged(n, `panelpage:${se()}`).pipe(I(u => this.cxm.getPlugins().pipe(h($ => ({ contexts: n, resolvedContext: u, globalPlugins: Array.from($.values()).filter(j => j.global === !0) })))), L(1))), p(() => { this.resolveSub && this.resolveSub.unsubscribe(); }), p(({ contexts: n, resolvedContext: u, globalPlugins: $ }) => { this.resolvedContext = u; let j = new E; if (ye(this.platformId)) {
            let S = setInterval(() => { s.registredContextListeners.size === 0 && (j.next(), j.complete(), clearInterval(S)); }, 1e3);
        } this.resolveSub = this.inlineContextResolver.resolveMergedSingle(n).pipe(oe($.length + (n ? n.length : 0)), p(() => s.registredContextListeners.add(this.instanceUniqueIdentity)), p(S => console.log("buffer", S)), Je(1), p(S => { S.length === 0 && s.registredContextListeners.delete(this.instanceUniqueIdentity); }), R(S => S.length !== 0), p(S => { this.contextsChanged = S.reduce((Z, [J, ve]) => [...Z, ...Z.includes(J) ? [] : [J]], []), this.resolvedContext = S.reduce((Z, [J, ve]) => U(F({}, Z), { [J]: ve }), this.resolvedContext); }), p(() => s.registredContextListeners.delete(this.instanceUniqueIdentity)), ye(this.platformId) ? Ke(j) : p(() => { })).subscribe(); })).subscribe(), this.renderLayoutSub = V([this.renderLayout$, this.afterViewInit$]).pipe(ue(1), h(([n]) => ({ panelPage: n })), I(({ panelPage: n }) => this.lpm.getPlugin(n.layoutType).pipe(h(u => ({ panelPage: n, plugin: u })))), p(() => console.log("start render layout")), h(({ plugin: n, panelPage: u }) => ({ panelPage: u, plugin: n, viewContainerRef: this.layoutRendererHost.viewContainerRef })), p(({ viewContainerRef: n }) => n.clear()), h(({ plugin: n, viewContainerRef: u, panelPage: $ }) => ({ panelPage: $, layoutRendererRef: u.createComponent(n.renderer) })), p(({ layoutRendererRef: n }) => this.layoutRendererRef = n), p(({ layoutRendererRef: n, panelPage: u }) => { n.instance.renderPanelTpl = this.renderPanelTpl, n.instance.panelPage = u; }), p(() => console.log("end render layout"))).subscribe(), this.stylizerSub = this.afterViewInit$.pipe(R(() => K(this.platformId)), p(() => { this.stylizerService.stylize({ targetNode: this.el.nativeElement }); })).subscribe(), this.classifySub = this.afterViewInit$.pipe(R(() => K(this.platformId)), p(() => { this.classifyService.classify({ targetNode: this.el.nativeElement }); })).subscribe(), this.stylizerMutatedSub = K(this.platformId) ? this.stylizerService.mutated$.pipe(D(2e3), oe(1), I(({ stylesheet: n }) => this.authFacade.getUser$.pipe(h(u => ({ stylesheet: n, isAuthenticated: !!u })))), R(({ isAuthenticated: n }) => n), p(({ stylesheet: n }) => { console.log("merged css", n); }), R(() => !!this.panelPageCached && !!this.panelPageCached.id), I(({ stylesheet: n }) => this.isStable ? H({ stylesheet: n }) : this.ngZone.onStable.asObservable().pipe(h(() => ({ stylesheet: n })), L(1))), h(({ stylesheet: n }) => ({ stylesheet: (this.managedCssCache && this.managedCssCache.trim() !== "" ? this.managedCssCache + `
` : "") + n })), Pe(({ stylesheet: n }) => this.fileService.bulkUpload({ nocache: !0, files: [new File([n], `panelpage__${this.panelPageCached.id}.css`)], fileNameOverride: `panelpage__${this.panelPageCached.id}.css` })), p(() => { console.log("stylesheet saved."); })).subscribe() : void 0, this.classifyMutatedSub = K(this.platformId) ? this.classifyService.mutated$.pipe(D(2e3), oe(1), I(({ classes: n }) => this.authFacade.getUser$.pipe(h(u => ({ classes: n, isAuthenticated: !!u })))), R(({ isAuthenticated: n }) => n), p(({ classes: n }) => { console.log("merged classes", n); }), R(() => !!this.panelPageCached && !!this.panelPageCached.id), I(({ classes: n }) => this.isStable ? H({ classes: n }) : this.ngZone.onStable.asObservable().pipe(h(() => ({ classes: n })), L(1))), h(({ classes: n }) => ({ classes: Array.from(n.keys()).reduce((u, $) => U(F({}, u), { [$]: Array.from(n.get($).keys()).filter(j => n.get($).get(j) !== me.KEEP).reduce((j, S) => U(F({}, j), { [S]: n.get($).get(S) }), {}) }), {}) })), h(({ classes: n }) => ({ classes: ae(this.managedClassesCache, n) })), h(({ classes: n }) => ({ json: JSON.stringify(n) })), Pe(({ json: n }) => this.fileService.bulkUpload({ nocache: !0, files: [new File([n], `panelpage__${this.panelPageCached.id}__classes.json`)], fileNameOverride: `panelpage__${this.panelPageCached.id}__classes.json` })), p(() => { console.log("classes saved."); })).subscribe() : void 0, this.onStableSub = this.ngZone.onStable.asObservable().pipe(p(() => this.isStable = !0)).subscribe(), this.onUnstableSub = this.ngZone.onUnstable.asObservable().pipe(p(() => this.isStable = !1)).subscribe(), this.onTouched = () => { }, this.panelPageService = ne.getEntityCollectionService("PanelPage"), this.panelPageFormService = ne.getEntityCollectionService("PanelPageForm"), this.panelPageStateService = ne.getEntityCollectionService("PanelPageState");
    }
    ngOnInit() { this.onInit$.next(void 0); }
    ngAfterViewInit() { this.afterViewInit$.next(void 0); }
    ngAfterContentInit() { this.afterContentInit$.next(void 0); }
    ngOnDestroy() { s.registredContextListeners.delete(this.instanceUniqueIdentity); }
    populatePanelsFormArray({ panelPage: a }) { this.panelsArray.clear(), a.panels.forEach(() => { this.panelsArray.push(this.fb.control("")); }); }
    hookupFormChange({ panelPage: a }) { this.pageForm.valueChanges.pipe(D(100), R(() => a !== void 0 && a.displayType === "form")).subscribe(t => { let i = new Ce(U(F({}, t), { name: a.name, title: a.title, derivativeId: a.id })); this.pageBuilderFacade.setForm(a.name, i); }); }
    hookupCss({ file: a }) { Be([H(void 0), H(void 0), H(void 0), this.panelPageCached.id ? this.http.get(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}__classes.json`).pipe(Ye(() => H(void 0)), Xe(void 0)) : H(void 0)]).pipe(p(([t, i, r, v]) => { console.log("fetched managed panelpage css and class files"); let O = {}; this.managedCssCache = "", this.managedClassesCache = v, t && (O = ae(O, t)), i && (this.managedCssCache = r, O = ae(O, i)), this.filteredCss = { css: O, classes: v }; })).subscribe(); }
    submit() { if (this.pageForm.valid) {
        let a = new Ce(F({}, this.pageForm.value)), t = this.formService.serializeForm(a);
        console.log(a), console.log(this.formService.serializeForm(a)), console.log("form data", t), this.persistService.persist({ data: t, persistence: this.panelPageCached.persistence }).subscribe(() => { console.log("persisted data"); });
    }
    else
        console.log("detected form invalid"); }
    writeValue(a) { a && this.settingsFormArray.setValue(a, { emitEvent: !1 }); }
    registerOnChange(a) { this.settingsFormArray.valueChanges.subscribe(a); }
    registerOnTouched(a) { this.onTouched = a; }
    setDisabledState(a) { a ? this.settingsFormArray.disable() : this.settingsFormArray.enable(); }
    validate(a) { return this.pageForm.statusChanges.pipe(ge(this.pageForm.status), R(t => t !== "PENDING"), D(1), L(1), h(t => this.pageForm.valid ? null : { invalidForm: { valid: !1, message: "content is invalid" } })); }
    static { this.\u0275fac = function (t) { return new (t || s)(e.\u0275\u0275directiveInject(ce), e.\u0275\u0275directiveInject(Qe), e.\u0275\u0275directiveInject(Re.Store), e.\u0275\u0275directiveInject(y.UntypedFormBuilder), e.\u0275\u0275directiveInject(e.ElementRef), e.\u0275\u0275directiveInject(te.InlineContextResolverService), e.\u0275\u0275directiveInject(b.PageBuilderFacade), e.\u0275\u0275directiveInject(fe.ContentPluginManager), e.\u0275\u0275directiveInject(te.ContextPluginManager), e.\u0275\u0275directiveInject($e.LayoutPluginManager), e.\u0275\u0275directiveInject(e.ComponentFactoryResolver), e.\u0275\u0275directiveInject(ee.StyleLoaderService), e.\u0275\u0275directiveInject(we.HttpClient), e.\u0275\u0275directiveInject(b.CssHelperService), e.\u0275\u0275directiveInject(je.AttributeSerializerService), e.\u0275\u0275directiveInject(b.FormService), e.\u0275\u0275directiveInject(b.PanelsContextService), e.\u0275\u0275directiveInject(ee.AsyncApiCallHelperService), e.\u0275\u0275directiveInject(Ee.CrudDataHelperService), e.\u0275\u0275directiveInject(B.EntityDefinitionService), e.\u0275\u0275directiveInject(e.NgZone), e.\u0275\u0275directiveInject(Ne.PersistService), e.\u0275\u0275directiveInject(ie.StylizerService), e.\u0275\u0275directiveInject(ie.ClassifyService), e.\u0275\u0275directiveInject(Ie.FilesService), e.\u0275\u0275directiveInject(Oe.AuthFacade), e.\u0275\u0275directiveInject(B.EntityServices)); }; }
    static { this.\u0275cmp = e.\u0275\u0275defineComponent({ type: s, selectors: [["classifieds-ui-panel-page"]], viewQuery: function (t, i) { if (t & 1 && (e.\u0275\u0275viewQuery(Ge, 5), e.\u0275\u0275viewQuery(et, 7), e.\u0275\u0275viewQuery(be, 5)), t & 2) {
            let r;
            e.\u0275\u0275queryRefresh(r = e.\u0275\u0275loadQuery()) && (i.gridLayout = r.first), e.\u0275\u0275queryRefresh(r = e.\u0275\u0275loadQuery()) && (i.renderPanelTpl = r.first), e.\u0275\u0275queryRefresh(r = e.\u0275\u0275loadQuery()) && (i.layoutRendererHost = r.first);
        } }, hostVars: 2, hostBindings: function (t, i) { t & 2 && e.\u0275\u0275classProp("panel-page", !0); }, inputs: { id: "id", panelPage: "panelPage", nested: "nested", contexts: "contexts", ancestory: "ancestory", css: "css", listeners: "listeners", resolvedContext: "resolvedContext" }, standalone: !1, features: [e.\u0275\u0275ProvidersFeature([{ provide: de, useExisting: q(() => s), multi: !0 }, { provide: he, useExisting: q(() => s), multi: !0 }])], decls: 6, vars: 2, consts: [["renderPanelTpl", ""], [3, "formGroup"], ["classifiedsUiLayoutRendererHost", ""], ["type", "button", 3, "click", 4, "ngIf"], ["type", "button", 3, "click"], ["formArrayName", "panels"], [3, "formControlName", "panel", "nested", "contexts", "resolvedContext", "contextsChanged", "displayType", "indexPosition", "css", "listeners", "ancestory"]], template: function (t, i) { t & 1 && (e.\u0275\u0275elementStart(0, "div", 1), e.\u0275\u0275elementContainerStart(1), e.\u0275\u0275template(2, tt, 0, 0, "ng-template", 2), e.\u0275\u0275elementContainerEnd(), e.\u0275\u0275elementEnd(), e.\u0275\u0275template(3, it, 2, 0, "button", 3)(4, nt, 3, 12, "ng-template", null, 0, e.\u0275\u0275templateRefExtractor)), t & 2 && (e.\u0275\u0275property("formGroup", i.pageForm), e.\u0275\u0275advance(3), e.\u0275\u0275property("ngIf", i.persistenceEnabled)); }, dependencies: () => [A.NgIf, y.NgControlStatus, y.NgControlStatusGroup, y.FormGroupDirective, y.FormControlName, y.FormArrayName, mt, be], styles: ["[_nghost-%COMP%]     gridster{background-color:#fff}[_nghost-%COMP%]     gridster-item{background-color:#fff}"] }); }
}, Se = (() => { class s {
    set resolvedContext(t) { this.resolvedContext$.next(t); }
    set css(t) { this.css$.next(t); }
    set listeners(t) { this.listeners$.next(t); }
    get indexPositionClass() { return `pane-${this.indexPosition}`; }
    get dynamicPanel() { return new re(this.resolvedContext._root); }
    constructor(t, i, r, v, O, G, W, Q, k, z, c) { this.document = t, this.platformId = i, this.el = r, this.renderer2 = v, this.componentFactoryResolver = O, this.panelHandler = G, this.fb = W, this.cpm = Q, this.cssHelper = k, this.paneStateService = z, this.settings = [], this.ancestory = [], this.panes = [], this.originPanes = [], this.afterContentInit$ = new E, this.resolvedContext$ = new w({}), this.schedulePluginChange = new E, this.ancestoryWithSelf = [], this.filteredListeners = [], this.css$ = new w({ css: this.cssHelper.makeJsonNode(), classes: {} }), this.cssSub = V([this.css$, this.afterContentInit$, this.schedulePluginChange]).pipe(h(([o]) => o), h(o => ({ css: this.cssHelper.reduceCss(o.css, `.pane-${this.indexPosition}`), classes: this.cssHelper.reduceSelector(o.classes, `.pane-${this.indexPosition}`) })), h(({ css: o, classes: g }) => [this.cssHelper.reduceCss(o, ".panel-page", !1), this.cssHelper.reduceCss(o, ".panel-page"), this.cssHelper.reduceSelector(g, ".panel-page", !1), this.cssHelper.reduceSelector(g, ".panel-page")]), p(([o, g, f, d]) => this.filteredCss = { css: g, classes: d }), h(([o, g, f, d]) => ({ css: o, classes: f })), h(({ css: o, classes: g }) => { let f = Object.keys(o.children).reduce((l, m) => F(F({}, l), m.indexOf(">") === 0 ? { [this.ancestoryWithSelf.map((C, x) => (x + 1) % 2 === 0 ? `.pane-${C}` : `.panel-${C}`).join(" ") + " " + m]: g[m] } : { [m]: g[m] }), {}), d = Object.keys(g).reduce((l, m) => F(F({}, l), m.indexOf(">") === 0 ? { [this.ancestoryWithSelf.map((C, x) => (x + 1) % 2 === 0 ? `.pane-${C}` : `.panel-${C}`).join(" ") + " " + m]: g[m] } : { [m]: g[m] }), {}); return { css: { children: f }, classes: d }; }), ue(500)).subscribe(({ css: o, classes: g }) => { console.log("reduced classes", g); let f = Object.keys(o.children).filter(l => l === "" || Y({ selector: l, document: this.document })), d = Object.keys(g).filter(l => l === "" || Y({ selector: l, document: this.document })); d.forEach((l, m) => { let C = l === "" ? [this.el.nativeElement] : l.indexOf(">") !== -1 ? this.document.querySelectorAll(l) : this.el.nativeElement.querySelectorAll(l), x = C.length; for (let P = 0; P < x; P++) {
        let _ = g[d[m]], N = Object.keys(_), T = N.length;
        for (let M = 0; M < T; M++)
            C[P] && (_[N[M]] === me.REMOVE ? (console.log(`remove class ${N[M]}`), this.renderer2.removeClass(C[P], N[M])) : (console.log(`add class ${N[M]}`), this.renderer2.addClass(C[P], N[M])));
    } }), f.forEach(l => { console.log(`search: ${l}`); let m = l === "" ? [this.el.nativeElement] : l.indexOf(">") !== -1 ? this.document.querySelectorAll(l) : this.el.nativeElement.querySelectorAll(l), C = m.length, x = Object.keys(o.children[l].attributes); for (let P = 0; P < C; P++)
        m[P] && x.forEach(_ => { console.log(`${l} { ${_}: ${o.children[l].attributes[_]}; }`); let N = Fe(_.replace("-", "_"), !1); this.renderer2.setStyle(m[P], N, o.children[l].attributes[_]); }); }); }), this.listeners$ = new w([]), this.listenersSub = V([this.listeners$, this.schedulePluginChange]).pipe(h(([o]) => o), p(o => { console.log("pane listeners", o); })).subscribe(), this.paneForm = this.fb.group({ contentPlugin: this.fb.control("", Le.required), name: this.fb.control(""), label: this.fb.control(""), settings: this.fb.control("") }), this.paneFormSub = this.paneForm.valueChanges.subscribe(o => { console.log(`pane form value plugin: ${this.pluginName}`), console.log(o); }), this.scheduleStateChange$ = new E, this.scheduleStateChangeSub = this.scheduleStateChange$.pipe(I(({ state: o }) => this.paneStateService.mergeState({ state: o, ancestory: [...this.ancestoryWithSelf], settings: this.settings, plugin: this.contentPlugin }))).subscribe(({ pageState: o }) => { this.panelPageStateService.upsert(o); }), this.onTouched = () => { }, this.pluginChangeSub = this.schedulePluginChange.pipe(R(() => this.pluginName && this.pluginName !== null && this.pluginName !== ""), I(() => this.cpm.getPlugin(this.pluginName))).subscribe(o => { this.contentPlugin = o, this.paneForm.get("contentPlugin").setValue(o.name), this.paneForm.get("name").setValue(this.name), this.paneForm.get("label").setValue(this.label), this.pluginName === "panel" ? this.resolveNestedPanelPage() : this.renderPaneContent(); }), this.embedPanelSub = this.resolvedContext$.pipe(h(o => { o && o._root && !this.linkedPageId && this.settings.length === 0 && (this.embedPanel = new re(o._root)); })).subscribe(), this.panelPageStateService = c.getEntityCollectionService("PanelPageState"); }
    ngOnInit() { this.ancestoryWithSelf = [...this.ancestory ? this.ancestory : [], ...this.indexPosition !== void 0 && this.indexPosition !== null ? [this.indexPosition] : []], this.schedulePluginChange.next(void 0); }
    ngOnChanges(t) { if (t.ancestory || t.indexPosition) {
        let i = [...t.ancestory.currentValue ? t.ancestory.currentValue : this.ancestory ? this.ancestory : [], ...t.indexPosition.currentValue !== void 0 && t.indexPosition.currentValue !== null ? [t.indexPosition.currentValue] : this.indexPosition ? [this.indexPosition] : []];
        (i.length !== this.ancestoryWithSelf.length || this.ancestoryWithSelf.filter((r, v) => i[v] !== r).length !== 0) && (this.ancestoryWithSelf = i);
    } this.schedulePluginChange.next(void 0); }
    ngAfterContentInit() { this.afterContentInit$.next(void 0); }
    writeValue(t) { t && this.paneForm.setValue(t, { emitEvent: !1 }); }
    registerOnChange(t) { this.paneForm.valueChanges.subscribe(t); }
    registerOnTouched(t) { this.onTouched = t; }
    setDisabledState(t) { t ? this.paneForm.disable() : this.paneForm.enable(); }
    validate(t) { return this.paneForm.statusChanges.pipe(ge(this.paneForm.status), R(i => i !== "PENDING"), D(1), L(1), h(i => this.paneForm.valid ? null : { invalidForm: { invalidForm: { valid: !1, message: "pane is invalid" } } })); }
    resolveNestedPanelPage() { this.panelHandler.toObject(this.settings).subscribe(t => { this.panelPage = new re(U(F({}, t), { contexts: this.contexts })); }); }
    renderPaneContent() { let t = this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent), i = this.contentPaneHost.viewContainerRef; i.clear(), this.componentRef = i.createComponent(t), this.componentRef.instance.settings = this.settings, this.componentRef.instance.name = this.name, this.componentRef.instance.label = this.label, this.componentRef.instance.panes = this.panes, this.componentRef.instance.originPanes = this.originPanes, this.componentRef.instance.contexts = this.contexts.map(r => new pe(r)), this.componentRef.instance.displayType = this.displayType, this.componentRef.instance.resolvedContext = this.resolvedContext$.value, this.componentRef.instance.ancestory = this.ancestoryWithSelf, this.componentRef.instance.state && this.contentPlugin.handler && this.contentPlugin.handler.stateDefinition(this.settings).pipe(L(1)).subscribe(r => { this.componentRef.instance.state = r || {}; }), this.componentRef.instance.stateChange && this.componentRef.instance.stateChange.subscribe(r => { this.scheduleStateChange$.next({ state: r }); }); }
    static { this.\u0275fac = function (i) { return new (i || s)(e.\u0275\u0275directiveInject(_e), e.\u0275\u0275directiveInject(ce), e.\u0275\u0275directiveInject(e.ElementRef), e.\u0275\u0275directiveInject(e.Renderer2), e.\u0275\u0275directiveInject(e.ComponentFactoryResolver), e.\u0275\u0275directiveInject(b.PanelContentHandler), e.\u0275\u0275directiveInject(y.UntypedFormBuilder), e.\u0275\u0275directiveInject(fe.ContentPluginManager), e.\u0275\u0275directiveInject(b.CssHelperService), e.\u0275\u0275directiveInject(b.PaneStateService), e.\u0275\u0275directiveInject(B.EntityServices)); }; }
    static { this.\u0275cmp = e.\u0275\u0275defineComponent({ type: s, selectors: [["classifieds-ui-render-pane"]], viewQuery: function (i, r) { if (i & 1 && e.\u0275\u0275viewQuery(X, 7), i & 2) {
            let v;
            e.\u0275\u0275queryRefresh(v = e.\u0275\u0275loadQuery()) && (r.contentPaneHost = v.first);
        } }, hostVars: 5, hostBindings: function (i, r) { i & 2 && (e.\u0275\u0275attribute("data-index", r.indexPosition), e.\u0275\u0275classMap(r.indexPositionClass), e.\u0275\u0275classProp("pane", !0)); }, inputs: { pluginName: "pluginName", settings: "settings", linkedPageId: "linkedPageId", contexts: "contexts", originPane: "originPane", displayType: "displayType", name: "name", label: "label", indexPosition: "indexPosition", ancestory: "ancestory", panes: "panes", originPanes: "originPanes", resolvedContext: "resolvedContext", css: "css", listeners: "listeners" }, standalone: !1, features: [e.\u0275\u0275ProvidersFeature([{ provide: de, useExisting: q(() => s), multi: !0 }, { provide: he, useExisting: q(() => s), multi: !0 }]), e.\u0275\u0275NgOnChangesFeature], decls: 6, vars: 4, consts: [["fxFlex", "", 3, "formGroup"], ["classifiedsUiPaneContentHost", ""], ["fxFlex", "", "formControlName", "settings", 3, "panelPage", "nested", "contexts", "css", "listeners", "ancestory", 4, "ngIf"], ["fxFlex", "", "formControlName", "settings", 3, "id", "nested", "contexts", "ancestory", 4, "ngIf"], ["fxFlex", "", "formControlName", "settings", 3, "panelPage", "nested", "contexts", "css", "listeners", "ancestory"], ["fxFlex", "", "formControlName", "settings", 3, "id", "nested", "contexts", "ancestory"]], template: function (i, r) { i & 1 && (e.\u0275\u0275elementStart(0, "div", 0), e.\u0275\u0275elementContainerStart(1), e.\u0275\u0275template(2, st, 0, 0, "ng-template", 1), e.\u0275\u0275elementContainerEnd(), e.\u0275\u0275template(3, rt, 1, 6, "classifieds-ui-panel-page", 2)(4, ot, 1, 4, "classifieds-ui-panel-page", 3)(5, at, 1, 6, "classifieds-ui-panel-page", 2), e.\u0275\u0275elementEnd()), i & 2 && (e.\u0275\u0275property("formGroup", r.paneForm), e.\u0275\u0275advance(3), e.\u0275\u0275property("ngIf", r.pluginName == "panel" && !r.linkedPageId && r.settings.length !== 0), e.\u0275\u0275advance(), e.\u0275\u0275property("ngIf", r.pluginName == "panel" && r.linkedPageId), e.\u0275\u0275advance(), e.\u0275\u0275property("ngIf", r.pluginName == "panel" && !r.linkedPageId && r.settings.length === 0)); }, dependencies: [A.NgIf, y.NgControlStatus, y.NgControlStatusGroup, y.FormGroupDirective, y.FormControlName, X, le], styles: ["[_nghost-%COMP%]{height:100%}"] }); }
} return s; })(), mt = (() => { class s {
    static { this.COUNTER = 0; }
    set contextChanged(t) { }
    set contextsChanged(t) { t.map(i => this.schduleContextChange.next(i)); }
    set indexPosition(t) { this.indexPosition$.next(t); }
    set ancestory(t) { this.ancestory$.next(t); }
    set css(t) { this.css$.next(t); }
    set listeners(t) { this.listeners$.next(t); }
    get indexPositionClass() { return `panel-${this.indexPosition$.value}`; }
    get panesArray() { return this.panelForm.get("panes"); }
    constructor(t, i, r, v, O, G, W, Q, k, z) { this.platformId = t, this.document = i, this.hostEl = r, this.renderer2 = v, this.componentFactoryResolver = O, this.fb = G, this.panelResolverService = W, this.spm = Q, this.cssHelper = k, this.styleResolverService = z, this.nested = !1, this.resolvedContext = {}, this.heightChange = new De, this.panelForm = this.fb.group({ name: this.fb.control(""), label: this.fb.control(""), panes: this.fb.array([]) }), this.panelFormSub = this.panelForm.valueChanges.subscribe(c => { console.log("paneL form value"), console.log(c); }), this.filteredListeners = [], this.afterContentInit$ = new E, this.schedulePanelRender = new E, this.rendered$ = new E, this.css$ = new w({ css: this.cssHelper.makeJsonNode(), classes: {} }), this.cssSub = V([this.css$, this.afterContentInit$, this.rendered$]).pipe(p(([c]) => console.log("css node", c.css)), h(([c]) => c), h(c => ({ css: this.cssHelper.reduceCss(c.css, `.panel-${this.indexPosition$.value}`), classes: this.cssHelper.reduceSelector(c.classes, `.panel-${this.indexPosition$.value}`) })), h(({ css: c, classes: o }) => [this.cssHelper.reduceCss(c, ".pane-", !1), c, this.cssHelper.reduceSelector(o, ".pane-", !1), o]), p(([c, o, g, f]) => this.filteredCss = { css: o, classes: f }), h(([c, o, g]) => ({ css: c, classes: g })), h(({ css: c, classes: o }) => { let g = Object.keys(c.children).reduce((d, l) => F(F({}, d), l.indexOf(">") === 0 ? { [this.ancestoryWithSelf$.value.map((m, C) => (C + 1) % 2 === 0 ? `.pane-${m}` : `.panel-${m}`).join(" ") + " " + l]: o[l] } : { [l]: o[l] }), {}), f = Object.keys(o).reduce((d, l) => F(F({}, d), l.indexOf(">") === 0 ? { [this.ancestoryWithSelf$.value.map((m, C) => (C + 1) % 2 === 0 ? `.pane-${m}` : `.panel-${m}`).join(" ") + " " + l]: o[l] } : { [l]: o[l] }), {}); return { css: { children: g }, classes: f }; }), ue(1)).subscribe(({ css: c, classes: o }) => { console.log("classes", o); let g = Object.keys(c.children).filter(d => d === "" || Y({ selector: d, document: this.document })), f = Object.keys(o).filter(d => d === "" || Y({ selector: d, document: this.document })); f.forEach((d, l) => { let m = d === "" ? [this.hostEl.nativeElement] : d.indexOf(">") !== -1 ? this.document.querySelectorAll(d) : this.hostEl.nativeElement.querySelectorAll(d), C = m.length; for (let x = 0; x < C; x++) {
        let P = o[f[l]], _ = Object.keys(P), N = _.length;
        for (let T = 0; T < N; T++)
            m[x] && (P[_[T]] === me.REMOVE ? (console.log(`remove class ${_[T]}`), this.renderer2.removeClass(m[x], _[T])) : (console.log(`add class ${_[T]}`), this.renderer2.addClass(m[x], _[T])));
    } }), g.forEach(d => { console.log(`search: ${d}`); let l = d === "" ? [this.hostEl.nativeElement] : d.indexOf(">") !== -1 ? this.document.querySelectorAll(d) : this.hostEl.nativeElement.querySelectorAll(d), m = l.length, C = Object.keys(c.children[d].attributes); for (let x = 0; x < m; x++)
        l[x] && C.forEach(P => { console.log(`${d} { ${P}: ${c.children[d].attributes[P]}; }`); let _ = Fe(P.replace("-", "_"), !1); this.renderer2.setStyle(l[x], _, c.children[d].attributes[P]); }); }); }), this.listeners$ = new w([]), this.listenersSub = this.listeners$.pipe(p(c => { console.log("panel listeners", c), this.filteredListeners = c; })).subscribe(), this.scheduleRender = new E, this.scheduleRenderSub = this.scheduleRender.pipe(p(() => console.log(`schdule renderer before [${this.panel.name}]`)), I(([c, o, g]) => this.panelResolverService.resolvePanes({ panes: c, contexts: o, resolvedContext: g }).pipe(h(({ resolvedPanes: f, originMappings: d }) => ({ resolvedPanes: f, originMappings: d, panes: c })))), I(({ panes: c, resolvedPanes: o, originMappings: g }) => this.styleResolverService.alterResolvedPanes({ panel: this.panel, resolvedPanes: o, originMappings: g }).pipe(h(({ resolvedPanes: f, originMappings: d }) => ({ panes: c, resolvedPanes: f, originMappings: d })))), p(() => console.log(`schdule renderer after [${this.panel.name}]`))).subscribe(({ panes: c, resolvedPanes: o, originMappings: g }) => { console.log(`render panel: ${this.panel.name}`), this.resolvedPanes = o, this.originPanes = c, this.originMappings = g, this.paneContainer && this.stylePlugin, this.populatePanesFormArray(), this.stylePlugin !== void 0 ? this.renderPanelContent() : this.rendered$.next(void 0); }), this.schduleContextChange = new E, this.schedulePanelRenderSub = this.schedulePanelRender.pipe(I(c => this.spm.getPlugin(c))).subscribe(c => { let o = this.componentFactoryResolver.resolveComponentFactory(c.renderComponent), g = this.panelHost.viewContainerRef; g.clear(); let f = g.createComponent(o); this.componentRef = f, f.instance.settings = this.panel.settings, f.instance.panes = this.resolvedPanes, f.instance.originPanes = this.panel.panes, f.instance.originMappings = this.originMappings, f.instance.contexts = this.contexts.map(d => new pe(d)), f.instance.displayType = this.displayType, f.instance.ancestory = this.ancestoryWithSelf$.value, f.instance.resolvedContext = this.resolvedContext, f.instance.panel = this.panel, f.instance.indexPosition = this.indexPosition$.value, this.rendered$.next(void 0); }), this.originMappings = [], this.resolvedContexts = [], this.ancestoryWithSelf$ = new w([]), this.ancestory$ = new w([]), this.indexPosition$ = new w(void 0), this.onTouched = () => { }, this.ancestorySub = V([this.ancestory$, this.indexPosition$]).pipe(p(([c, o]) => { this.ancestoryWithSelf$.next([...c, o]); })).subscribe(), this.counter = s.COUNTER++; }
    ngOnInit() { this.stylePlugin = this.panel.stylePlugin !== void 0 && this.panel.stylePlugin !== "" ? this.panel.stylePlugin : void 0, this.panel !== void 0 && this.panelHost !== void 0 && (console.log(`panel render init [${this.panel.name}`), this.panelResolverService.usedContexts(this.panel.panes).pipe(h(t => t.filter(i => i !== "_page" && i !== "_root" && i !== "." && i.indexOf("panestate-" + this.ancestoryWithSelf$.value.join("-")) !== 0)), p(t => console.log(`contexts [${this.panel.name}]: ${t.join(",")}`)), I(t => this.schduleContextChange.pipe(p(i => console.log(`detected change [${this.panel.name}]: ${i}`)), h(i => [t, i]))), p(([t, i]) => console.log(`detected change [${this.panel.name}]: ${i} : ctx: ${t.join(",")}`)), R(([t, i]) => Array.isArray(t) && t.findIndex(r => r === i) !== -1), D(100)).subscribe(([t, i]) => { console.log(`Context changed [${this.panel.name}]: ${i}`), console.log(`contexts detected [${this.panel.name}]: ${t.join(",")}`), this.scheduleRender.next([this.panel.panes, this.contexts, this.resolvedContext]); })); }
    ngOnChanges(t) { this.stylePlugin = this.panel.stylePlugin !== void 0 && this.panel.stylePlugin !== "" ? this.panel.stylePlugin : void 0, t.resolvedContext && t.resolvedContext.previousValue === void 0 && this.scheduleRender.next([this.panel.panes, this.contexts, this.resolvedContext]); }
    ngAfterViewInit() { }
    ngAfterContentInit() { this.afterContentInit$.next(void 0); }
    writeValue(t) { t && this.panelForm.setValue(t, { emitEvent: !1 }); }
    registerOnChange(t) { this.panelForm.valueChanges.subscribe(t); }
    registerOnTouched(t) { this.onTouched = t; }
    setDisabledState(t) { t ? this.panelForm.disable() : this.panelForm.enable(); }
    validate(t) { return this.panelForm.statusChanges.pipe(ge(this.panelForm.status), R(i => i !== "PENDING"), D(1), L(1), h(i => this.panelForm.valid ? null : { invalidForm: { valid: !1, message: "panel are invalid" } })); }
    populatePanesFormArray() { this.panesArray.clear(), this.resolvedPanes.forEach((t, i) => { this.panesArray.push(this.fb.control("")); }); }
    renderPanelContent() { this.schedulePanelRender.next(this.stylePlugin); }
    static { this.\u0275fac = function (i) { return new (i || s)(e.\u0275\u0275directiveInject(ce), e.\u0275\u0275directiveInject(_e), e.\u0275\u0275directiveInject(e.ElementRef), e.\u0275\u0275directiveInject(e.Renderer2), e.\u0275\u0275directiveInject(e.ComponentFactoryResolver), e.\u0275\u0275directiveInject(y.UntypedFormBuilder), e.\u0275\u0275directiveInject(b.PanelResolverService), e.\u0275\u0275directiveInject(b.StylePluginManager), e.\u0275\u0275directiveInject(b.CssHelperService), e.\u0275\u0275directiveInject(b.StyleResolverService)); }; }
    static { this.\u0275cmp = e.\u0275\u0275defineComponent({ type: s, selectors: [["classifieds-ui-render-panel"]], viewQuery: function (i, r) { if (i & 1 && (e.\u0275\u0275viewQuery(X, 7), e.\u0275\u0275viewQuery(lt, 7), e.\u0275\u0275viewQuery(Se, 5)), i & 2) {
            let v;
            e.\u0275\u0275queryRefresh(v = e.\u0275\u0275loadQuery()) && (r.panelHost = v.first), e.\u0275\u0275queryRefresh(v = e.\u0275\u0275loadQuery()) && (r.paneContainer = v.first), e.\u0275\u0275queryRefresh(v = e.\u0275\u0275loadQuery()) && (r.renderedPanes = v);
        } }, hostVars: 5, hostBindings: function (i, r) { i & 2 && (e.\u0275\u0275attribute("data-index", r.indexPosition$.value), e.\u0275\u0275classMap(r.indexPositionClass), e.\u0275\u0275classProp("panel", !0)); }, inputs: { panel: "panel", contexts: "contexts", nested: "nested", displayType: "displayType", resolvedContext: "resolvedContext", contextChanged: "contextChanged", contextsChanged: "contextsChanged", indexPosition: "indexPosition", ancestory: "ancestory", css: "css", listeners: "listeners" }, outputs: { heightChange: "heightChange" }, standalone: !1, features: [e.\u0275\u0275ProvidersFeature([{ provide: de, useExisting: q(() => s), multi: !0 }, { provide: he, useExisting: q(() => s), multi: !0 }]), e.\u0275\u0275NgOnChangesFeature], decls: 5, vars: 2, consts: [["panes", ""], [1, "render-panel", 3, "formGroup"], ["classifiedsUiPaneContentHost", ""], [4, "ngIf"], [3, "ngSwitch"], [4, "ngSwitchCase"], ["formArrayName", "panes"], [3, "formControlName", "pluginName", "settings", "name", "label", "originPane", "contexts", "displayType", "resolvedContext", "indexPosition", "css", "listeners", "ancestory", "panes", "originPanes", 4, "ngFor", "ngForOf"], [3, "formControlName", "pluginName", "settings", "name", "label", "originPane", "contexts", "displayType", "resolvedContext", "indexPosition", "css", "listeners", "ancestory", "panes", "originPanes"], [3, "pluginName", "settings", "name", "label", "originPane", "contexts", "linkedPageId", "displayType", "resolvedContext", "indexPosition", "css", "listeners", "ancestory", "panes", "originPanes", 4, "ngFor", "ngForOf"], [3, "pluginName", "settings", "name", "label", "originPane", "contexts", "linkedPageId", "displayType", "resolvedContext", "indexPosition", "css", "listeners", "ancestory", "panes", "originPanes"]], template: function (i, r) { i & 1 && (e.\u0275\u0275elementStart(0, "div", 1, 0), e.\u0275\u0275elementContainerStart(2), e.\u0275\u0275template(3, ct, 0, 0, "ng-template", 2), e.\u0275\u0275elementContainerEnd(), e.\u0275\u0275template(4, gt, 4, 3, "ng-container", 3), e.\u0275\u0275elementEnd()), i & 2 && (e.\u0275\u0275property("formGroup", r.panelForm), e.\u0275\u0275advance(4), e.\u0275\u0275property("ngIf", !r.stylePlugin && r.resolvedPanes)); }, dependencies: [A.NgForOf, A.NgIf, A.NgSwitch, A.NgSwitchCase, y.NgControlStatus, y.NgControlStatusGroup, y.FormGroupDirective, y.FormControlName, y.FormArrayName, X, Se], styles: ["[_nghost-%COMP%]{height:100%}.render-panel[_ngcontent-%COMP%]{height:100%}"] }); }
} return s; })(), qt = (() => { class s {
    static { this.\u0275fac = function (i) { return new (i || s); }; }
    static { this.\u0275cmp = e.\u0275\u0275defineComponent({ type: s, selectors: [["classifieds-ui-empty-layout"]], standalone: !1, decls: 1, vars: 0, template: function (i, r) { i & 1 && e.\u0275\u0275text(0, "empty layout content"); }, encapsulation: 2 }); }
} return s; })(), ft = () => new Ae({ id: "panels_form_submit", title: "Submit Panels Form" }), vt = () => new Ae({ id: "panels_dialog", title: "Open Panels Dialog" }), Gt = (() => { class s {
    constructor(t) { t.register(ft()), t.register(vt()); }
    static { this.\u0275fac = function (i) { return new (i || s)(e.\u0275\u0275inject(Te.InteractionHandlerPluginManager)); }; }
    static { this.\u0275mod = e.\u0275\u0275defineNgModule({ type: s }); }
    static { this.\u0275inj = e.\u0275\u0275defineInjector({ imports: [He, Ve, qe, Ue, ke, We] }); }
} return s; })();
export { qt as EmptyLayoutComponent, le as PanelPageComponent, Gt as RenderModule, Se as RenderPaneComponent, mt as RenderPanelComponent };
